var eM=Object.defineProperty;var tM=(t,e,n)=>e in t?eM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var mT=(t,e,n)=>tM(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var nM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rM(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var sC={exports:{}},rm={},oC={exports:{}},pt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lf=Symbol.for("react.element"),iM=Symbol.for("react.portal"),sM=Symbol.for("react.fragment"),oM=Symbol.for("react.strict_mode"),aM=Symbol.for("react.profiler"),lM=Symbol.for("react.provider"),uM=Symbol.for("react.context"),cM=Symbol.for("react.forward_ref"),dM=Symbol.for("react.suspense"),fM=Symbol.for("react.memo"),hM=Symbol.for("react.lazy"),gT=Symbol.iterator;function pM(t){return t===null||typeof t!="object"?null:(t=gT&&t[gT]||t["@@iterator"],typeof t=="function"?t:null)}var aC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lC=Object.assign,uC={};function ic(t,e,n){this.props=t,this.context=e,this.refs=uC,this.updater=n||aC}ic.prototype.isReactComponent={};ic.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ic.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function cC(){}cC.prototype=ic.prototype;function My(t,e,n){this.props=t,this.context=e,this.refs=uC,this.updater=n||aC}var Ly=My.prototype=new cC;Ly.constructor=My;lC(Ly,ic.prototype);Ly.isPureReactComponent=!0;var vT=Array.isArray,dC=Object.prototype.hasOwnProperty,Oy={current:null},fC={key:!0,ref:!0,__self:!0,__source:!0};function hC(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)dC.call(e,r)&&!fC.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Lf,type:t,key:s,ref:o,props:i,_owner:Oy.current}}function mM(t,e){return{$$typeof:Lf,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Vy(t){return typeof t=="object"&&t!==null&&t.$$typeof===Lf}function gM(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var _T=/\/+/g;function Ag(t,e){return typeof t=="object"&&t!==null&&t.key!=null?gM(""+t.key):e.toString(36)}function u0(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Lf:case iM:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Ag(o,0):r,vT(i)?(n="",t!=null&&(n=t.replace(_T,"$&/")+"/"),u0(i,e,n,"",function(u){return u})):i!=null&&(Vy(i)&&(i=mM(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(_T,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",vT(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Ag(s,a);o+=u0(s,e,n,l,i)}else if(l=pM(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Ag(s,a++),o+=u0(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ah(t,e,n){if(t==null)return t;var r=[],i=0;return u0(t,r,"","",function(s){return e.call(n,s,i++)}),r}function vM(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Fr={current:null},c0={transition:null},_M={ReactCurrentDispatcher:Fr,ReactCurrentBatchConfig:c0,ReactCurrentOwner:Oy};function pC(){throw Error("act(...) is not supported in production builds of React.")}pt.Children={map:Ah,forEach:function(t,e,n){Ah(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ah(t,function(){e++}),e},toArray:function(t){return Ah(t,function(e){return e})||[]},only:function(t){if(!Vy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};pt.Component=ic;pt.Fragment=sM;pt.Profiler=aM;pt.PureComponent=My;pt.StrictMode=oM;pt.Suspense=dM;pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_M;pt.act=pC;pt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=lC({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Oy.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)dC.call(e,l)&&!fC.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Lf,type:t.type,key:i,ref:s,props:r,_owner:o}};pt.createContext=function(t){return t={$$typeof:uM,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:lM,_context:t},t.Consumer=t};pt.createElement=hC;pt.createFactory=function(t){var e=hC.bind(null,t);return e.type=t,e};pt.createRef=function(){return{current:null}};pt.forwardRef=function(t){return{$$typeof:cM,render:t}};pt.isValidElement=Vy;pt.lazy=function(t){return{$$typeof:hM,_payload:{_status:-1,_result:t},_init:vM}};pt.memo=function(t,e){return{$$typeof:fM,type:t,compare:e===void 0?null:e}};pt.startTransition=function(t){var e=c0.transition;c0.transition={};try{t()}finally{c0.transition=e}};pt.unstable_act=pC;pt.useCallback=function(t,e){return Fr.current.useCallback(t,e)};pt.useContext=function(t){return Fr.current.useContext(t)};pt.useDebugValue=function(){};pt.useDeferredValue=function(t){return Fr.current.useDeferredValue(t)};pt.useEffect=function(t,e){return Fr.current.useEffect(t,e)};pt.useId=function(){return Fr.current.useId()};pt.useImperativeHandle=function(t,e,n){return Fr.current.useImperativeHandle(t,e,n)};pt.useInsertionEffect=function(t,e){return Fr.current.useInsertionEffect(t,e)};pt.useLayoutEffect=function(t,e){return Fr.current.useLayoutEffect(t,e)};pt.useMemo=function(t,e){return Fr.current.useMemo(t,e)};pt.useReducer=function(t,e,n){return Fr.current.useReducer(t,e,n)};pt.useRef=function(t){return Fr.current.useRef(t)};pt.useState=function(t){return Fr.current.useState(t)};pt.useSyncExternalStore=function(t,e,n){return Fr.current.useSyncExternalStore(t,e,n)};pt.useTransition=function(){return Fr.current.useTransition()};pt.version="18.3.1";oC.exports=pt;var qe=oC.exports;const mC=rM(qe);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yM=qe,xM=Symbol.for("react.element"),wM=Symbol.for("react.fragment"),TM=Object.prototype.hasOwnProperty,EM=yM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,IM={key:!0,ref:!0,__self:!0,__source:!0};function gC(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)TM.call(e,r)&&!IM.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:xM,type:t,key:s,ref:o,props:i,_owner:EM.current}}rm.Fragment=wM;rm.jsx=gC;rm.jsxs=gC;sC.exports=rm;var v=sC.exports,vC={exports:{}},li={},_C={exports:{}},yC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ce,ae){var we=ce.length;ce.push(ae);e:for(;0<we;){var $e=we-1>>>1,Ae=ce[$e];if(0<i(Ae,ae))ce[$e]=ae,ce[we]=Ae,we=$e;else break e}}function n(ce){return ce.length===0?null:ce[0]}function r(ce){if(ce.length===0)return null;var ae=ce[0],we=ce.pop();if(we!==ae){ce[0]=we;e:for(var $e=0,Ae=ce.length,Ve=Ae>>>1;$e<Ve;){var Te=2*($e+1)-1,Ne=ce[Te],Ge=Te+1,We=ce[Ge];if(0>i(Ne,we))Ge<Ae&&0>i(We,Ne)?(ce[$e]=We,ce[Ge]=we,$e=Ge):(ce[$e]=Ne,ce[Te]=we,$e=Te);else if(Ge<Ae&&0>i(We,we))ce[$e]=We,ce[Ge]=we,$e=Ge;else break e}}return ae}function i(ce,ae){var we=ce.sortIndex-ae.sortIndex;return we!==0?we:ce.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,h=3,g=!1,_=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(ce){for(var ae=n(u);ae!==null;){if(ae.callback===null)r(u);else if(ae.startTime<=ce)r(u),ae.sortIndex=ae.expirationTime,e(l,ae);else break;ae=n(u)}}function N(ce){if(x=!1,E(ce),!_)if(n(l)!==null)_=!0,Je(F);else{var ae=n(u);ae!==null&&Le(N,ae.startTime-ce)}}function F(ce,ae){_=!1,x&&(x=!1,y(A),A=-1),g=!0;var we=h;try{for(E(ae),d=n(l);d!==null&&(!(d.expirationTime>ae)||ce&&!P());){var $e=d.callback;if(typeof $e=="function"){d.callback=null,h=d.priorityLevel;var Ae=$e(d.expirationTime<=ae);ae=t.unstable_now(),typeof Ae=="function"?d.callback=Ae:d===n(l)&&r(l),E(ae)}else r(l);d=n(l)}if(d!==null)var Ve=!0;else{var Te=n(u);Te!==null&&Le(N,Te.startTime-ae),Ve=!1}return Ve}finally{d=null,h=we,g=!1}}var O=!1,S=null,A=-1,C=5,k=-1;function P(){return!(t.unstable_now()-k<C)}function V(){if(S!==null){var ce=t.unstable_now();k=ce;var ae=!0;try{ae=S(!0,ce)}finally{ae?D():(O=!1,S=null)}}else O=!1}var D;if(typeof T=="function")D=function(){T(V)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,Re=oe.port2;oe.port1.onmessage=V,D=function(){Re.postMessage(null)}}else D=function(){w(V,0)};function Je(ce){S=ce,O||(O=!0,D())}function Le(ce,ae){A=w(function(){ce(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ce){ce.callback=null},t.unstable_continueExecution=function(){_||g||(_=!0,Je(F))},t.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<ce?Math.floor(1e3/ce):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(ce){switch(h){case 1:case 2:case 3:var ae=3;break;default:ae=h}var we=h;h=ae;try{return ce()}finally{h=we}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ce,ae){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var we=h;h=ce;try{return ae()}finally{h=we}},t.unstable_scheduleCallback=function(ce,ae,we){var $e=t.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?$e+we:$e):we=$e,ce){case 1:var Ae=-1;break;case 2:Ae=250;break;case 5:Ae=1073741823;break;case 4:Ae=1e4;break;default:Ae=5e3}return Ae=we+Ae,ce={id:c++,callback:ae,priorityLevel:ce,startTime:we,expirationTime:Ae,sortIndex:-1},we>$e?(ce.sortIndex=we,e(u,ce),n(l)===null&&ce===n(u)&&(x?(y(A),A=-1):x=!0,Le(N,we-$e))):(ce.sortIndex=Ae,e(l,ce),_||g||(_=!0,Je(F))),ce},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(ce){var ae=h;return function(){var we=h;h=ae;try{return ce.apply(this,arguments)}finally{h=we}}}})(yC);_C.exports=yC;var SM=_C.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AM=qe,oi=SM;function _e(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xC=new Set,Bd={};function ul(t,e){Nu(t,e),Nu(t+"Capture",e)}function Nu(t,e){for(Bd[t]=e,t=0;t<e.length;t++)xC.add(e[t])}var Vs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mv=Object.prototype.hasOwnProperty,CM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yT={},xT={};function RM(t){return Mv.call(xT,t)?!0:Mv.call(yT,t)?!1:CM.test(t)?xT[t]=!0:(yT[t]=!0,!1)}function kM(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function NM(t,e,n,r){if(e===null||typeof e>"u"||kM(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Mr(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Xn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Xn[t]=new Mr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Xn[e]=new Mr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Xn[t]=new Mr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Xn[t]=new Mr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Xn[t]=new Mr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Xn[t]=new Mr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Xn[t]=new Mr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Xn[t]=new Mr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Xn[t]=new Mr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Uy=/[\-:]([a-z])/g;function By(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Uy,By);Xn[e]=new Mr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Uy,By);Xn[e]=new Mr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Uy,By);Xn[e]=new Mr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Xn[t]=new Mr(t,1,!1,t.toLowerCase(),null,!1,!1)});Xn.xlinkHref=new Mr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Xn[t]=new Mr(t,1,!1,t.toLowerCase(),null,!0,!0)});function zy(t,e,n,r){var i=Xn.hasOwnProperty(e)?Xn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(NM(e,n,i,r)&&(n=null),r||i===null?RM(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Js=AM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ch=Symbol.for("react.element"),ql=Symbol.for("react.portal"),jl=Symbol.for("react.fragment"),Gy=Symbol.for("react.strict_mode"),Lv=Symbol.for("react.profiler"),wC=Symbol.for("react.provider"),TC=Symbol.for("react.context"),Hy=Symbol.for("react.forward_ref"),Ov=Symbol.for("react.suspense"),Vv=Symbol.for("react.suspense_list"),$y=Symbol.for("react.memo"),po=Symbol.for("react.lazy"),EC=Symbol.for("react.offscreen"),wT=Symbol.iterator;function Vc(t){return t===null||typeof t!="object"?null:(t=wT&&t[wT]||t["@@iterator"],typeof t=="function"?t:null)}var an=Object.assign,Cg;function rd(t){if(Cg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Cg=e&&e[1]||""}return`
`+Cg+t}var Rg=!1;function kg(t,e){if(!t||Rg)return"";Rg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Rg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?rd(t):""}function PM(t){switch(t.tag){case 5:return rd(t.type);case 16:return rd("Lazy");case 13:return rd("Suspense");case 19:return rd("SuspenseList");case 0:case 2:case 15:return t=kg(t.type,!1),t;case 11:return t=kg(t.type.render,!1),t;case 1:return t=kg(t.type,!0),t;default:return""}}function Uv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case jl:return"Fragment";case ql:return"Portal";case Lv:return"Profiler";case Gy:return"StrictMode";case Ov:return"Suspense";case Vv:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case TC:return(t.displayName||"Context")+".Consumer";case wC:return(t._context.displayName||"Context")+".Provider";case Hy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case $y:return e=t.displayName||null,e!==null?e:Uv(t.type)||"Memo";case po:e=t._payload,t=t._init;try{return Uv(t(e))}catch{}}return null}function bM(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Uv(e);case 8:return e===Gy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Mo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function IC(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function DM(t){var e=IC(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Rh(t){t._valueTracker||(t._valueTracker=DM(t))}function SC(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=IC(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function O0(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Bv(t,e){var n=e.checked;return an({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function TT(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Mo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function AC(t,e){e=e.checked,e!=null&&zy(t,"checked",e,!1)}function zv(t,e){AC(t,e);var n=Mo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Gv(t,e.type,n):e.hasOwnProperty("defaultValue")&&Gv(t,e.type,Mo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ET(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Gv(t,e,n){(e!=="number"||O0(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var id=Array.isArray;function au(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Mo(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Hv(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(_e(91));return an({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function IT(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(_e(92));if(id(n)){if(1<n.length)throw Error(_e(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Mo(n)}}function CC(t,e){var n=Mo(e.value),r=Mo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ST(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function RC(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $v(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?RC(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var kh,kC=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(kh=kh||document.createElement("div"),kh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=kh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function zd(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var vd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},FM=["Webkit","ms","Moz","O"];Object.keys(vd).forEach(function(t){FM.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),vd[e]=vd[t]})});function NC(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||vd.hasOwnProperty(t)&&vd[t]?(""+e).trim():e+"px"}function PC(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=NC(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var MM=an({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wv(t,e){if(e){if(MM[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(_e(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(_e(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(_e(61))}if(e.style!=null&&typeof e.style!="object")throw Error(_e(62))}}function qv(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jv=null;function Wy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Kv=null,lu=null,uu=null;function AT(t){if(t=Uf(t)){if(typeof Kv!="function")throw Error(_e(280));var e=t.stateNode;e&&(e=lm(e),Kv(t.stateNode,t.type,e))}}function bC(t){lu?uu?uu.push(t):uu=[t]:lu=t}function DC(){if(lu){var t=lu,e=uu;if(uu=lu=null,AT(t),e)for(t=0;t<e.length;t++)AT(e[t])}}function FC(t,e){return t(e)}function MC(){}var Ng=!1;function LC(t,e,n){if(Ng)return t(e,n);Ng=!0;try{return FC(t,e,n)}finally{Ng=!1,(lu!==null||uu!==null)&&(MC(),DC())}}function Gd(t,e){var n=t.stateNode;if(n===null)return null;var r=lm(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(_e(231,e,typeof n));return n}var Jv=!1;if(Vs)try{var Uc={};Object.defineProperty(Uc,"passive",{get:function(){Jv=!0}}),window.addEventListener("test",Uc,Uc),window.removeEventListener("test",Uc,Uc)}catch{Jv=!1}function LM(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var _d=!1,V0=null,U0=!1,Yv=null,OM={onError:function(t){_d=!0,V0=t}};function VM(t,e,n,r,i,s,o,a,l){_d=!1,V0=null,LM.apply(OM,arguments)}function UM(t,e,n,r,i,s,o,a,l){if(VM.apply(this,arguments),_d){if(_d){var u=V0;_d=!1,V0=null}else throw Error(_e(198));U0||(U0=!0,Yv=u)}}function cl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function OC(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function CT(t){if(cl(t)!==t)throw Error(_e(188))}function BM(t){var e=t.alternate;if(!e){if(e=cl(t),e===null)throw Error(_e(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return CT(i),t;if(s===r)return CT(i),e;s=s.sibling}throw Error(_e(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(_e(189))}}if(n.alternate!==r)throw Error(_e(190))}if(n.tag!==3)throw Error(_e(188));return n.stateNode.current===n?t:e}function VC(t){return t=BM(t),t!==null?UC(t):null}function UC(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=UC(t);if(e!==null)return e;t=t.sibling}return null}var BC=oi.unstable_scheduleCallback,RT=oi.unstable_cancelCallback,zM=oi.unstable_shouldYield,GM=oi.unstable_requestPaint,gn=oi.unstable_now,HM=oi.unstable_getCurrentPriorityLevel,qy=oi.unstable_ImmediatePriority,zC=oi.unstable_UserBlockingPriority,B0=oi.unstable_NormalPriority,$M=oi.unstable_LowPriority,GC=oi.unstable_IdlePriority,im=null,as=null;function WM(t){if(as&&typeof as.onCommitFiberRoot=="function")try{as.onCommitFiberRoot(im,t,void 0,(t.current.flags&128)===128)}catch{}}var Fi=Math.clz32?Math.clz32:KM,qM=Math.log,jM=Math.LN2;function KM(t){return t>>>=0,t===0?32:31-(qM(t)/jM|0)|0}var Nh=64,Ph=4194304;function sd(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function z0(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=sd(a):(s&=o,s!==0&&(r=sd(s)))}else o=n&~i,o!==0?r=sd(o):s!==0&&(r=sd(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Fi(e),i=1<<n,r|=t[n],e&=~i;return r}function JM(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function YM(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Fi(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=JM(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Xv(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function HC(){var t=Nh;return Nh<<=1,!(Nh&4194240)&&(Nh=64),t}function Pg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Of(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Fi(e),t[e]=n}function XM(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Fi(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function jy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Fi(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var bt=0;function $C(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var WC,Ky,qC,jC,KC,Qv=!1,bh=[],So=null,Ao=null,Co=null,Hd=new Map,$d=new Map,go=[],QM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kT(t,e){switch(t){case"focusin":case"focusout":So=null;break;case"dragenter":case"dragleave":Ao=null;break;case"mouseover":case"mouseout":Co=null;break;case"pointerover":case"pointerout":Hd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":$d.delete(e.pointerId)}}function Bc(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Uf(e),e!==null&&Ky(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function ZM(t,e,n,r,i){switch(e){case"focusin":return So=Bc(So,t,e,n,r,i),!0;case"dragenter":return Ao=Bc(Ao,t,e,n,r,i),!0;case"mouseover":return Co=Bc(Co,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Hd.set(s,Bc(Hd.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,$d.set(s,Bc($d.get(s)||null,t,e,n,r,i)),!0}return!1}function JC(t){var e=Ra(t.target);if(e!==null){var n=cl(e);if(n!==null){if(e=n.tag,e===13){if(e=OC(n),e!==null){t.blockedOn=e,KC(t.priority,function(){qC(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function d0(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Zv(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);jv=r,n.target.dispatchEvent(r),jv=null}else return e=Uf(n),e!==null&&Ky(e),t.blockedOn=n,!1;e.shift()}return!0}function NT(t,e,n){d0(t)&&n.delete(e)}function eL(){Qv=!1,So!==null&&d0(So)&&(So=null),Ao!==null&&d0(Ao)&&(Ao=null),Co!==null&&d0(Co)&&(Co=null),Hd.forEach(NT),$d.forEach(NT)}function zc(t,e){t.blockedOn===e&&(t.blockedOn=null,Qv||(Qv=!0,oi.unstable_scheduleCallback(oi.unstable_NormalPriority,eL)))}function Wd(t){function e(i){return zc(i,t)}if(0<bh.length){zc(bh[0],t);for(var n=1;n<bh.length;n++){var r=bh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(So!==null&&zc(So,t),Ao!==null&&zc(Ao,t),Co!==null&&zc(Co,t),Hd.forEach(e),$d.forEach(e),n=0;n<go.length;n++)r=go[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<go.length&&(n=go[0],n.blockedOn===null);)JC(n),n.blockedOn===null&&go.shift()}var cu=Js.ReactCurrentBatchConfig,G0=!0;function tL(t,e,n,r){var i=bt,s=cu.transition;cu.transition=null;try{bt=1,Jy(t,e,n,r)}finally{bt=i,cu.transition=s}}function nL(t,e,n,r){var i=bt,s=cu.transition;cu.transition=null;try{bt=4,Jy(t,e,n,r)}finally{bt=i,cu.transition=s}}function Jy(t,e,n,r){if(G0){var i=Zv(t,e,n,r);if(i===null)zg(t,e,r,H0,n),kT(t,r);else if(ZM(i,t,e,n,r))r.stopPropagation();else if(kT(t,r),e&4&&-1<QM.indexOf(t)){for(;i!==null;){var s=Uf(i);if(s!==null&&WC(s),s=Zv(t,e,n,r),s===null&&zg(t,e,r,H0,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else zg(t,e,r,null,n)}}var H0=null;function Zv(t,e,n,r){if(H0=null,t=Wy(r),t=Ra(t),t!==null)if(e=cl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=OC(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return H0=t,null}function YC(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(HM()){case qy:return 1;case zC:return 4;case B0:case $M:return 16;case GC:return 536870912;default:return 16}default:return 16}}var xo=null,Yy=null,f0=null;function XC(){if(f0)return f0;var t,e=Yy,n=e.length,r,i="value"in xo?xo.value:xo.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return f0=i.slice(t,1<r?1-r:void 0)}function h0(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Dh(){return!0}function PT(){return!1}function ui(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Dh:PT,this.isPropagationStopped=PT,this}return an(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Dh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Dh)},persist:function(){},isPersistent:Dh}),e}var sc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xy=ui(sc),Vf=an({},sc,{view:0,detail:0}),rL=ui(Vf),bg,Dg,Gc,sm=an({},Vf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Gc&&(Gc&&t.type==="mousemove"?(bg=t.screenX-Gc.screenX,Dg=t.screenY-Gc.screenY):Dg=bg=0,Gc=t),bg)},movementY:function(t){return"movementY"in t?t.movementY:Dg}}),bT=ui(sm),iL=an({},sm,{dataTransfer:0}),sL=ui(iL),oL=an({},Vf,{relatedTarget:0}),Fg=ui(oL),aL=an({},sc,{animationName:0,elapsedTime:0,pseudoElement:0}),lL=ui(aL),uL=an({},sc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),cL=ui(uL),dL=an({},sc,{data:0}),DT=ui(dL),fL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mL(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=pL[t])?!!e[t]:!1}function Qy(){return mL}var gL=an({},Vf,{key:function(t){if(t.key){var e=fL[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=h0(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?hL[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qy,charCode:function(t){return t.type==="keypress"?h0(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?h0(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),vL=ui(gL),_L=an({},sm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),FT=ui(_L),yL=an({},Vf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qy}),xL=ui(yL),wL=an({},sc,{propertyName:0,elapsedTime:0,pseudoElement:0}),TL=ui(wL),EL=an({},sm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),IL=ui(EL),SL=[9,13,27,32],Zy=Vs&&"CompositionEvent"in window,yd=null;Vs&&"documentMode"in document&&(yd=document.documentMode);var AL=Vs&&"TextEvent"in window&&!yd,QC=Vs&&(!Zy||yd&&8<yd&&11>=yd),MT=" ",LT=!1;function ZC(t,e){switch(t){case"keyup":return SL.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eR(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Kl=!1;function CL(t,e){switch(t){case"compositionend":return eR(e);case"keypress":return e.which!==32?null:(LT=!0,MT);case"textInput":return t=e.data,t===MT&&LT?null:t;default:return null}}function RL(t,e){if(Kl)return t==="compositionend"||!Zy&&ZC(t,e)?(t=XC(),f0=Yy=xo=null,Kl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return QC&&e.locale!=="ko"?null:e.data;default:return null}}var kL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function OT(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!kL[t.type]:e==="textarea"}function tR(t,e,n,r){bC(r),e=$0(e,"onChange"),0<e.length&&(n=new Xy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var xd=null,qd=null;function NL(t){fR(t,0)}function om(t){var e=Xl(t);if(SC(e))return t}function PL(t,e){if(t==="change")return e}var nR=!1;if(Vs){var Mg;if(Vs){var Lg="oninput"in document;if(!Lg){var VT=document.createElement("div");VT.setAttribute("oninput","return;"),Lg=typeof VT.oninput=="function"}Mg=Lg}else Mg=!1;nR=Mg&&(!document.documentMode||9<document.documentMode)}function UT(){xd&&(xd.detachEvent("onpropertychange",rR),qd=xd=null)}function rR(t){if(t.propertyName==="value"&&om(qd)){var e=[];tR(e,qd,t,Wy(t)),LC(NL,e)}}function bL(t,e,n){t==="focusin"?(UT(),xd=e,qd=n,xd.attachEvent("onpropertychange",rR)):t==="focusout"&&UT()}function DL(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return om(qd)}function FL(t,e){if(t==="click")return om(e)}function ML(t,e){if(t==="input"||t==="change")return om(e)}function LL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var zi=typeof Object.is=="function"?Object.is:LL;function jd(t,e){if(zi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Mv.call(e,i)||!zi(t[i],e[i]))return!1}return!0}function BT(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function zT(t,e){var n=BT(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=BT(n)}}function iR(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?iR(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function sR(){for(var t=window,e=O0();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=O0(t.document)}return e}function ex(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function OL(t){var e=sR(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&iR(n.ownerDocument.documentElement,n)){if(r!==null&&ex(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=zT(n,s);var o=zT(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var VL=Vs&&"documentMode"in document&&11>=document.documentMode,Jl=null,e_=null,wd=null,t_=!1;function GT(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;t_||Jl==null||Jl!==O0(r)||(r=Jl,"selectionStart"in r&&ex(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),wd&&jd(wd,r)||(wd=r,r=$0(e_,"onSelect"),0<r.length&&(e=new Xy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Jl)))}function Fh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Yl={animationend:Fh("Animation","AnimationEnd"),animationiteration:Fh("Animation","AnimationIteration"),animationstart:Fh("Animation","AnimationStart"),transitionend:Fh("Transition","TransitionEnd")},Og={},oR={};Vs&&(oR=document.createElement("div").style,"AnimationEvent"in window||(delete Yl.animationend.animation,delete Yl.animationiteration.animation,delete Yl.animationstart.animation),"TransitionEvent"in window||delete Yl.transitionend.transition);function am(t){if(Og[t])return Og[t];if(!Yl[t])return t;var e=Yl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in oR)return Og[t]=e[n];return t}var aR=am("animationend"),lR=am("animationiteration"),uR=am("animationstart"),cR=am("transitionend"),dR=new Map,HT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qo(t,e){dR.set(t,e),ul(e,[t])}for(var Vg=0;Vg<HT.length;Vg++){var Ug=HT[Vg],UL=Ug.toLowerCase(),BL=Ug[0].toUpperCase()+Ug.slice(1);Qo(UL,"on"+BL)}Qo(aR,"onAnimationEnd");Qo(lR,"onAnimationIteration");Qo(uR,"onAnimationStart");Qo("dblclick","onDoubleClick");Qo("focusin","onFocus");Qo("focusout","onBlur");Qo(cR,"onTransitionEnd");Nu("onMouseEnter",["mouseout","mouseover"]);Nu("onMouseLeave",["mouseout","mouseover"]);Nu("onPointerEnter",["pointerout","pointerover"]);Nu("onPointerLeave",["pointerout","pointerover"]);ul("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ul("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ul("onBeforeInput",["compositionend","keypress","textInput","paste"]);ul("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ul("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ul("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var od="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zL=new Set("cancel close invalid load scroll toggle".split(" ").concat(od));function $T(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,UM(r,e,void 0,t),t.currentTarget=null}function fR(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;$T(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;$T(i,a,u),s=l}}}if(U0)throw t=Yv,U0=!1,Yv=null,t}function Gt(t,e){var n=e[o_];n===void 0&&(n=e[o_]=new Set);var r=t+"__bubble";n.has(r)||(hR(e,t,2,!1),n.add(r))}function Bg(t,e,n){var r=0;e&&(r|=4),hR(n,t,r,e)}var Mh="_reactListening"+Math.random().toString(36).slice(2);function Kd(t){if(!t[Mh]){t[Mh]=!0,xC.forEach(function(n){n!=="selectionchange"&&(zL.has(n)||Bg(n,!1,t),Bg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Mh]||(e[Mh]=!0,Bg("selectionchange",!1,e))}}function hR(t,e,n,r){switch(YC(e)){case 1:var i=tL;break;case 4:i=nL;break;default:i=Jy}n=i.bind(null,e,n,t),i=void 0,!Jv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function zg(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ra(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}LC(function(){var u=s,c=Wy(n),d=[];e:{var h=dR.get(t);if(h!==void 0){var g=Xy,_=t;switch(t){case"keypress":if(h0(n)===0)break e;case"keydown":case"keyup":g=vL;break;case"focusin":_="focus",g=Fg;break;case"focusout":_="blur",g=Fg;break;case"beforeblur":case"afterblur":g=Fg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=bT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=sL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=xL;break;case aR:case lR:case uR:g=lL;break;case cR:g=TL;break;case"scroll":g=rL;break;case"wheel":g=IL;break;case"copy":case"cut":case"paste":g=cL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=FT}var x=(e&4)!==0,w=!x&&t==="scroll",y=x?h!==null?h+"Capture":null:h;x=[];for(var T=u,E;T!==null;){E=T;var N=E.stateNode;if(E.tag===5&&N!==null&&(E=N,y!==null&&(N=Gd(T,y),N!=null&&x.push(Jd(T,N,E)))),w)break;T=T.return}0<x.length&&(h=new g(h,_,null,n,c),d.push({event:h,listeners:x}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",h&&n!==jv&&(_=n.relatedTarget||n.fromElement)&&(Ra(_)||_[Us]))break e;if((g||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,g?(_=n.relatedTarget||n.toElement,g=u,_=_?Ra(_):null,_!==null&&(w=cl(_),_!==w||_.tag!==5&&_.tag!==6)&&(_=null)):(g=null,_=u),g!==_)){if(x=bT,N="onMouseLeave",y="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(x=FT,N="onPointerLeave",y="onPointerEnter",T="pointer"),w=g==null?h:Xl(g),E=_==null?h:Xl(_),h=new x(N,T+"leave",g,n,c),h.target=w,h.relatedTarget=E,N=null,Ra(c)===u&&(x=new x(y,T+"enter",_,n,c),x.target=E,x.relatedTarget=w,N=x),w=N,g&&_)t:{for(x=g,y=_,T=0,E=x;E;E=Nl(E))T++;for(E=0,N=y;N;N=Nl(N))E++;for(;0<T-E;)x=Nl(x),T--;for(;0<E-T;)y=Nl(y),E--;for(;T--;){if(x===y||y!==null&&x===y.alternate)break t;x=Nl(x),y=Nl(y)}x=null}else x=null;g!==null&&WT(d,h,g,x,!1),_!==null&&w!==null&&WT(d,w,_,x,!0)}}e:{if(h=u?Xl(u):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var F=PL;else if(OT(h))if(nR)F=ML;else{F=DL;var O=bL}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(F=FL);if(F&&(F=F(t,u))){tR(d,F,n,c);break e}O&&O(t,h,u),t==="focusout"&&(O=h._wrapperState)&&O.controlled&&h.type==="number"&&Gv(h,"number",h.value)}switch(O=u?Xl(u):window,t){case"focusin":(OT(O)||O.contentEditable==="true")&&(Jl=O,e_=u,wd=null);break;case"focusout":wd=e_=Jl=null;break;case"mousedown":t_=!0;break;case"contextmenu":case"mouseup":case"dragend":t_=!1,GT(d,n,c);break;case"selectionchange":if(VL)break;case"keydown":case"keyup":GT(d,n,c)}var S;if(Zy)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Kl?ZC(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(QC&&n.locale!=="ko"&&(Kl||A!=="onCompositionStart"?A==="onCompositionEnd"&&Kl&&(S=XC()):(xo=c,Yy="value"in xo?xo.value:xo.textContent,Kl=!0)),O=$0(u,A),0<O.length&&(A=new DT(A,t,null,n,c),d.push({event:A,listeners:O}),S?A.data=S:(S=eR(n),S!==null&&(A.data=S)))),(S=AL?CL(t,n):RL(t,n))&&(u=$0(u,"onBeforeInput"),0<u.length&&(c=new DT("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=S))}fR(d,e)})}function Jd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function $0(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Gd(t,n),s!=null&&r.unshift(Jd(t,s,i)),s=Gd(t,e),s!=null&&r.push(Jd(t,s,i))),t=t.return}return r}function Nl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function WT(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Gd(n,s),l!=null&&o.unshift(Jd(n,l,a))):i||(l=Gd(n,s),l!=null&&o.push(Jd(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var GL=/\r\n?/g,HL=/\u0000|\uFFFD/g;function qT(t){return(typeof t=="string"?t:""+t).replace(GL,`
`).replace(HL,"")}function Lh(t,e,n){if(e=qT(e),qT(t)!==e&&n)throw Error(_e(425))}function W0(){}var n_=null,r_=null;function i_(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var s_=typeof setTimeout=="function"?setTimeout:void 0,$L=typeof clearTimeout=="function"?clearTimeout:void 0,jT=typeof Promise=="function"?Promise:void 0,WL=typeof queueMicrotask=="function"?queueMicrotask:typeof jT<"u"?function(t){return jT.resolve(null).then(t).catch(qL)}:s_;function qL(t){setTimeout(function(){throw t})}function Gg(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Wd(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Wd(e)}function Ro(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function KT(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var oc=Math.random().toString(36).slice(2),Qi="__reactFiber$"+oc,Yd="__reactProps$"+oc,Us="__reactContainer$"+oc,o_="__reactEvents$"+oc,jL="__reactListeners$"+oc,KL="__reactHandles$"+oc;function Ra(t){var e=t[Qi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Us]||n[Qi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=KT(t);t!==null;){if(n=t[Qi])return n;t=KT(t)}return e}t=n,n=t.parentNode}return null}function Uf(t){return t=t[Qi]||t[Us],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Xl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(_e(33))}function lm(t){return t[Yd]||null}var a_=[],Ql=-1;function Zo(t){return{current:t}}function $t(t){0>Ql||(t.current=a_[Ql],a_[Ql]=null,Ql--)}function Vt(t,e){Ql++,a_[Ql]=t.current,t.current=e}var Lo={},mr=Zo(Lo),$r=Zo(!1),za=Lo;function Pu(t,e){var n=t.type.contextTypes;if(!n)return Lo;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Wr(t){return t=t.childContextTypes,t!=null}function q0(){$t($r),$t(mr)}function JT(t,e,n){if(mr.current!==Lo)throw Error(_e(168));Vt(mr,e),Vt($r,n)}function pR(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(_e(108,bM(t)||"Unknown",i));return an({},n,r)}function j0(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Lo,za=mr.current,Vt(mr,t),Vt($r,$r.current),!0}function YT(t,e,n){var r=t.stateNode;if(!r)throw Error(_e(169));n?(t=pR(t,e,za),r.__reactInternalMemoizedMergedChildContext=t,$t($r),$t(mr),Vt(mr,t)):$t($r),Vt($r,n)}var Ss=null,um=!1,Hg=!1;function mR(t){Ss===null?Ss=[t]:Ss.push(t)}function JL(t){um=!0,mR(t)}function ea(){if(!Hg&&Ss!==null){Hg=!0;var t=0,e=bt;try{var n=Ss;for(bt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ss=null,um=!1}catch(i){throw Ss!==null&&(Ss=Ss.slice(t+1)),BC(qy,ea),i}finally{bt=e,Hg=!1}}return null}var Zl=[],eu=0,K0=null,J0=0,hi=[],pi=0,Ga=null,Cs=1,Rs="";function va(t,e){Zl[eu++]=J0,Zl[eu++]=K0,K0=t,J0=e}function gR(t,e,n){hi[pi++]=Cs,hi[pi++]=Rs,hi[pi++]=Ga,Ga=t;var r=Cs;t=Rs;var i=32-Fi(r)-1;r&=~(1<<i),n+=1;var s=32-Fi(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Cs=1<<32-Fi(e)+i|n<<i|r,Rs=s+t}else Cs=1<<s|n<<i|r,Rs=t}function tx(t){t.return!==null&&(va(t,1),gR(t,1,0))}function nx(t){for(;t===K0;)K0=Zl[--eu],Zl[eu]=null,J0=Zl[--eu],Zl[eu]=null;for(;t===Ga;)Ga=hi[--pi],hi[pi]=null,Rs=hi[--pi],hi[pi]=null,Cs=hi[--pi],hi[pi]=null}var si=null,ni=null,Xt=!1,bi=null;function vR(t,e){var n=mi(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function XT(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,si=t,ni=Ro(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,si=t,ni=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ga!==null?{id:Cs,overflow:Rs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=mi(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,si=t,ni=null,!0):!1;default:return!1}}function l_(t){return(t.mode&1)!==0&&(t.flags&128)===0}function u_(t){if(Xt){var e=ni;if(e){var n=e;if(!XT(t,e)){if(l_(t))throw Error(_e(418));e=Ro(n.nextSibling);var r=si;e&&XT(t,e)?vR(r,n):(t.flags=t.flags&-4097|2,Xt=!1,si=t)}}else{if(l_(t))throw Error(_e(418));t.flags=t.flags&-4097|2,Xt=!1,si=t}}}function QT(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;si=t}function Oh(t){if(t!==si)return!1;if(!Xt)return QT(t),Xt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!i_(t.type,t.memoizedProps)),e&&(e=ni)){if(l_(t))throw _R(),Error(_e(418));for(;e;)vR(t,e),e=Ro(e.nextSibling)}if(QT(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(_e(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ni=Ro(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ni=null}}else ni=si?Ro(t.stateNode.nextSibling):null;return!0}function _R(){for(var t=ni;t;)t=Ro(t.nextSibling)}function bu(){ni=si=null,Xt=!1}function rx(t){bi===null?bi=[t]:bi.push(t)}var YL=Js.ReactCurrentBatchConfig;function Hc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(_e(309));var r=n.stateNode}if(!r)throw Error(_e(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(_e(284));if(!n._owner)throw Error(_e(290,t))}return t}function Vh(t,e){throw t=Object.prototype.toString.call(e),Error(_e(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ZT(t){var e=t._init;return e(t._payload)}function yR(t){function e(y,T){if(t){var E=y.deletions;E===null?(y.deletions=[T],y.flags|=16):E.push(T)}}function n(y,T){if(!t)return null;for(;T!==null;)e(y,T),T=T.sibling;return null}function r(y,T){for(y=new Map;T!==null;)T.key!==null?y.set(T.key,T):y.set(T.index,T),T=T.sibling;return y}function i(y,T){return y=bo(y,T),y.index=0,y.sibling=null,y}function s(y,T,E){return y.index=E,t?(E=y.alternate,E!==null?(E=E.index,E<T?(y.flags|=2,T):E):(y.flags|=2,T)):(y.flags|=1048576,T)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,T,E,N){return T===null||T.tag!==6?(T=Yg(E,y.mode,N),T.return=y,T):(T=i(T,E),T.return=y,T)}function l(y,T,E,N){var F=E.type;return F===jl?c(y,T,E.props.children,N,E.key):T!==null&&(T.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===po&&ZT(F)===T.type)?(N=i(T,E.props),N.ref=Hc(y,T,E),N.return=y,N):(N=x0(E.type,E.key,E.props,null,y.mode,N),N.ref=Hc(y,T,E),N.return=y,N)}function u(y,T,E,N){return T===null||T.tag!==4||T.stateNode.containerInfo!==E.containerInfo||T.stateNode.implementation!==E.implementation?(T=Xg(E,y.mode,N),T.return=y,T):(T=i(T,E.children||[]),T.return=y,T)}function c(y,T,E,N,F){return T===null||T.tag!==7?(T=Ma(E,y.mode,N,F),T.return=y,T):(T=i(T,E),T.return=y,T)}function d(y,T,E){if(typeof T=="string"&&T!==""||typeof T=="number")return T=Yg(""+T,y.mode,E),T.return=y,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Ch:return E=x0(T.type,T.key,T.props,null,y.mode,E),E.ref=Hc(y,null,T),E.return=y,E;case ql:return T=Xg(T,y.mode,E),T.return=y,T;case po:var N=T._init;return d(y,N(T._payload),E)}if(id(T)||Vc(T))return T=Ma(T,y.mode,E,null),T.return=y,T;Vh(y,T)}return null}function h(y,T,E,N){var F=T!==null?T.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return F!==null?null:a(y,T,""+E,N);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ch:return E.key===F?l(y,T,E,N):null;case ql:return E.key===F?u(y,T,E,N):null;case po:return F=E._init,h(y,T,F(E._payload),N)}if(id(E)||Vc(E))return F!==null?null:c(y,T,E,N,null);Vh(y,E)}return null}function g(y,T,E,N,F){if(typeof N=="string"&&N!==""||typeof N=="number")return y=y.get(E)||null,a(T,y,""+N,F);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Ch:return y=y.get(N.key===null?E:N.key)||null,l(T,y,N,F);case ql:return y=y.get(N.key===null?E:N.key)||null,u(T,y,N,F);case po:var O=N._init;return g(y,T,E,O(N._payload),F)}if(id(N)||Vc(N))return y=y.get(E)||null,c(T,y,N,F,null);Vh(T,N)}return null}function _(y,T,E,N){for(var F=null,O=null,S=T,A=T=0,C=null;S!==null&&A<E.length;A++){S.index>A?(C=S,S=null):C=S.sibling;var k=h(y,S,E[A],N);if(k===null){S===null&&(S=C);break}t&&S&&k.alternate===null&&e(y,S),T=s(k,T,A),O===null?F=k:O.sibling=k,O=k,S=C}if(A===E.length)return n(y,S),Xt&&va(y,A),F;if(S===null){for(;A<E.length;A++)S=d(y,E[A],N),S!==null&&(T=s(S,T,A),O===null?F=S:O.sibling=S,O=S);return Xt&&va(y,A),F}for(S=r(y,S);A<E.length;A++)C=g(S,y,A,E[A],N),C!==null&&(t&&C.alternate!==null&&S.delete(C.key===null?A:C.key),T=s(C,T,A),O===null?F=C:O.sibling=C,O=C);return t&&S.forEach(function(P){return e(y,P)}),Xt&&va(y,A),F}function x(y,T,E,N){var F=Vc(E);if(typeof F!="function")throw Error(_e(150));if(E=F.call(E),E==null)throw Error(_e(151));for(var O=F=null,S=T,A=T=0,C=null,k=E.next();S!==null&&!k.done;A++,k=E.next()){S.index>A?(C=S,S=null):C=S.sibling;var P=h(y,S,k.value,N);if(P===null){S===null&&(S=C);break}t&&S&&P.alternate===null&&e(y,S),T=s(P,T,A),O===null?F=P:O.sibling=P,O=P,S=C}if(k.done)return n(y,S),Xt&&va(y,A),F;if(S===null){for(;!k.done;A++,k=E.next())k=d(y,k.value,N),k!==null&&(T=s(k,T,A),O===null?F=k:O.sibling=k,O=k);return Xt&&va(y,A),F}for(S=r(y,S);!k.done;A++,k=E.next())k=g(S,y,A,k.value,N),k!==null&&(t&&k.alternate!==null&&S.delete(k.key===null?A:k.key),T=s(k,T,A),O===null?F=k:O.sibling=k,O=k);return t&&S.forEach(function(V){return e(y,V)}),Xt&&va(y,A),F}function w(y,T,E,N){if(typeof E=="object"&&E!==null&&E.type===jl&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Ch:e:{for(var F=E.key,O=T;O!==null;){if(O.key===F){if(F=E.type,F===jl){if(O.tag===7){n(y,O.sibling),T=i(O,E.props.children),T.return=y,y=T;break e}}else if(O.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===po&&ZT(F)===O.type){n(y,O.sibling),T=i(O,E.props),T.ref=Hc(y,O,E),T.return=y,y=T;break e}n(y,O);break}else e(y,O);O=O.sibling}E.type===jl?(T=Ma(E.props.children,y.mode,N,E.key),T.return=y,y=T):(N=x0(E.type,E.key,E.props,null,y.mode,N),N.ref=Hc(y,T,E),N.return=y,y=N)}return o(y);case ql:e:{for(O=E.key;T!==null;){if(T.key===O)if(T.tag===4&&T.stateNode.containerInfo===E.containerInfo&&T.stateNode.implementation===E.implementation){n(y,T.sibling),T=i(T,E.children||[]),T.return=y,y=T;break e}else{n(y,T);break}else e(y,T);T=T.sibling}T=Xg(E,y.mode,N),T.return=y,y=T}return o(y);case po:return O=E._init,w(y,T,O(E._payload),N)}if(id(E))return _(y,T,E,N);if(Vc(E))return x(y,T,E,N);Vh(y,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,T!==null&&T.tag===6?(n(y,T.sibling),T=i(T,E),T.return=y,y=T):(n(y,T),T=Yg(E,y.mode,N),T.return=y,y=T),o(y)):n(y,T)}return w}var Du=yR(!0),xR=yR(!1),Y0=Zo(null),X0=null,tu=null,ix=null;function sx(){ix=tu=X0=null}function ox(t){var e=Y0.current;$t(Y0),t._currentValue=e}function c_(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function du(t,e){X0=t,ix=tu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Br=!0),t.firstContext=null)}function wi(t){var e=t._currentValue;if(ix!==t)if(t={context:t,memoizedValue:e,next:null},tu===null){if(X0===null)throw Error(_e(308));tu=t,X0.dependencies={lanes:0,firstContext:t}}else tu=tu.next=t;return e}var ka=null;function ax(t){ka===null?ka=[t]:ka.push(t)}function wR(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,ax(e)):(n.next=i.next,i.next=n),e.interleaved=n,Bs(t,r)}function Bs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var mo=!1;function lx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function TR(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ds(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ko(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Tt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Bs(t,n)}return i=r.interleaved,i===null?(e.next=e,ax(r)):(e.next=i.next,i.next=e),r.interleaved=e,Bs(t,n)}function p0(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,jy(t,n)}}function eE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Q0(t,e,n,r){var i=t.updateQueue;mo=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,c=u=l=null,a=s;do{var h=a.lane,g=a.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,x=a;switch(h=e,g=n,x.tag){case 1:if(_=x.payload,typeof _=="function"){d=_.call(g,d,h);break e}d=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=x.payload,h=typeof _=="function"?_.call(g,d,h):_,h==null)break e;d=an({},d,h);break e;case 2:mo=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else g={eventTime:g,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=g,l=d):c=c.next=g,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);$a|=o,t.lanes=o,t.memoizedState=d}}function tE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(_e(191,i));i.call(r)}}}var Bf={},ls=Zo(Bf),Xd=Zo(Bf),Qd=Zo(Bf);function Na(t){if(t===Bf)throw Error(_e(174));return t}function ux(t,e){switch(Vt(Qd,e),Vt(Xd,t),Vt(ls,Bf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$v(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$v(e,t)}$t(ls),Vt(ls,e)}function Fu(){$t(ls),$t(Xd),$t(Qd)}function ER(t){Na(Qd.current);var e=Na(ls.current),n=$v(e,t.type);e!==n&&(Vt(Xd,t),Vt(ls,n))}function cx(t){Xd.current===t&&($t(ls),$t(Xd))}var nn=Zo(0);function Z0(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var $g=[];function dx(){for(var t=0;t<$g.length;t++)$g[t]._workInProgressVersionPrimary=null;$g.length=0}var m0=Js.ReactCurrentDispatcher,Wg=Js.ReactCurrentBatchConfig,Ha=0,rn=null,kn=null,Mn=null,ep=!1,Td=!1,Zd=0,XL=0;function nr(){throw Error(_e(321))}function fx(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!zi(t[n],e[n]))return!1;return!0}function hx(t,e,n,r,i,s){if(Ha=s,rn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,m0.current=t===null||t.memoizedState===null?tO:nO,t=n(r,i),Td){s=0;do{if(Td=!1,Zd=0,25<=s)throw Error(_e(301));s+=1,Mn=kn=null,e.updateQueue=null,m0.current=rO,t=n(r,i)}while(Td)}if(m0.current=tp,e=kn!==null&&kn.next!==null,Ha=0,Mn=kn=rn=null,ep=!1,e)throw Error(_e(300));return t}function px(){var t=Zd!==0;return Zd=0,t}function Ji(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mn===null?rn.memoizedState=Mn=t:Mn=Mn.next=t,Mn}function Ti(){if(kn===null){var t=rn.alternate;t=t!==null?t.memoizedState:null}else t=kn.next;var e=Mn===null?rn.memoizedState:Mn.next;if(e!==null)Mn=e,kn=t;else{if(t===null)throw Error(_e(310));kn=t,t={memoizedState:kn.memoizedState,baseState:kn.baseState,baseQueue:kn.baseQueue,queue:kn.queue,next:null},Mn===null?rn.memoizedState=Mn=t:Mn=Mn.next=t}return Mn}function ef(t,e){return typeof e=="function"?e(t):e}function qg(t){var e=Ti(),n=e.queue;if(n===null)throw Error(_e(311));n.lastRenderedReducer=t;var r=kn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((Ha&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,rn.lanes|=c,$a|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,zi(r,e.memoizedState)||(Br=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,rn.lanes|=s,$a|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function jg(t){var e=Ti(),n=e.queue;if(n===null)throw Error(_e(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);zi(s,e.memoizedState)||(Br=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function IR(){}function SR(t,e){var n=rn,r=Ti(),i=e(),s=!zi(r.memoizedState,i);if(s&&(r.memoizedState=i,Br=!0),r=r.queue,mx(RR.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Mn!==null&&Mn.memoizedState.tag&1){if(n.flags|=2048,tf(9,CR.bind(null,n,r,i,e),void 0,null),Vn===null)throw Error(_e(349));Ha&30||AR(n,e,i)}return i}function AR(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=rn.updateQueue,e===null?(e={lastEffect:null,stores:null},rn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function CR(t,e,n,r){e.value=n,e.getSnapshot=r,kR(e)&&NR(t)}function RR(t,e,n){return n(function(){kR(e)&&NR(t)})}function kR(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!zi(t,n)}catch{return!0}}function NR(t){var e=Bs(t,1);e!==null&&Mi(e,t,1,-1)}function nE(t){var e=Ji();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ef,lastRenderedState:t},e.queue=t,t=t.dispatch=eO.bind(null,rn,t),[e.memoizedState,t]}function tf(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=rn.updateQueue,e===null?(e={lastEffect:null,stores:null},rn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function PR(){return Ti().memoizedState}function g0(t,e,n,r){var i=Ji();rn.flags|=t,i.memoizedState=tf(1|e,n,void 0,r===void 0?null:r)}function cm(t,e,n,r){var i=Ti();r=r===void 0?null:r;var s=void 0;if(kn!==null){var o=kn.memoizedState;if(s=o.destroy,r!==null&&fx(r,o.deps)){i.memoizedState=tf(e,n,s,r);return}}rn.flags|=t,i.memoizedState=tf(1|e,n,s,r)}function rE(t,e){return g0(8390656,8,t,e)}function mx(t,e){return cm(2048,8,t,e)}function bR(t,e){return cm(4,2,t,e)}function DR(t,e){return cm(4,4,t,e)}function FR(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function MR(t,e,n){return n=n!=null?n.concat([t]):null,cm(4,4,FR.bind(null,e,t),n)}function gx(){}function LR(t,e){var n=Ti();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&fx(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function OR(t,e){var n=Ti();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&fx(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function VR(t,e,n){return Ha&21?(zi(n,e)||(n=HC(),rn.lanes|=n,$a|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Br=!0),t.memoizedState=n)}function QL(t,e){var n=bt;bt=n!==0&&4>n?n:4,t(!0);var r=Wg.transition;Wg.transition={};try{t(!1),e()}finally{bt=n,Wg.transition=r}}function UR(){return Ti().memoizedState}function ZL(t,e,n){var r=Po(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},BR(t))zR(e,n);else if(n=wR(t,e,n,r),n!==null){var i=Cr();Mi(n,t,r,i),GR(n,e,r)}}function eO(t,e,n){var r=Po(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(BR(t))zR(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,zi(a,o)){var l=e.interleaved;l===null?(i.next=i,ax(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=wR(t,e,i,r),n!==null&&(i=Cr(),Mi(n,t,r,i),GR(n,e,r))}}function BR(t){var e=t.alternate;return t===rn||e!==null&&e===rn}function zR(t,e){Td=ep=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function GR(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,jy(t,n)}}var tp={readContext:wi,useCallback:nr,useContext:nr,useEffect:nr,useImperativeHandle:nr,useInsertionEffect:nr,useLayoutEffect:nr,useMemo:nr,useReducer:nr,useRef:nr,useState:nr,useDebugValue:nr,useDeferredValue:nr,useTransition:nr,useMutableSource:nr,useSyncExternalStore:nr,useId:nr,unstable_isNewReconciler:!1},tO={readContext:wi,useCallback:function(t,e){return Ji().memoizedState=[t,e===void 0?null:e],t},useContext:wi,useEffect:rE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,g0(4194308,4,FR.bind(null,e,t),n)},useLayoutEffect:function(t,e){return g0(4194308,4,t,e)},useInsertionEffect:function(t,e){return g0(4,2,t,e)},useMemo:function(t,e){var n=Ji();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ji();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ZL.bind(null,rn,t),[r.memoizedState,t]},useRef:function(t){var e=Ji();return t={current:t},e.memoizedState=t},useState:nE,useDebugValue:gx,useDeferredValue:function(t){return Ji().memoizedState=t},useTransition:function(){var t=nE(!1),e=t[0];return t=QL.bind(null,t[1]),Ji().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=rn,i=Ji();if(Xt){if(n===void 0)throw Error(_e(407));n=n()}else{if(n=e(),Vn===null)throw Error(_e(349));Ha&30||AR(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,rE(RR.bind(null,r,s,t),[t]),r.flags|=2048,tf(9,CR.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Ji(),e=Vn.identifierPrefix;if(Xt){var n=Rs,r=Cs;n=(r&~(1<<32-Fi(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Zd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=XL++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},nO={readContext:wi,useCallback:LR,useContext:wi,useEffect:mx,useImperativeHandle:MR,useInsertionEffect:bR,useLayoutEffect:DR,useMemo:OR,useReducer:qg,useRef:PR,useState:function(){return qg(ef)},useDebugValue:gx,useDeferredValue:function(t){var e=Ti();return VR(e,kn.memoizedState,t)},useTransition:function(){var t=qg(ef)[0],e=Ti().memoizedState;return[t,e]},useMutableSource:IR,useSyncExternalStore:SR,useId:UR,unstable_isNewReconciler:!1},rO={readContext:wi,useCallback:LR,useContext:wi,useEffect:mx,useImperativeHandle:MR,useInsertionEffect:bR,useLayoutEffect:DR,useMemo:OR,useReducer:jg,useRef:PR,useState:function(){return jg(ef)},useDebugValue:gx,useDeferredValue:function(t){var e=Ti();return kn===null?e.memoizedState=t:VR(e,kn.memoizedState,t)},useTransition:function(){var t=jg(ef)[0],e=Ti().memoizedState;return[t,e]},useMutableSource:IR,useSyncExternalStore:SR,useId:UR,unstable_isNewReconciler:!1};function Ni(t,e){if(t&&t.defaultProps){e=an({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function d_(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:an({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var dm={isMounted:function(t){return(t=t._reactInternals)?cl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Cr(),i=Po(t),s=Ds(r,i);s.payload=e,n!=null&&(s.callback=n),e=ko(t,s,i),e!==null&&(Mi(e,t,i,r),p0(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Cr(),i=Po(t),s=Ds(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ko(t,s,i),e!==null&&(Mi(e,t,i,r),p0(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Cr(),r=Po(t),i=Ds(n,r);i.tag=2,e!=null&&(i.callback=e),e=ko(t,i,r),e!==null&&(Mi(e,t,r,n),p0(e,t,r))}};function iE(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!jd(n,r)||!jd(i,s):!0}function HR(t,e,n){var r=!1,i=Lo,s=e.contextType;return typeof s=="object"&&s!==null?s=wi(s):(i=Wr(e)?za:mr.current,r=e.contextTypes,s=(r=r!=null)?Pu(t,i):Lo),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=dm,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function sE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&dm.enqueueReplaceState(e,e.state,null)}function f_(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},lx(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=wi(s):(s=Wr(e)?za:mr.current,i.context=Pu(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(d_(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&dm.enqueueReplaceState(i,i.state,null),Q0(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Mu(t,e){try{var n="",r=e;do n+=PM(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Kg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function h_(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var iO=typeof WeakMap=="function"?WeakMap:Map;function $R(t,e,n){n=Ds(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){rp||(rp=!0,E_=r),h_(t,e)},n}function WR(t,e,n){n=Ds(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){h_(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){h_(t,e),typeof r!="function"&&(No===null?No=new Set([this]):No.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function oE(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new iO;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=_O.bind(null,t,e,n),e.then(t,t))}function aE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function lE(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ds(-1,1),e.tag=2,ko(n,e,1))),n.lanes|=1),t)}var sO=Js.ReactCurrentOwner,Br=!1;function yr(t,e,n,r){e.child=t===null?xR(e,null,n,r):Du(e,t.child,n,r)}function uE(t,e,n,r,i){n=n.render;var s=e.ref;return du(e,i),r=hx(t,e,n,r,s,i),n=px(),t!==null&&!Br?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,zs(t,e,i)):(Xt&&n&&tx(e),e.flags|=1,yr(t,e,r,i),e.child)}function cE(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Ix(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,qR(t,e,s,r,i)):(t=x0(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:jd,n(o,r)&&t.ref===e.ref)return zs(t,e,i)}return e.flags|=1,t=bo(s,r),t.ref=e.ref,t.return=e,e.child=t}function qR(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(jd(s,r)&&t.ref===e.ref)if(Br=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Br=!0);else return e.lanes=t.lanes,zs(t,e,i)}return p_(t,e,n,r,i)}function jR(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Vt(ru,Xr),Xr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Vt(ru,Xr),Xr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Vt(ru,Xr),Xr|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Vt(ru,Xr),Xr|=r;return yr(t,e,i,n),e.child}function KR(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function p_(t,e,n,r,i){var s=Wr(n)?za:mr.current;return s=Pu(e,s),du(e,i),n=hx(t,e,n,r,s,i),r=px(),t!==null&&!Br?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,zs(t,e,i)):(Xt&&r&&tx(e),e.flags|=1,yr(t,e,n,i),e.child)}function dE(t,e,n,r,i){if(Wr(n)){var s=!0;j0(e)}else s=!1;if(du(e,i),e.stateNode===null)v0(t,e),HR(e,n,r),f_(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=wi(u):(u=Wr(n)?za:mr.current,u=Pu(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&sE(e,o,r,u),mo=!1;var h=e.memoizedState;o.state=h,Q0(e,r,o,i),l=e.memoizedState,a!==r||h!==l||$r.current||mo?(typeof c=="function"&&(d_(e,n,c,r),l=e.memoizedState),(a=mo||iE(e,n,a,r,h,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,TR(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Ni(e.type,a),o.props=u,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=wi(l):(l=Wr(n)?za:mr.current,l=Pu(e,l));var g=n.getDerivedStateFromProps;(c=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&sE(e,o,r,l),mo=!1,h=e.memoizedState,o.state=h,Q0(e,r,o,i);var _=e.memoizedState;a!==d||h!==_||$r.current||mo?(typeof g=="function"&&(d_(e,n,g,r),_=e.memoizedState),(u=mo||iE(e,n,u,r,h,_,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return m_(t,e,n,r,s,i)}function m_(t,e,n,r,i,s){KR(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&YT(e,n,!1),zs(t,e,s);r=e.stateNode,sO.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Du(e,t.child,null,s),e.child=Du(e,null,a,s)):yr(t,e,a,s),e.memoizedState=r.state,i&&YT(e,n,!0),e.child}function JR(t){var e=t.stateNode;e.pendingContext?JT(t,e.pendingContext,e.pendingContext!==e.context):e.context&&JT(t,e.context,!1),ux(t,e.containerInfo)}function fE(t,e,n,r,i){return bu(),rx(i),e.flags|=256,yr(t,e,n,r),e.child}var g_={dehydrated:null,treeContext:null,retryLane:0};function v_(t){return{baseLanes:t,cachePool:null,transitions:null}}function YR(t,e,n){var r=e.pendingProps,i=nn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Vt(nn,i&1),t===null)return u_(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=pm(o,r,0,null),t=Ma(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=v_(n),e.memoizedState=g_,t):vx(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return oO(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=bo(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=bo(a,s):(s=Ma(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?v_(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=g_,r}return s=t.child,t=s.sibling,r=bo(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function vx(t,e){return e=pm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Uh(t,e,n,r){return r!==null&&rx(r),Du(e,t.child,null,n),t=vx(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function oO(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Kg(Error(_e(422))),Uh(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=pm({mode:"visible",children:r.children},i,0,null),s=Ma(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Du(e,t.child,null,o),e.child.memoizedState=v_(o),e.memoizedState=g_,s);if(!(e.mode&1))return Uh(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(_e(419)),r=Kg(s,r,void 0),Uh(t,e,o,r)}if(a=(o&t.childLanes)!==0,Br||a){if(r=Vn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Bs(t,i),Mi(r,t,i,-1))}return Ex(),r=Kg(Error(_e(421))),Uh(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=yO.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ni=Ro(i.nextSibling),si=e,Xt=!0,bi=null,t!==null&&(hi[pi++]=Cs,hi[pi++]=Rs,hi[pi++]=Ga,Cs=t.id,Rs=t.overflow,Ga=e),e=vx(e,r.children),e.flags|=4096,e)}function hE(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),c_(t.return,e,n)}function Jg(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function XR(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(yr(t,e,r.children,n),r=nn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&hE(t,n,e);else if(t.tag===19)hE(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Vt(nn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Z0(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Jg(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Z0(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Jg(e,!0,n,null,s);break;case"together":Jg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function v0(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function zs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),$a|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(_e(153));if(e.child!==null){for(t=e.child,n=bo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=bo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function aO(t,e,n){switch(e.tag){case 3:JR(e),bu();break;case 5:ER(e);break;case 1:Wr(e.type)&&j0(e);break;case 4:ux(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Vt(Y0,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Vt(nn,nn.current&1),e.flags|=128,null):n&e.child.childLanes?YR(t,e,n):(Vt(nn,nn.current&1),t=zs(t,e,n),t!==null?t.sibling:null);Vt(nn,nn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return XR(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Vt(nn,nn.current),r)break;return null;case 22:case 23:return e.lanes=0,jR(t,e,n)}return zs(t,e,n)}var QR,__,ZR,ek;QR=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};__=function(){};ZR=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Na(ls.current);var s=null;switch(n){case"input":i=Bv(t,i),r=Bv(t,r),s=[];break;case"select":i=an({},i,{value:void 0}),r=an({},r,{value:void 0}),s=[];break;case"textarea":i=Hv(t,i),r=Hv(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=W0)}Wv(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Bd.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Bd.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Gt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};ek=function(t,e,n,r){n!==r&&(e.flags|=4)};function $c(t,e){if(!Xt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function rr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function lO(t,e,n){var r=e.pendingProps;switch(nx(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rr(e),null;case 1:return Wr(e.type)&&q0(),rr(e),null;case 3:return r=e.stateNode,Fu(),$t($r),$t(mr),dx(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Oh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,bi!==null&&(A_(bi),bi=null))),__(t,e),rr(e),null;case 5:cx(e);var i=Na(Qd.current);if(n=e.type,t!==null&&e.stateNode!=null)ZR(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(_e(166));return rr(e),null}if(t=Na(ls.current),Oh(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Qi]=e,r[Yd]=s,t=(e.mode&1)!==0,n){case"dialog":Gt("cancel",r),Gt("close",r);break;case"iframe":case"object":case"embed":Gt("load",r);break;case"video":case"audio":for(i=0;i<od.length;i++)Gt(od[i],r);break;case"source":Gt("error",r);break;case"img":case"image":case"link":Gt("error",r),Gt("load",r);break;case"details":Gt("toggle",r);break;case"input":TT(r,s),Gt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Gt("invalid",r);break;case"textarea":IT(r,s),Gt("invalid",r)}Wv(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Lh(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Lh(r.textContent,a,t),i=["children",""+a]):Bd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Gt("scroll",r)}switch(n){case"input":Rh(r),ET(r,s,!0);break;case"textarea":Rh(r),ST(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=W0)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=RC(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Qi]=e,t[Yd]=r,QR(t,e,!1,!1),e.stateNode=t;e:{switch(o=qv(n,r),n){case"dialog":Gt("cancel",t),Gt("close",t),i=r;break;case"iframe":case"object":case"embed":Gt("load",t),i=r;break;case"video":case"audio":for(i=0;i<od.length;i++)Gt(od[i],t);i=r;break;case"source":Gt("error",t),i=r;break;case"img":case"image":case"link":Gt("error",t),Gt("load",t),i=r;break;case"details":Gt("toggle",t),i=r;break;case"input":TT(t,r),i=Bv(t,r),Gt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=an({},r,{value:void 0}),Gt("invalid",t);break;case"textarea":IT(t,r),i=Hv(t,r),Gt("invalid",t);break;default:i=r}Wv(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?PC(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&kC(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&zd(t,l):typeof l=="number"&&zd(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Bd.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Gt("scroll",t):l!=null&&zy(t,s,l,o))}switch(n){case"input":Rh(t),ET(t,r,!1);break;case"textarea":Rh(t),ST(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Mo(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?au(t,!!r.multiple,s,!1):r.defaultValue!=null&&au(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=W0)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return rr(e),null;case 6:if(t&&e.stateNode!=null)ek(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(_e(166));if(n=Na(Qd.current),Na(ls.current),Oh(e)){if(r=e.stateNode,n=e.memoizedProps,r[Qi]=e,(s=r.nodeValue!==n)&&(t=si,t!==null))switch(t.tag){case 3:Lh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Lh(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Qi]=e,e.stateNode=r}return rr(e),null;case 13:if($t(nn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Xt&&ni!==null&&e.mode&1&&!(e.flags&128))_R(),bu(),e.flags|=98560,s=!1;else if(s=Oh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(_e(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(_e(317));s[Qi]=e}else bu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;rr(e),s=!1}else bi!==null&&(A_(bi),bi=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||nn.current&1?Nn===0&&(Nn=3):Ex())),e.updateQueue!==null&&(e.flags|=4),rr(e),null);case 4:return Fu(),__(t,e),t===null&&Kd(e.stateNode.containerInfo),rr(e),null;case 10:return ox(e.type._context),rr(e),null;case 17:return Wr(e.type)&&q0(),rr(e),null;case 19:if($t(nn),s=e.memoizedState,s===null)return rr(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)$c(s,!1);else{if(Nn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Z0(t),o!==null){for(e.flags|=128,$c(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Vt(nn,nn.current&1|2),e.child}t=t.sibling}s.tail!==null&&gn()>Lu&&(e.flags|=128,r=!0,$c(s,!1),e.lanes=4194304)}else{if(!r)if(t=Z0(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),$c(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Xt)return rr(e),null}else 2*gn()-s.renderingStartTime>Lu&&n!==1073741824&&(e.flags|=128,r=!0,$c(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=gn(),e.sibling=null,n=nn.current,Vt(nn,r?n&1|2:n&1),e):(rr(e),null);case 22:case 23:return Tx(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Xr&1073741824&&(rr(e),e.subtreeFlags&6&&(e.flags|=8192)):rr(e),null;case 24:return null;case 25:return null}throw Error(_e(156,e.tag))}function uO(t,e){switch(nx(e),e.tag){case 1:return Wr(e.type)&&q0(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Fu(),$t($r),$t(mr),dx(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return cx(e),null;case 13:if($t(nn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(_e(340));bu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return $t(nn),null;case 4:return Fu(),null;case 10:return ox(e.type._context),null;case 22:case 23:return Tx(),null;case 24:return null;default:return null}}var Bh=!1,ur=!1,cO=typeof WeakSet=="function"?WeakSet:Set,ze=null;function nu(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){cn(t,e,r)}else n.current=null}function y_(t,e,n){try{n()}catch(r){cn(t,e,r)}}var pE=!1;function dO(t,e){if(n_=G0,t=sR(),ex(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=t,h=null;t:for(;;){for(var g;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)h=d,d=g;for(;;){if(d===t)break t;if(h===n&&++u===i&&(a=o),h===s&&++c===r&&(l=o),(g=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(r_={focusedElem:t,selectionRange:n},G0=!1,ze=e;ze!==null;)if(e=ze,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ze=t;else for(;ze!==null;){e=ze;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var x=_.memoizedProps,w=_.memoizedState,y=e.stateNode,T=y.getSnapshotBeforeUpdate(e.elementType===e.type?x:Ni(e.type,x),w);y.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(_e(163))}}catch(N){cn(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,ze=t;break}ze=e.return}return _=pE,pE=!1,_}function Ed(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&y_(e,n,s)}i=i.next}while(i!==r)}}function fm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function x_(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function tk(t){var e=t.alternate;e!==null&&(t.alternate=null,tk(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Qi],delete e[Yd],delete e[o_],delete e[jL],delete e[KL])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function nk(t){return t.tag===5||t.tag===3||t.tag===4}function mE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||nk(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function w_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=W0));else if(r!==4&&(t=t.child,t!==null))for(w_(t,e,n),t=t.sibling;t!==null;)w_(t,e,n),t=t.sibling}function T_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(T_(t,e,n),t=t.sibling;t!==null;)T_(t,e,n),t=t.sibling}var Hn=null,Pi=!1;function ao(t,e,n){for(n=n.child;n!==null;)rk(t,e,n),n=n.sibling}function rk(t,e,n){if(as&&typeof as.onCommitFiberUnmount=="function")try{as.onCommitFiberUnmount(im,n)}catch{}switch(n.tag){case 5:ur||nu(n,e);case 6:var r=Hn,i=Pi;Hn=null,ao(t,e,n),Hn=r,Pi=i,Hn!==null&&(Pi?(t=Hn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Hn.removeChild(n.stateNode));break;case 18:Hn!==null&&(Pi?(t=Hn,n=n.stateNode,t.nodeType===8?Gg(t.parentNode,n):t.nodeType===1&&Gg(t,n),Wd(t)):Gg(Hn,n.stateNode));break;case 4:r=Hn,i=Pi,Hn=n.stateNode.containerInfo,Pi=!0,ao(t,e,n),Hn=r,Pi=i;break;case 0:case 11:case 14:case 15:if(!ur&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&y_(n,e,o),i=i.next}while(i!==r)}ao(t,e,n);break;case 1:if(!ur&&(nu(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){cn(n,e,a)}ao(t,e,n);break;case 21:ao(t,e,n);break;case 22:n.mode&1?(ur=(r=ur)||n.memoizedState!==null,ao(t,e,n),ur=r):ao(t,e,n);break;default:ao(t,e,n)}}function gE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new cO),e.forEach(function(r){var i=xO.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ri(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Hn=a.stateNode,Pi=!1;break e;case 3:Hn=a.stateNode.containerInfo,Pi=!0;break e;case 4:Hn=a.stateNode.containerInfo,Pi=!0;break e}a=a.return}if(Hn===null)throw Error(_e(160));rk(s,o,i),Hn=null,Pi=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){cn(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ik(e,t),e=e.sibling}function ik(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ri(e,t),qi(t),r&4){try{Ed(3,t,t.return),fm(3,t)}catch(x){cn(t,t.return,x)}try{Ed(5,t,t.return)}catch(x){cn(t,t.return,x)}}break;case 1:Ri(e,t),qi(t),r&512&&n!==null&&nu(n,n.return);break;case 5:if(Ri(e,t),qi(t),r&512&&n!==null&&nu(n,n.return),t.flags&32){var i=t.stateNode;try{zd(i,"")}catch(x){cn(t,t.return,x)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&AC(i,s),qv(a,o);var u=qv(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?PC(i,d):c==="dangerouslySetInnerHTML"?kC(i,d):c==="children"?zd(i,d):zy(i,c,d,u)}switch(a){case"input":zv(i,s);break;case"textarea":CC(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?au(i,!!s.multiple,g,!1):h!==!!s.multiple&&(s.defaultValue!=null?au(i,!!s.multiple,s.defaultValue,!0):au(i,!!s.multiple,s.multiple?[]:"",!1))}i[Yd]=s}catch(x){cn(t,t.return,x)}}break;case 6:if(Ri(e,t),qi(t),r&4){if(t.stateNode===null)throw Error(_e(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(x){cn(t,t.return,x)}}break;case 3:if(Ri(e,t),qi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Wd(e.containerInfo)}catch(x){cn(t,t.return,x)}break;case 4:Ri(e,t),qi(t);break;case 13:Ri(e,t),qi(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(xx=gn())),r&4&&gE(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(ur=(u=ur)||c,Ri(e,t),ur=u):Ri(e,t),qi(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(ze=t,c=t.child;c!==null;){for(d=ze=c;ze!==null;){switch(h=ze,g=h.child,h.tag){case 0:case 11:case 14:case 15:Ed(4,h,h.return);break;case 1:nu(h,h.return);var _=h.stateNode;if(typeof _.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(x){cn(r,n,x)}}break;case 5:nu(h,h.return);break;case 22:if(h.memoizedState!==null){_E(d);continue}}g!==null?(g.return=h,ze=g):_E(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=NC("display",o))}catch(x){cn(t,t.return,x)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(x){cn(t,t.return,x)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ri(e,t),qi(t),r&4&&gE(t);break;case 21:break;default:Ri(e,t),qi(t)}}function qi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(nk(n)){var r=n;break e}n=n.return}throw Error(_e(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(zd(i,""),r.flags&=-33);var s=mE(t);T_(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=mE(t);w_(t,a,o);break;default:throw Error(_e(161))}}catch(l){cn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function fO(t,e,n){ze=t,sk(t)}function sk(t,e,n){for(var r=(t.mode&1)!==0;ze!==null;){var i=ze,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Bh;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||ur;a=Bh;var u=ur;if(Bh=o,(ur=l)&&!u)for(ze=i;ze!==null;)o=ze,l=o.child,o.tag===22&&o.memoizedState!==null?yE(i):l!==null?(l.return=o,ze=l):yE(i);for(;s!==null;)ze=s,sk(s),s=s.sibling;ze=i,Bh=a,ur=u}vE(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ze=s):vE(t)}}function vE(t){for(;ze!==null;){var e=ze;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ur||fm(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ur)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ni(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&tE(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}tE(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Wd(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(_e(163))}ur||e.flags&512&&x_(e)}catch(h){cn(e,e.return,h)}}if(e===t){ze=null;break}if(n=e.sibling,n!==null){n.return=e.return,ze=n;break}ze=e.return}}function _E(t){for(;ze!==null;){var e=ze;if(e===t){ze=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ze=n;break}ze=e.return}}function yE(t){for(;ze!==null;){var e=ze;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{fm(4,e)}catch(l){cn(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){cn(e,i,l)}}var s=e.return;try{x_(e)}catch(l){cn(e,s,l)}break;case 5:var o=e.return;try{x_(e)}catch(l){cn(e,o,l)}}}catch(l){cn(e,e.return,l)}if(e===t){ze=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ze=a;break}ze=e.return}}var hO=Math.ceil,np=Js.ReactCurrentDispatcher,_x=Js.ReactCurrentOwner,vi=Js.ReactCurrentBatchConfig,Tt=0,Vn=null,In=null,Kn=0,Xr=0,ru=Zo(0),Nn=0,nf=null,$a=0,hm=0,yx=0,Id=null,Ur=null,xx=0,Lu=1/0,Is=null,rp=!1,E_=null,No=null,zh=!1,wo=null,ip=0,Sd=0,I_=null,_0=-1,y0=0;function Cr(){return Tt&6?gn():_0!==-1?_0:_0=gn()}function Po(t){return t.mode&1?Tt&2&&Kn!==0?Kn&-Kn:YL.transition!==null?(y0===0&&(y0=HC()),y0):(t=bt,t!==0||(t=window.event,t=t===void 0?16:YC(t.type)),t):1}function Mi(t,e,n,r){if(50<Sd)throw Sd=0,I_=null,Error(_e(185));Of(t,n,r),(!(Tt&2)||t!==Vn)&&(t===Vn&&(!(Tt&2)&&(hm|=n),Nn===4&&vo(t,Kn)),qr(t,r),n===1&&Tt===0&&!(e.mode&1)&&(Lu=gn()+500,um&&ea()))}function qr(t,e){var n=t.callbackNode;YM(t,e);var r=z0(t,t===Vn?Kn:0);if(r===0)n!==null&&RT(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&RT(n),e===1)t.tag===0?JL(xE.bind(null,t)):mR(xE.bind(null,t)),WL(function(){!(Tt&6)&&ea()}),n=null;else{switch($C(r)){case 1:n=qy;break;case 4:n=zC;break;case 16:n=B0;break;case 536870912:n=GC;break;default:n=B0}n=hk(n,ok.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ok(t,e){if(_0=-1,y0=0,Tt&6)throw Error(_e(327));var n=t.callbackNode;if(fu()&&t.callbackNode!==n)return null;var r=z0(t,t===Vn?Kn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=sp(t,r);else{e=r;var i=Tt;Tt|=2;var s=lk();(Vn!==t||Kn!==e)&&(Is=null,Lu=gn()+500,Fa(t,e));do try{gO();break}catch(a){ak(t,a)}while(!0);sx(),np.current=s,Tt=i,In!==null?e=0:(Vn=null,Kn=0,e=Nn)}if(e!==0){if(e===2&&(i=Xv(t),i!==0&&(r=i,e=S_(t,i))),e===1)throw n=nf,Fa(t,0),vo(t,r),qr(t,gn()),n;if(e===6)vo(t,r);else{if(i=t.current.alternate,!(r&30)&&!pO(i)&&(e=sp(t,r),e===2&&(s=Xv(t),s!==0&&(r=s,e=S_(t,s))),e===1))throw n=nf,Fa(t,0),vo(t,r),qr(t,gn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(_e(345));case 2:_a(t,Ur,Is);break;case 3:if(vo(t,r),(r&130023424)===r&&(e=xx+500-gn(),10<e)){if(z0(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Cr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=s_(_a.bind(null,t,Ur,Is),e);break}_a(t,Ur,Is);break;case 4:if(vo(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Fi(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=gn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*hO(r/1960))-r,10<r){t.timeoutHandle=s_(_a.bind(null,t,Ur,Is),r);break}_a(t,Ur,Is);break;case 5:_a(t,Ur,Is);break;default:throw Error(_e(329))}}}return qr(t,gn()),t.callbackNode===n?ok.bind(null,t):null}function S_(t,e){var n=Id;return t.current.memoizedState.isDehydrated&&(Fa(t,e).flags|=256),t=sp(t,e),t!==2&&(e=Ur,Ur=n,e!==null&&A_(e)),t}function A_(t){Ur===null?Ur=t:Ur.push.apply(Ur,t)}function pO(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!zi(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function vo(t,e){for(e&=~yx,e&=~hm,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Fi(e),r=1<<n;t[n]=-1,e&=~r}}function xE(t){if(Tt&6)throw Error(_e(327));fu();var e=z0(t,0);if(!(e&1))return qr(t,gn()),null;var n=sp(t,e);if(t.tag!==0&&n===2){var r=Xv(t);r!==0&&(e=r,n=S_(t,r))}if(n===1)throw n=nf,Fa(t,0),vo(t,e),qr(t,gn()),n;if(n===6)throw Error(_e(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_a(t,Ur,Is),qr(t,gn()),null}function wx(t,e){var n=Tt;Tt|=1;try{return t(e)}finally{Tt=n,Tt===0&&(Lu=gn()+500,um&&ea())}}function Wa(t){wo!==null&&wo.tag===0&&!(Tt&6)&&fu();var e=Tt;Tt|=1;var n=vi.transition,r=bt;try{if(vi.transition=null,bt=1,t)return t()}finally{bt=r,vi.transition=n,Tt=e,!(Tt&6)&&ea()}}function Tx(){Xr=ru.current,$t(ru)}function Fa(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,$L(n)),In!==null)for(n=In.return;n!==null;){var r=n;switch(nx(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&q0();break;case 3:Fu(),$t($r),$t(mr),dx();break;case 5:cx(r);break;case 4:Fu();break;case 13:$t(nn);break;case 19:$t(nn);break;case 10:ox(r.type._context);break;case 22:case 23:Tx()}n=n.return}if(Vn=t,In=t=bo(t.current,null),Kn=Xr=e,Nn=0,nf=null,yx=hm=$a=0,Ur=Id=null,ka!==null){for(e=0;e<ka.length;e++)if(n=ka[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ka=null}return t}function ak(t,e){do{var n=In;try{if(sx(),m0.current=tp,ep){for(var r=rn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ep=!1}if(Ha=0,Mn=kn=rn=null,Td=!1,Zd=0,_x.current=null,n===null||n.return===null){Nn=1,nf=e,In=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Kn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var g=aE(o);if(g!==null){g.flags&=-257,lE(g,o,a,s,e),g.mode&1&&oE(s,u,e),e=g,l=u;var _=e.updateQueue;if(_===null){var x=new Set;x.add(l),e.updateQueue=x}else _.add(l);break e}else{if(!(e&1)){oE(s,u,e),Ex();break e}l=Error(_e(426))}}else if(Xt&&a.mode&1){var w=aE(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),lE(w,o,a,s,e),rx(Mu(l,a));break e}}s=l=Mu(l,a),Nn!==4&&(Nn=2),Id===null?Id=[s]:Id.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=$R(s,l,e);eE(s,y);break e;case 1:a=l;var T=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof T.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(No===null||!No.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var N=WR(s,a,e);eE(s,N);break e}}s=s.return}while(s!==null)}ck(n)}catch(F){e=F,In===n&&n!==null&&(In=n=n.return);continue}break}while(!0)}function lk(){var t=np.current;return np.current=tp,t===null?tp:t}function Ex(){(Nn===0||Nn===3||Nn===2)&&(Nn=4),Vn===null||!($a&268435455)&&!(hm&268435455)||vo(Vn,Kn)}function sp(t,e){var n=Tt;Tt|=2;var r=lk();(Vn!==t||Kn!==e)&&(Is=null,Fa(t,e));do try{mO();break}catch(i){ak(t,i)}while(!0);if(sx(),Tt=n,np.current=r,In!==null)throw Error(_e(261));return Vn=null,Kn=0,Nn}function mO(){for(;In!==null;)uk(In)}function gO(){for(;In!==null&&!zM();)uk(In)}function uk(t){var e=fk(t.alternate,t,Xr);t.memoizedProps=t.pendingProps,e===null?ck(t):In=e,_x.current=null}function ck(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=uO(n,e),n!==null){n.flags&=32767,In=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Nn=6,In=null;return}}else if(n=lO(n,e,Xr),n!==null){In=n;return}if(e=e.sibling,e!==null){In=e;return}In=e=t}while(e!==null);Nn===0&&(Nn=5)}function _a(t,e,n){var r=bt,i=vi.transition;try{vi.transition=null,bt=1,vO(t,e,n,r)}finally{vi.transition=i,bt=r}return null}function vO(t,e,n,r){do fu();while(wo!==null);if(Tt&6)throw Error(_e(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(_e(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(XM(t,s),t===Vn&&(In=Vn=null,Kn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||zh||(zh=!0,hk(B0,function(){return fu(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=vi.transition,vi.transition=null;var o=bt;bt=1;var a=Tt;Tt|=4,_x.current=null,dO(t,n),ik(n,t),OL(r_),G0=!!n_,r_=n_=null,t.current=n,fO(n),GM(),Tt=a,bt=o,vi.transition=s}else t.current=n;if(zh&&(zh=!1,wo=t,ip=i),s=t.pendingLanes,s===0&&(No=null),WM(n.stateNode),qr(t,gn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(rp)throw rp=!1,t=E_,E_=null,t;return ip&1&&t.tag!==0&&fu(),s=t.pendingLanes,s&1?t===I_?Sd++:(Sd=0,I_=t):Sd=0,ea(),null}function fu(){if(wo!==null){var t=$C(ip),e=vi.transition,n=bt;try{if(vi.transition=null,bt=16>t?16:t,wo===null)var r=!1;else{if(t=wo,wo=null,ip=0,Tt&6)throw Error(_e(331));var i=Tt;for(Tt|=4,ze=t.current;ze!==null;){var s=ze,o=s.child;if(ze.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(ze=u;ze!==null;){var c=ze;switch(c.tag){case 0:case 11:case 15:Ed(8,c,s)}var d=c.child;if(d!==null)d.return=c,ze=d;else for(;ze!==null;){c=ze;var h=c.sibling,g=c.return;if(tk(c),c===u){ze=null;break}if(h!==null){h.return=g,ze=h;break}ze=g}}}var _=s.alternate;if(_!==null){var x=_.child;if(x!==null){_.child=null;do{var w=x.sibling;x.sibling=null,x=w}while(x!==null)}}ze=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ze=o;else e:for(;ze!==null;){if(s=ze,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ed(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,ze=y;break e}ze=s.return}}var T=t.current;for(ze=T;ze!==null;){o=ze;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,ze=E;else e:for(o=T;ze!==null;){if(a=ze,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:fm(9,a)}}catch(F){cn(a,a.return,F)}if(a===o){ze=null;break e}var N=a.sibling;if(N!==null){N.return=a.return,ze=N;break e}ze=a.return}}if(Tt=i,ea(),as&&typeof as.onPostCommitFiberRoot=="function")try{as.onPostCommitFiberRoot(im,t)}catch{}r=!0}return r}finally{bt=n,vi.transition=e}}return!1}function wE(t,e,n){e=Mu(n,e),e=$R(t,e,1),t=ko(t,e,1),e=Cr(),t!==null&&(Of(t,1,e),qr(t,e))}function cn(t,e,n){if(t.tag===3)wE(t,t,n);else for(;e!==null;){if(e.tag===3){wE(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(No===null||!No.has(r))){t=Mu(n,t),t=WR(e,t,1),e=ko(e,t,1),t=Cr(),e!==null&&(Of(e,1,t),qr(e,t));break}}e=e.return}}function _O(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Cr(),t.pingedLanes|=t.suspendedLanes&n,Vn===t&&(Kn&n)===n&&(Nn===4||Nn===3&&(Kn&130023424)===Kn&&500>gn()-xx?Fa(t,0):yx|=n),qr(t,e)}function dk(t,e){e===0&&(t.mode&1?(e=Ph,Ph<<=1,!(Ph&130023424)&&(Ph=4194304)):e=1);var n=Cr();t=Bs(t,e),t!==null&&(Of(t,e,n),qr(t,n))}function yO(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),dk(t,n)}function xO(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(_e(314))}r!==null&&r.delete(e),dk(t,n)}var fk;fk=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||$r.current)Br=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Br=!1,aO(t,e,n);Br=!!(t.flags&131072)}else Br=!1,Xt&&e.flags&1048576&&gR(e,J0,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;v0(t,e),t=e.pendingProps;var i=Pu(e,mr.current);du(e,n),i=hx(null,e,r,t,i,n);var s=px();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Wr(r)?(s=!0,j0(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,lx(e),i.updater=dm,e.stateNode=i,i._reactInternals=e,f_(e,r,t,n),e=m_(null,e,r,!0,s,n)):(e.tag=0,Xt&&s&&tx(e),yr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(v0(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=TO(r),t=Ni(r,t),i){case 0:e=p_(null,e,r,t,n);break e;case 1:e=dE(null,e,r,t,n);break e;case 11:e=uE(null,e,r,t,n);break e;case 14:e=cE(null,e,r,Ni(r.type,t),n);break e}throw Error(_e(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ni(r,i),p_(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ni(r,i),dE(t,e,r,i,n);case 3:e:{if(JR(e),t===null)throw Error(_e(387));r=e.pendingProps,s=e.memoizedState,i=s.element,TR(t,e),Q0(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Mu(Error(_e(423)),e),e=fE(t,e,r,n,i);break e}else if(r!==i){i=Mu(Error(_e(424)),e),e=fE(t,e,r,n,i);break e}else for(ni=Ro(e.stateNode.containerInfo.firstChild),si=e,Xt=!0,bi=null,n=xR(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(bu(),r===i){e=zs(t,e,n);break e}yr(t,e,r,n)}e=e.child}return e;case 5:return ER(e),t===null&&u_(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,i_(r,i)?o=null:s!==null&&i_(r,s)&&(e.flags|=32),KR(t,e),yr(t,e,o,n),e.child;case 6:return t===null&&u_(e),null;case 13:return YR(t,e,n);case 4:return ux(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Du(e,null,r,n):yr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ni(r,i),uE(t,e,r,i,n);case 7:return yr(t,e,e.pendingProps,n),e.child;case 8:return yr(t,e,e.pendingProps.children,n),e.child;case 12:return yr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Vt(Y0,r._currentValue),r._currentValue=o,s!==null)if(zi(s.value,o)){if(s.children===i.children&&!$r.current){e=zs(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ds(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),c_(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(_e(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),c_(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}yr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,du(e,n),i=wi(i),r=r(i),e.flags|=1,yr(t,e,r,n),e.child;case 14:return r=e.type,i=Ni(r,e.pendingProps),i=Ni(r.type,i),cE(t,e,r,i,n);case 15:return qR(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ni(r,i),v0(t,e),e.tag=1,Wr(r)?(t=!0,j0(e)):t=!1,du(e,n),HR(e,r,i),f_(e,r,i,n),m_(null,e,r,!0,t,n);case 19:return XR(t,e,n);case 22:return jR(t,e,n)}throw Error(_e(156,e.tag))};function hk(t,e){return BC(t,e)}function wO(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mi(t,e,n,r){return new wO(t,e,n,r)}function Ix(t){return t=t.prototype,!(!t||!t.isReactComponent)}function TO(t){if(typeof t=="function")return Ix(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Hy)return 11;if(t===$y)return 14}return 2}function bo(t,e){var n=t.alternate;return n===null?(n=mi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function x0(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Ix(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case jl:return Ma(n.children,i,s,e);case Gy:o=8,i|=8;break;case Lv:return t=mi(12,n,e,i|2),t.elementType=Lv,t.lanes=s,t;case Ov:return t=mi(13,n,e,i),t.elementType=Ov,t.lanes=s,t;case Vv:return t=mi(19,n,e,i),t.elementType=Vv,t.lanes=s,t;case EC:return pm(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case wC:o=10;break e;case TC:o=9;break e;case Hy:o=11;break e;case $y:o=14;break e;case po:o=16,r=null;break e}throw Error(_e(130,t==null?t:typeof t,""))}return e=mi(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ma(t,e,n,r){return t=mi(7,t,r,e),t.lanes=n,t}function pm(t,e,n,r){return t=mi(22,t,r,e),t.elementType=EC,t.lanes=n,t.stateNode={isHidden:!1},t}function Yg(t,e,n){return t=mi(6,t,null,e),t.lanes=n,t}function Xg(t,e,n){return e=mi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function EO(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pg(0),this.expirationTimes=Pg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pg(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Sx(t,e,n,r,i,s,o,a,l){return t=new EO(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=mi(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},lx(s),t}function IO(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ql,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function pk(t){if(!t)return Lo;t=t._reactInternals;e:{if(cl(t)!==t||t.tag!==1)throw Error(_e(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Wr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(_e(171))}if(t.tag===1){var n=t.type;if(Wr(n))return pR(t,n,e)}return e}function mk(t,e,n,r,i,s,o,a,l){return t=Sx(n,r,!0,t,i,s,o,a,l),t.context=pk(null),n=t.current,r=Cr(),i=Po(n),s=Ds(r,i),s.callback=e??null,ko(n,s,i),t.current.lanes=i,Of(t,i,r),qr(t,r),t}function mm(t,e,n,r){var i=e.current,s=Cr(),o=Po(i);return n=pk(n),e.context===null?e.context=n:e.pendingContext=n,e=Ds(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ko(i,e,o),t!==null&&(Mi(t,i,o,s),p0(t,i,o)),o}function op(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function TE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ax(t,e){TE(t,e),(t=t.alternate)&&TE(t,e)}function SO(){return null}var gk=typeof reportError=="function"?reportError:function(t){console.error(t)};function Cx(t){this._internalRoot=t}gm.prototype.render=Cx.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(_e(409));mm(t,e,null,null)};gm.prototype.unmount=Cx.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Wa(function(){mm(null,t,null,null)}),e[Us]=null}};function gm(t){this._internalRoot=t}gm.prototype.unstable_scheduleHydration=function(t){if(t){var e=jC();t={blockedOn:null,target:t,priority:e};for(var n=0;n<go.length&&e!==0&&e<go[n].priority;n++);go.splice(n,0,t),n===0&&JC(t)}};function Rx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function EE(){}function AO(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=op(o);s.call(u)}}var o=mk(e,r,t,0,null,!1,!1,"",EE);return t._reactRootContainer=o,t[Us]=o.current,Kd(t.nodeType===8?t.parentNode:t),Wa(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=op(l);a.call(u)}}var l=Sx(t,0,!1,null,null,!1,!1,"",EE);return t._reactRootContainer=l,t[Us]=l.current,Kd(t.nodeType===8?t.parentNode:t),Wa(function(){mm(e,l,n,r)}),l}function _m(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=op(o);a.call(l)}}mm(e,o,t,i)}else o=AO(n,e,t,i,r);return op(o)}WC=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=sd(e.pendingLanes);n!==0&&(jy(e,n|1),qr(e,gn()),!(Tt&6)&&(Lu=gn()+500,ea()))}break;case 13:Wa(function(){var r=Bs(t,1);if(r!==null){var i=Cr();Mi(r,t,1,i)}}),Ax(t,1)}};Ky=function(t){if(t.tag===13){var e=Bs(t,134217728);if(e!==null){var n=Cr();Mi(e,t,134217728,n)}Ax(t,134217728)}};qC=function(t){if(t.tag===13){var e=Po(t),n=Bs(t,e);if(n!==null){var r=Cr();Mi(n,t,e,r)}Ax(t,e)}};jC=function(){return bt};KC=function(t,e){var n=bt;try{return bt=t,e()}finally{bt=n}};Kv=function(t,e,n){switch(e){case"input":if(zv(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=lm(r);if(!i)throw Error(_e(90));SC(r),zv(r,i)}}}break;case"textarea":CC(t,n);break;case"select":e=n.value,e!=null&&au(t,!!n.multiple,e,!1)}};FC=wx;MC=Wa;var CO={usingClientEntryPoint:!1,Events:[Uf,Xl,lm,bC,DC,wx]},Wc={findFiberByHostInstance:Ra,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},RO={bundleType:Wc.bundleType,version:Wc.version,rendererPackageName:Wc.rendererPackageName,rendererConfig:Wc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Js.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=VC(t),t===null?null:t.stateNode},findFiberByHostInstance:Wc.findFiberByHostInstance||SO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gh.isDisabled&&Gh.supportsFiber)try{im=Gh.inject(RO),as=Gh}catch{}}li.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CO;li.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rx(e))throw Error(_e(200));return IO(t,e,null,n)};li.createRoot=function(t,e){if(!Rx(t))throw Error(_e(299));var n=!1,r="",i=gk;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Sx(t,1,!1,null,null,n,!1,r,i),t[Us]=e.current,Kd(t.nodeType===8?t.parentNode:t),new Cx(e)};li.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(_e(188)):(t=Object.keys(t).join(","),Error(_e(268,t)));return t=VC(e),t=t===null?null:t.stateNode,t};li.flushSync=function(t){return Wa(t)};li.hydrate=function(t,e,n){if(!vm(e))throw Error(_e(200));return _m(null,t,e,!0,n)};li.hydrateRoot=function(t,e,n){if(!Rx(t))throw Error(_e(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=gk;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=mk(e,null,t,1,n??null,i,!1,s,o),t[Us]=e.current,Kd(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new gm(e)};li.render=function(t,e,n){if(!vm(e))throw Error(_e(200));return _m(null,t,e,!1,n)};li.unmountComponentAtNode=function(t){if(!vm(t))throw Error(_e(40));return t._reactRootContainer?(Wa(function(){_m(null,null,t,!1,function(){t._reactRootContainer=null,t[Us]=null})}),!0):!1};li.unstable_batchedUpdates=wx;li.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!vm(n))throw Error(_e(200));if(t==null||t._reactInternals===void 0)throw Error(_e(38));return _m(t,e,n,!1,r)};li.version="18.3.1-next-f1338f8080-20240426";function vk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vk)}catch(t){console.error(t)}}vk(),vC.exports=li;var kO=vC.exports,_k,IE=kO;_k=IE.createRoot,IE.hydrateRoot;/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var ap={};ap.version="0.20.3";var As=1200,rf=function(t){As=t};function NO(){rf(1200)}var Hh=function(e){return String.fromCharCode(e)},SE=function(e){return String.fromCharCode(e)},cr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function lp(t){for(var e="",n=0,r=0,i=0,s=0,o=0,a=0,l=0,u=0;u<t.length;)n=t.charCodeAt(u++),s=n>>2,r=t.charCodeAt(u++),o=(n&3)<<4|r>>4,i=t.charCodeAt(u++),a=(r&15)<<2|i>>6,l=i&63,isNaN(r)?a=l=64:isNaN(i)&&(l=64),e+=cr.charAt(s)+cr.charAt(o)+cr.charAt(a)+cr.charAt(l);return e}function PO(t){for(var e="",n=0,r=0,i=0,s=0,o=0,a=0,l=0,u=0;u<t.length;)n=t.charCodeAt(u++),n>255&&(n=95),s=n>>2,r=t.charCodeAt(u++),r>255&&(r=95),o=(n&3)<<4|r>>4,i=t.charCodeAt(u++),i>255&&(i=95),a=(r&15)<<2|i>>6,l=i&63,isNaN(r)?a=l=64:isNaN(i)&&(l=64),e+=cr.charAt(s)+cr.charAt(o)+cr.charAt(a)+cr.charAt(l);return e}function bO(t){for(var e="",n=0,r=0,i=0,s=0,o=0,a=0,l=0,u=0;u<t.length;)n=t[u++],s=n>>2,r=t[u++],o=(n&3)<<4|r>>4,i=t[u++],a=(r&15)<<2|i>>6,l=i&63,isNaN(r)?a=l=64:isNaN(i)&&(l=64),e+=cr.charAt(s)+cr.charAt(o)+cr.charAt(a)+cr.charAt(l);return e}function Oo(t){var e="",n=0,r=0,i=0,s=0,o=0,a=0,l=0;if(t.slice(0,5)=="data:"){var u=t.slice(0,1024).indexOf(";base64,");u>-1&&(t=t.slice(u+8))}t=t.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<t.length;)s=cr.indexOf(t.charAt(u++)),o=cr.indexOf(t.charAt(u++)),n=s<<2|o>>4,e+=String.fromCharCode(n),a=cr.indexOf(t.charAt(u++)),r=(o&15)<<4|a>>2,a!==64&&(e+=String.fromCharCode(r)),l=cr.indexOf(t.charAt(u++)),i=(a&3)<<6|l,l!==64&&(e+=String.fromCharCode(i));return e}var Ct=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),vs=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,n){return n?new Buffer(e,n):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}(),up=function(){if(typeof Buffer>"u")return!1;var t=vs([65,0]);if(!t)return!1;var e=t.toString("utf16le");return e.length==1}();function qa(t){return Ct?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function AE(t){return Ct?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var Qr=function(e){return Ct?vs(e,"binary"):e.split("").map(function(n){return n.charCodeAt(0)&255})};function ym(t){if(typeof ArrayBuffer>"u")return Qr(t);for(var e=new ArrayBuffer(t.length),n=new Uint8Array(e),r=0;r!=t.length;++r)n[r]=t.charCodeAt(r)&255;return e}function ja(t){if(Array.isArray(t))return t.map(function(r){return String.fromCharCode(r)}).join("");for(var e=[],n=0;n<t.length;++n)e[n]=String.fromCharCode(t[n]);return e.join("")}function DO(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}var Sn=Ct?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:vs(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,n=0;for(e=0;e<t.length;++e)n+=t[e].length;var r=new Uint8Array(n),i=0;for(e=0,n=0;e<t.length;n+=i,++e)i=t[e].length,t[e]instanceof Uint8Array?r.set(t[e],n):typeof t[e]=="string"?r.set(new Uint8Array(Qr(t[e])),n):r.set(new Uint8Array(t[e]),n);return r}return[].concat.apply([],t.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function FO(t){for(var e=[],n=0,r=t.length+250,i=qa(t.length+255),s=0;s<t.length;++s){var o=t.charCodeAt(s);if(o<128)i[n++]=o;else if(o<2048)i[n++]=192|o>>6&31,i[n++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var a=t.charCodeAt(++s)&1023;i[n++]=240|o>>8&7,i[n++]=128|o>>2&63,i[n++]=128|a>>6&15|(o&3)<<4,i[n++]=128|a&63}else i[n++]=224|o>>12&15,i[n++]=128|o>>6&63,i[n++]=128|o&63;n>r&&(e.push(i.slice(0,n)),n=0,i=qa(65535),r=65530)}return e.push(i.slice(0,n)),Sn(e)}var Ad=/\u0000/g,$h=/[\u0001-\u0006]/g;function hu(t){for(var e="",n=t.length-1;n>=0;)e+=t.charAt(n--);return e}function Di(t,e){var n=""+t;return n.length>=e?n:Jt("0",e-n.length)+n}function kx(t,e){var n=""+t;return n.length>=e?n:Jt(" ",e-n.length)+n}function cp(t,e){var n=""+t;return n.length>=e?n:n+Jt(" ",e-n.length)}function MO(t,e){var n=""+Math.round(t);return n.length>=e?n:Jt("0",e-n.length)+n}function LO(t,e){var n=""+t;return n.length>=e?n:Jt("0",e-n.length)+n}var CE=Math.pow(2,32);function Pl(t,e){if(t>CE||t<-CE)return MO(t,e);var n=Math.round(t);return LO(n,e)}function dp(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var RE=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Qg=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function OO(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var Wt={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},kE={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},VO={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function fp(t,e,n){for(var r=t<0?-1:1,i=t*r,s=0,o=1,a=0,l=1,u=0,c=0,d=Math.floor(i);u<e&&(d=Math.floor(i),a=d*o+s,c=d*u+l,!(i-d<5e-8));)i=1/(i-d),s=o,o=a,l=u,u=c;if(c>e&&(u>e?(c=l,a=s):(c=u,a=o)),!n)return[0,r*a,c];var h=Math.floor(r*a/c);return[h,r*a-h*c,c]}function UO(t){var e=t.toPrecision(16);if(e.indexOf("e")>-1){var n=e.slice(0,e.indexOf("e"));return n=n.indexOf(".")>-1?n.slice(0,n.slice(0,2)=="0."?17:16):n.slice(0,15)+Jt("0",n.length-15),n+e.slice(e.indexOf("e"))}var r=e.indexOf(".")>-1?e.slice(0,e.slice(0,2)=="0."?17:16):e.slice(0,15)+Jt("0",e.length-15);return Number(r)}function bl(t,e,n){if(t>2958465||t<0)return null;t=UO(t);var r=t|0,i=Math.floor(86400*(t-r)),s=0,o=[],a={D:r,T:i,u:86400*(t-r)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(a.u)<1e-6&&(a.u=0),e&&e.date1904&&(r+=1462),a.u>.9999&&(a.u=0,++i==86400&&(a.T=i=0,++r,++a.D)),r===60)o=n?[1317,10,29]:[1900,2,29],s=3;else if(r===0)o=n?[1317,8,29]:[1900,1,0],s=6;else{r>60&&--r;var l=new Date(1900,0,1);l.setDate(l.getDate()+r-1),o=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),r<60&&(s=(s+6)%7),n&&(s=$O(l,o))}return a.y=o[0],a.m=o[1],a.d=o[2],a.S=i%60,i=Math.floor(i/60),a.M=i%60,i=Math.floor(i/60),a.H=i,a.q=s,a}function Nx(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function BO(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function zO(t){var e=t<0?12:11,n=Nx(t.toFixed(12));return n.length<=e||(n=t.toPrecision(10),n.length<=e)?n:t.toExponential(5)}function GO(t){var e=Nx(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function HO(t){if(!isFinite(t))return isNaN(t)?"#NUM!":"#DIV/0!";var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),n;return e>=-4&&e<=-1?n=t.toPrecision(10+e):Math.abs(e)<=9?n=zO(t):e===10?n=t.toFixed(10).substr(0,12):n=GO(t),Nx(BO(n.toUpperCase()))}function C_(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):HO(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Gs(14,Qn(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function $O(t,e){e[0]-=581;var n=t.getDay();return t<60&&(n=(n+6)%7),n}function WO(t,e,n,r){var i="",s=0,o=0,a=n.y,l,u=0;switch(t){case 98:a=n.y+543;case 121:switch(e.length){case 1:case 2:l=a%100,u=2;break;default:l=a%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:l=n.m,u=e.length;break;case 3:return Qg[n.m-1][1];case 5:return Qg[n.m-1][0];default:return Qg[n.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=n.d,u=e.length;break;case 3:return RE[n.q][0];default:return RE[n.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(n.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=n.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=n.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return n.u===0&&(e=="s"||e=="ss")?Di(n.S,e.length):(r>=2?o=r===3?1e3:100:o=r===1?10:1,s=Math.round(o*(n.S+n.u)),s>=60*o&&(s=0),e==="s"?s===0?"0":""+s/o:(i=Di(s,2+r),e==="ss"?i.substr(0,2):"."+i.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=n.D*24+n.H;break;case"[m]":case"[mm]":l=(n.D*24+n.H)*60+n.M;break;case"[s]":case"[ss]":l=((n.D*24+n.H)*60+n.M)*60+(r==0?Math.round(n.S+n.u):n.S);break;default:throw"bad abstime format: "+e}u=e.length===3?1:2;break;case 101:l=a,u=1;break}var c=u>0?Di(l,u):"";return c}function To(t){var e=3;if(t.length<=e)return t;for(var n=t.length%e,r=t.substr(0,n);n!=t.length;n+=e)r+=(r.length>0?",":"")+t.substr(n,e);return r}var yk=/%/g;function qO(t,e,n){var r=e.replace(yk,""),i=e.length-r.length;return Fs(t,r,n*Math.pow(10,2*i))+Jt("%",i)}function jO(t,e,n){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return Fs(t,e.substr(0,r),n/Math.pow(10,3*(e.length-r)))}function xk(t,e){var n,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+xk(t,-e);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),n=(e/Math.pow(10,s)).toPrecision(r+1+(i+s)%i),n.indexOf("e")===-1){var o=Math.floor(Math.log(e)*Math.LOG10E);for(n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(o-n.length+s):n+="E+"+(o-s);n.substr(0,2)==="0.";)n=n.charAt(0)+n.substr(2,i)+"."+n.substr(2+i),n=n.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(a,l,u,c){return l+u+c.substr(0,(i+s)%i)+"."+c.substr(s)+"E"})}else n=e.toExponential(r);return t.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),t.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}var wk=/# (\?+)( ?)\/( ?)(\d+)/;function KO(t,e,n){var r=parseInt(t[4],10),i=Math.round(e*r),s=Math.floor(i/r),o=i-s*r,a=r;return n+(s===0?"":""+s)+" "+(o===0?Jt(" ",t[1].length+1+t[4].length):kx(o,t[1].length)+t[2]+"/"+t[3]+Di(a,t[4].length))}function JO(t,e,n){return n+(e===0?"":""+e)+Jt(" ",t[1].length+2+t[4].length)}var Tk=/^#*0*\.([0#]+)/,Ek=/\)[^)]*[0#]/,Ik=/\(###\) ###\\?-####/;function Tr(t){for(var e="",n,r=0;r!=t.length;++r)switch(n=t.charCodeAt(r)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(n)}return e}function NE(t,e){var n=Math.pow(10,e);return""+Math.round(t*n)/n}function PE(t,e){var n=t-Math.floor(t),r=Math.pow(10,e);return e<(""+Math.round(n*r)).length?0:Math.round(n*r)}function YO(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function XO(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function ci(t,e,n){if(t.charCodeAt(0)===40&&!e.match(Ek)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?ci("n",r,n):"("+ci("n",r,-n)+")"}if(e.charCodeAt(e.length-1)===44)return jO(t,e,n);if(e.indexOf("%")!==-1)return qO(t,e,n);if(e.indexOf("E")!==-1)return xk(e,n);if(e.charCodeAt(0)===36)return"$"+ci(t,e.substr(e.charAt(1)==" "?2:1),n);var i,s,o,a,l=Math.abs(n),u=n<0?"-":"";if(e.match(/^00+$/))return u+Pl(l,e.length);if(e.match(/^[#?]+$/))return i=Pl(n,0),i==="0"&&(i=""),i.length>e.length?i:Tr(e.substr(0,e.length-i.length))+i;if(s=e.match(wk))return KO(s,l,u);if(e.match(/^#+0+$/))return u+Pl(l,e.length-e.indexOf("0"));if(s=e.match(Tk))return i=NE(n,s[1].length).replace(/^([^\.]+)$/,"$1."+Tr(s[1])).replace(/\.$/,"."+Tr(s[1])).replace(/\.(\d*)$/,function(_,x){return"."+x+Jt("0",Tr(s[1]).length-x.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+NE(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+To(Pl(l,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+ci(t,e,-n):To(""+(Math.floor(n)+YO(n,s[1].length)))+"."+Di(PE(n,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return ci(t,e.replace(/^#,#*,/,""),n);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=hu(ci(t,e.replace(/[\\-]/g,""),n)),o=0,hu(hu(e.replace(/\\/g,"")).replace(/[0#]/g,function(_){return o<i.length?i.charAt(o++):_==="0"?"0":""}));if(e.match(Ik))return i=ci(t,"##########",n),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var c="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),a=fp(l,Math.pow(10,o)-1,!1),i=""+u,c=Fs("n",s[1],a[1]),c.charAt(c.length-1)==" "&&(c=c.substr(0,c.length-1)+"0"),i+=c+s[2]+"/"+s[3],c=cp(a[2],o),c.length<s[4].length&&(c=Tr(s[4].substr(s[4].length-c.length))+c),i+=c,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),a=fp(l,Math.pow(10,o)-1,!0),u+(a[0]||(a[1]?"":"0"))+" "+(a[1]?kx(a[1],o)+s[2]+"/"+s[3]+cp(a[2],o):Jt(" ",2*o+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=Pl(n,0),e.length<=i.length?i:Tr(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){i=""+n.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=i.indexOf(".");var d=e.indexOf(".")-o,h=e.length-i.length-d;return Tr(e.substr(0,d)+i+e.substr(e.length-h))}if(s=e.match(/^00,000\.([#0]*0)$/))return o=PE(n,s[1].length),n<0?"-"+ci(t,e,-n):To(XO(n)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(_){return"00,"+(_.length<3?Di(0,3-_.length):"")+_})+"."+Di(o,s[1].length);switch(e){case"###,##0.00":return ci(t,"#,##0.00",n);case"###,###":case"##,###":case"#,###":var g=To(Pl(l,0));return g!=="0"?u+g:"";case"###,###.00":return ci(t,"###,##0.00",n).replace(/^0\./,".");case"#,###.00":return ci(t,"#,##0.00",n).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function QO(t,e,n){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return Fs(t,e.substr(0,r),n/Math.pow(10,3*(e.length-r)))}function ZO(t,e,n){var r=e.replace(yk,""),i=e.length-r.length;return Fs(t,r,n*Math.pow(10,2*i))+Jt("%",i)}function Sk(t,e){var n,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+Sk(t,-e);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),n=(e/Math.pow(10,s)).toPrecision(r+1+(i+s)%i),!n.match(/[Ee]/)){var o=Math.floor(Math.log(e)*Math.LOG10E);n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(o-n.length+s):n+="E+"+(o-s),n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(a,l,u,c){return l+u+c.substr(0,(i+s)%i)+"."+c.substr(s)+"E"})}else n=e.toExponential(r);return t.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),t.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}function ji(t,e,n){if(t.charCodeAt(0)===40&&!e.match(Ek)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?ji("n",r,n):"("+ji("n",r,-n)+")"}if(e.charCodeAt(e.length-1)===44)return QO(t,e,n);if(e.indexOf("%")!==-1)return ZO(t,e,n);if(e.indexOf("E")!==-1)return Sk(e,n);if(e.charCodeAt(0)===36)return"$"+ji(t,e.substr(e.charAt(1)==" "?2:1),n);var i,s,o,a,l=Math.abs(n),u=n<0?"-":"";if(e.match(/^00+$/))return u+Di(l,e.length);if(e.match(/^[#?]+$/))return i=""+n,n===0&&(i=""),i.length>e.length?i:Tr(e.substr(0,e.length-i.length))+i;if(s=e.match(wk))return JO(s,l,u);if(e.match(/^#+0+$/))return u+Di(l,e.length-e.indexOf("0"));if(s=e.match(Tk))return i=(""+n).replace(/^([^\.]+)$/,"$1."+Tr(s[1])).replace(/\.$/,"."+Tr(s[1])),i=i.replace(/\.(\d*)$/,function(_,x){return"."+x+Jt("0",Tr(s[1]).length-x.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+To(""+l);if(s=e.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+ji(t,e,-n):To(""+n)+"."+Jt("0",s[1].length);if(s=e.match(/^#,#*,#0/))return ji(t,e.replace(/^#,#*,/,""),n);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=hu(ji(t,e.replace(/[\\-]/g,""),n)),o=0,hu(hu(e.replace(/\\/g,"")).replace(/[0#]/g,function(_){return o<i.length?i.charAt(o++):_==="0"?"0":""}));if(e.match(Ik))return i=ji(t,"##########",n),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var c="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),a=fp(l,Math.pow(10,o)-1,!1),i=""+u,c=Fs("n",s[1],a[1]),c.charAt(c.length-1)==" "&&(c=c.substr(0,c.length-1)+"0"),i+=c+s[2]+"/"+s[3],c=cp(a[2],o),c.length<s[4].length&&(c=Tr(s[4].substr(s[4].length-c.length))+c),i+=c,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),a=fp(l,Math.pow(10,o)-1,!0),u+(a[0]||(a[1]?"":"0"))+" "+(a[1]?kx(a[1],o)+s[2]+"/"+s[3]+cp(a[2],o):Jt(" ",2*o+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=""+n,e.length<=i.length?i:Tr(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0]+)\.([#0]+)$/)){i=""+n.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=i.indexOf(".");var d=e.indexOf(".")-o,h=e.length-i.length-d;return Tr(e.substr(0,d)+i+e.substr(e.length-h))}if(s=e.match(/^00,000\.([#0]*0)$/))return n<0?"-"+ji(t,e,-n):To(""+n).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(_){return"00,"+(_.length<3?Di(0,3-_.length):"")+_})+"."+Di(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var g=To(""+l);return g!=="0"?u+g:"";default:if(e.match(/\.[0#?]*$/))return ji(t,e.slice(0,e.lastIndexOf(".")),n)+Tr(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function Fs(t,e,n){return(n|0)===n?ji(t,e,n):ci(t,e,n)}function e3(t){for(var e=[],n=!1,r=0,i=0;r<t.length;++r)switch(t.charCodeAt(r)){case 34:n=!n;break;case 95:case 42:case 92:++r;break;case 59:e[e.length]=t.substr(i,r-i),i=r+1}if(e[e.length]=t.substr(i),n===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var Ak=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Ka(t){for(var e=0,n="",r="";e<t.length;)switch(n=t.charAt(e)){case"G":dp(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(r=n;t.charAt(e++)!=="]"&&e<t.length;)r+=t.charAt(e);if(r.match(Ak))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(n=t.charAt(++e))>-1||n=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===n;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function t3(t,e,n,r){for(var i=[],s="",o=0,a="",l="t",u,c,d,h="H";o<t.length;)switch(a=t.charAt(o)){case"G":if(!dp(t,o))throw new Error("unrecognized character "+a+" in "+t);i[i.length]={t:"G",v:"General"},o+=7;break;case'"':for(s="";(d=t.charCodeAt(++o))!==34&&o<t.length;)s+=String.fromCharCode(d);i[i.length]={t:"t",v:s},++o;break;case"\\":var g=t.charAt(++o),_=g==="("||g===")"?g:"t";i[i.length]={t:_,v:g},++o;break;case"_":i[i.length]={t:"t",v:" "},o+=2;break;case"@":i[i.length]={t:"T",v:e},++o;break;case"B":case"b":if(t.charAt(o+1)==="1"||t.charAt(o+1)==="2"){if(u==null&&(u=bl(e,n,t.charAt(o+1)==="2"),u==null))return"";i[i.length]={t:"X",v:t.substr(o,2)},l=a,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":a=a.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||u==null&&(u=bl(e,n),u==null))return"";for(s=a;++o<t.length&&t.charAt(o).toLowerCase()===a;)s+=a;a==="m"&&l.toLowerCase()==="h"&&(a="M"),a==="h"&&(a=h),i[i.length]={t:a,v:s},l=a;break;case"A":case"a":case"":var x={t:a,v:a};if(u==null&&(u=bl(e,n)),t.substr(o,3).toUpperCase()==="A/P"?(u!=null&&(x.v=u.H>=12?t.charAt(o+2):a),x.t="T",h="h",o+=3):t.substr(o,5).toUpperCase()==="AM/PM"?(u!=null&&(x.v=u.H>=12?"PM":"AM"),x.t="T",o+=5,h="h"):t.substr(o,5).toUpperCase()==="/"?(u!=null&&(x.v=u.H>=12?"":""),x.t="T",o+=5,h="h"):(x.t="t",++o),u==null&&x.t==="T")return"";i[i.length]=x,l=a;break;case"[":for(s=a;t.charAt(o++)!=="]"&&o<t.length;)s+=t.charAt(o);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(Ak)){if(u==null&&(u=bl(e,n),u==null))return"";i[i.length]={t:"Z",v:s.toLowerCase()},l=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",Ka(t)||(i[i.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=a;++o<t.length&&(a=t.charAt(o))==="0";)s+=a;i[i.length]={t:"s",v:s};break}case"0":case"#":for(s=a;++o<t.length&&"0#?.,E+-%".indexOf(a=t.charAt(o))>-1;)s+=a;i[i.length]={t:"n",v:s};break;case"?":for(s=a;t.charAt(++o)===a;)s+=a;i[i.length]={t:a,v:s},l=a;break;case"*":++o,(t.charAt(o)==" "||t.charAt(o)=="*")&&++o;break;case"(":case")":i[i.length]={t:r===1?"t":a,v:a},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=a;o<t.length&&"0123456789".indexOf(t.charAt(++o))>-1;)s+=t.charAt(o);i[i.length]={t:"D",v:s};break;case" ":i[i.length]={t:a,v:a},++o;break;case"$":i[i.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(a)===-1)throw new Error("unrecognized character "+a+" in "+t);i[i.length]={t:"t",v:a},++o;break}var w=0,y=0,T;for(o=i.length-1,l="t";o>=0;--o)switch(i[o].t){case"h":case"H":i[o].t=h,l="h",w<1&&(w=1);break;case"s":(T=i[o].v.match(/\.0+$/))&&(y=Math.max(y,T[0].length-1),w=4),w<3&&(w=3);case"d":case"y":case"e":l=i[o].t;break;case"M":l=i[o].t,w<2&&(w=2);break;case"m":l==="s"&&(i[o].t="M",w<2&&(w=2));break;case"X":break;case"Z":w<1&&i[o].v.match(/[Hh]/)&&(w=1),w<2&&i[o].v.match(/[Mm]/)&&(w=2),w<3&&i[o].v.match(/[Ss]/)&&(w=3)}var E;switch(w){case 0:break;case 1:case 2:case 3:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H),u.H>=24&&(u.H=0,++u.D,E=bl(u.D),E.u=u.u,E.S=u.S,E.M=u.M,E.H=u.H,u=E);break;case 4:switch(y){case 1:u.u=Math.round(u.u*10)/10;break;case 2:u.u=Math.round(u.u*100)/100;break;case 3:u.u=Math.round(u.u*1e3)/1e3;break}u.u>=1&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H),u.H>=24&&(u.H=0,++u.D,E=bl(u.D),E.u=u.u,E.S=u.S,E.M=u.M,E.H=u.H,u=E);break}var N="",F;for(o=0;o<i.length;++o)switch(i[o].t){case"t":case"T":case" ":case"D":break;case"X":i[o].v="",i[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[o].v=WO(i[o].t.charCodeAt(0),i[o].v,u,y),i[o].t="t";break;case"n":case"?":for(F=o+1;i[F]!=null&&((a=i[F].t)==="?"||a==="D"||(a===" "||a==="t")&&i[F+1]!=null&&(i[F+1].t==="?"||i[F+1].t==="t"&&i[F+1].v==="/")||i[o].t==="("&&(a===" "||a==="n"||a===")")||a==="t"&&(i[F].v==="/"||i[F].v===" "&&i[F+1]!=null&&i[F+1].t=="?"));)i[o].v+=i[F].v,i[F]={v:"",t:";"},++F;N+=i[o].v,o=F-1;break;case"G":i[o].t="t",i[o].v=C_(e,n);break}var O="",S,A;if(N.length>0){N.charCodeAt(0)==40?(S=e<0&&N.charCodeAt(0)===45?-e:e,A=Fs("n",N,S)):(S=e<0&&r>1?-e:e,A=Fs("n",N,S),S<0&&i[0]&&i[0].t=="t"&&(A=A.substr(1),i[0].v="-"+i[0].v)),F=A.length-1;var C=i.length;for(o=0;o<i.length;++o)if(i[o]!=null&&i[o].t!="t"&&i[o].v.indexOf(".")>-1){C=o;break}var k=i.length;if(C===i.length&&A.indexOf("E")===-1){for(o=i.length-1;o>=0;--o)i[o]==null||"n?".indexOf(i[o].t)===-1||(F>=i[o].v.length-1?(F-=i[o].v.length,i[o].v=A.substr(F+1,i[o].v.length)):F<0?i[o].v="":(i[o].v=A.substr(0,F+1),F=-1),i[o].t="t",k=o);F>=0&&k<i.length&&(i[k].v=A.substr(0,F+1)+i[k].v)}else if(C!==i.length&&A.indexOf("E")===-1){for(F=A.indexOf(".")-1,o=C;o>=0;--o)if(!(i[o]==null||"n?".indexOf(i[o].t)===-1)){for(c=i[o].v.indexOf(".")>-1&&o===C?i[o].v.indexOf(".")-1:i[o].v.length-1,O=i[o].v.substr(c+1);c>=0;--c)F>=0&&(i[o].v.charAt(c)==="0"||i[o].v.charAt(c)==="#")&&(O=A.charAt(F--)+O);i[o].v=O,i[o].t="t",k=o}for(F>=0&&k<i.length&&(i[k].v=A.substr(0,F+1)+i[k].v),F=A.indexOf(".")+1,o=C;o<i.length;++o)if(!(i[o]==null||"n?(".indexOf(i[o].t)===-1&&o!==C)){for(c=i[o].v.indexOf(".")>-1&&o===C?i[o].v.indexOf(".")+1:0,O=i[o].v.substr(0,c);c<i[o].v.length;++c)F<A.length&&(O+=A.charAt(F++));i[o].v=O,i[o].t="t",k=o}}}for(o=0;o<i.length;++o)i[o]!=null&&"n?".indexOf(i[o].t)>-1&&(S=r>1&&e<0&&o>0&&i[o-1].v==="-"?-e:e,i[o].v=Fs(i[o].t,i[o].v,S),i[o].t="t");var P="";for(o=0;o!==i.length;++o)i[o]!=null&&(P+=i[o].v);return P}var bE=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function DE(t,e){if(e==null)return!1;var n=parseFloat(e[2]);switch(e[1]){case"=":if(t==n)return!0;break;case">":if(t>n)return!0;break;case"<":if(t<n)return!0;break;case"<>":if(t!=n)return!0;break;case">=":if(t>=n)return!0;break;case"<=":if(t<=n)return!0;break}return!1}function n3(t,e){var n=e3(t),r=n.length,i=n[r-1].indexOf("@");if(r<4&&i>-1&&--r,n.length>4)throw new Error("cannot find right format for |"+n.join("|")+"|");if(typeof e!="number")return[4,n.length===4||i>-1?n[n.length-1]:"@"];switch(typeof e=="number"&&!isFinite(e)&&(e=0),n.length){case 1:n=i>-1?["General","General","General",n[0]]:[n[0],n[0],n[0],"@"];break;case 2:n=i>-1?[n[0],n[0],n[0],n[1]]:[n[0],n[1],n[0],"@"];break;case 3:n=i>-1?[n[0],n[1],n[0],n[2]]:[n[0],n[1],n[2],"@"];break}var s=e>0?n[0]:e<0?n[1]:n[2];if(n[0].indexOf("[")===-1&&n[1].indexOf("[")===-1)return[r,s];if(n[0].match(/\[[=<>]/)!=null||n[1].match(/\[[=<>]/)!=null){var o=n[0].match(bE),a=n[1].match(bE);return DE(e,o)?[r,n[0]]:DE(e,a)?[r,n[1]]:[r,n[o!=null&&a!=null?2:1]]}return[r,s]}function Gs(t,e,n){n==null&&(n={});var r="";switch(typeof t){case"string":t=="m/d/yy"&&n.dateNF?r=n.dateNF:r=t;break;case"number":t==14&&n.dateNF?r=n.dateNF:r=(n.table!=null?n.table:Wt)[t],r==null&&(r=n.table&&n.table[kE[t]]||Wt[kE[t]]),r==null&&(r=VO[t]||"General");break}if(dp(r,0))return C_(e,n);e instanceof Date&&(e=Qn(e,n.date1904));var i=n3(r,e);if(dp(i[1]))return C_(e,n);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else{if(e===""||e==null)return"";if(isNaN(e)&&i[1].indexOf("0")>-1)return"#NUM!";if(!isFinite(e)&&i[1].indexOf("0")>-1)return"#DIV/0!"}return t3(i[1],e,n,i[0])}function Ck(t,e){if(typeof e!="number"){e=+e||-1;for(var n=0;n<392;++n){if(Wt[n]==null){e<0&&(e=n);continue}if(Wt[n]==t){e=n;break}}e<0&&(e=391)}return Wt[e]=t,e}function xm(t){for(var e=0;e!=392;++e)t[e]!==void 0&&Ck(t[e],e)}function wm(){Wt=OO()}var hp=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function r3(t){var e=typeof t=="number"?Wt[t]:t;return e=e.replace(hp,"(\\d+)"),hp.lastIndex=0,new RegExp("^"+e+"$")}function i3(t,e,n){var r=-1,i=-1,s=-1,o=-1,a=-1,l=-1;(e.match(hp)||[]).forEach(function(d,h){var g=parseInt(n[h+1],10);switch(d.toLowerCase().charAt(0)){case"y":r=g;break;case"d":s=g;break;case"h":o=g;break;case"s":l=g;break;case"m":o>=0?a=g:i=g;break}}),hp.lastIndex=0,l>=0&&a==-1&&i>=0&&(a=i,i=-1);var u=(""+(r>=0?r:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var c=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return o==-1&&a==-1&&l==-1?u:r==-1&&i==-1&&s==-1?c:u+"T"+c}var s3={"d.m":"d\\.m"};function o3(t,e){return Ck(s3[t]||t,e)}var FE=function(){var t={};t.version="1.2.0";function e(){for(var S=0,A=new Array(256),C=0;C!=256;++C)S=C,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,A[C]=S;return typeof Int32Array<"u"?new Int32Array(A):A}var n=e();function r(S){var A=0,C=0,k=0,P=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(k=0;k!=256;++k)P[k]=S[k];for(k=0;k!=256;++k)for(C=S[k],A=256+k;A<4096;A+=256)C=P[A]=C>>>8^S[C&255];var V=[];for(k=1;k!=16;++k)V[k-1]=typeof Int32Array<"u"&&typeof P.subarray=="function"?P.subarray(k*256,k*256+256):P.slice(k*256,k*256+256);return V}var i=r(n),s=i[0],o=i[1],a=i[2],l=i[3],u=i[4],c=i[5],d=i[6],h=i[7],g=i[8],_=i[9],x=i[10],w=i[11],y=i[12],T=i[13],E=i[14];function N(S,A){for(var C=A^-1,k=0,P=S.length;k<P;)C=C>>>8^n[(C^S.charCodeAt(k++))&255];return~C}function F(S,A){for(var C=A^-1,k=S.length-15,P=0;P<k;)C=E[S[P++]^C&255]^T[S[P++]^C>>8&255]^y[S[P++]^C>>16&255]^w[S[P++]^C>>>24]^x[S[P++]]^_[S[P++]]^g[S[P++]]^h[S[P++]]^d[S[P++]]^c[S[P++]]^u[S[P++]]^l[S[P++]]^a[S[P++]]^o[S[P++]]^s[S[P++]]^n[S[P++]];for(k+=15;P<k;)C=C>>>8^n[(C^S[P++])&255];return~C}function O(S,A){for(var C=A^-1,k=0,P=S.length,V=0,D=0;k<P;)V=S.charCodeAt(k++),V<128?C=C>>>8^n[(C^V)&255]:V<2048?(C=C>>>8^n[(C^(192|V>>6&31))&255],C=C>>>8^n[(C^(128|V&63))&255]):V>=55296&&V<57344?(V=(V&1023)+64,D=S.charCodeAt(k++)&1023,C=C>>>8^n[(C^(240|V>>8&7))&255],C=C>>>8^n[(C^(128|V>>2&63))&255],C=C>>>8^n[(C^(128|D>>6&15|(V&3)<<4))&255],C=C>>>8^n[(C^(128|D&63))&255]):(C=C>>>8^n[(C^(224|V>>12&15))&255],C=C>>>8^n[(C^(128|V>>6&63))&255],C=C>>>8^n[(C^(128|V&63))&255]);return~C}return t.table=n,t.bstr=N,t.buf=F,t.str=O,t}(),Ot=function(){var e={};e.version="1.2.2";function n(b,z){for(var L=b.split("/"),U=z.split("/"),B=0,H=0,Y=Math.min(L.length,U.length);B<Y;++B){if(H=L[B].length-U[B].length)return H;if(L[B]!=U[B])return L[B]<U[B]?-1:1}return L.length-U.length}function r(b){if(b.charAt(b.length-1)=="/")return b.slice(0,-1).indexOf("/")===-1?b:r(b.slice(0,-1));var z=b.lastIndexOf("/");return z===-1?b:b.slice(0,z+1)}function i(b){if(b.charAt(b.length-1)=="/")return i(b.slice(0,-1));var z=b.lastIndexOf("/");return z===-1?b:b.slice(z+1)}function s(b,z){typeof z=="string"&&(z=new Date(z));var L=z.getHours();L=L<<6|z.getMinutes(),L=L<<5|z.getSeconds()>>>1,b.write_shift(2,L);var U=z.getFullYear()-1980;U=U<<4|z.getMonth()+1,U=U<<5|z.getDate(),b.write_shift(2,U)}function o(b){var z=b.read_shift(2)&65535,L=b.read_shift(2)&65535,U=new Date,B=L&31;L>>>=5;var H=L&15;L>>>=4,U.setMilliseconds(0),U.setFullYear(L+1980),U.setMonth(H-1),U.setDate(B);var Y=z&31;z>>>=5;var re=z&63;return z>>>=6,U.setHours(z),U.setMinutes(re),U.setSeconds(Y<<1),U}function a(b){Ir(b,0);for(var z={},L=0;b.l<=b.length-4;){var U=b.read_shift(2),B=b.read_shift(2),H=b.l+B,Y={};switch(U){case 21589:L=b.read_shift(1),L&1&&(Y.mtime=b.read_shift(4)),B>5&&(L&2&&(Y.atime=b.read_shift(4)),L&4&&(Y.ctime=b.read_shift(4))),Y.mtime&&(Y.mt=new Date(Y.mtime*1e3));break;case 1:{var re=b.read_shift(4),J=b.read_shift(4);Y.usz=J*Math.pow(2,32)+re,re=b.read_shift(4),J=b.read_shift(4),Y.csz=J*Math.pow(2,32)+re}break}b.l=H,z[U]=Y}return z}var l;function u(){return l||(l=a3)}function c(b,z){if(b[0]==80&&b[1]==75)return kc(b,z);if((b[0]|32)==109&&(b[1]|32)==105)return hh(b,z);if(b.length<512)throw new Error("CFB file size "+b.length+" < 512");var L=3,U=512,B=0,H=0,Y=0,re=0,J=0,ee=[],Q=b.slice(0,512);Ir(Q,0);var ge=d(Q);switch(L=ge[0],L){case 3:U=512;break;case 4:U=4096;break;case 0:if(ge[1]==0)return kc(b,z);default:throw new Error("Major Version: Expected 3 or 4 saw "+L)}U!==512&&(Q=b.slice(0,U),Ir(Q,28));var Ee=b.slice(0,U);h(Q,L);var Ue=Q.read_shift(4,"i");if(L===3&&Ue!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Ue);Q.l+=4,Y=Q.read_shift(4,"i"),Q.l+=4,Q.chk("00100000","Mini Stream Cutoff Size: "),re=Q.read_shift(4,"i"),B=Q.read_shift(4,"i"),J=Q.read_shift(4,"i"),H=Q.read_shift(4,"i");for(var ve=-1,Ie=0;Ie<109&&(ve=Q.read_shift(4,"i"),!(ve<0));++Ie)ee[Ie]=ve;var ot=g(b,U);w(J,H,ot,U,ee);var Dt=T(ot,Y,ee,U);Y<Dt.length&&(Dt[Y].name="!Directory"),B>0&&re!==D&&(Dt[re].name="!MiniFAT"),Dt[ee[0]].name="!FAT",Dt.fat_addrs=ee,Dt.ssz=U;var Rt={},Kt=[],xs=[],fa=[];E(Y,Dt,ot,Kt,B,Rt,xs,re),_(xs,fa,Kt),Kt.shift();var io={FileIndex:xs,FullPaths:fa};return z&&z.raw&&(io.raw={header:Ee,sectors:ot}),io}function d(b){if(b[b.l]==80&&b[b.l+1]==75)return[0,0];b.chk(oe,"Header Signature: "),b.l+=16;var z=b.read_shift(2,"u");return[b.read_shift(2,"u"),z]}function h(b,z){var L=9;switch(b.l+=2,L=b.read_shift(2)){case 9:if(z!=3)throw new Error("Sector Shift: Expected 9 saw "+L);break;case 12:if(z!=4)throw new Error("Sector Shift: Expected 12 saw "+L);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+L)}b.chk("0600","Mini Sector Shift: "),b.chk("000000000000","Reserved: ")}function g(b,z){for(var L=Math.ceil(b.length/z)-1,U=[],B=1;B<L;++B)U[B-1]=b.slice(B*z,(B+1)*z);return U[L-1]=b.slice(L*z),U}function _(b,z,L){for(var U=0,B=0,H=0,Y=0,re=0,J=L.length,ee=[],Q=[];U<J;++U)ee[U]=Q[U]=U,z[U]=L[U];for(;re<Q.length;++re)U=Q[re],B=b[U].L,H=b[U].R,Y=b[U].C,ee[U]===U&&(B!==-1&&ee[B]!==B&&(ee[U]=ee[B]),H!==-1&&ee[H]!==H&&(ee[U]=ee[H])),Y!==-1&&(ee[Y]=U),B!==-1&&U!=ee[U]&&(ee[B]=ee[U],Q.lastIndexOf(B)<re&&Q.push(B)),H!==-1&&U!=ee[U]&&(ee[H]=ee[U],Q.lastIndexOf(H)<re&&Q.push(H));for(U=1;U<J;++U)ee[U]===U&&(H!==-1&&ee[H]!==H?ee[U]=ee[H]:B!==-1&&ee[B]!==B&&(ee[U]=ee[B]));for(U=1;U<J;++U)if(b[U].type!==0){if(re=U,re!=ee[re])do re=ee[re],z[U]=z[re]+"/"+z[U];while(re!==0&&ee[re]!==-1&&re!=ee[re]);ee[U]=-1}for(z[0]+="/",U=1;U<J;++U)b[U].type!==2&&(z[U]+="/")}function x(b,z,L){for(var U=b.start,B=b.size,H=[],Y=U;L&&B>0&&Y>=0;)H.push(z.slice(Y*V,Y*V+V)),B-=V,Y=Ta(L,Y*4);return H.length===0?X(0):Sn(H).slice(0,b.size)}function w(b,z,L,U,B){var H=D;if(b===D){if(z!==0)throw new Error("DIFAT chain shorter than expected")}else if(b!==-1){var Y=L[b],re=(U>>>2)-1;if(!Y)return;for(var J=0;J<re&&(H=Ta(Y,J*4))!==D;++J)B.push(H);z>=1&&w(Ta(Y,U-4),z-1,L,U,B)}}function y(b,z,L,U,B){var H=[],Y=[];B||(B=[]);var re=U-1,J=0,ee=0;for(J=z;J>=0;){B[J]=!0,H[H.length]=J,Y.push(b[J]);var Q=L[Math.floor(J*4/U)];if(ee=J*4&re,U<4+ee)throw new Error("FAT boundary crossed: "+J+" 4 "+U);if(!b[Q])break;J=Ta(b[Q],ee)}return{nodes:H,data:zE([Y])}}function T(b,z,L,U){var B=b.length,H=[],Y=[],re=[],J=[],ee=U-1,Q=0,ge=0,Ee=0,Ue=0;for(Q=0;Q<B;++Q)if(re=[],Ee=Q+z,Ee>=B&&(Ee-=B),!Y[Ee]){J=[];var ve=[];for(ge=Ee;ge>=0;){ve[ge]=!0,Y[ge]=!0,re[re.length]=ge,J.push(b[ge]);var Ie=L[Math.floor(ge*4/U)];if(Ue=ge*4&ee,U<4+Ue)throw new Error("FAT boundary crossed: "+ge+" 4 "+U);if(!b[Ie]||(ge=Ta(b[Ie],Ue),ve[ge]))break}H[Ee]={nodes:re,data:zE([J])}}return H}function E(b,z,L,U,B,H,Y,re){for(var J=0,ee=U.length?2:0,Q=z[b].data,ge=0,Ee=0,Ue;ge<Q.length;ge+=128){var ve=Q.slice(ge,ge+128);Ir(ve,64),Ee=ve.read_shift(2),Ue=Lx(ve,0,Ee-ee),U.push(Ue);var Ie={name:Ue,type:ve.read_shift(1),color:ve.read_shift(1),L:ve.read_shift(4,"i"),R:ve.read_shift(4,"i"),C:ve.read_shift(4,"i"),clsid:ve.read_shift(16),state:ve.read_shift(4,"i"),start:0,size:0},ot=ve.read_shift(2)+ve.read_shift(2)+ve.read_shift(2)+ve.read_shift(2);ot!==0&&(Ie.ct=N(ve,ve.l-8));var Dt=ve.read_shift(2)+ve.read_shift(2)+ve.read_shift(2)+ve.read_shift(2);Dt!==0&&(Ie.mt=N(ve,ve.l-8)),Ie.start=ve.read_shift(4,"i"),Ie.size=ve.read_shift(4,"i"),Ie.size<0&&Ie.start<0&&(Ie.size=Ie.type=0,Ie.start=D,Ie.name=""),Ie.type===5?(J=Ie.start,B>0&&J!==D&&(z[J].name="!StreamData")):Ie.size>=4096?(Ie.storage="fat",z[Ie.start]===void 0&&(z[Ie.start]=y(L,Ie.start,z.fat_addrs,z.ssz)),z[Ie.start].name=Ie.name,Ie.content=z[Ie.start].data.slice(0,Ie.size)):(Ie.storage="minifat",Ie.size<0?Ie.size=0:J!==D&&Ie.start!==D&&z[J]&&(Ie.content=x(Ie,z[J].data,(z[re]||{}).data))),Ie.content&&Ir(Ie.content,0),H[Ue]=Ie,Y.push(Ie)}}function N(b,z){return new Date((ei(b,z+4)/1e7*Math.pow(2,32)+ei(b,z)/1e7-11644473600)*1e3)}function F(b,z){return u(),c(l.readFileSync(b),z)}function O(b,z){var L=z&&z.type;switch(L||Ct&&Buffer.isBuffer(b)&&(L="buffer"),L||"base64"){case"file":return F(b,z);case"base64":return c(Qr(Oo(b)),z);case"binary":return c(Qr(b),z)}return c(b,z)}function S(b,z){var L=z||{},U=L.root||"Root Entry";if(b.FullPaths||(b.FullPaths=[]),b.FileIndex||(b.FileIndex=[]),b.FullPaths.length!==b.FileIndex.length)throw new Error("inconsistent CFB structure");b.FullPaths.length===0&&(b.FullPaths[0]=U+"/",b.FileIndex[0]={name:U,type:5}),L.CLSID&&(b.FileIndex[0].clsid=L.CLSID),A(b)}function A(b){var z="Sh33tJ5";if(!Ot.find(b,"/"+z)){var L=X(4);L[0]=55,L[1]=L[3]=50,L[2]=54,b.FileIndex.push({name:z,type:2,content:L,size:4,L:69,R:69,C:69}),b.FullPaths.push(b.FullPaths[0]+z),C(b)}}function C(b,z){S(b);for(var L=!1,U=!1,B=b.FullPaths.length-1;B>=0;--B){var H=b.FileIndex[B];switch(H.type){case 0:U?L=!0:(b.FileIndex.pop(),b.FullPaths.pop());break;case 1:case 2:case 5:U=!0,isNaN(H.R*H.L*H.C)&&(L=!0),H.R>-1&&H.L>-1&&H.R==H.L&&(L=!0);break;default:L=!0;break}}if(!(!L&&!z)){var Y=new Date(1987,1,19),re=0,J=Object.create?Object.create(null):{},ee=[];for(B=0;B<b.FullPaths.length;++B)J[b.FullPaths[B]]=!0,b.FileIndex[B].type!==0&&ee.push([b.FullPaths[B],b.FileIndex[B]]);for(B=0;B<ee.length;++B){var Q=r(ee[B][0]);for(U=J[Q];!U;){for(;r(Q)&&!J[r(Q)];)Q=r(Q);ee.push([Q,{name:i(Q).replace("/",""),type:1,clsid:Je,ct:Y,mt:Y,content:null}]),J[Q]=!0,Q=r(ee[B][0]),U=J[Q]}}for(ee.sort(function(Ue,ve){return n(Ue[0],ve[0])}),b.FullPaths=[],b.FileIndex=[],B=0;B<ee.length;++B)b.FullPaths[B]=ee[B][0],b.FileIndex[B]=ee[B][1];for(B=0;B<ee.length;++B){var ge=b.FileIndex[B],Ee=b.FullPaths[B];if(ge.name=i(Ee).replace("/",""),ge.L=ge.R=ge.C=-(ge.color=1),ge.size=ge.content?ge.content.length:0,ge.start=0,ge.clsid=ge.clsid||Je,B===0)ge.C=ee.length>1?1:-1,ge.size=0,ge.type=5;else if(Ee.slice(-1)=="/"){for(re=B+1;re<ee.length&&r(b.FullPaths[re])!=Ee;++re);for(ge.C=re>=ee.length?-1:re,re=B+1;re<ee.length&&r(b.FullPaths[re])!=r(Ee);++re);ge.R=re>=ee.length?-1:re,ge.type=1}else r(b.FullPaths[B+1]||"")==r(Ee)&&(ge.R=B+1),ge.type=2}}}function k(b,z){var L=z||{};if(L.fileType=="mad")return zn(b,L);switch(C(b),L.fileType){case"zip":return Nc(b,L)}var U=function(Ue){for(var ve=0,Ie=0,ot=0;ot<Ue.FileIndex.length;++ot){var Dt=Ue.FileIndex[ot];if(Dt.content){var Rt=Dt.content.length;Rt>0&&(Rt<4096?ve+=Rt+63>>6:Ie+=Rt+511>>9)}}for(var Kt=Ue.FullPaths.length+3>>2,xs=ve+7>>3,fa=ve+127>>7,io=xs+Ie+Kt+fa,Wi=io+127>>7,Al=Wi<=109?0:Math.ceil((Wi-109)/127);io+Wi+Al+127>>7>Wi;)Al=++Wi<=109?0:Math.ceil((Wi-109)/127);var Kr=[1,Al,Wi,fa,Kt,Ie,ve,0];return Ue.FileIndex[0].size=ve<<6,Kr[7]=(Ue.FileIndex[0].start=Kr[0]+Kr[1]+Kr[2]+Kr[3]+Kr[4]+Kr[5])+(Kr[6]+7>>3),Kr}(b),B=X(U[7]<<9),H=0,Y=0;{for(H=0;H<8;++H)B.write_shift(1,Re[H]);for(H=0;H<8;++H)B.write_shift(2,0);for(B.write_shift(2,62),B.write_shift(2,3),B.write_shift(2,65534),B.write_shift(2,9),B.write_shift(2,6),H=0;H<3;++H)B.write_shift(2,0);for(B.write_shift(4,0),B.write_shift(4,U[2]),B.write_shift(4,U[0]+U[1]+U[2]+U[3]-1),B.write_shift(4,0),B.write_shift(4,4096),B.write_shift(4,U[3]?U[0]+U[1]+U[2]-1:D),B.write_shift(4,U[3]),B.write_shift(-4,U[1]?U[0]-1:D),B.write_shift(4,U[1]),H=0;H<109;++H)B.write_shift(-4,H<U[2]?U[1]+H:-1)}if(U[1])for(Y=0;Y<U[1];++Y){for(;H<236+Y*127;++H)B.write_shift(-4,H<U[2]?U[1]+H:-1);B.write_shift(-4,Y===U[1]-1?D:Y+1)}var re=function(Ue){for(Y+=Ue;H<Y-1;++H)B.write_shift(-4,H+1);Ue&&(++H,B.write_shift(-4,D))};for(Y=H=0,Y+=U[1];H<Y;++H)B.write_shift(-4,Le.DIFSECT);for(Y+=U[2];H<Y;++H)B.write_shift(-4,Le.FATSECT);re(U[3]),re(U[4]);for(var J=0,ee=0,Q=b.FileIndex[0];J<b.FileIndex.length;++J)Q=b.FileIndex[J],Q.content&&(ee=Q.content.length,!(ee<4096)&&(Q.start=Y,re(ee+511>>9)));for(re(U[6]+7>>3);B.l&511;)B.write_shift(-4,Le.ENDOFCHAIN);for(Y=H=0,J=0;J<b.FileIndex.length;++J)Q=b.FileIndex[J],Q.content&&(ee=Q.content.length,!(!ee||ee>=4096)&&(Q.start=Y,re(ee+63>>6)));for(;B.l&511;)B.write_shift(-4,Le.ENDOFCHAIN);for(H=0;H<U[4]<<2;++H){var ge=b.FullPaths[H];if(!ge||ge.length===0){for(J=0;J<17;++J)B.write_shift(4,0);for(J=0;J<3;++J)B.write_shift(4,-1);for(J=0;J<12;++J)B.write_shift(4,0);continue}Q=b.FileIndex[H],H===0&&(Q.start=Q.size?Q.start-1:D);var Ee=H===0&&L.root||Q.name;if(Ee.length>31&&(console.error("Name "+Ee+" will be truncated to "+Ee.slice(0,31)),Ee=Ee.slice(0,31)),ee=2*(Ee.length+1),B.write_shift(64,Ee,"utf16le"),B.write_shift(2,ee),B.write_shift(1,Q.type),B.write_shift(1,Q.color),B.write_shift(-4,Q.L),B.write_shift(-4,Q.R),B.write_shift(-4,Q.C),Q.clsid)B.write_shift(16,Q.clsid,"hex");else for(J=0;J<4;++J)B.write_shift(4,0);B.write_shift(4,Q.state||0),B.write_shift(4,0),B.write_shift(4,0),B.write_shift(4,0),B.write_shift(4,0),B.write_shift(4,Q.start),B.write_shift(4,Q.size),B.write_shift(4,0)}for(H=1;H<b.FileIndex.length;++H)if(Q=b.FileIndex[H],Q.size>=4096)if(B.l=Q.start+1<<9,Ct&&Buffer.isBuffer(Q.content))Q.content.copy(B,B.l,0,Q.size),B.l+=Q.size+511&-512;else{for(J=0;J<Q.size;++J)B.write_shift(1,Q.content[J]);for(;J&511;++J)B.write_shift(1,0)}for(H=1;H<b.FileIndex.length;++H)if(Q=b.FileIndex[H],Q.size>0&&Q.size<4096)if(Ct&&Buffer.isBuffer(Q.content))Q.content.copy(B,B.l,0,Q.size),B.l+=Q.size+63&-64;else{for(J=0;J<Q.size;++J)B.write_shift(1,Q.content[J]);for(;J&63;++J)B.write_shift(1,0)}if(Ct)B.l=B.length;else for(;B.l<B.length;)B.write_shift(1,0);return B}function P(b,z){var L=b.FullPaths.map(function(J){return J.toUpperCase()}),U=L.map(function(J){var ee=J.split("/");return ee[ee.length-(J.slice(-1)=="/"?2:1)]}),B=!1;z.charCodeAt(0)===47?(B=!0,z=L[0].slice(0,-1)+z):B=z.indexOf("/")!==-1;var H=z.toUpperCase(),Y=B===!0?L.indexOf(H):U.indexOf(H);if(Y!==-1)return b.FileIndex[Y];var re=!H.match($h);for(H=H.replace(Ad,""),re&&(H=H.replace($h,"!")),Y=0;Y<L.length;++Y)if((re?L[Y].replace($h,"!"):L[Y]).replace(Ad,"")==H||(re?U[Y].replace($h,"!"):U[Y]).replace(Ad,"")==H)return b.FileIndex[Y];return null}var V=64,D=-2,oe="d0cf11e0a1b11ae1",Re=[208,207,17,224,161,177,26,225],Je="00000000000000000000000000000000",Le={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:D,FREESECT:-1,HEADER_SIGNATURE:oe,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Je,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function ce(b,z,L){u();var U=k(b,L);l.writeFileSync(z,U)}function ae(b){for(var z=new Array(b.length),L=0;L<b.length;++L)z[L]=String.fromCharCode(b[L]);return z.join("")}function we(b,z){var L=k(b,z);switch(z&&z.type||"buffer"){case"file":return u(),l.writeFileSync(z.filename,L),L;case"binary":return typeof L=="string"?L:ae(L);case"base64":return lp(typeof L=="string"?L:ae(L));case"buffer":if(Ct)return Buffer.isBuffer(L)?L:vs(L);case"array":return typeof L=="string"?Qr(L):L}return L}var $e;function Ae(b){try{var z=b.InflateRaw,L=new z;if(L._processChunk(new Uint8Array([3,0]),L._finishFlushFlag),L.bytesRead)$e=b;else throw new Error("zlib does not expose bytesRead")}catch(U){console.error("cannot use native zlib: "+(U.message||U))}}function Ve(b,z){if(!$e)return Il(b,z);var L=$e.InflateRaw,U=new L,B=U._processChunk(b.slice(b.l),U._finishFlushFlag);return b.l+=U.bytesRead,B}function Te(b){return $e?$e.deflateRawSync(b):st(b)}var Ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Ge=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],We=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function G(b){var z=(b<<1|b<<11)&139536|(b<<5|b<<15)&558144;return(z>>16|z>>8|z)&255}for(var j=typeof Uint8Array<"u",q=j?new Uint8Array(256):[],W=0;W<256;++W)q[W]=G(W);function te(b,z){var L=q[b&255];return z<=8?L>>>8-z:(L=L<<8|q[b>>8&255],z<=16?L>>>16-z:(L=L<<8|q[b>>16&255],L>>>24-z))}function le(b,z){var L=z&7,U=z>>>3;return(b[U]|(L<=6?0:b[U+1]<<8))>>>L&3}function pe(b,z){var L=z&7,U=z>>>3;return(b[U]|(L<=5?0:b[U+1]<<8))>>>L&7}function Pe(b,z){var L=z&7,U=z>>>3;return(b[U]|(L<=4?0:b[U+1]<<8))>>>L&15}function me(b,z){var L=z&7,U=z>>>3;return(b[U]|(L<=3?0:b[U+1]<<8))>>>L&31}function Ye(b,z){var L=z&7,U=z>>>3;return(b[U]|(L<=1?0:b[U+1]<<8))>>>L&127}function He(b,z,L){var U=z&7,B=z>>>3,H=(1<<L)-1,Y=b[B]>>>U;return L<8-U||(Y|=b[B+1]<<8-U,L<16-U)||(Y|=b[B+2]<<16-U,L<24-U)||(Y|=b[B+3]<<24-U),Y&H}function et(b,z,L){var U=z&7,B=z>>>3;return U<=5?b[B]|=(L&7)<<U:(b[B]|=L<<U&255,b[B+1]=(L&7)>>8-U),z+3}function ut(b,z,L){var U=z&7,B=z>>>3;return L=(L&1)<<U,b[B]|=L,z+1}function _t(b,z,L){var U=z&7,B=z>>>3;return L<<=U,b[B]|=L&255,L>>>=8,b[B+1]=L,z+8}function jt(b,z,L){var U=z&7,B=z>>>3;return L<<=U,b[B]|=L&255,L>>>=8,b[B+1]=L&255,b[B+2]=L>>>8,z+16}function Me(b,z){var L=b.length,U=2*L>z?2*L:z+5,B=0;if(L>=z)return b;if(Ct){var H=AE(U);if(b.copy)b.copy(H);else for(;B<b.length;++B)H[B]=b[B];return H}else if(j){var Y=new Uint8Array(U);if(Y.set)Y.set(b);else for(;B<L;++B)Y[B]=b[B];return Y}return b.length=U,b}function mt(b){for(var z=new Array(b),L=0;L<b;++L)z[L]=0;return z}function Se(b,z,L){var U=1,B=0,H=0,Y=0,re=0,J=b.length,ee=j?new Uint16Array(32):mt(32);for(H=0;H<32;++H)ee[H]=0;for(H=J;H<L;++H)b[H]=0;J=b.length;var Q=j?new Uint16Array(J):mt(J);for(H=0;H<J;++H)ee[B=b[H]]++,U<B&&(U=B),Q[H]=0;for(ee[0]=0,H=1;H<=U;++H)ee[H+16]=re=re+ee[H-1]<<1;for(H=0;H<J;++H)re=b[H],re!=0&&(Q[H]=ee[re+16]++);var ge=0;for(H=0;H<J;++H)if(ge=b[H],ge!=0)for(re=te(Q[H],U)>>U-ge,Y=(1<<U+4-ge)-1;Y>=0;--Y)z[re|Y<<ge]=ge&15|H<<4;return U}var se=j?new Uint16Array(512):mt(512),be=j?new Uint16Array(32):mt(32);if(!j){for(var Ce=0;Ce<512;++Ce)se[Ce]=0;for(Ce=0;Ce<32;++Ce)be[Ce]=0}(function(){for(var b=[],z=0;z<32;z++)b.push(5);Se(b,be,32);var L=[];for(z=0;z<=143;z++)L.push(8);for(;z<=255;z++)L.push(9);for(;z<=279;z++)L.push(7);for(;z<=287;z++)L.push(8);Se(L,se,288)})();var tt=function(){for(var z=j?new Uint8Array(32768):[],L=0,U=0;L<We.length-1;++L)for(;U<We[L+1];++U)z[U]=L;for(;U<32768;++U)z[U]=29;var B=j?new Uint8Array(259):[];for(L=0,U=0;L<Ge.length-1;++L)for(;U<Ge[L+1];++U)B[U]=L;function H(re,J){for(var ee=0;ee<re.length;){var Q=Math.min(65535,re.length-ee),ge=ee+Q==re.length;for(J.write_shift(1,+ge),J.write_shift(2,Q),J.write_shift(2,~Q&65535);Q-- >0;)J[J.l++]=re[ee++]}return J.l}function Y(re,J){for(var ee=0,Q=0,ge=j?new Uint16Array(32768):[];Q<re.length;){var Ee=Math.min(65535,re.length-Q);if(Ee<10){for(ee=et(J,ee,+(Q+Ee==re.length)),ee&7&&(ee+=8-(ee&7)),J.l=ee/8|0,J.write_shift(2,Ee),J.write_shift(2,~Ee&65535);Ee-- >0;)J[J.l++]=re[Q++];ee=J.l*8;continue}ee=et(J,ee,+(Q+Ee==re.length)+2);for(var Ue=0;Ee-- >0;){var ve=re[Q];Ue=(Ue<<5^ve)&32767;var Ie=-1,ot=0;if((Ie=ge[Ue])&&(Ie|=Q&-32768,Ie>Q&&(Ie-=32768),Ie<Q))for(;re[Ie+ot]==re[Q+ot]&&ot<250;)++ot;if(ot>2){ve=B[ot],ve<=22?ee=_t(J,ee,q[ve+1]>>1)-1:(_t(J,ee,3),ee+=5,_t(J,ee,q[ve-23]>>5),ee+=3);var Dt=ve<8?0:ve-4>>2;Dt>0&&(jt(J,ee,ot-Ge[ve]),ee+=Dt),ve=z[Q-Ie],ee=_t(J,ee,q[ve]>>3),ee-=3;var Rt=ve<4?0:ve-2>>1;Rt>0&&(jt(J,ee,Q-Ie-We[ve]),ee+=Rt);for(var Kt=0;Kt<ot;++Kt)ge[Ue]=Q&32767,Ue=(Ue<<5^re[Q])&32767,++Q;Ee-=ot-1}else ve<=143?ve=ve+48:ee=ut(J,ee,1),ee=_t(J,ee,q[ve]),ge[Ue]=Q&32767,++Q}ee=_t(J,ee,0)-1}return J.l=(ee+7)/8|0,J.l}return function(J,ee){return J.length<8?H(J,ee):Y(J,ee)}}();function st(b){var z=X(50+Math.floor(b.length*1.1)),L=tt(b,z);return z.slice(0,L)}var Ze=j?new Uint16Array(32768):mt(32768),rt=j?new Uint16Array(32768):mt(32768),wt=j?new Uint16Array(128):mt(128),$i=1,Bt=1;function Ai(b,z){var L=me(b,z)+257;z+=5;var U=me(b,z)+1;z+=5;var B=Pe(b,z)+4;z+=4;for(var H=0,Y=j?new Uint8Array(19):mt(19),re=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],J=1,ee=j?new Uint8Array(8):mt(8),Q=j?new Uint8Array(8):mt(8),ge=Y.length,Ee=0;Ee<B;++Ee)Y[Ne[Ee]]=H=pe(b,z),J<H&&(J=H),ee[H]++,z+=3;var Ue=0;for(ee[0]=0,Ee=1;Ee<=J;++Ee)Q[Ee]=Ue=Ue+ee[Ee-1]<<1;for(Ee=0;Ee<ge;++Ee)(Ue=Y[Ee])!=0&&(re[Ee]=Q[Ue]++);var ve=0;for(Ee=0;Ee<ge;++Ee)if(ve=Y[Ee],ve!=0){Ue=q[re[Ee]]>>8-ve;for(var Ie=(1<<7-ve)-1;Ie>=0;--Ie)wt[Ue|Ie<<ve]=ve&7|Ee<<3}var ot=[];for(J=1;ot.length<L+U;)switch(Ue=wt[Ye(b,z)],z+=Ue&7,Ue>>>=3){case 16:for(H=3+le(b,z),z+=2,Ue=ot[ot.length-1];H-- >0;)ot.push(Ue);break;case 17:for(H=3+pe(b,z),z+=3;H-- >0;)ot.push(0);break;case 18:for(H=11+Ye(b,z),z+=7;H-- >0;)ot.push(0);break;default:ot.push(Ue),J<Ue&&(J=Ue);break}var Dt=ot.slice(0,L),Rt=ot.slice(L);for(Ee=L;Ee<286;++Ee)Dt[Ee]=0;for(Ee=U;Ee<30;++Ee)Rt[Ee]=0;return $i=Se(Dt,Ze,286),Bt=Se(Rt,rt,30),z}function El(b,z){if(b[0]==3&&!(b[1]&3))return[qa(z),2];for(var L=0,U=0,B=AE(z||1<<18),H=0,Y=B.length>>>0,re=0,J=0;!(U&1);){if(U=pe(b,L),L+=3,U>>>1)U>>1==1?(re=9,J=5):(L=Ai(b,L),re=$i,J=Bt);else{L&7&&(L+=8-(L&7));var ee=b[L>>>3]|b[(L>>>3)+1]<<8;if(L+=32,ee>0)for(!z&&Y<H+ee&&(B=Me(B,H+ee),Y=B.length);ee-- >0;)B[H++]=b[L>>>3],L+=8;continue}for(;;){!z&&Y<H+32767&&(B=Me(B,H+32767),Y=B.length);var Q=He(b,L,re),ge=U>>>1==1?se[Q]:Ze[Q];if(L+=ge&15,ge>>>=4,!(ge>>>8&255))B[H++]=ge;else{if(ge==256)break;ge-=257;var Ee=ge<8?0:ge-4>>2;Ee>5&&(Ee=0);var Ue=H+Ge[ge];Ee>0&&(Ue+=He(b,L,Ee),L+=Ee),Q=He(b,L,J),ge=U>>>1==1?be[Q]:rt[Q],L+=ge&15,ge>>>=4;var ve=ge<4?0:ge-2>>1,Ie=We[ge];for(ve>0&&(Ie+=He(b,L,ve),L+=ve),!z&&Y<Ue&&(B=Me(B,Ue+100),Y=B.length);H<Ue;)B[H]=B[H-Ie],++H}}}return z?[B,L+7>>>3]:[B.slice(0,H),L+7>>>3]}function Il(b,z){var L=b.slice(b.l||0),U=El(L,z);return b.l+=U[1],U[0]}function Rc(b,z){if(b)typeof console<"u"&&console.error(z);else throw new Error(z)}function kc(b,z){var L=b;Ir(L,0);var U=[],B=[],H={FileIndex:U,FullPaths:B};S(H,{root:z.root});for(var Y=L.length-4;(L[Y]!=80||L[Y+1]!=75||L[Y+2]!=5||L[Y+3]!=6)&&Y>=0;)--Y;L.l=Y+4,L.l+=4;var re=L.read_shift(2);L.l+=6;var J=L.read_shift(4);for(L.l=J,Y=0;Y<re;++Y){L.l+=20;var ee=L.read_shift(4),Q=L.read_shift(4),ge=L.read_shift(2),Ee=L.read_shift(2),Ue=L.read_shift(2);L.l+=8;var ve=L.read_shift(4),Ie=a(L.slice(L.l+ge,L.l+ge+Ee));L.l+=ge+Ee+Ue;var ot=L.l;L.l=ve+4,Ie&&Ie[1]&&((Ie[1]||{}).usz&&(Q=Ie[1].usz),(Ie[1]||{}).csz&&(ee=Ie[1].csz)),ua(L,ee,Q,H,Ie),L.l=ot}return H}function ua(b,z,L,U,B){b.l+=2;var H=b.read_shift(2),Y=b.read_shift(2),re=o(b);if(H&8257)throw new Error("Unsupported ZIP encryption");for(var J=b.read_shift(4),ee=b.read_shift(4),Q=b.read_shift(4),ge=b.read_shift(2),Ee=b.read_shift(2),Ue="",ve=0;ve<ge;++ve)Ue+=String.fromCharCode(b[b.l++]);if(Ee){var Ie=a(b.slice(b.l,b.l+Ee));(Ie[21589]||{}).mt&&(re=Ie[21589].mt),(Ie[1]||{}).usz&&(Q=Ie[1].usz),(Ie[1]||{}).csz&&(ee=Ie[1].csz),B&&((B[21589]||{}).mt&&(re=B[21589].mt),(B[1]||{}).usz&&(Q=B[1].usz),(B[1]||{}).csz&&(ee=B[1].csz))}b.l+=Ee;var ot=b.slice(b.l,b.l+ee);switch(Y){case 8:ot=Ve(b,Q);break;case 0:b.l+=ee;break;default:throw new Error("Unsupported ZIP Compression method "+Y)}var Dt=!1;H&8&&(J=b.read_shift(4),J==134695760&&(J=b.read_shift(4),Dt=!0),ee=b.read_shift(4),Q=b.read_shift(4)),ee!=z&&Rc(Dt,"Bad compressed size: "+z+" != "+ee),Q!=L&&Rc(Dt,"Bad uncompressed size: "+L+" != "+Q),ys(U,Ue,ot,{unsafe:!0,mt:re})}function Nc(b,z){var L=z||{},U=[],B=[],H=X(1),Y=L.compression?8:0,re=0,J=0,ee=0,Q=0,ge=0,Ee=b.FullPaths[0],Ue=Ee,ve=b.FileIndex[0],Ie=[],ot=0;for(J=1;J<b.FullPaths.length;++J)if(Ue=b.FullPaths[J].slice(Ee.length),ve=b.FileIndex[J],!(!ve.size||!ve.content||Array.isArray(ve.content)&&ve.content.length==0||Ue=="Sh33tJ5")){var Dt=Q,Rt=X(Ue.length);for(ee=0;ee<Ue.length;++ee)Rt.write_shift(1,Ue.charCodeAt(ee)&127);Rt=Rt.slice(0,Rt.l),Ie[ge]=typeof ve.content=="string"?FE.bstr(ve.content,0):FE.buf(ve.content,0);var Kt=typeof ve.content=="string"?Qr(ve.content):ve.content;Y==8&&(Kt=Te(Kt)),H=X(30),H.write_shift(4,67324752),H.write_shift(2,20),H.write_shift(2,re),H.write_shift(2,Y),ve.mt?s(H,ve.mt):H.write_shift(4,0),H.write_shift(-4,Ie[ge]),H.write_shift(4,Kt.length),H.write_shift(4,ve.content.length),H.write_shift(2,Rt.length),H.write_shift(2,0),Q+=H.length,U.push(H),Q+=Rt.length,U.push(Rt),Q+=Kt.length,U.push(Kt),H=X(46),H.write_shift(4,33639248),H.write_shift(2,0),H.write_shift(2,20),H.write_shift(2,re),H.write_shift(2,Y),H.write_shift(4,0),H.write_shift(-4,Ie[ge]),H.write_shift(4,Kt.length),H.write_shift(4,ve.content.length),H.write_shift(2,Rt.length),H.write_shift(2,0),H.write_shift(2,0),H.write_shift(2,0),H.write_shift(2,0),H.write_shift(4,0),H.write_shift(4,Dt),ot+=H.l,B.push(H),ot+=Rt.length,B.push(Rt),++ge}return H=X(22),H.write_shift(4,101010256),H.write_shift(2,0),H.write_shift(2,0),H.write_shift(2,ge),H.write_shift(2,ge),H.write_shift(4,ot),H.write_shift(4,Q),H.write_shift(2,0),Sn([Sn(U),Sn(B),H])}var ro={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function _s(b,z){if(b.ctype)return b.ctype;var L=b.name||"",U=L.match(/\.([^\.]+)$/);return U&&ro[U[1]]||z&&(U=(L=z).match(/[\.\\]([^\.\\])+$/),U&&ro[U[1]])?ro[U[1]]:"application/octet-stream"}function dh(b){for(var z=lp(b),L=[],U=0;U<z.length;U+=76)L.push(z.slice(U,U+76));return L.join(`\r
`)+`\r
`}function Sl(b){var z=b.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(ee){var Q=ee.charCodeAt(0).toString(16).toUpperCase();return"="+(Q.length==1?"0"+Q:Q)});z=z.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),z.charAt(0)==`
`&&(z="=0D"+z.slice(1)),z=z.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var L=[],U=z.split(`\r
`),B=0;B<U.length;++B){var H=U[B];if(H.length==0){L.push("");continue}for(var Y=0;Y<H.length;){var re=76,J=H.slice(Y,Y+re);J.charAt(re-1)=="="?re--:J.charAt(re-2)=="="?re-=2:J.charAt(re-3)=="="&&(re-=3),J=H.slice(Y,Y+re),Y+=re,Y<H.length&&(J+="="),L.push(J)}}return L.join(`\r
`)}function fh(b){for(var z=[],L=0;L<b.length;++L){for(var U=b[L];L<=b.length&&U.charAt(U.length-1)=="=";)U=U.slice(0,U.length-1)+b[++L];z.push(U)}for(var B=0;B<z.length;++B)z[B]=z[B].replace(/[=][0-9A-Fa-f]{2}/g,function(H){return String.fromCharCode(parseInt(H.slice(1),16))});return Qr(z.join(`\r
`))}function ca(b,z,L){for(var U="",B="",H="",Y,re=0;re<10;++re){var J=z[re];if(!J||J.match(/^\s*$/))break;var ee=J.match(/^([^:]*?):\s*([^\s].*)$/);if(ee)switch(ee[1].toLowerCase()){case"content-location":U=ee[2].trim();break;case"content-type":H=ee[2].trim();break;case"content-transfer-encoding":B=ee[2].trim();break}}switch(++re,B.toLowerCase()){case"base64":Y=Qr(Oo(z.slice(re).join("")));break;case"quoted-printable":Y=fh(z.slice(re));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+B)}var Q=ys(b,U.slice(L.length),Y,{unsafe:!0});H&&(Q.ctype=H)}function hh(b,z){if(ae(b.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var L=z&&z.root||"",U=(Ct&&Buffer.isBuffer(b)?b.toString("binary"):ae(b)).split(`\r
`),B=0,H="";for(B=0;B<U.length;++B)if(H=U[B],!!/^Content-Location:/i.test(H)&&(H=H.slice(H.indexOf("file")),L||(L=H.slice(0,H.lastIndexOf("/")+1)),H.slice(0,L.length)!=L))for(;L.length>0&&(L=L.slice(0,L.length-1),L=L.slice(0,L.lastIndexOf("/")+1),H.slice(0,L.length)!=L););var Y=(U[1]||"").match(/boundary="(.*?)"/);if(!Y)throw new Error("MAD cannot find boundary");var re="--"+(Y[1]||""),J=[],ee=[],Q={FileIndex:J,FullPaths:ee};S(Q);var ge,Ee=0;for(B=0;B<U.length;++B){var Ue=U[B];Ue!==re&&Ue!==re+"--"||(Ee++&&ca(Q,U.slice(ge,B),L),ge=B)}return Q}function zn(b,z){var L=z||{},U=L.boundary||"SheetJS";U="------="+U;for(var B=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+U.slice(2)+'"',"","",""],H=b.FullPaths[0],Y=H,re=b.FileIndex[0],J=1;J<b.FullPaths.length;++J)if(Y=b.FullPaths[J].slice(H.length),re=b.FileIndex[J],!(!re.size||!re.content||Y=="Sh33tJ5")){Y=Y.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(ot){return"_x"+ot.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(ot){return"_u"+ot.charCodeAt(0).toString(16)+"_"});for(var ee=re.content,Q=Ct&&Buffer.isBuffer(ee)?ee.toString("binary"):ae(ee),ge=0,Ee=Math.min(1024,Q.length),Ue=0,ve=0;ve<=Ee;++ve)(Ue=Q.charCodeAt(ve))>=32&&Ue<128&&++ge;var Ie=ge>=Ee*4/5;B.push(U),B.push("Content-Location: "+(L.root||"file:///C:/SheetJS/")+Y),B.push("Content-Transfer-Encoding: "+(Ie?"quoted-printable":"base64")),B.push("Content-Type: "+_s(re,Y)),B.push(""),B.push(Ie?Sl(Q):dh(Q))}return B.push(U+`--\r
`),B.join(`\r
`)}function ph(b){var z={};return S(z,b),z}function ys(b,z,L,U){var B=U&&U.unsafe;B||S(b);var H=!B&&Ot.find(b,z);if(!H){var Y=b.FullPaths[0];z.slice(0,Y.length)==Y?Y=z:(Y.slice(-1)!="/"&&(Y+="/"),Y=(Y+z).replace("//","/")),H={name:i(z),type:2},b.FileIndex.push(H),b.FullPaths.push(Y),B||Ot.utils.cfb_gc(b)}return H.content=L,H.size=L?L.length:0,U&&(U.CLSID&&(H.clsid=U.CLSID),U.mt&&(H.mt=U.mt),U.ct&&(H.ct=U.ct)),H}function da(b,z){S(b);var L=Ot.find(b,z);if(L){for(var U=0;U<b.FileIndex.length;++U)if(b.FileIndex[U]==L)return b.FileIndex.splice(U,1),b.FullPaths.splice(U,1),!0}return!1}function _g(b,z,L){S(b);var U=Ot.find(b,z);if(U){for(var B=0;B<b.FileIndex.length;++B)if(b.FileIndex[B]==U)return b.FileIndex[B].name=i(L),b.FullPaths[B]=L,!0}return!1}function yg(b){C(b,!0)}return e.find=P,e.read=O,e.parse=c,e.write=we,e.writeFile=ce,e.utils={cfb_new:ph,cfb_add:ys,cfb_del:da,cfb_mov:_g,cfb_gc:yg,ReadShift:Cd,CheckField:$k,prep_blob:Ir,bconcat:Sn,use_zlib:Ae,_deflateRaw:st,_inflateRaw:Il,consts:Le},e}(),a3;function ME(t){return typeof t=="string"?ym(t):Array.isArray(t)?DO(t):t}function zf(t,e,n){if(typeof Deno<"u"){if(n&&typeof e=="string")switch(n){case"utf8":e=new TextEncoder(n).encode(e);break;case"binary":e=ym(e);break;default:throw new Error("Unsupported encoding "+n)}return Deno.writeFileSync(t,e)}var r=n=="utf8"?sf(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(r,t);if(typeof Blob<"u"){var i=new Blob([ME(r)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,t);if(typeof saveAs<"u")return saveAs(i,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:t,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=t,o.href=s,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}else if(typeof URL<"u"&&!URL.createObjectURL&&typeof chrome=="object"){var a="data:application/octet-stream;base64,"+bO(new Uint8Array(ME(r)));return chrome.downloads.download({url:a,filename:t,saveAs:!0})}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(t);return l.open("w"),l.encoding="binary",Array.isArray(e)&&(e=ja(e)),l.write(e),l.close(),e}catch(u){if(!u.message||u.message.indexOf("onstruct")==-1)throw u}throw new Error("cannot save file "+t)}function An(t){for(var e=Object.keys(t),n=[],r=0;r<e.length;++r)Object.prototype.hasOwnProperty.call(t,e[r])&&n.push(e[r]);return n}function LE(t,e){for(var n=[],r=An(t),i=0;i!==r.length;++i)n[t[r[i]][e]]==null&&(n[t[r[i]][e]]=r[i]);return n}function Px(t){for(var e=[],n=An(t),r=0;r!==n.length;++r)e[t[n[r]]]=n[r];return e}function Tm(t){for(var e=[],n=An(t),r=0;r!==n.length;++r)e[t[n[r]]]=parseInt(n[r],10);return e}function l3(t){for(var e=[],n=An(t),r=0;r!==n.length;++r)e[t[n[r]]]==null&&(e[t[n[r]]]=[]),e[t[n[r]]].push(n[r]);return e}var Rk=Date.UTC(1899,11,30,0,0,0),u3=Date.UTC(1899,11,31,0,0,0),c3=Date.UTC(1904,0,1,0,0,0);function Qn(t,e){var n=t.getTime(),r=(n-Rk)/(24*60*60*1e3);return e?(r-=1462,r<-1402?r-1:r):r<60?r-1:r}function pu(t){if(t>=60&&t<61)return t;var e=new Date;return e.setTime((t>60?t:t+1)*24*60*60*1e3+Rk),e}var d3=/^(\d+):(\d+)(:\d+)?(\.\d+)?$/,f3=/^(\d+)-(\d+)-(\d+)$/,kk=/^(\d+)-(\d+)-(\d+)[T ](\d+):(\d+)(:\d+)?(\.\d+)?$/;function jr(t,e){if(t instanceof Date)return t;var n=t.match(d3);if(n)return new Date((e?c3:u3)+((parseInt(n[1],10)*60+parseInt(n[2],10))*60+(n[3]?parseInt(n[3].slice(1),10):0))*1e3+(n[4]?parseInt((n[4]+"000").slice(1,4),10):0));if(n=t.match(f3),n)return new Date(Date.UTC(+n[1],+n[2]-1,+n[3],0,0,0,0));if(n=t.match(kk),n)return new Date(Date.UTC(+n[1],+n[2]-1,+n[3],+n[4],+n[5],n[6]&&parseInt(n[6].slice(1),10)||0,n[7]&&parseInt((n[7]+"0000").slice(1,4),10)||0));var r=new Date(t);return r}function bx(t,e){if(Ct&&Buffer.isBuffer(t))return t.toString("binary");if(typeof TextDecoder<"u")try{var n={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(s){return n[s]||s})}catch{}var r=[],i=0;try{for(i=0;i<t.length-65536;i+=65536)r.push(String.fromCharCode.apply(0,t.slice(i,i+65536)));r.push(String.fromCharCode.apply(0,t.slice(i)))}catch{try{for(;i<t.length-16384;i+=16384)r.push(String.fromCharCode.apply(0,t.slice(i,i+16384)));r.push(String.fromCharCode.apply(0,t.slice(i)))}catch{for(;i!=t.length;++i)r.push(String.fromCharCode(t[i]))}}return r.join("")}function gr(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=gr(t[n]));return e}function Jt(t,e){for(var n="";n.length<e;)n+=t;return n}function Ms(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var n=1,r=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return n*=100,""});return!isNaN(e=Number(r))||(r=r.replace(/[(]([^()]*)[)]/,function(i,s){return n=-n,s}),!isNaN(e=Number(r)))?e/n:e}var h3=/^(0?\d|1[0-2])(?:|:([0-5]?\d)(?:|(\.\d+)(?:|:([0-5]?\d))|:([0-5]?\d)(|\.\d+)))\s+([ap])m?$/,p3=/^([01]?\d|2[0-3])(?:|:([0-5]?\d)(?:|(\.\d+)(?:|:([0-5]?\d))|:([0-5]?\d)(|\.\d+)))$/,m3=/^(\d+)-(\d+)-(\d+)[T ](\d+):(\d+)(:\d+)(\.\d+)?[Z]?$/,g3=new Date("6/9/69 00:00 UTC").valueOf()==-177984e5;function v3(t){return t[2]?t[3]?t[4]?new Date(Date.UTC(1899,11,31,+t[1]%12+(t[7]=="p"?12:0),+t[2],+t[4],parseFloat(t[3])*1e3)):new Date(Date.UTC(1899,11,31,t[7]=="p"?12:0,+t[1],+t[2],parseFloat(t[3])*1e3)):t[5]?new Date(Date.UTC(1899,11,31,+t[1]%12+(t[7]=="p"?12:0),+t[2],+t[5],t[6]?parseFloat(t[6])*1e3:0)):new Date(Date.UTC(1899,11,31,+t[1]%12+(t[7]=="p"?12:0),+t[2],0,0)):new Date(Date.UTC(1899,11,31,+t[1]%12+(t[7]=="p"?12:0),0,0,0))}function _3(t){return t[2]?t[3]?t[4]?new Date(Date.UTC(1899,11,31,+t[1],+t[2],+t[4],parseFloat(t[3])*1e3)):new Date(Date.UTC(1899,11,31,0,+t[1],+t[2],parseFloat(t[3])*1e3)):t[5]?new Date(Date.UTC(1899,11,31,+t[1],+t[2],+t[5],t[6]?parseFloat(t[6])*1e3:0)):new Date(Date.UTC(1899,11,31,+t[1],+t[2],0,0)):new Date(Date.UTC(1899,11,31,+t[1],0,0,0))}var y3=["january","february","march","april","may","june","july","august","september","october","november","december"];function pp(t){if(m3.test(t))return t.indexOf("Z")==-1?Em(new Date(t)):new Date(t);var e=t.toLowerCase(),n=e.replace(/\s+/g," ").trim(),r=n.match(h3);if(r)return v3(r);if(r=n.match(p3),r)return _3(r);if(r=n.match(kk),r)return new Date(Date.UTC(+r[1],+r[2]-1,+r[3],+r[4],+r[5],r[6]&&parseInt(r[6].slice(1),10)||0,r[7]&&parseInt((r[7]+"0000").slice(1,4),10)||0));var i=new Date(g3&&t.indexOf("UTC")==-1?t+" UTC":t),s=new Date(NaN),o=i.getYear();i.getMonth();var a=i.getDate();if(isNaN(a))return s;if(e.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(e=e.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),e.length>3&&y3.indexOf(e)==-1)return s}else if(e.replace(/[ap]m?/,"").match(/[a-z]/))return s;return o<0||o>8099||t.match(/[^-0-9:,\/\\\ ]/)?s:i}function Ou(t){return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds())}function Em(t){return new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()))}function ct(t,e,n){if(t.FullPaths){if(Array.isArray(n)&&typeof n[0]=="string"&&(n=n.join("")),typeof n=="string"){var r;return Ct?r=vs(n):r=FO(n),Ot.utils.cfb_add(t,e,r)}Ot.utils.cfb_add(t,e,n)}else t.file(e,n)}function Dx(){return Ot.utils.cfb_new()}var Rn=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,x3={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Fx=Px(x3),Mx=/[&<>'"]/g,w3=/[\u0000-\u0008\u000b-\u001f\uFFFE-\uFFFF]/g;function dt(t){var e=t+"";return e.replace(Mx,function(n){return Fx[n]}).replace(w3,function(n){return"_x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+"_"})}function OE(t){return dt(t).replace(/ /g,"_x0020_")}var Nk=/[\u0000-\u001f]/g;function Zg(t){var e=t+"";return e.replace(Mx,function(n){return Fx[n]}).replace(/\n/g,"<br/>").replace(Nk,function(n){return"&#x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+";"})}function T3(t){var e=t+"";return e.replace(Mx,function(n){return Fx[n]}).replace(Nk,function(n){return"&#x"+n.charCodeAt(0).toString(16).toUpperCase()+";"})}function E3(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function I3(t){switch(t){case 1:case!0:case"1":case"true":return!0;case 0:case!1:case"0":case"false":return!1}return!1}function ev(t){for(var e="",n=0,r=0,i=0,s=0,o=0,a=0;n<t.length;){if(r=t.charCodeAt(n++),r<128){e+=String.fromCharCode(r);continue}if(i=t.charCodeAt(n++),r>191&&r<224){o=(r&31)<<6,o|=i&63,e+=String.fromCharCode(o);continue}if(s=t.charCodeAt(n++),r<240){e+=String.fromCharCode((r&15)<<12|(i&63)<<6|s&63);continue}o=t.charCodeAt(n++),a=((r&7)<<18|(i&63)<<12|(s&63)<<6|o&63)-65536,e+=String.fromCharCode(55296+(a>>>10&1023)),e+=String.fromCharCode(56320+(a&1023))}return e}function VE(t){var e=qa(2*t.length),n,r,i=1,s=0,o=0,a;for(r=0;r<t.length;r+=i)i=1,(a=t.charCodeAt(r))<128?n=a:a<224?(n=(a&31)*64+(t.charCodeAt(r+1)&63),i=2):a<240?(n=(a&15)*4096+(t.charCodeAt(r+1)&63)*64+(t.charCodeAt(r+2)&63),i=3):(i=4,n=(a&7)*262144+(t.charCodeAt(r+1)&63)*4096+(t.charCodeAt(r+2)&63)*64+(t.charCodeAt(r+3)&63),n-=65536,o=55296+(n>>>10&1023),n=56320+(n&1023)),o!==0&&(e[s++]=o&255,e[s++]=o>>>8,o=0),e[s++]=n%256,e[s++]=n>>>8;return e.slice(0,s).toString("ucs2")}function UE(t){return vs(t,"binary").toString("utf8")}var Wh="foo bar baz",mu=Ct&&(UE(Wh)==ev(Wh)&&UE||VE(Wh)==ev(Wh)&&VE)||ev,sf=Ct?function(t){return vs(t,"utf8").toString("binary")}:function(t){for(var e=[],n=0,r=0,i=0;n<t.length;)switch(r=t.charCodeAt(n++),!0){case r<128:e.push(String.fromCharCode(r));break;case r<2048:e.push(String.fromCharCode(192+(r>>6))),e.push(String.fromCharCode(128+(r&63)));break;case(r>=55296&&r<57344):r-=55296,i=t.charCodeAt(n++)-56320+(r<<10),e.push(String.fromCharCode(240+(i>>18&7))),e.push(String.fromCharCode(144+(i>>12&63))),e.push(String.fromCharCode(128+(i>>6&63))),e.push(String.fromCharCode(128+(i&63)));break;default:e.push(String.fromCharCode(224+(r>>12))),e.push(String.fromCharCode(128+(r>>6&63))),e.push(String.fromCharCode(128+(r&63)))}return e.join("")},S3=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(n){for(var r=n.replace(/^[\t\n\r ]+/,"").replace(/(^|[^\t\n\r ])[\t\n\r ]+$/,"$1").replace(/>\s+/g,">").replace(/\b\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^<>]*>/g,""),i=0;i<t.length;++i)r=r.replace(t[i][0],t[i][1]);return r}}(),Pk=/(^\s|\s$|\n)/;function qn(t,e){return"<"+t+(e.match(Pk)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function of(t){return An(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function xe(t,e,n){return"<"+t+(n!=null?of(n):"")+(e!=null?(e.match(Pk)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function R_(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(n){if(e)throw n}return""}function A3(t,e){switch(typeof t){case"string":var n=xe("vt:lpwstr",dt(t));return n=n.replace(/&quot;/g,"_x0022_"),n;case"number":return xe((t|0)==t?"vt:i4":"vt:r8",dt(String(t)));case"boolean":return xe("vt:bool",t?"true":"false")}if(t instanceof Date)return xe("vt:filetime",R_(t));throw new Error("Unable to serialize "+t)}var On={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},ac=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Zr={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function C3(t,e){for(var n=1-2*(t[e+7]>>>7),r=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),i=t[e+6]&15,s=5;s>=0;--s)i=i*256+t[e+s];return r==2047?i==0?n*(1/0):NaN:(r==0?r=-1022:(r-=1023,i+=Math.pow(2,52)),n*Math.pow(2,r-52)*i)}function R3(t,e,n){var r=(e<0||1/e==-1/0?1:0)<<7,i=0,s=0,o=r?-e:e;isFinite(o)?o==0?i=s=0:(i=Math.floor(Math.log(o)/Math.LN2),s=o*Math.pow(2,52-i),i<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?i=-1022:(s-=Math.pow(2,52),i+=1023)):(i=2047,s=isNaN(e)?26985:0);for(var a=0;a<=5;++a,s/=256)t[n+a]=s&255;t[n+6]=(i&15)<<4|s&15,t[n+7]=i>>4|r}var BE=function(t){for(var e=[],n=10240,r=0;r<t[0].length;++r)if(t[0][r])for(var i=0,s=t[0][r].length;i<s;i+=n)e.push.apply(e,t[0][r].slice(i,i+n));return e},zE=Ct?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:vs(e)})):BE(t)}:BE,GE=function(t,e,n){for(var r=[],i=e;i<n;i+=2)r.push(String.fromCharCode(ad(t,i)));return r.join("").replace(Ad,"")},Lx=Ct?function(t,e,n){return!Buffer.isBuffer(t)||!up?GE(t,e,n):t.toString("utf16le",e,n).replace(Ad,"")}:GE,HE=function(t,e,n){for(var r=[],i=e;i<e+n;++i)r.push(("0"+t[i].toString(16)).slice(-2));return r.join("")},bk=Ct?function(t,e,n){return Buffer.isBuffer(t)?t.toString("hex",e,e+n):HE(t,e,n)}:HE,$E=function(t,e,n){for(var r=[],i=e;i<n;i++)r.push(String.fromCharCode(Ul(t,i)));return r.join("")},Gf=Ct?function(e,n,r){return Buffer.isBuffer(e)?e.toString("utf8",n,r):$E(e,n,r)}:$E,Dk=function(t,e){var n=ei(t,e);return n>0?Gf(t,e+4,e+4+n-1):""},Fk=Dk,Mk=function(t,e){var n=ei(t,e);return n>0?Gf(t,e+4,e+4+n-1):""},Lk=Mk,Ok=function(t,e){var n=2*ei(t,e);return n>0?Gf(t,e+4,e+4+n-1):""},Vk=Ok,Uk=function(e,n){var r=ei(e,n);return r>0?Lx(e,n+4,n+4+r):""},Bk=Uk,zk=function(t,e){var n=ei(t,e);return n>0?Gf(t,e+4,e+4+n):""},Gk=zk,Hk=function(t,e){return C3(t,e)},mp=Hk,Ox=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};Ct&&(Fk=function(e,n){if(!Buffer.isBuffer(e))return Dk(e,n);var r=e.readUInt32LE(n);return r>0?e.toString("utf8",n+4,n+4+r-1):""},Lk=function(e,n){if(!Buffer.isBuffer(e))return Mk(e,n);var r=e.readUInt32LE(n);return r>0?e.toString("utf8",n+4,n+4+r-1):""},Vk=function(e,n){if(!Buffer.isBuffer(e)||!up)return Ok(e,n);var r=2*e.readUInt32LE(n);return e.toString("utf16le",n+4,n+4+r-1)},Bk=function(e,n){if(!Buffer.isBuffer(e)||!up)return Uk(e,n);var r=e.readUInt32LE(n);return e.toString("utf16le",n+4,n+4+r)},Gk=function(e,n){if(!Buffer.isBuffer(e))return zk(e,n);var r=e.readUInt32LE(n);return e.toString("utf8",n+4,n+4+r)},mp=function(e,n){return Buffer.isBuffer(e)?e.readDoubleLE(n):Hk(e,n)},Ox=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var Ul=function(t,e){return t[e]},ad=function(t,e){return t[e+1]*256+t[e]},k3=function(t,e){var n=t[e+1]*256+t[e];return n<32768?n:(65535-n+1)*-1},ei=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},Ta=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},N3=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function Cd(t,e){var n="",r,i,s=[],o,a,l,u;switch(e){case"dbcs":if(u=this.l,Ct&&Buffer.isBuffer(this)&&up)n=this.slice(this.l,this.l+2*t).toString("utf16le");else for(l=0;l<t;++l)n+=String.fromCharCode(ad(this,u)),u+=2;t*=2;break;case"utf8":n=Gf(this,this.l,this.l+t);break;case"utf16le":t*=2,n=Lx(this,this.l,this.l+t);break;case"wstr":return Cd.call(this,t,"dbcs");case"lpstr-ansi":n=Fk(this,this.l),t=4+ei(this,this.l);break;case"lpstr-cp":n=Lk(this,this.l),t=4+ei(this,this.l);break;case"lpwstr":n=Vk(this,this.l),t=4+2*ei(this,this.l);break;case"lpp4":t=4+ei(this,this.l),n=Bk(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+ei(this,this.l),n=Gk(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,n="";(o=Ul(this,this.l+t++))!==0;)s.push(Hh(o));n=s.join("");break;case"_wstr":for(t=0,n="";(o=ad(this,this.l+t))!==0;)s.push(Hh(o)),t+=2;t+=2,n=s.join("");break;case"dbcs-cont":for(n="",u=this.l,l=0;l<t;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return o=Ul(this,u),this.l=u+1,a=Cd.call(this,t-l,o?"dbcs-cont":"sbcs-cont"),s.join("")+a;s.push(Hh(ad(this,u))),u+=2}n=s.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(n="",u=this.l,l=0;l!=t;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return o=Ul(this,u),this.l=u+1,a=Cd.call(this,t-l,o?"dbcs-cont":"sbcs-cont"),s.join("")+a;s.push(Hh(Ul(this,u))),u+=1}n=s.join("");break;default:switch(t){case 1:return r=Ul(this,this.l),this.l++,r;case 2:return r=(e==="i"?k3:ad)(this,this.l),this.l+=2,r;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(r=(t>0?Ta:N3)(this,this.l),this.l+=4,r):(i=ei(this,this.l),this.l+=4,i);case 8:case-8:if(e==="f")return t==8?i=mp(this,this.l):i=mp([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;t=8;case 16:n=bk(this,this.l,t);break}}return this.l+=t,n}var P3=function(t,e,n){t[n]=e&255,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24&255},b3=function(t,e,n){t[n]=e&255,t[n+1]=e>>8&255,t[n+2]=e>>16&255,t[n+3]=e>>24&255},D3=function(t,e,n){t[n]=e&255,t[n+1]=e>>>8&255};function F3(t,e,n){var r=0,i=0;if(n==="dbcs"){for(i=0;i!=e.length;++i)D3(this,e.charCodeAt(i),this.l+2*i);r=2*e.length}else if(n==="sbcs"||n=="cpstr"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=e.length;++i)this[this.l+i]=e.charCodeAt(i)&255;r=e.length}else if(n==="hex"){for(;i<t;++i)this[this.l++]=parseInt(e.slice(2*i,2*i+2),16)||0;return this}else if(n==="utf16le"){var s=Math.min(this.l+t,this.length);for(i=0;i<Math.min(e.length,t);++i){var o=e.charCodeAt(i);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(t){case 1:r=1,this[this.l]=e&255;break;case 2:r=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:r=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:r=4,P3(this,e,this.l);break;case 8:if(r=8,n==="f"){R3(this,e,this.l);break}case 16:break;case-4:r=4,b3(this,e,this.l);break}return this.l+=r,this}function $k(t,e){var n=bk(this,this.l,t.length>>1);if(n!==t)throw new Error(e+"Expected "+t+" saw "+n);this.l+=t.length>>1}function Ir(t,e){t.l=e,t.read_shift=Cd,t.chk=$k,t.write_shift=F3}function ds(t,e){t.l+=e}function X(t){var e=qa(t);return Ir(e,0),e}function fr(){var t=[],e=Ct?16384:2048;Ct&&X(e).copy;var n=function(c){var d=X(c);return Ir(d,0),d},r=n(e),i=function(){r&&(r.l&&(r.length>r.l&&(r=r.slice(0,r.l),r.l=r.length),r.length>0&&t.push(r)),r=null)},s=function(c){return r&&c<r.length-r.l?r:(i(),r=n(Math.max(c+1,e)))},o=function(){return i(),Sn(t)},a=function(){return i(),t},l=function(c){i(),r=c,r.l==null&&(r.l=r.length),s(e)};return{next:s,push:l,end:o,_bufs:t,end2:a}}function ue(t,e,n,r){var i=+e,s;if(!isNaN(i)){r||(r=zB[i].p||(n||[]).length||0),s=1+(i>=128?1:0)+1,r>=128&&++s,r>=16384&&++s,r>=2097152&&++s;var o=t.next(s);i<=127?o.write_shift(1,i):(o.write_shift(1,(i&127)+128),o.write_shift(1,i>>7));for(var a=0;a!=4;++a)if(r>=128)o.write_shift(1,(r&127)+128),r>>=7;else{o.write_shift(1,r);break}r>0&&Ox(n)&&t.push(n)}}function Rd(t,e,n){var r=gr(t);if(e.s?(r.cRel&&(r.c+=e.s.c),r.rRel&&(r.r+=e.s.r)):(r.cRel&&(r.c+=e.c),r.rRel&&(r.r+=e.r)),!n||n.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function WE(t,e,n){var r=gr(t);return r.s=Rd(r.s,e.s,n),r.e=Rd(r.e,e.s,n),r}function kd(t,e){if(t.cRel&&t.c<0)for(t=gr(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=gr(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var n=sn(t);return!t.cRel&&t.cRel!=null&&(n=O3(n)),!t.rRel&&t.rRel!=null&&(n=M3(n)),n}function tv(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Nt(t.s.c)+":"+(t.e.cRel?"":"$")+Nt(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+Ft(t.s.r)+":"+(t.e.rRel?"":"$")+Ft(t.e.r):kd(t.s,e.biff)+":"+kd(t.e,e.biff)}function Vx(t){return parseInt(L3(t),10)-1}function Ft(t){return""+(t+1)}function M3(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function L3(t){return t.replace(/\$(\d+)$/,"$1")}function Ux(t){for(var e=V3(t),n=0,r=0;r!==e.length;++r)n=26*n+e.charCodeAt(r)-64;return n-1}function Nt(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function O3(t){return t.replace(/^([A-Z])/,"$$$1")}function V3(t){return t.replace(/^\$([A-Z])/,"$1")}function U3(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function en(t){for(var e=0,n=0,r=0;r<t.length;++r){var i=t.charCodeAt(r);i>=48&&i<=57?e=10*e+(i-48):i>=65&&i<=90&&(n=26*n+(i-64))}return{c:n-1,r:e-1}}function sn(t){for(var e=t.c+1,n="";e;e=(e-1)/26|0)n=String.fromCharCode((e-1)%26+65)+n;return n+(t.r+1)}function Jn(t){var e=t.indexOf(":");return e==-1?{s:en(t),e:en(t)}:{s:en(t.slice(0,e)),e:en(t.slice(e+1))}}function Cn(t,e){return typeof e>"u"||typeof e=="number"?Cn(t.s,t.e):(typeof t!="string"&&(t=sn(t)),typeof e!="string"&&(e=sn(e)),t==e?t:t+":"+e)}function af(t){var e=Jn(t);return"$"+Nt(e.s.c)+"$"+Ft(e.s.r)+":$"+Nt(e.e.c)+"$"+Ft(e.e.r)}function lf(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t.replace(/'/g,"''")+"'":t}function qt(t){var e={s:{c:0,r:0},e:{c:0,r:0}},n=0,r=0,i=0,s=t.length;for(n=0;r<s&&!((i=t.charCodeAt(r)-64)<1||i>26);++r)n=26*n+i;for(e.s.c=--n,n=0;r<s&&!((i=t.charCodeAt(r)-48)<0||i>9);++r)n=10*n+i;if(e.s.r=--n,r===s||i!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++r,n=0;r!=s&&!((i=t.charCodeAt(r)-64)<1||i>26);++r)n=26*n+i;for(e.e.c=--n,n=0;r!=s&&!((i=t.charCodeAt(r)-48)<0||i>9);++r)n=10*n+i;return e.e.r=--n,e}function qE(t,e){var n=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=Gs(t.z,n?Qn(e):e)}catch{}try{return t.w=Gs((t.XF||{}).numFmtId||(n?14:0),n?Qn(e):e)}catch{return""+e}}function Hs(t,e,n){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&n&&n.dateNF&&(t.z=n.dateNF),t.t=="e"?Rr[t.v]||t.v:e==null?qE(t,t.v):qE(t,e))}function lc(t,e){var n=e&&e.sheet?e.sheet:"Sheet1",r={};return r[n]=t,{SheetNames:[n],Sheets:r}}function B3(t){var e={},n=t||{};return n.dense&&(e["!data"]=[]),e}function Wk(t,e,n){var r=n||{},i=t?t["!data"]!=null:r.dense,s=t||(i?{"!data":[]}:{});i&&!s["!data"]&&(s["!data"]=[]);var o=0,a=0;if(s&&r.origin!=null)if(typeof r.origin=="number")o=r.origin;else{var l=typeof r.origin=="string"?en(r.origin):r.origin;o=l.r,a=l.c}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var c=qt(s["!ref"]);u.s.c=c.s.c,u.s.r=c.s.r,u.e.c=Math.max(u.e.c,c.e.c),u.e.r=Math.max(u.e.r,c.e.r),o==-1&&(u.e.r=o=s["!ref"]?c.e.r+1:0)}else u.s.c=u.e.c=u.s.r=u.e.r=0;for(var d=[],h=!1,g=0;g!=e.length;++g)if(e[g]){if(!Array.isArray(e[g]))throw new Error("aoa_to_sheet expects an array of arrays");var _=o+g;i&&(s["!data"][_]||(s["!data"][_]=[]),d=s["!data"][_]);for(var x=e[g],w=0;w!=x.length;++w)if(!(typeof x[w]>"u")){var y={v:x[w],t:""},T=a+w;if(u.s.r>_&&(u.s.r=_),u.s.c>T&&(u.s.c=T),u.e.r<_&&(u.e.r=_),u.e.c<T&&(u.e.c=T),h=!0,x[w]&&typeof x[w]=="object"&&!Array.isArray(x[w])&&!(x[w]instanceof Date))y=x[w];else if(Array.isArray(y.v)&&(y.f=x[w][1],y.v=y.v[0]),y.v===null)if(y.f)y.t="n";else if(r.nullError)y.t="e",y.v=0;else if(r.sheetStubs)y.t="z";else continue;else typeof y.v=="number"?isFinite(y.v)?y.t="n":isNaN(y.v)?(y.t="e",y.v=15):(y.t="e",y.v=7):typeof y.v=="boolean"?y.t="b":y.v instanceof Date?(y.z=r.dateNF||Wt[14],r.UTC||(y.v=Em(y.v)),r.cellDates?(y.t="d",y.w=Gs(y.z,Qn(y.v,r.date1904))):(y.t="n",y.v=Qn(y.v,r.date1904),y.w=Gs(y.z,y.v))):y.t="s";if(i)d[T]&&d[T].z&&(y.z=d[T].z),d[T]=y;else{var E=Nt(T)+(_+1);s[E]&&s[E].z&&(y.z=s[E].z),s[E]=y}}}return h&&u.s.c<104e5&&(s["!ref"]=Cn(u)),s}function uc(t,e){return Wk(null,t,e)}function z3(t){return t.read_shift(4,"i")}function Li(t,e){return e||(e=X(4)),e.write_shift(4,t),e}function hr(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function Pn(t,e){var n=!1;return e==null&&(n=!0,e=X(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),n?e.slice(0,e.l):e}function G3(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function H3(t,e){return e||(e=X(4)),e.write_shift(2,0),e.write_shift(2,0),e}function Bx(t,e){var n=t.l,r=t.read_shift(1),i=hr(t),s=[],o={t:i,h:i};if(r&1){for(var a=t.read_shift(4),l=0;l!=a;++l)s.push(G3(t));o.r=s}else o.r=[{ich:0,ifnt:0}];return t.l=n+e,o}function $3(t,e){var n=!1;return e==null&&(n=!0,e=X(15+4*t.t.length)),e.write_shift(1,0),Pn(t.t,e),n?e.slice(0,e.l):e}var W3=Bx;function q3(t,e){var n=!1;return e==null&&(n=!0,e=X(23+4*t.t.length)),e.write_shift(1,1),Pn(t.t,e),e.write_shift(4,1),H3({},e),n?e.slice(0,e.l):e}function Si(t){var e=t.read_shift(4),n=t.read_shift(2);return n+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:n}}function dl(t,e){return e==null&&(e=X(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function fl(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function hl(t,e){return e==null&&(e=X(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var j3=hr,qk=Pn;function Im(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function uf(t,e){var n=!1;return e==null&&(n=!0,e=X(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),n?e.slice(0,e.l):e}var K3=hr,k_=Im,zx=uf;function Gx(t){var e=t.slice(t.l,t.l+4),n=e[0]&1,r=e[0]&2;t.l+=4;var i=r===0?mp([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):Ta(e,0)>>2;return n?i/100:i}function jk(t,e){e==null&&(e=X(4));var n=0,r=0,i=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?r=1:i==(i|0)&&i>=-536870912&&i<1<<29&&(r=1,n=1),r)e.write_shift(-4,((n?i:t)<<2)+(n+2));else throw new Error("unsupported RkNumber "+t)}function Kk(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function J3(t,e){return e||(e=X(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var pl=Kk,cc=J3;function dc(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function Ja(t,e){return(e||X(8)).write_shift(8,t,"f")}function Y3(t){var e={},n=t.read_shift(1),r=n>>>1,i=t.read_shift(1),s=t.read_shift(2,"i"),o=t.read_shift(1),a=t.read_shift(1),l=t.read_shift(1);switch(t.l++,r){case 0:e.auto=1;break;case 1:e.index=i;var u=sV[i];u&&(e.rgb=iI(u));break;case 2:e.rgb=iI([o,a,l]);break;case 3:e.theme=i;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function gp(t,e){if(e||(e=X(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var n=t.tint||0;if(n>0?n*=32767:n<0&&(n*=32768),e.write_shift(2,n),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var r=t.rgb||"FFFFFF";typeof r=="number"&&(r=("000000"+r.toString(16)).slice(-6)),e.write_shift(1,parseInt(r.slice(0,2),16)),e.write_shift(1,parseInt(r.slice(2,4),16)),e.write_shift(1,parseInt(r.slice(4,6),16)),e.write_shift(1,255)}return e}function X3(t){var e=t.read_shift(1);t.l++;var n={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return n}function Q3(t,e){e||(e=X(2));var n=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,n),e.write_shift(1,0),e}var Jk=2,Yr=3,qh=11,vp=19,jh=64,Z3=65,eV=71,tV=4108,nV=4126,$n=80,jE={1:{n:"CodePage",t:Jk},2:{n:"Category",t:$n},3:{n:"PresentationFormat",t:$n},4:{n:"ByteCount",t:Yr},5:{n:"LineCount",t:Yr},6:{n:"ParagraphCount",t:Yr},7:{n:"SlideCount",t:Yr},8:{n:"NoteCount",t:Yr},9:{n:"HiddenCount",t:Yr},10:{n:"MultimediaClipCount",t:Yr},11:{n:"ScaleCrop",t:qh},12:{n:"HeadingPairs",t:tV},13:{n:"TitlesOfParts",t:nV},14:{n:"Manager",t:$n},15:{n:"Company",t:$n},16:{n:"LinksUpToDate",t:qh},17:{n:"CharacterCount",t:Yr},19:{n:"SharedDoc",t:qh},22:{n:"HyperlinksChanged",t:qh},23:{n:"AppVersion",t:Yr,p:"version"},24:{n:"DigSig",t:Z3},26:{n:"ContentType",t:$n},27:{n:"ContentStatus",t:$n},28:{n:"Language",t:$n},29:{n:"Version",t:$n},255:{},2147483648:{n:"Locale",t:vp},2147483651:{n:"Behavior",t:vp},1919054434:{}},KE={1:{n:"CodePage",t:Jk},2:{n:"Title",t:$n},3:{n:"Subject",t:$n},4:{n:"Author",t:$n},5:{n:"Keywords",t:$n},6:{n:"Comments",t:$n},7:{n:"Template",t:$n},8:{n:"LastAuthor",t:$n},9:{n:"RevNumber",t:$n},10:{n:"EditTime",t:jh},11:{n:"LastPrinted",t:jh},12:{n:"CreatedDate",t:jh},13:{n:"ModifiedDate",t:jh},14:{n:"PageCount",t:Yr},15:{n:"WordCount",t:Yr},16:{n:"CharCount",t:Yr},17:{n:"Thumbnail",t:eV},18:{n:"Application",t:$n},19:{n:"DocSecurity",t:Yr},255:{},2147483648:{n:"Locale",t:vp},2147483651:{n:"Behavior",t:vp},1919054434:{}};function rV(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var iV=rV([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,0,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),sV=gr(iV),Rr={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},rs={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},oV=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"],aV={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Kh={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function Yk(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function Xk(t,e,n){var r=l3(aV),i=[],s;i[i.length]=Rn,i[i.length]=xe("Types",null,{xmlns:On.CT,"xmlns:xsd":On.xsd,"xmlns:xsi":On.xsi}),i=i.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(u){return xe("Default",null,{Extension:u[0],ContentType:u[1]})}));var o=function(u){t[u]&&t[u].length>0&&(s=t[u][0],i[i.length]=xe("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:Kh[u][e.bookType]||Kh[u].xlsx}))},a=function(u){(t[u]||[]).forEach(function(c){i[i.length]=xe("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:Kh[u][e.bookType]||Kh[u].xlsx})})},l=function(u){(t[u]||[]).forEach(function(c){i[i.length]=xe("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:r[u][0]})})};return o("workbooks"),a("sheets"),a("charts"),l("themes"),["strs","styles"].forEach(o),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),a("metadata"),l("people"),i.length>2&&(i[i.length]="</Types>",i[1]=i[1].replace("/>",">")),i.join("")}var xt={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Qk(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function gu(t){var e=[Rn,xe("Relationships",null,{xmlns:On.RELS})];return An(t["!id"]).forEach(function(n){e[e.length]=xe("Relationship",null,t["!id"][n])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function At(t,e,n,r,i,s){if(i||(i={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,i.Id="rId"+e,i.Type=r,i.Target=n,[xt.HLINK,xt.XPATH,xt.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),t["!id"][i.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][i.Id]=i,t[("/"+i.Target).replace("//","/")]=i,e}function lV(t){var e=[Rn];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var n=0;n<t.length;++n)e.push('  <manifest:file-entry manifest:full-path="'+t[n][0]+'" manifest:media-type="'+t[n][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function JE(t,e,n){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(n||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function uV(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function cV(t){var e=[Rn];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var n=0;n!=t.length;++n)e.push(JE(t[n][0],t[n][1])),e.push(uV("",t[n][0]));return e.push(JE("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function Zk(t,e){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+ap.version+"</meta:generator></office:meta></office:document-meta>"}var La=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function nv(t,e,n,r,i){i[t]!=null||e==null||e===""||(i[t]=e,e=dt(e),r[r.length]=n?xe(t,e,n):qn(t,e))}function eN(t,e){var n=e||{},r=[Rn,xe("cp:coreProperties",null,{"xmlns:cp":On.CORE_PROPS,"xmlns:dc":On.dc,"xmlns:dcterms":On.dcterms,"xmlns:dcmitype":On.dcmitype,"xmlns:xsi":On.xsi})],i={};if(!t&&!n.Props)return r.join("");t&&(t.CreatedDate!=null&&nv("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:R_(t.CreatedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i),t.ModifiedDate!=null&&nv("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:R_(t.ModifiedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i));for(var s=0;s!=La.length;++s){var o=La[s],a=n.Props&&n.Props[o[1]]!=null?n.Props[o[1]]:t?t[o[1]]:null;a===!0?a="1":a===!1?a="0":typeof a=="number"&&(a=String(a)),a!=null&&nv(o[0],a,null,r,i)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var vu=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],tN=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function nN(t){var e=[],n=xe;return t||(t={}),t.Application="SheetJS",e[e.length]=Rn,e[e.length]=xe("Properties",null,{xmlns:On.EXT_PROPS,"xmlns:vt":On.vt}),vu.forEach(function(r){if(t[r[1]]!==void 0){var i;switch(r[2]){case"string":i=dt(String(t[r[1]]));break;case"bool":i=t[r[1]]?"true":"false";break}i!==void 0&&(e[e.length]=n(r[0],i))}}),e[e.length]=n("HeadingPairs",n("vt:vector",n("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+n("vt:variant",n("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=n("TitlesOfParts",n("vt:vector",t.SheetNames.map(function(r){return"<vt:lpstr>"+dt(r)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function rN(t){var e=[Rn,xe("Properties",null,{xmlns:On.CUST_PROPS,"xmlns:vt":On.vt})];if(!t)return e.join("");var n=1;return An(t).forEach(function(i){++n,e[e.length]=xe("property",A3(t[i]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:n,name:dt(i)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var YE={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function dV(t,e){var n=[];return An(YE).map(function(r){for(var i=0;i<La.length;++i)if(La[i][1]==r)return La[i];for(i=0;i<vu.length;++i)if(vu[i][1]==r)return vu[i];throw r}).forEach(function(r){if(t[r[1]]!=null){var i=e&&e.Props&&e.Props[r[1]]!=null?e.Props[r[1]]:t[r[1]];switch(r[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),n.push(qn(YE[r[1]]||r[1],i))}}),xe("DocumentProperties",n.join(""),{xmlns:Zr.o})}function fV(t,e){var n=["Worksheets","SheetNames"],r="CustomDocumentProperties",i=[];return t&&An(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)){for(var o=0;o<La.length;++o)if(s==La[o][1])return;for(o=0;o<vu.length;++o)if(s==vu[o][1])return;for(o=0;o<n.length;++o)if(s==n[o])return;var a=t[s],l="string";typeof a=="number"?(l="float",a=String(a)):a===!0||a===!1?(l="boolean",a=a?"1":"0"):a=String(a),i.push(xe(OE(s),a,{"dt:dt":l}))}}),e&&An(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(t&&Object.prototype.hasOwnProperty.call(t,s))){var o=e[s],a="string";typeof o=="number"?(a="float",o=String(o)):o===!0||o===!1?(a="boolean",o=o?"1":"0"):o instanceof Date?(a="dateTime.tz",o=o.toISOString()):o=String(o),i.push(xe(OE(s),o,{"dt:dt":a}))}}),"<"+r+' xmlns="'+Zr.o+'">'+i.join("")+"</"+r+">"}function hV(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,n=e.getTime()/1e3+11644473600,r=n%Math.pow(2,32),i=(n-r)/Math.pow(2,32);r*=1e7,i*=1e7;var s=r/Math.pow(2,32)|0;s>0&&(r=r%Math.pow(2,32),i+=s);var o=X(8);return o.write_shift(4,r),o.write_shift(4,i),o}function XE(t,e){var n=X(4),r=X(4);switch(n.write_shift(4,t==80?31:t),t){case 3:r.write_shift(-4,e);break;case 5:r=X(8),r.write_shift(8,e,"f");break;case 11:r.write_shift(4,e?1:0);break;case 64:r=hV(e);break;case 31:case 80:for(r=X(4+2*(e.length+1)+(e.length%2?0:2)),r.write_shift(4,e.length+1),r.write_shift(0,e,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return Sn([n,r])}var iN=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function pV(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function QE(t,e,n){var r=X(8),i=[],s=[],o=8,a=0,l=X(8),u=X(8);if(l.write_shift(4,2),l.write_shift(4,1200),u.write_shift(4,1),s.push(l),i.push(u),o+=8+l.length,!e){u=X(8),u.write_shift(4,0),i.unshift(u);var c=[X(4)];for(c[0].write_shift(4,t.length),a=0;a<t.length;++a){var d=t[a][0];for(l=X(8+2*(d.length+1)+(d.length%2?0:2)),l.write_shift(4,a+2),l.write_shift(4,d.length+1),l.write_shift(0,d,"dbcs");l.l!=l.length;)l.write_shift(1,0);c.push(l)}l=Sn(c),s.unshift(l),o+=8+l.length}for(a=0;a<t.length;++a)if(!(e&&!e[t[a][0]])&&!(iN.indexOf(t[a][0])>-1||tN.indexOf(t[a][0])>-1)&&t[a][1]!=null){var h=t[a][1],g=0;if(e){g=+e[t[a][0]];var _=n[g];if(_.p=="version"&&typeof h=="string"){var x=h.split(".");h=(+x[0]<<16)+(+x[1]||0)}l=XE(_.t,h)}else{var w=pV(h);w==-1&&(w=31,h=String(h)),l=XE(w,h)}s.push(l),u=X(8),u.write_shift(4,e?g:2+a),i.push(u),o+=8+l.length}var y=8*(s.length+1);for(a=0;a<s.length;++a)i[a].write_shift(4,y),y+=s[a].length;return r.write_shift(4,o),r.write_shift(4,s.length),Sn([r].concat(i).concat(s))}function ZE(t,e,n,r,i,s){var o=X(i?68:48),a=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,Ot.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,i?2:1),o.write_shift(16,e,"hex"),o.write_shift(4,i?68:48);var l=QE(t,n,r);if(a.push(l),i){var u=QE(i,null,null);o.write_shift(16,s,"hex"),o.write_shift(4,68+l.length),a.push(u)}return Sn(a)}function mV(t,e){e||(e=X(t));for(var n=0;n<t;++n)e.write_shift(1,0);return e}function gV(t,e){return t.read_shift(e)===1}function lr(t,e){return e||(e=X(2)),e.write_shift(2,+!!t),e}function w0(t){return t.read_shift(2,"u")}function fi(t,e){return e||(e=X(2)),e.write_shift(2,t),e}function sN(t,e,n){return n||(n=X(2)),n.write_shift(1,e=="e"?+t:+!!t),n.write_shift(1,e=="e"?1:0),n}function oN(t,e,n){var r=t.read_shift(n&&n.biff>=12?2:1),i="sbcs-cont",s=As;if(n&&n.biff>=8&&(As=1200),!n||n.biff==8){var o=t.read_shift(1);o&&(i="dbcs-cont")}else n.biff==12&&(i="wstr");n.biff>=2&&n.biff<=5&&(i="cpstr");var a=r?t.read_shift(r,i):"";return As=s,a}function vV(t){var e=t.t||"",n=X(3);n.write_shift(2,e.length),n.write_shift(1,1);var r=X(2*e.length);r.write_shift(2*e.length,e,"utf16le");var i=[n,r];return Sn(i)}function _V(t,e,n){var r;if(n){if(n.biff>=2&&n.biff<=5)return t.read_shift(e,"cpstr");if(n.biff>=12)return t.read_shift(e,"dbcs-cont")}var i=t.read_shift(1);return i===0?r=t.read_shift(e,"sbcs-cont"):r=t.read_shift(e,"dbcs-cont"),r}function yV(t,e,n){var r=t.read_shift(n&&n.biff==2?1:2);return r===0?(t.l++,""):_V(t,r,n)}function xV(t,e,n){if(n.biff>5)return yV(t,e,n);var r=t.read_shift(1);return r===0?(t.l++,""):t.read_shift(r,n.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function aN(t,e,n){return n||(n=X(3+2*t.length)),n.write_shift(2,t.length),n.write_shift(1,1),n.write_shift(31,t,"utf16le"),n}function eI(t,e){e||(e=X(6+t.length*2)),e.write_shift(4,1+t.length);for(var n=0;n<t.length;++n)e.write_shift(2,t.charCodeAt(n));return e.write_shift(2,0),e}function wV(t){var e=X(512),n=0,r=t.Target;r.slice(0,7)=="file://"&&(r=r.slice(7));var i=r.indexOf("#"),s=i>-1?31:23;switch(r.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var o=[8,6815827,6619237,4849780,83];for(n=0;n<o.length;++n)e.write_shift(4,o[n]);if(s==28)r=r.slice(1),eI(r,e);else if(s&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<o.length;++n)e.write_shift(1,parseInt(o[n],16));var a=i>-1?r.slice(0,i):r;for(e.write_shift(4,2*(a.length+1)),n=0;n<a.length;++n)e.write_shift(2,a.charCodeAt(n));e.write_shift(2,0),s&8&&eI(i>-1?r.slice(i+1):"",e)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),n=0;n<o.length;++n)e.write_shift(1,parseInt(o[n],16));for(var l=0;r.slice(l*3,l*3+3)=="../"||r.slice(l*3,l*3+3)=="..\\";)++l;for(e.write_shift(2,l),e.write_shift(4,r.length-3*l+1),n=0;n<r.length-3*l;++n)e.write_shift(1,r.charCodeAt(n+3*l)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),n=0;n<6;++n)e.write_shift(4,0)}return e.slice(0,e.l)}function Ya(t,e,n,r){return r||(r=X(6)),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(2,n||0),r}function TV(t,e,n){var r=n.biff>8?4:2,i=t.read_shift(r),s=t.read_shift(r,"i"),o=t.read_shift(r,"i");return[i,s,o]}function EV(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(2),i=t.read_shift(2);return{s:{c:r,r:e},e:{c:i,r:n}}}function lN(t,e){return e||(e=X(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function Hx(t,e,n){var r=1536,i=16;switch(n.bookType){case"biff8":break;case"biff5":r=1280,i=8;break;case"biff4":r=4,i=6;break;case"biff3":r=3,i=6;break;case"biff2":r=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=X(i);return s.write_shift(2,r),s.write_shift(2,e),i>4&&s.write_shift(2,29282),i>6&&s.write_shift(2,1997),i>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function IV(t,e){var n=!e||e.biff==8,r=X(n?112:54);for(r.write_shift(e.biff==8?2:1,7),n&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(n?0:536870912));r.l<r.length;)r.write_shift(1,n?0:32);return r}function SV(t,e){var n=!e||e.biff>=8?2:1,r=X(8+n*t.name.length);r.write_shift(4,t.pos),r.write_shift(1,t.hs||0),r.write_shift(1,t.dt),r.write_shift(1,t.name.length),e.biff>=8&&r.write_shift(1,1),r.write_shift(n*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var i=r.slice(0,r.l);return i.l=r.l,i}function AV(t,e){var n=X(8);n.write_shift(4,t.Count),n.write_shift(4,t.Unique);for(var r=[],i=0;i<t.length;++i)r[i]=vV(t[i]);var s=Sn([n].concat(r));return s.parts=[n.length].concat(r.map(function(o){return o.length})),s}function CV(){var t=X(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function RV(t){var e=X(18),n=1718;return t&&t.RTL&&(n|=64),e.write_shift(2,n),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function kV(t,e){var n=t.name||"Arial",r=e&&e.biff==5,i=r?15+n.length:16+2*n.length,s=X(i);return s.write_shift(2,t.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,n.length),r||s.write_shift(1,1),s.write_shift((r?1:2)*n.length,n,r?"sbcs":"utf16le"),s}function NV(t,e,n,r){var i=X(10);return Ya(t,e,r,i),i.write_shift(4,n),i}function PV(t,e,n,r,i){var s=!i||i.biff==8,o=X(8+ +s+(1+s)*n.length);return Ya(t,e,r,o),o.write_shift(2,n.length),s&&o.write_shift(1,1),o.write_shift((1+s)*n.length,n,s?"utf16le":"sbcs"),o}function bV(t,e,n,r){var i=n&&n.biff==5;r||(r=X(i?3+e.length:5+2*e.length)),r.write_shift(2,t),r.write_shift(i?1:2,e.length),i||r.write_shift(1,1),r.write_shift((i?1:2)*e.length,e,i?"sbcs":"utf16le");var s=r.length>r.l?r.slice(0,r.l):r;return s.l==null&&(s.l=s.length),s}function DV(t){var e=X(1+t.length);return e.write_shift(1,t.length),e.write_shift(t.length,t,"sbcs"),e}function FV(t){var e=X(3+t.length);return e.l+=2,e.write_shift(1,t.length),e.write_shift(t.length,t,"sbcs"),e}function MV(t,e){var n=e.biff==8||!e.biff?4:2,r=X(2*n+6);return r.write_shift(n,t.s.r),r.write_shift(n,t.e.r+1),r.write_shift(2,t.s.c),r.write_shift(2,t.e.c+1),r.write_shift(2,0),r}function tI(t,e,n,r){var i=n&&n.biff==5;r||(r=X(i?16:20)),r.write_shift(2,0),t.style?(r.write_shift(2,t.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,t.numFmtId||0),r.write_shift(2,e<<4));var s=0;return t.numFmtId>0&&i&&(s|=1024),r.write_shift(4,s),r.write_shift(4,0),i||r.write_shift(4,0),r.write_shift(2,0),r}function LV(t){var e=X(4);return e.l+=2,e.write_shift(1,t.numFmtId),e.l++,e}function uN(t){var e=X(12);return e.l++,e.write_shift(1,t.numFmtId),e.l+=10,e}var OV=uN;function VV(t){var e=X(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function rv(t,e,n,r,i,s){var o=X(8);return Ya(t,e,r,o),sN(n,s,o),o}function UV(t,e,n,r){var i=X(14);return Ya(t,e,r,i),Ja(n,i),i}function BV(t,e,n){if(n.biff<8||!(n.biff>8)&&e==t[t.l]+(t[t.l+1]==3?1:0)+1)return nI(t,e,n);for(var r=[],i=t.l+e,s=t.read_shift(n.biff>8?4:2);s--!==0;)r.push(TV(t,n.biff>8?12:6,n));if(t.l!=i)throw new Error("Bad ExternSheet: "+t.l+" != "+i);return r}function nI(t,e,n){t[t.l+1]==3&&t[t.l]++;var r=oN(t,e,n);return r.charCodeAt(0)==3?r.slice(1):r}function iv(t,e,n,r){var i=X(6+(r||t.length));return i.write_shift(2,e),i.write_shift(2,n),i.write_shift(2,r||t.length),i.write_shift(t.length,t,"sbcs"),i}function zV(t){var e=X(2+t.length*8);e.write_shift(2,t.length);for(var n=0;n<t.length;++n)lN(t[n],e);return e}function GV(t){var e=X(24),n=en(t[0]);e.write_shift(2,n.r),e.write_shift(2,n.r),e.write_shift(2,n.c),e.write_shift(2,n.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)e.write_shift(1,parseInt(r[i],16));return Sn([e,wV(t[1])])}function HV(t){var e=t[1].Tooltip,n=X(10+2*(e.length+1));n.write_shift(2,2048);var r=en(t[0]);n.write_shift(2,r.r),n.write_shift(2,r.r),n.write_shift(2,r.c),n.write_shift(2,r.c);for(var i=0;i<e.length;++i)n.write_shift(2,e.charCodeAt(i));return n.write_shift(2,0),n}function $V(t){return t||(t=X(4)),t.write_shift(2,1),t.write_shift(2,1),t}function WV(t,e,n){if(!n.cellStyles)return ds(t,e);var r=n&&n.biff>=12?4:2,i=t.read_shift(r),s=t.read_shift(r),o=t.read_shift(r),a=t.read_shift(r),l=t.read_shift(2);r==2&&(t.l+=2);var u={s:i,e:s,w:o,ixfe:a,flags:l};return(n.biff>=5||!n.biff)&&(u.level=l>>8&7),u}function qV(t,e){var n=X(12);n.write_shift(2,e),n.write_shift(2,e),n.write_shift(2,t.width*256),n.write_shift(2,0);var r=0;return t.hidden&&(r|=1),n.write_shift(1,r),r=t.level||0,n.write_shift(1,r),n.write_shift(2,0),n}function jV(t){for(var e=X(2*t),n=0;n<t;++n)e.write_shift(2,n+1);return e}function Hf(t,e,n,r,i){return t||(t=X(7)),t.write_shift(2,e),t.write_shift(2,n),t.write_shift(1,r||0),t.write_shift(1,i||0),t.write_shift(1,0),t}function KV(t,e,n,r,i){var s=X(15);return Hf(s,t,e,r||0,i||0),s.write_shift(8,n,"f"),s}function JV(t,e,n,r,i){var s=X(9);return Hf(s,t,e,r||0,i||0),s.write_shift(2,n),s}var YV=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=Px({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function n(a,l){var u=[],c=qa(1);switch(l.type){case"base64":c=Qr(Oo(a));break;case"binary":c=Qr(a);break;case"buffer":case"array":c=a;break}Ir(c,0);var d=c.read_shift(1),h=!!(d&136),g=!1,_=!1;switch(d){case 2:break;case 3:break;case 48:g=!0,h=!0;break;case 49:g=!0,h=!0;break;case 131:break;case 139:break;case 140:_=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+d.toString(16))}var x=0,w=521;d==2&&(x=c.read_shift(2)),c.l+=3,d!=2&&(x=c.read_shift(4)),x>1048576&&(x=1e6),d!=2&&(w=c.read_shift(2));var y=c.read_shift(2);l.codepage,d!=2&&(c.l+=16,c.read_shift(1),c[c.l]!==0&&t[c[c.l]],c.l+=1,c.l+=2),_&&(c.l+=36);for(var T=[],E={},N=Math.min(c.length,d==2?521:w-10-(g?264:0)),F=_?32:11;c.l<N&&c[c.l]!=13;)switch(E={},E.name=ja(c.slice(c.l,c.l+F)).replace(/[\u0000\r\n][\S\s]*$/g,""),c.l+=F,E.type=String.fromCharCode(c.read_shift(1)),d!=2&&!_&&(E.offset=c.read_shift(4)),E.len=c.read_shift(1),d==2&&(E.offset=c.read_shift(2)),E.dec=c.read_shift(1),E.name.length&&T.push(E),d!=2&&(c.l+=_?13:14),E.type){case"B":(!g||E.len!=8)&&l.WTF&&console.log("Skipping "+E.name+":"+E.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+E.name+":"+E.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+E.type)}if(c[c.l]!==13&&(c.l=w-1),c.read_shift(1)!==13)throw new Error("DBF Terminator not found "+c.l+" "+c[c.l]);c.l=w;var O=0,S=0;for(u[0]=[],S=0;S!=T.length;++S)u[0][S]=T[S].name;for(;x-- >0;){if(c[c.l]===42){c.l+=y;continue}for(++c.l,u[++O]=[],S=0,S=0;S!=T.length;++S){var A=c.slice(c.l,c.l+T[S].len);c.l+=T[S].len,Ir(A,0);var C=ja(A);switch(T[S].type){case"C":C.trim().length&&(u[O][S]=C.replace(/([^\s])\s+$/,"$1"));break;case"D":C.length===8?(u[O][S]=new Date(Date.UTC(+C.slice(0,4),+C.slice(4,6)-1,+C.slice(6,8),0,0,0,0)),l&&l.UTC||(u[O][S]=Ou(u[O][S]))):u[O][S]=C;break;case"F":u[O][S]=parseFloat(C.trim());break;case"+":case"I":u[O][S]=_?A.read_shift(-4,"i")^2147483648:A.read_shift(4,"i");break;case"L":switch(C.trim().toUpperCase()){case"Y":case"T":u[O][S]=!0;break;case"N":case"F":u[O][S]=!1;break;case"":case"\0":case"?":break;default:throw new Error("DBF Unrecognized L:|"+C+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+d.toString(16));u[O][S]="##MEMO##"+(_?parseInt(C.trim(),10):A.read_shift(4));break;case"N":C=C.replace(/\u0000/g,"").trim(),C&&C!="."&&(u[O][S]=+C||0);break;case"@":u[O][S]=new Date(A.read_shift(-8,"f")-621356832e5);break;case"T":{var k=A.read_shift(4),P=A.read_shift(4);if(k==0&&P==0)break;u[O][S]=new Date((k-2440588)*864e5+P),l&&l.UTC||(u[O][S]=Ou(u[O][S]))}break;case"Y":u[O][S]=A.read_shift(4,"i")/1e4+A.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[O][S]=-A.read_shift(-8,"f");break;case"B":if(g&&T[S].len==8){u[O][S]=A.read_shift(8,"f");break}case"G":case"P":A.l+=T[S].len;break;case"0":if(T[S].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+T[S].type)}}}if(d!=2&&c.l<c.length&&c[c.l++]!=26)throw new Error("DBF EOF Marker missing "+(c.l-1)+" of "+c.length+" "+c[c.l-1].toString(16));return l&&l.sheetRows&&(u=u.slice(0,l.sheetRows)),l.DBF=T,u}function r(a,l){var u=l||{};u.dateNF||(u.dateNF="yyyymmdd");var c=uc(n(a,u),u);return c["!cols"]=u.DBF.map(function(d){return{wch:d.len,DBF:d}}),delete u.DBF,c}function i(a,l){try{var u=lc(r(a,l),l);return u.bookType="dbf",u}catch(c){if(l&&l.WTF)throw c}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function o(a,l){if(!a["!ref"])throw new Error("Cannot export empty sheet to DBF");var u=l||{},c=As;if(+u.codepage>=0&&rf(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=fr(),h=D_(a,{header:1,raw:!0,cellDates:!0}),g=h[0],_=h.slice(1),x=a["!cols"]||[],w=0,y=0,T=0,E=1;for(w=0;w<g.length;++w){if(((x[w]||{}).DBF||{}).name){g[w]=x[w].DBF.name,++T;continue}if(g[w]!=null){if(++T,typeof g[w]=="number"&&(g[w]=g[w].toString(10)),typeof g[w]!="string")throw new Error("DBF Invalid column name "+g[w]+" |"+typeof g[w]+"|");if(g.indexOf(g[w])!==w){for(y=0;y<1024;++y)if(g.indexOf(g[w]+"_"+y)==-1){g[w]+="_"+y;break}}}}var N=qt(a["!ref"]),F=[],O=[],S=[];for(w=0;w<=N.e.c-N.s.c;++w){var A="",C="",k=0,P=[];for(y=0;y<_.length;++y)_[y][w]!=null&&P.push(_[y][w]);if(P.length==0||g[w]==null){F[w]="?";continue}for(y=0;y<P.length;++y){switch(typeof P[y]){case"number":C="B";break;case"string":C="C";break;case"boolean":C="L";break;case"object":C=P[y]instanceof Date?"D":"C";break;default:C="C"}k=Math.max(k,String(P[y]).length),A=A&&A!=C?"C":C}k>250&&(k=250),C=((x[w]||{}).DBF||{}).type,C=="C"&&x[w].DBF.len>k&&(k=x[w].DBF.len),A=="B"&&C=="N"&&(A="N",S[w]=x[w].DBF.dec,k=x[w].DBF.len),O[w]=A=="C"||C=="N"?k:s[A]||0,E+=O[w],F[w]=A}var V=d.next(32);for(V.write_shift(4,318902576),V.write_shift(4,_.length),V.write_shift(2,296+32*T),V.write_shift(2,E),w=0;w<4;++w)V.write_shift(4,0);var D=+e[As]||3;for(V.write_shift(4,0|D<<8),t[D]!=+u.codepage&&(u.codepage&&console.error("DBF Unsupported codepage "+As+", using 1252"),As=1252),w=0,y=0;w<g.length;++w)if(g[w]!=null){var oe=d.next(32),Re=(g[w].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);oe.write_shift(1,Re,"sbcs"),oe.write_shift(1,F[w]=="?"?"C":F[w],"sbcs"),oe.write_shift(4,y),oe.write_shift(1,O[w]||s[F[w]]||0),oe.write_shift(1,S[w]||0),oe.write_shift(1,2),oe.write_shift(4,0),oe.write_shift(1,0),oe.write_shift(4,0),oe.write_shift(4,0),y+=O[w]||s[F[w]]||0}var Je=d.next(264);for(Je.write_shift(4,13),w=0;w<65;++w)Je.write_shift(4,0);for(w=0;w<_.length;++w){var Le=d.next(E);for(Le.write_shift(1,0),y=0;y<g.length;++y)if(g[y]!=null)switch(F[y]){case"L":Le.write_shift(1,_[w][y]==null?63:_[w][y]?84:70);break;case"B":Le.write_shift(8,_[w][y]||0,"f");break;case"N":var ce="0";for(typeof _[w][y]=="number"&&(ce=_[w][y].toFixed(S[y]||0)),ce.length>O[y]&&(ce=ce.slice(0,O[y])),T=0;T<O[y]-ce.length;++T)Le.write_shift(1,32);Le.write_shift(1,ce,"sbcs");break;case"D":_[w][y]?(Le.write_shift(4,("0000"+_[w][y].getFullYear()).slice(-4),"sbcs"),Le.write_shift(2,("00"+(_[w][y].getMonth()+1)).slice(-2),"sbcs"),Le.write_shift(2,("00"+_[w][y].getDate()).slice(-2),"sbcs")):Le.write_shift(8,"00000000","sbcs");break;case"C":var ae=Le.l,we=String(_[w][y]!=null?_[w][y]:"").slice(0,O[y]);for(Le.write_shift(1,we,"cpstr"),ae+=O[y]-Le.l,T=0;T<ae;++T)Le.write_shift(1,32);break}}return As=c,d.next(1).write_shift(1,26),d.end()}return{to_workbook:i,to_sheet:r,from_sheet:o}}(),XV=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+An(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1").replace("{","\\{")+"|\\|)","gm");try{e=new RegExp("\x1BN("+An(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm")}catch{}var n=function(g,_){var x=t[_];return typeof x=="number"?SE(x):x},r=function(g,_,x){var w=_.charCodeAt(0)-32<<4|x.charCodeAt(0)-48;return w==59?g:SE(w)};t["|"]=254;var i=function(g){return g.replace(/\n/g,"\x1B :").replace(/\r/g,"\x1B =")};function s(g,_){switch(_.type){case"base64":return o(Oo(g),_);case"binary":return o(g,_);case"buffer":return o(Ct&&Buffer.isBuffer(g)?g.toString("binary"):ja(g),_);case"array":return o(bx(g),_)}throw new Error("Unrecognized type "+_.type)}function o(g,_){var x=g.split(/[\n\r]+/),w=-1,y=-1,T=0,E=0,N=[],F=[],O=null,S={},A=[],C=[],k=[],P=0,V,D={Workbook:{WBProps:{},Names:[]}};for(+_.codepage>=0&&rf(+_.codepage);T!==x.length;++T){P=0;var oe=x[T].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(e,n),Re=oe.replace(/;;/g,"\0").split(";").map(function(W){return W.replace(/\u0000/g,";")}),Je=Re[0],Le;if(oe.length>0)switch(Je){case"ID":break;case"E":break;case"B":break;case"O":for(E=1;E<Re.length;++E)switch(Re[E].charAt(0)){case"V":{var ce=parseInt(Re[E].slice(1),10);ce>=1&&ce<=4&&(D.Workbook.WBProps.date1904=!0)}break}break;case"W":break;case"P":switch(Re[1].charAt(0)){case"P":F.push(oe.slice(3).replace(/;;/g,";"));break}break;case"NN":{var ae={Sheet:0};for(E=1;E<Re.length;++E)switch(Re[E].charAt(0)){case"N":ae.Name=Re[E].slice(1);break;case"E":ae.Ref=(_&&_.sheet||"Sheet1")+"!"+aI(Re[E].slice(1));break}D.Workbook.Names.push(ae)}break;case"C":var we=!1,$e=!1,Ae=!1,Ve=!1,Te=-1,Ne=-1,Ge="",We="z",G="";for(E=1;E<Re.length;++E)switch(Re[E].charAt(0)){case"A":G=Re[E].slice(1);break;case"X":y=parseInt(Re[E].slice(1),10)-1,$e=!0;break;case"Y":for(w=parseInt(Re[E].slice(1),10)-1,$e||(y=0),V=N.length;V<=w;++V)N[V]=[];break;case"K":Le=Re[E].slice(1),Le.charAt(0)==='"'?(Le=Le.slice(1,Le.length-1),We="s"):Le==="TRUE"||Le==="FALSE"?(Le=Le==="TRUE",We="b"):Le.charAt(0)=="#"&&rs[Le]!=null?(We="e",Le=rs[Le]):isNaN(Ms(Le))||(Le=Ms(Le),We="n",O!==null&&Ka(O)&&_.cellDates&&(Le=pu(D.Workbook.WBProps.date1904?Le+1462:Le),We=typeof Le=="number"?"n":"d")),we=!0;break;case"E":Ve=!0,Ge=aI(Re[E].slice(1),{r:w,c:y});break;case"S":Ae=!0;break;case"G":break;case"R":Te=parseInt(Re[E].slice(1),10)-1;break;case"C":Ne=parseInt(Re[E].slice(1),10)-1;break;default:if(_&&_.WTF)throw new Error("SYLK bad record "+oe)}if(we&&(N[w][y]?(N[w][y].t=We,N[w][y].v=Le):N[w][y]={t:We,v:Le},O&&(N[w][y].z=O),_.cellText!==!1&&O&&(N[w][y].w=Gs(N[w][y].z,N[w][y].v,{date1904:D.Workbook.WBProps.date1904})),O=null),Ae){if(Ve)throw new Error("SYLK shared formula cannot have own formula");var j=Te>-1&&N[Te][Ne];if(!j||!j[1])throw new Error("SYLK shared formula cannot find base");Ge=QU(j[1],{r:w-Te,c:y-Ne})}Ge&&(N[w][y]?N[w][y].f=Ge:N[w][y]={t:"n",f:Ge}),G&&(N[w][y]||(N[w][y]={t:"z"}),N[w][y].c=[{a:"SheetJSYLK",t:G}]);break;case"F":var q=0;for(E=1;E<Re.length;++E)switch(Re[E].charAt(0)){case"X":y=parseInt(Re[E].slice(1),10)-1,++q;break;case"Y":for(w=parseInt(Re[E].slice(1),10)-1,V=N.length;V<=w;++V)N[V]=[];break;case"M":P=parseInt(Re[E].slice(1),10)/20;break;case"F":break;case"G":break;case"P":O=F[parseInt(Re[E].slice(1),10)];break;case"S":break;case"D":break;case"N":break;case"W":for(k=Re[E].slice(1).split(" "),V=parseInt(k[0],10);V<=parseInt(k[1],10);++V)P=parseInt(k[2],10),C[V-1]=P===0?{hidden:!0}:{wch:P};break;case"C":y=parseInt(Re[E].slice(1),10)-1,C[y]||(C[y]={});break;case"R":w=parseInt(Re[E].slice(1),10)-1,A[w]||(A[w]={}),P>0?(A[w].hpt=P,A[w].hpx=hN(P)):P===0&&(A[w].hidden=!0);break;default:if(_&&_.WTF)throw new Error("SYLK bad record "+oe)}q<1&&(O=null);break;default:if(_&&_.WTF)throw new Error("SYLK bad record "+oe)}}return A.length>0&&(S["!rows"]=A),C.length>0&&(S["!cols"]=C),C.forEach(function(W){$x(W)}),_&&_.sheetRows&&(N=N.slice(0,_.sheetRows)),[N,S,D]}function a(g,_){var x=s(g,_),w=x[0],y=x[1],T=x[2],E=gr(_);E.date1904=(((T||{}).Workbook||{}).WBProps||{}).date1904;var N=uc(w,E);An(y).forEach(function(O){N[O]=y[O]});var F=lc(N,_);return An(T).forEach(function(O){F[O]=T[O]}),F.bookType="sylk",F}function l(g,_,x,w,y,T){var E="C;Y"+(x+1)+";X"+(w+1)+";K";switch(g.t){case"n":E+=isFinite(g.v)?g.v||0:Rr[isNaN(g.v)?36:7],g.f&&!g.F&&(E+=";E"+Am(g.f,{r:x,c:w}));break;case"b":E+=g.v?"TRUE":"FALSE";break;case"e":E+=g.w||Rr[g.v]||g.v;break;case"d":E+=Qn(jr(g.v,T),T);break;case"s":E+='"'+(g.v==null?"":String(g.v)).replace(/"/g,"").replace(/;/g,";;")+'"';break}return E}function u(g,_,x){var w="C;Y"+(_+1)+";X"+(x+1)+";A";return w+=i(g.map(function(y){return y.t}).join("")),w}function c(g,_){_.forEach(function(x,w){var y="F;W"+(w+1)+" "+(w+1)+" ";x.hidden?y+="0":(typeof x.width=="number"&&!x.wpx&&(x.wpx=_p(x.width)),typeof x.wpx=="number"&&!x.wch&&(x.wch=yp(x.wpx)),typeof x.wch=="number"&&(y+=Math.round(x.wch))),y.charAt(y.length-1)!=" "&&g.push(y)})}function d(g,_){_.forEach(function(x,w){var y="F;";x.hidden?y+="M0;":x.hpt?y+="M"+20*x.hpt+";":x.hpx&&(y+="M"+20*xp(x.hpx)+";"),y.length>2&&g.push(y+"R"+(w+1))})}function h(g,_,x){_||(_={}),_._formats=["General"];var w=["ID;PSheetJS;N;E"],y=[],T=qt(g["!ref"]||"A1"),E,N=g["!data"]!=null,F=`\r
`,O=(((x||{}).Workbook||{}).WBProps||{}).date1904,S="General";w.push("P;PGeneral");var A=T.s.r,C=T.s.c,k=[];if(g["!ref"]){for(A=T.s.r;A<=T.e.r;++A)if(!(N&&!g["!data"][A])){for(k=[],C=T.s.c;C<=T.e.c;++C)E=N?g["!data"][A][C]:g[Nt(C)+Ft(A)],!(!E||!E.c)&&k.push(u(E.c,A,C));k.length&&y.push(k.join(F))}}if(g["!ref"]){for(A=T.s.r;A<=T.e.r;++A)if(!(N&&!g["!data"][A])){for(k=[],C=T.s.c;C<=T.e.c;++C)if(E=N?g["!data"][A][C]:g[Nt(C)+Ft(A)],!(!E||E.v==null&&(!E.f||E.F))){if((E.z||(E.t=="d"?Wt[14]:"General"))!=S){var P=_._formats.indexOf(E.z);P==-1&&(_._formats.push(E.z),P=_._formats.length-1,w.push("P;P"+E.z.replace(/;/g,";;"))),k.push("F;P"+P+";Y"+(A+1)+";X"+(C+1))}k.push(l(E,g,A,C,_,O))}y.push(k.join(F))}}return w.push("F;P0;DG0G8;M255"),g["!cols"]&&c(w,g["!cols"]),g["!rows"]&&d(w,g["!rows"]),g["!ref"]&&w.push("B;Y"+(T.e.r-T.s.r+1)+";X"+(T.e.c-T.s.c+1)+";D"+[T.s.c,T.s.r,T.e.c,T.e.r].join(" ")),w.push("O;L;D;B"+(O?";V4":"")+";K47;G100 0.001"),delete _._formats,w.join(F)+F+y.join(F)+F+"E"+F}return{to_workbook:a,from_sheet:h}}(),QV=function(){function t(a,l){switch(l.type){case"base64":return e(Oo(a),l);case"binary":return e(a,l);case"buffer":return e(Ct&&Buffer.isBuffer(a)?a.toString("binary"):ja(a),l);case"array":return e(bx(a),l)}throw new Error("Unrecognized type "+l.type)}function e(a,l){for(var u=a.split(`
`),c=-1,d=-1,h=0,g=[];h!==u.length;++h){if(u[h].trim()==="BOT"){g[++c]=[],d=0;continue}if(!(c<0)){var _=u[h].trim().split(","),x=_[0],w=_[1];++h;for(var y=u[h]||"";(y.match(/["]/g)||[]).length&1&&h<u.length-1;)y+=`
`+u[++h];switch(y=y.trim(),+x){case-1:if(y==="BOT"){g[++c]=[],d=0;continue}else if(y!=="EOD")throw new Error("Unrecognized DIF special command "+y);break;case 0:y==="TRUE"?g[c][d]=!0:y==="FALSE"?g[c][d]=!1:isNaN(Ms(w))?isNaN(pp(w).getDate())?g[c][d]=w:(g[c][d]=jr(w),l&&l.UTC||(g[c][d]=Ou(g[c][d]))):g[c][d]=Ms(w),++d;break;case 1:y=y.slice(1,y.length-1),y=y.replace(/""/g,'"'),y&&y.match(/^=".*"$/)&&(y=y.slice(2,-1)),g[c][d++]=y!==""?y:null;break}if(y==="EOD")break}}return l&&l.sheetRows&&(g=g.slice(0,l.sheetRows)),g}function n(a,l){return uc(t(a,l),l)}function r(a,l){var u=lc(n(a,l),l);return u.bookType="dif",u}function i(a,l){return"0,"+String(a)+`\r
`+l}function s(a){return`1,0\r
"`+a.replace(/"/g,'""')+'"'}function o(a){if(!a["!ref"])throw new Error("Cannot export empty sheet to DIF");for(var l=qt(a["!ref"]),u=a["!data"]!=null,c=[`TABLE\r
0,1\r
"sheetjs"\r
`,`VECTORS\r
0,`+(l.e.r-l.s.r+1)+`\r
""\r
`,`TUPLES\r
0,`+(l.e.c-l.s.c+1)+`\r
""\r
`,`DATA\r
0,0\r
""\r
`],d=l.s.r;d<=l.e.r;++d){for(var h=u?a["!data"][d]:[],g=`-1,0\r
BOT\r
`,_=l.s.c;_<=l.e.c;++_){var x=u?h&&h[_]:a[sn({r:d,c:_})];if(x==null){g+=`1,0\r
""\r
`;continue}switch(x.t){case"n":x.w!=null?g+="0,"+x.w+`\r
V`:x.v!=null?g+=i(x.v,"V"):x.f!=null&&!x.F?g+=s("="+x.f):g+=`1,0\r
""`;break;case"b":g+=x.v?i(1,"TRUE"):i(0,"FALSE");break;case"s":g+=s(isNaN(+x.v)?x.v:'="'+x.v+'"');break;case"d":x.w||(x.w=Gs(x.z||Wt[14],Qn(jr(x.v)))),g+=i(x.w,"V");break;default:g+=`1,0\r
""`}g+=`\r
`}c.push(g)}return c.join("")+`-1,0\r
EOD`}return{to_workbook:r,to_sheet:n,from_sheet:o}}(),cN=function(){function t(d){return d.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(d){return d.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function n(d,h){for(var g=d.split(`
`),_=-1,x=-1,w=0,y=[];w!==g.length;++w){var T=g[w].trim().split(":");if(T[0]==="cell"){var E=en(T[1]);if(y.length<=E.r)for(_=y.length;_<=E.r;++_)y[_]||(y[_]=[]);switch(_=E.r,x=E.c,T[2]){case"t":y[_][x]=t(T[3]);break;case"v":y[_][x]=+T[3];break;case"vtf":var N=T[T.length-1];case"vtc":switch(T[3]){case"nl":y[_][x]=!!+T[4];break;default:y[_][x]=T[T.length-1].charAt(0)=="#"?{t:"e",v:rs[T[T.length-1]]}:+T[4];break}T[2]=="vtf"&&(y[_][x]=[y[_][x],N])}}}return h&&h.sheetRows&&(y=y.slice(0,h.sheetRows)),y}function r(d,h){return uc(n(d,h),h)}function i(d,h){return lc(r(d,h),h)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,a=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function u(d){if(!d||!d["!ref"])return"";for(var h=[],g=[],_,x="",w=Jn(d["!ref"]),y=d["!data"]!=null,T=w.s.r;T<=w.e.r;++T)for(var E=w.s.c;E<=w.e.c;++E)if(x=sn({r:T,c:E}),_=y?(d["!data"][T]||[])[E]:d[x],!(!_||_.v==null||_.t==="z")){switch(g=["cell",x,"t"],_.t){case"s":g.push(e(_.v));break;case"b":g[2]="vt"+(_.f?"f":"c"),g[3]="nl",g[4]=_.v?"1":"0",g[5]=e(_.f||(_.v?"TRUE":"FALSE"));break;case"d":var N=Qn(jr(_.v));g[2]="vtc",g[3]="nd",g[4]=""+N,g[5]=_.w||Gs(_.z||Wt[14],N);break;case"n":isFinite(_.v)?_.f?(g[2]="vtf",g[3]="n",g[4]=_.v,g[5]=e(_.f)):(g[2]="v",g[3]=_.v):(g[2]="vt"+(_.f?"f":"c"),g[3]="e"+Rr[isNaN(_.v)?36:7],g[4]="0",g[5]=_.f||g[3].slice(1),g[6]="e",g[7]=g[3].slice(1));break;case"e":continue}h.push(g.join(":"))}return h.push("sheet:c:"+(w.e.c-w.s.c+1)+":r:"+(w.e.r-w.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function c(d){return[s,o,a,o,u(d),l].join(`
`)}return{to_workbook:i,to_sheet:r,from_sheet:c}}(),ZV=function(){function t(c,d,h,g,_){_.raw?d[h][g]=c:c===""||(c==="TRUE"?d[h][g]=!0:c==="FALSE"?d[h][g]=!1:isNaN(Ms(c))?isNaN(pp(c).getDate())?c.charCodeAt(0)==35&&rs[c]!=null?d[h][g]={t:"e",v:rs[c],w:c}:d[h][g]=c:d[h][g]=jr(c):d[h][g]=Ms(c))}function e(c,d){var h=d||{},g=[];if(!c||c.length===0)return g;for(var _=c.split(/[\r\n]/),x=_.length-1;x>=0&&_[x].length===0;)--x;for(var w=10,y=0,T=0;T<=x;++T)y=_[T].indexOf(" "),y==-1?y=_[T].length:y++,w=Math.max(w,y);for(T=0;T<=x;++T){g[T]=[];var E=0;for(t(_[T].slice(0,w).trim(),g,T,E,h),E=1;E<=(_[T].length-w)/10+1;++E)t(_[T].slice(w+(E-1)*10,w+E*10).trim(),g,T,E,h)}return h.sheetRows&&(g=g.slice(0,h.sheetRows)),g}var n={44:",",9:"	",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function i(c){for(var d={},h=!1,g=0,_=0;g<c.length;++g)(_=c.charCodeAt(g))==34?h=!h:!h&&_ in n&&(d[_]=(d[_]||0)+1);_=[];for(g in d)Object.prototype.hasOwnProperty.call(d,g)&&_.push([d[g],g]);if(!_.length){d=r;for(g in d)Object.prototype.hasOwnProperty.call(d,g)&&_.push([d[g],g])}return _.sort(function(x,w){return x[0]-w[0]||r[x[1]]-r[w[1]]}),n[_.pop()[1]]||44}function s(c,d){var h=d||{},g="",_={};h.dense&&(_["!data"]=[]);var x={s:{c:0,r:0},e:{c:0,r:0}};c.slice(0,4)=="sep="?c.charCodeAt(5)==13&&c.charCodeAt(6)==10?(g=c.charAt(4),c=c.slice(7)):c.charCodeAt(5)==13||c.charCodeAt(5)==10?(g=c.charAt(4),c=c.slice(6)):g=i(c.slice(0,1024)):h&&h.FS?g=h.FS:g=i(c.slice(0,1024));var w=0,y=0,T=0,E=0,N=0,F=g.charCodeAt(0),O=!1,S=0,A=c.charCodeAt(0),C=h.dateNF!=null?r3(h.dateNF):null;function k(){var P=c.slice(E,N);P.slice(-1)=="\r"&&(P=P.slice(0,-1));var V={};if(P.charAt(0)=='"'&&P.charAt(P.length-1)=='"'&&(P=P.slice(1,-1).replace(/""/g,'"')),h.cellText!==!1&&(V.w=P),P.length===0)V.t="z";else if(h.raw)V.t="s",V.v=P;else if(P.trim().length===0)V.t="s",V.v=P;else if(P.charCodeAt(0)==61)P.charCodeAt(1)==34&&P.charCodeAt(P.length-1)==34?(V.t="s",V.v=P.slice(2,-1).replace(/""/g,'"')):ZU(P)?(V.t="s",V.f=P.slice(1),V.v=P):(V.t="s",V.v=P);else if(P=="TRUE")V.t="b",V.v=!0;else if(P=="FALSE")V.t="b",V.v=!1;else if(!isNaN(T=Ms(P)))V.t="n",V.v=T;else if(!isNaN((T=pp(P)).getDate())||C&&P.match(C)){if(V.z=h.dateNF||Wt[14],C&&P.match(C)){var D=i3(P,h.dateNF,P.match(C)||[]);T=jr(D),h&&h.UTC===!1&&(T=Ou(T))}else h&&h.UTC===!1?T=Ou(T):h.cellText!==!1&&h.dateNF&&(V.w=Gs(V.z,T));h.cellDates?(V.t="d",V.v=T):(V.t="n",V.v=Qn(T)),h.cellNF||delete V.z}else P.charCodeAt(0)==35&&rs[P]!=null?(V.t="e",V.w=P,V.v=rs[P]):(V.t="s",V.v=P);if(V.t=="z"||(h.dense?(_["!data"][w]||(_["!data"][w]=[]),_["!data"][w][y]=V):_[sn({c:y,r:w})]=V),E=N+1,A=c.charCodeAt(E),x.e.c<y&&(x.e.c=y),x.e.r<w&&(x.e.r=w),S==F)++y;else if(y=0,++w,h.sheetRows&&h.sheetRows<=w)return!0}e:for(;N<c.length;++N)switch(S=c.charCodeAt(N)){case 34:A===34&&(O=!O);break;case 13:if(O)break;c.charCodeAt(N+1)==10&&++N;case F:case 10:if(!O&&k())break e;break}return N-E>0&&k(),_["!ref"]=Cn(x),_}function o(c,d){return!(d&&d.PRN)||d.FS||c.slice(0,4)=="sep="||c.indexOf("	")>=0||c.indexOf(",")>=0||c.indexOf(";")>=0?s(c,d):uc(e(c,d),d)}function a(c,d){var h="",g=d.type=="string"?[0,0,0,0]:A9(c,d);switch(d.type){case"base64":h=Oo(c);break;case"binary":h=c;break;case"buffer":d.codepage==65001?h=c.toString("utf8"):(d.codepage,h=Ct&&Buffer.isBuffer(c)?c.toString("binary"):ja(c));break;case"array":h=bx(c);break;case"string":h=c;break;default:throw new Error("Unrecognized type "+d.type)}return g[0]==239&&g[1]==187&&g[2]==191?h=mu(h.slice(3)):d.type!="string"&&d.type!="buffer"&&d.codepage==65001?h=mu(h):d.type=="binary",h.slice(0,19)=="socialcalc:version:"?cN.to_sheet(d.type=="string"?h:mu(h),d):o(h,d)}function l(c,d){return lc(a(c,d),d)}function u(c){var d=[];if(!c["!ref"])return"";for(var h=qt(c["!ref"]),g,_=c["!data"]!=null,x=h.s.r;x<=h.e.r;++x){for(var w=[],y=h.s.c;y<=h.e.c;++y){var T=sn({r:x,c:y});if(g=_?(c["!data"][x]||[])[y]:c[T],!g||g.v==null){w.push("          ");continue}for(var E=(g.w||(Hs(g),g.w)||"").slice(0,10);E.length<10;)E+=" ";w.push(E+(y===0?" ":""))}d.push(w.join(""))}return d.join(`
`)}return{to_workbook:l,to_sheet:a,from_sheet:u}}(),rI=function(){function t(G,j,q){if(G){Ir(G,G.l||0);for(var W=q.Enum||Ve;G.l<G.length;){var te=G.read_shift(2),le=W[te]||W[65535],pe=G.read_shift(2),Pe=G.l+pe,me=le.f&&le.f(G,pe,q);if(G.l=Pe,j(me,le,te))return}}}function e(G,j){switch(j.type){case"base64":return r(Qr(Oo(G)),j);case"binary":return r(Qr(G),j);case"buffer":case"array":return r(G,j)}throw"Unsupported type "+j.type}var n=["mmmm","dd-mmm-yyyy","dd-mmm","mmm-yyyy","@","mm/dd","hh:mm:ss AM/PM","hh:mm AM/PM","mm/dd/yyyy","mm/dd","hh:mm:ss","hh:mm"];function r(G,j){if(!G)return G;var q=j||{},W={},te="Sheet1",le="",pe=0,Pe={},me=[],Ye=[],He=[];q.dense&&(He=W["!data"]=[]);var et={s:{r:0,c:0},e:{r:0,c:0}},ut=q.sheetRows||0,_t={};if(G[4]==81&&G[5]==80&&G[6]==87)return We(G,j);if(G[2]==0&&(G[3]==8||G[3]==9)&&G.length>=16&&G[14]==5&&G[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(G[2]==2)q.Enum=Ve,t(G,function(Se,se,be){switch(be){case 0:q.vers=Se,Se>=4096&&(q.qpro=!0);break;case 255:q.vers=Se,q.works=!0;break;case 6:et=Se;break;case 204:Se&&(le=Se);break;case 222:le=Se;break;case 15:case 51:(!q.qpro&&!q.works||be==51)&&Se[1].v.charCodeAt(0)<48&&(Se[1].v=Se[1].v.slice(1)),(q.works||q.works2)&&(Se[1].v=Se[1].v.replace(/\r\n/g,`
`));case 13:case 14:case 16:(Se[2]&112)==112&&(Se[2]&15)>1&&(Se[2]&15)<15&&(Se[1].z=q.dateNF||n[(Se[2]&15)-1]||Wt[14],q.cellDates&&(Se[1].v=pu(Se[1].v),Se[1].t=typeof Se[1].v=="number"?"n":"d")),q.qpro&&Se[3]>pe&&(W["!ref"]=Cn(et),Pe[te]=W,me.push(te),W={},q.dense&&(He=W["!data"]=[]),et={s:{r:0,c:0},e:{r:0,c:0}},pe=Se[3],te=le||"Sheet"+(pe+1),le="");var Ce=q.dense?(He[Se[0].r]||[])[Se[0].c]:W[sn(Se[0])];if(Ce){Ce.t=Se[1].t,Ce.v=Se[1].v,Se[1].z!=null&&(Ce.z=Se[1].z),Se[1].f!=null&&(Ce.f=Se[1].f),_t=Ce;break}q.dense?(He[Se[0].r]||(He[Se[0].r]=[]),He[Se[0].r][Se[0].c]=Se[1]):W[sn(Se[0])]=Se[1],_t=Se[1];break;case 21509:q.works2=!0;break;case 21506:Se==5281&&(_t.z="hh:mm:ss",q.cellDates&&_t.t=="n"&&(_t.v=pu(_t.v),_t.t=typeof _t.v=="number"?"n":"d"));break}},q);else if(G[2]==26||G[2]==14)q.Enum=Te,G[2]==14&&(q.qpro=!0,G.l=0),t(G,function(Se,se,be){switch(be){case 204:te=Se;break;case 22:Se[1].v.charCodeAt(0)<48&&(Se[1].v=Se[1].v.slice(1)),Se[1].v=Se[1].v.replace(/\x0F./g,function(Ce){return String.fromCharCode(Ce.charCodeAt(1)-32)}).replace(/\r\n/g,`
`);case 23:case 24:case 25:case 37:case 39:case 40:if(Se[3]>pe&&(W["!ref"]=Cn(et),Pe[te]=W,me.push(te),W={},q.dense&&(He=W["!data"]=[]),et={s:{r:0,c:0},e:{r:0,c:0}},pe=Se[3],te="Sheet"+(pe+1)),ut>0&&Se[0].r>=ut)break;q.dense?(He[Se[0].r]||(He[Se[0].r]=[]),He[Se[0].r][Se[0].c]=Se[1]):W[sn(Se[0])]=Se[1],et.e.c<Se[0].c&&(et.e.c=Se[0].c),et.e.r<Se[0].r&&(et.e.r=Se[0].r);break;case 27:Se[14e3]&&(Ye[Se[14e3][0]]=Se[14e3][1]);break;case 1537:Ye[Se[0]]=Se[1],Se[0]==pe&&(te=Se[1]);break}},q);else throw new Error("Unrecognized LOTUS BOF "+G[2]);if(W["!ref"]=Cn(et),Pe[le||te]=W,me.push(le||te),!Ye.length)return{SheetNames:me,Sheets:Pe};for(var jt={},Me=[],mt=0;mt<Ye.length;++mt)Pe[me[mt]]?(Me.push(Ye[mt]||me[mt]),jt[Ye[mt]]=Pe[Ye[mt]]||Pe[me[mt]]):(Me.push(Ye[mt]),jt[Ye[mt]]={"!ref":"A1"});return{SheetNames:Me,Sheets:jt}}function i(G,j){var q=j||{};if(+q.codepage>=0&&rf(+q.codepage),q.type=="string")throw new Error("Cannot write WK1 to JS string");var W=fr();if(!G["!ref"])throw new Error("Cannot export empty sheet to WK1");var te=qt(G["!ref"]),le=G["!data"]!=null,pe=[];de(W,0,o(1030)),de(W,6,u(te));for(var Pe=Math.min(te.e.r,8191),me=te.s.c;me<=te.e.c;++me)pe[me]=Nt(me);for(var Ye=te.s.r;Ye<=Pe;++Ye){var He=Ft(Ye);for(me=te.s.c;me<=te.e.c;++me){var et=le?(G["!data"][Ye]||[])[me]:G[pe[me]+He];if(!(!et||et.t=="z"))switch(et.t){case"n":(et.v|0)==et.v&&et.v>=-32768&&et.v<=32767?de(W,13,w(Ye,me,et)):de(W,14,T(Ye,me,et));break;case"d":var ut=Qn(et.v);(ut|0)==ut&&ut>=-32768&&ut<=32767?de(W,13,w(Ye,me,{v:ut,z:et.z||Wt[14]})):de(W,14,T(Ye,me,{v:ut,z:et.z||Wt[14]}));break;default:var _t=Hs(et);de(W,15,g(Ye,me,_t.slice(0,239)))}}}return de(W,1),W.end()}function s(G,j){var q=j||{};if(+q.codepage>=0&&rf(+q.codepage),q.type=="string")throw new Error("Cannot write WK3 to JS string");var W=fr();de(W,0,a(G));for(var te=0,le=0;te<G.SheetNames.length;++te)(G.Sheets[G.SheetNames[te]]||{})["!ref"]&&de(W,27,Ae(G.SheetNames[te],le++));var pe=0;for(te=0;te<G.SheetNames.length;++te){var Pe=G.Sheets[G.SheetNames[te]];if(!(!Pe||!Pe["!ref"])){for(var me=qt(Pe["!ref"]),Ye=Pe["!data"]!=null,He=[],et=Math.min(me.e.r,8191),ut=me.s.r;ut<=et;++ut)for(var _t=Ft(ut),jt=me.s.c;jt<=me.e.c;++jt){ut===me.s.r&&(He[jt]=Nt(jt));var Me=He[jt]+_t,mt=Ye?(Pe["!data"][ut]||[])[jt]:Pe[Me];if(!(!mt||mt.t=="z"))if(mt.t=="n")de(W,23,D(ut,jt,pe,mt.v));else{var Se=Hs(mt);de(W,22,k(ut,jt,pe,Se.slice(0,239)))}}++pe}}return de(W,1),W.end()}function o(G){var j=X(2);return j.write_shift(2,G),j}function a(G){var j=X(26);j.write_shift(2,4096),j.write_shift(2,4),j.write_shift(4,0);for(var q=0,W=0,te=0,le=0;le<G.SheetNames.length;++le){var pe=G.SheetNames[le],Pe=G.Sheets[pe];if(!(!Pe||!Pe["!ref"])){++te;var me=Jn(Pe["!ref"]);q<me.e.r&&(q=me.e.r),W<me.e.c&&(W=me.e.c)}}return q>8191&&(q=8191),j.write_shift(2,q),j.write_shift(1,te),j.write_shift(1,W),j.write_shift(2,0),j.write_shift(2,0),j.write_shift(1,1),j.write_shift(1,2),j.write_shift(4,0),j.write_shift(4,0),j}function l(G,j,q){var W={s:{c:0,r:0},e:{c:0,r:0}};return j==8&&q.qpro?(W.s.c=G.read_shift(1),G.l++,W.s.r=G.read_shift(2),W.e.c=G.read_shift(1),G.l++,W.e.r=G.read_shift(2),W):(W.s.c=G.read_shift(2),W.s.r=G.read_shift(2),j==12&&q.qpro&&(G.l+=2),W.e.c=G.read_shift(2),W.e.r=G.read_shift(2),j==12&&q.qpro&&(G.l+=2),W.s.c==65535&&(W.s.c=W.e.c=W.s.r=W.e.r=0),W)}function u(G){var j=X(8);return j.write_shift(2,G.s.c),j.write_shift(2,G.s.r),j.write_shift(2,G.e.c),j.write_shift(2,G.e.r),j}function c(G,j,q){var W=[{c:0,r:0},{t:"n",v:0},0,0];return q.qpro&&q.vers!=20768?(W[0].c=G.read_shift(1),W[3]=G.read_shift(1),W[0].r=G.read_shift(2),G.l+=2):q.works?(W[0].c=G.read_shift(2),W[0].r=G.read_shift(2),W[2]=G.read_shift(2)):(W[2]=G.read_shift(1),W[0].c=G.read_shift(2),W[0].r=G.read_shift(2)),W}function d(G){return G.z&&Ka(G.z)?240|(n.indexOf(G.z)+1||2):255}function h(G,j,q){var W=G.l+j,te=c(G,j,q);if(te[1].t="s",(q.vers&65534)==20768){G.l++;var le=G.read_shift(1);return te[1].v=G.read_shift(le,"utf8"),te}return q.qpro&&G.l++,te[1].v=G.read_shift(W-G.l,"cstr"),te}function g(G,j,q){var W=X(7+q.length);W.write_shift(1,255),W.write_shift(2,j),W.write_shift(2,G),W.write_shift(1,39);for(var te=0;te<W.length;++te){var le=q.charCodeAt(te);W.write_shift(1,le>=128?95:le)}return W.write_shift(1,0),W}function _(G,j,q){var W=G.l+j,te=c(G,j,q);if(te[1].t="s",q.vers==20768){var le=G.read_shift(1);return te[1].v=G.read_shift(le,"utf8"),te}return te[1].v=G.read_shift(W-G.l,"cstr"),te}function x(G,j,q){var W=c(G,j,q);return W[1].v=G.read_shift(2,"i"),W}function w(G,j,q){var W=X(7);return W.write_shift(1,d(q)),W.write_shift(2,j),W.write_shift(2,G),W.write_shift(2,q.v,"i"),W}function y(G,j,q){var W=c(G,j,q);return W[1].v=G.read_shift(8,"f"),W}function T(G,j,q){var W=X(13);return W.write_shift(1,d(q)),W.write_shift(2,j),W.write_shift(2,G),W.write_shift(8,q.v,"f"),W}function E(G,j,q){var W=G.l+j,te=c(G,j,q);if(te[1].v=G.read_shift(8,"f"),q.qpro)G.l=W;else{var le=G.read_shift(2);S(G.slice(G.l,G.l+le),te),G.l+=le}return te}function N(G,j,q){var W=j&32768;return j&=-32769,j=(W?G:0)+(j>=8192?j-16384:j),(W?"":"$")+(q?Nt(j):Ft(j))}var F={31:["NA",0],33:["ABS",1],34:["TRUNC",1],35:["SQRT",1],36:["LOG",1],37:["LN",1],38:["PI",0],39:["SIN",1],40:["COS",1],41:["TAN",1],42:["ATAN2",2],43:["ATAN",1],44:["ASIN",1],45:["ACOS",1],46:["EXP",1],47:["MOD",2],49:["ISNA",1],50:["ISERR",1],51:["FALSE",0],52:["TRUE",0],53:["RAND",0],54:["DATE",3],63:["ROUND",2],64:["TIME",3],68:["ISNUMBER",1],69:["ISTEXT",1],70:["LEN",1],71:["VALUE",1],73:["MID",3],74:["CHAR",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],102:["UPPER",1],103:["LOWER",1],107:["PROPER",1],109:["TRIM",1],111:["T",1]},O=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function S(G,j){Ir(G,0);for(var q=[],W=0,te="",le="",pe="",Pe="";G.l<G.length;){var me=G[G.l++];switch(me){case 0:q.push(G.read_shift(8,"f"));break;case 1:le=N(j[0].c,G.read_shift(2),!0),te=N(j[0].r,G.read_shift(2),!1),q.push(le+te);break;case 2:{var Ye=N(j[0].c,G.read_shift(2),!0),He=N(j[0].r,G.read_shift(2),!1);le=N(j[0].c,G.read_shift(2),!0),te=N(j[0].r,G.read_shift(2),!1),q.push(Ye+He+":"+le+te)}break;case 3:if(G.l<G.length){console.error("WK1 premature formula end");return}break;case 4:q.push("("+q.pop()+")");break;case 5:q.push(G.read_shift(2));break;case 6:{for(var et="";me=G[G.l++];)et+=String.fromCharCode(me);q.push('"'+et.replace(/"/g,'""')+'"')}break;case 8:q.push("-"+q.pop());break;case 23:q.push("+"+q.pop());break;case 22:q.push("NOT("+q.pop()+")");break;case 20:case 21:Pe=q.pop(),pe=q.pop(),q.push(["AND","OR"][me-20]+"("+pe+","+Pe+")");break;default:if(me<32&&O[me])Pe=q.pop(),pe=q.pop(),q.push(pe+O[me]+Pe);else if(F[me]){if(W=F[me][1],W==69&&(W=G[G.l++]),W>q.length){console.error("WK1 bad formula parse 0x"+me.toString(16)+":|"+q.join("|")+"|");return}var ut=q.slice(-W);q.length-=W,q.push(F[me][0]+"("+ut.join(",")+")")}else return me<=7?console.error("WK1 invalid opcode "+me.toString(16)):me<=24?console.error("WK1 unsupported op "+me.toString(16)):me<=30?console.error("WK1 invalid opcode "+me.toString(16)):me<=115?console.error("WK1 unsupported function opcode "+me.toString(16)):console.error("WK1 unrecognized opcode "+me.toString(16))}}q.length==1?j[1].f=""+q[0]:console.error("WK1 bad formula parse |"+q.join("|")+"|")}function A(G){var j=[{c:0,r:0},{t:"n",v:0},0];return j[0].r=G.read_shift(2),j[3]=G[G.l++],j[0].c=G[G.l++],j}function C(G,j){var q=A(G);return q[1].t="s",q[1].v=G.read_shift(j-4,"cstr"),q}function k(G,j,q,W){var te=X(6+W.length);te.write_shift(2,G),te.write_shift(1,q),te.write_shift(1,j),te.write_shift(1,39);for(var le=0;le<W.length;++le){var pe=W.charCodeAt(le);te.write_shift(1,pe>=128?95:pe)}return te.write_shift(1,0),te}function P(G,j){var q=A(G);q[1].v=G.read_shift(2);var W=q[1].v>>1;if(q[1].v&1)switch(W&7){case 0:W=(W>>3)*5e3;break;case 1:W=(W>>3)*500;break;case 2:W=(W>>3)/20;break;case 3:W=(W>>3)/200;break;case 4:W=(W>>3)/2e3;break;case 5:W=(W>>3)/2e4;break;case 6:W=(W>>3)/16;break;case 7:W=(W>>3)/64;break}return q[1].v=W,q}function V(G,j){var q=A(G),W=G.read_shift(4),te=G.read_shift(4),le=G.read_shift(2);if(le==65535)return W===0&&te===3221225472?(q[1].t="e",q[1].v=15):W===0&&te===3489660928?(q[1].t="e",q[1].v=42):q[1].v=0,q;var pe=le&32768;return le=(le&32767)-16446,q[1].v=(1-pe*2)*(te*Math.pow(2,le+32)+W*Math.pow(2,le)),q}function D(G,j,q,W){var te=X(14);if(te.write_shift(2,G),te.write_shift(1,q),te.write_shift(1,j),W==0)return te.write_shift(4,0),te.write_shift(4,0),te.write_shift(2,65535),te;var le=0,pe=0,Pe=0,me=0;return W<0&&(le=1,W=-W),pe=Math.log2(W)|0,W/=Math.pow(2,pe-31),me=W>>>0,me&2147483648||(W/=2,++pe,me=W>>>0),W-=me,me|=2147483648,me>>>=0,W*=Math.pow(2,32),Pe=W>>>0,te.write_shift(4,Pe),te.write_shift(4,me),pe+=16383+(le?32768:0),te.write_shift(2,pe),te}function oe(G,j){var q=V(G);return G.l+=j-14,q}function Re(G,j){var q=A(G),W=G.read_shift(4);return q[1].v=W>>6,q}function Je(G,j){var q=A(G),W=G.read_shift(8,"f");return q[1].v=W,q}function Le(G,j){var q=Je(G);return G.l+=j-12,q}function ce(G,j){return G[G.l+j-1]==0?G.read_shift(j,"cstr"):""}function ae(G,j){var q=G[G.l++];q>j-1&&(q=j-1);for(var W="";W.length<q;)W+=String.fromCharCode(G[G.l++]);return W}function we(G,j,q){if(!(!q.qpro||j<21)){var W=G.read_shift(1);G.l+=17,G.l+=1,G.l+=2;var te=G.read_shift(j-21,"cstr");return[W,te]}}function $e(G,j){for(var q={},W=G.l+j;G.l<W;){var te=G.read_shift(2);if(te==14e3){for(q[te]=[0,""],q[te][0]=G.read_shift(2);G[G.l];)q[te][1]+=String.fromCharCode(G[G.l]),G.l++;G.l++}}return q}function Ae(G,j){var q=X(5+G.length);q.write_shift(2,14e3),q.write_shift(2,j);for(var W=0;W<G.length;++W){var te=G.charCodeAt(W);q[q.l++]=te>127?95:te}return q[q.l++]=0,q}var Ve={0:{n:"BOF",f:w0},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:x},14:{n:"NUMBER",f:y},15:{n:"LABEL",f:h},16:{n:"FORMULA",f:E},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:_},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:ce},222:{n:"SHEETNAMELP",f:ae},255:{n:"BOF",f:w0},21506:{n:"WKSNF",f:w0},65535:{n:""}},Te={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:C},23:{n:"NUMBER17",f:V},24:{n:"NUMBER18",f:P},25:{n:"FORMULA19",f:oe},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:$e},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:Re},38:{n:"??"},39:{n:"NUMBER27",f:Je},40:{n:"FORMULA28",f:Le},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:ce},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:we},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}},Ne={5:"dd-mmm-yy",6:"dd-mmm",7:"mmm-yy",8:"mm/dd/yy",10:"hh:mm:ss AM/PM",11:"hh:mm AM/PM",14:"dd-mmm-yyyy",15:"mmm-yyyy",34:"0.00",50:"0.00;[Red]0.00",66:"0.00;(0.00)",82:"0.00;[Red](0.00)",162:'"$"#,##0.00;\\("$"#,##0.00\\)',288:"0%",304:"0E+00",320:"# ?/?"};function Ge(G){var j=G.read_shift(2),q=G.read_shift(1);if(q!=0)throw"unsupported QPW string type "+q.toString(16);return G.read_shift(j,"sbcs-cont")}function We(G,j){Ir(G,0);var q=j||{},W={};q.dense&&(W["!data"]=[]);var te=[],le="",pe={s:{r:-1,c:-1},e:{r:-1,c:-1}},Pe=0,me=0,Ye=0,He=0,et={SheetNames:[],Sheets:{}},ut=[];e:for(;G.l<G.length;){var _t=G.read_shift(2),jt=G.read_shift(2),Me=G.slice(G.l,G.l+jt);switch(Ir(Me,0),_t){case 1:if(Me.read_shift(4)!=962023505)throw"Bad QPW9 BOF!";break;case 2:break e;case 8:break;case 10:for(var mt=Me.read_shift(4),Se=(Me.length-Me.l)/mt|0,se=0;se<mt;++se){var be=Me.l+Se,Ce={};Me.l+=2,Ce.numFmtId=Me.read_shift(2),Ne[Ce.numFmtId]&&(Ce.z=Ne[Ce.numFmtId]),Me.l=be,ut.push(Ce)}break;case 1025:break;case 1026:break;case 1031:for(Me.l+=12;Me.l<Me.length;)Pe=Me.read_shift(2),me=Me.read_shift(1),te.push(Me.read_shift(Pe,"cstr"));break;case 1032:break;case 1537:{var tt=Me.read_shift(2);W={},q.dense&&(W["!data"]=[]),pe.s.c=Me.read_shift(2),pe.e.c=Me.read_shift(2),pe.s.r=Me.read_shift(4),pe.e.r=Me.read_shift(4),Me.l+=4,Me.l+2<Me.length&&(Pe=Me.read_shift(2),me=Me.read_shift(1),le=Pe==0?"":Me.read_shift(Pe,"cstr")),le||(le=Nt(tt))}break;case 1538:{if(pe.s.c>255||pe.s.r>999999)break;pe.e.c<pe.s.c&&(pe.e.c=pe.s.c),pe.e.r<pe.s.r&&(pe.e.r=pe.s.r),W["!ref"]=Cn(pe),Jx(et,W,le)}break;case 2561:Ye=Me.read_shift(2),pe.e.c<Ye&&(pe.e.c=Ye),pe.s.c>Ye&&(pe.s.c=Ye),He=Me.read_shift(4),pe.s.r>He&&(pe.s.r=He),He=Me.read_shift(4),pe.e.r<He&&(pe.e.r=He);break;case 3073:{He=Me.read_shift(4),Pe=Me.read_shift(4),pe.s.r>He&&(pe.s.r=He),pe.e.r<He+Pe-1&&(pe.e.r=He+Pe-1);for(var st=Nt(Ye);Me.l<Me.length;){var Ze={t:"z"},rt=Me.read_shift(1),wt=-1;rt&128&&(wt=Me.read_shift(2));var $i=rt&64?Me.read_shift(2)-1:0;switch(rt&31){case 0:break;case 1:break;case 2:Ze={t:"n",v:Me.read_shift(2)};break;case 3:Ze={t:"n",v:Me.read_shift(2,"i")};break;case 4:Ze={t:"n",v:Gx(Me)};break;case 5:Ze={t:"n",v:Me.read_shift(8,"f")};break;case 7:Ze={t:"s",v:te[me=Me.read_shift(4)-1]};break;case 8:Ze={t:"n",v:Me.read_shift(8,"f")},Me.l+=2,Me.l+=4,isNaN(Ze.v)&&(Ze={t:"e",v:15});break;default:throw"Unrecognized QPW cell type "+(rt&31)}wt!=-1&&(ut[wt-1]||{}).z&&(Ze.z=ut[wt-1].z);var Bt=0;if(rt&32)switch(rt&31){case 2:Bt=Me.read_shift(2);break;case 3:Bt=Me.read_shift(2,"i");break;case 7:Bt=Me.read_shift(2);break;default:throw"Unsupported delta for QPW cell type "+(rt&31)}if(!(!q.sheetStubs&&Ze.t=="z")){var Ai=gr(Ze);Ze.t=="n"&&Ze.z&&Ka(Ze.z)&&q.cellDates&&(Ai.v=pu(Ze.v),Ai.t=typeof Ai.v=="number"?"n":"d"),W["!data"]!=null?(W["!data"][He]||(W["!data"][He]=[]),W["!data"][He][Ye]=Ai):W[st+Ft(He)]=Ai}for(++He,--Pe;$i-- >0&&Pe>=0;){if(rt&32)switch(rt&31){case 2:Ze={t:"n",v:Ze.v+Bt&65535};break;case 3:Ze={t:"n",v:Ze.v+Bt&65535},Ze.v>32767&&(Ze.v-=65536);break;case 7:Ze={t:"s",v:te[me=me+Bt>>>0]};break;default:throw"Cannot apply delta for QPW cell type "+(rt&31)}else switch(rt&31){case 1:Ze={t:"z"};break;case 2:Ze={t:"n",v:Me.read_shift(2)};break;case 7:Ze={t:"s",v:te[me=Me.read_shift(4)-1]};break;default:throw"Cannot apply repeat for QPW cell type "+(rt&31)}!q.sheetStubs&&Ze.t=="z"||(W["!data"]!=null?(W["!data"][He]||(W["!data"][He]=[]),W["!data"][He][Ye]=Ze):W[st+Ft(He)]=Ze),++He,--Pe}}}break;case 3074:{Ye=Me.read_shift(2),He=Me.read_shift(4);var El=Ge(Me);W["!data"]!=null?(W["!data"][He]||(W["!data"][He]=[]),W["!data"][He][Ye]={t:"s",v:El}):W[Nt(Ye)+Ft(He)]={t:"s",v:El}}break}G.l+=jt}return et}return{sheet_to_wk1:i,book_to_wk3:s,to_workbook:e}}(),eU=/^\s|\s$|[\t\n\r]/;function tU(t,e){if(!e.bookSST)return"";var n=[Rn];n[n.length]=xe("sst",null,{xmlns:ac[0],count:t.Count,uniqueCount:t.Unique});for(var r=0;r!=t.length;++r)if(t[r]!=null){var i=t[r],s="<si>";i.r?s+=i.r:(s+="<t",i.t||(i.t=""),typeof i.t!="string"&&(i.t=String(i.t)),i.t.match(eU)&&(s+=' xml:space="preserve"'),s+=">"+dt(i.t)+"</t>"),s+="</si>",n[n.length]=s}return n.length>2&&(n[n.length]="</sst>",n[1]=n[1].replace("/>",">")),n.join("")}function nU(t){return[t.read_shift(4),t.read_shift(4)]}function rU(t,e){return e||(e=X(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var iU=$3;function sU(t){var e=fr();ue(e,159,rU(t));for(var n=0;n<t.length;++n)ue(e,19,iU(t[n]));return ue(e,160),e.end()}function oU(t){for(var e=[],n=t.split(""),r=0;r<n.length;++r)e[r]=n[r].charCodeAt(0);return e}function dN(t){var e=0,n,r=oU(t),i=r.length+1,s,o,a,l,u;for(n=qa(i),n[0]=r.length,s=1;s!=i;++s)n[s]=r[s-1];for(s=i-1;s>=0;--s)o=n[s],a=e&16384?1:0,l=e<<1&32767,u=a|l,e=u^o;return e^52811}function aU(t,e){var n=["{\\rtf1\\ansi"];if(!t["!ref"])return n[0]+"}";for(var r=qt(t["!ref"]),i,s=t["!data"]!=null,o=[],a=r.s.r;a<=r.e.r;++a){n.push("\\trowd\\trautofit1");for(var l=r.s.c;l<=r.e.c;++l)n.push("\\cellx"+(l+1));for(n.push("\\pard\\intbl"),s&&(o=t["!data"][a]||[]),l=r.s.c;l<=r.e.c;++l){var u=sn({r:a,c:l});if(i=s?o[l]:t[u],!i||i.v==null&&(!i.f||i.F)){n.push(" \\cell");continue}n.push(" "+(i.w||(Hs(i),i.w)||"").replace(/[\r\n]/g,"\\par ")),n.push("\\cell")}n.push("\\pard\\intbl\\row")}return n.join("")+"}"}function iI(t){for(var e=0,n=1;e!=3;++e)n=n*256+(t[e]>255?255:t[e]<0?0:t[e]);return n.toString(16).toUpperCase().slice(1)}var lU=6,Ls=lU;function _p(t){return Math.floor((t+Math.round(128/Ls)/256)*Ls)}function yp(t){return Math.floor((t-5)/Ls*100+.5)/100}function N_(t){return Math.round((t*Ls+5)/Ls*256)/256}function $x(t){t.width?(t.wpx=_p(t.width),t.wch=yp(t.wpx),t.MDW=Ls):t.wpx?(t.wch=yp(t.wpx),t.width=N_(t.wch),t.MDW=Ls):typeof t.wch=="number"&&(t.width=N_(t.wch),t.wpx=_p(t.width),t.MDW=Ls),t.customWidth&&delete t.customWidth}var uU=96,fN=uU;function xp(t){return t*96/fN}function hN(t){return t*fN/96}function cU(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var r=n[0];r<=n[1];++r)t[r]!=null&&(e[e.length]=xe("numFmt",null,{numFmtId:r,formatCode:dt(t[r])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=xe("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function dU(t){var e=[];return e[e.length]=xe("cellXfs",null),t.forEach(function(n){e[e.length]=xe("xf",null,n)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=xe("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function fU(t,e){var n=[Rn,xe("styleSheet",null,{xmlns:ac[0],"xmlns:vt":On.vt})],r;return t.SSF&&(r=cU(t.SSF))!=null&&(n[n.length]=r),n[n.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',n[n.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',n[n.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',n[n.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=dU(e.cellXfs))&&(n[n.length]=r),n[n.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',n[n.length]='<dxfs count="0"/>',n[n.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',n.length>2&&(n[n.length]="</styleSheet>",n[1]=n[1].replace("/>",">")),n.join("")}function hU(t,e){var n=t.read_shift(2),r=hr(t);return[n,r]}function pU(t,e,n){n||(n=X(6+4*e.length)),n.write_shift(2,t),Pn(e,n);var r=n.length>n.l?n.slice(0,n.l):n;return n.l==null&&(n.l=n.length),r}function mU(t,e,n){var r={};r.sz=t.read_shift(2)/20;var i=X3(t);i.fItalic&&(r.italic=1),i.fCondense&&(r.condense=1),i.fExtend&&(r.extend=1),i.fShadow&&(r.shadow=1),i.fOutline&&(r.outline=1),i.fStrikeout&&(r.strike=1);var s=t.read_shift(2);switch(s===700&&(r.bold=1),t.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript";break}var o=t.read_shift(1);o!=0&&(r.underline=o);var a=t.read_shift(1);a>0&&(r.family=a);var l=t.read_shift(1);switch(l>0&&(r.charset=l),t.l++,r.color=Y3(t),t.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor";break}return r.name=hr(t),r}function gU(t,e){e||(e=X(25+4*32)),e.write_shift(2,t.sz*20),Q3(t,e),e.write_shift(2,t.bold?700:400);var n=0;t.vertAlign=="superscript"?n=1:t.vertAlign=="subscript"&&(n=2),e.write_shift(2,n),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),gp(t.color,e);var r=0;return r=2,e.write_shift(1,r),Pn(t.name,e),e.length>e.l?e.slice(0,e.l):e}var vU=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],sv,_U=ds;function sI(t,e){e||(e=X(4*3+8*7+16*1)),sv||(sv=Px(vU));var n=sv[t.patternType];n==null&&(n=40),e.write_shift(4,n);var r=0;if(n!=40)for(gp({auto:1},e),gp({auto:1},e);r<12;++r)e.write_shift(4,0);else{for(;r<4;++r)e.write_shift(4,0);for(;r<12;++r)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function yU(t,e){var n=t.l+e,r=t.read_shift(2),i=t.read_shift(2);return t.l=n,{ixfe:r,numFmtId:i}}function pN(t,e,n){n||(n=X(16)),n.write_shift(2,e||0),n.write_shift(2,t.numFmtId||0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(1,0),n.write_shift(1,0);var r=0;return n.write_shift(1,r),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n}function qc(t,e){return e||(e=X(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var xU=ds;function wU(t,e){return e||(e=X(51)),e.write_shift(1,0),qc(null,e),qc(null,e),qc(null,e),qc(null,e),qc(null,e),e.length>e.l?e.slice(0,e.l):e}function TU(t,e){return e||(e=X(12+4*10)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),uf(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function EU(t,e,n){var r=X(2052);return r.write_shift(4,t),uf(e,r),uf(n,r),r.length>r.l?r.slice(0,r.l):r}function IU(t,e){if(e){var n=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&++n}),n!=0&&(ue(t,615,Li(n)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&ue(t,44,pU(i,e[i]))}),ue(t,616))}}function SU(t){var e=1;ue(t,611,Li(e)),ue(t,43,gU({sz:12,color:{theme:1},name:"Calibri",family:2})),ue(t,612)}function AU(t){var e=2;ue(t,603,Li(e)),ue(t,45,sI({patternType:"none"})),ue(t,45,sI({patternType:"gray125"})),ue(t,604)}function CU(t){var e=1;ue(t,613,Li(e)),ue(t,46,wU()),ue(t,614)}function RU(t){var e=1;ue(t,626,Li(e)),ue(t,47,pN({numFmtId:0},65535)),ue(t,627)}function kU(t,e){ue(t,617,Li(e.length)),e.forEach(function(n){ue(t,47,pN(n,0))}),ue(t,618)}function NU(t){var e=1;ue(t,619,Li(e)),ue(t,48,TU({xfId:0,name:"Normal"})),ue(t,620)}function PU(t){var e=0;ue(t,505,Li(e)),ue(t,506)}function bU(t){var e=0;ue(t,508,EU(e,"TableStyleMedium9","PivotStyleMedium4")),ue(t,509)}function DU(t,e){var n=fr();return ue(n,278),IU(n,t.SSF),SU(n),AU(n),CU(n),RU(n),kU(n,e.cellXfs),NU(n),PU(n),bU(n),ue(n,279),n.end()}function mN(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var n=[Rn];return n[n.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',n[n.length]="<a:themeElements>",n[n.length]='<a:clrScheme name="Office">',n[n.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',n[n.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',n[n.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',n[n.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',n[n.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',n[n.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',n[n.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',n[n.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',n[n.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',n[n.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',n[n.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',n[n.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',n[n.length]="</a:clrScheme>",n[n.length]='<a:fontScheme name="Office">',n[n.length]="<a:majorFont>",n[n.length]='<a:latin typeface="Cambria"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface=" "/>',n[n.length]='<a:font script="Hang" typeface=" "/>',n[n.length]='<a:font script="Hans" typeface=""/>',n[n.length]='<a:font script="Hant" typeface=""/>',n[n.length]='<a:font script="Arab" typeface="Times New Roman"/>',n[n.length]='<a:font script="Hebr" typeface="Times New Roman"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="MoolBoran"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Times New Roman"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:majorFont>",n[n.length]="<a:minorFont>",n[n.length]='<a:latin typeface="Calibri"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface=" "/>',n[n.length]='<a:font script="Hang" typeface=" "/>',n[n.length]='<a:font script="Hans" typeface=""/>',n[n.length]='<a:font script="Hant" typeface=""/>',n[n.length]='<a:font script="Arab" typeface="Arial"/>',n[n.length]='<a:font script="Hebr" typeface="Arial"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="DaunPenh"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Arial"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:minorFont>",n[n.length]="</a:fontScheme>",n[n.length]='<a:fmtScheme name="Office">',n[n.length]="<a:fillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="1"/>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="0"/>',n[n.length]="</a:gradFill>",n[n.length]="</a:fillStyleLst>",n[n.length]="<a:lnStyleLst>",n[n.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]="</a:lnStyleLst>",n[n.length]="<a:effectStyleLst>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',n[n.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',n[n.length]="</a:effectStyle>",n[n.length]="</a:effectStyleLst>",n[n.length]="<a:bgFillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]="</a:bgFillStyleLst>",n[n.length]="</a:fmtScheme>",n[n.length]="</a:themeElements>",n[n.length]="<a:objectDefaults>",n[n.length]="<a:spDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',n[n.length]="</a:spDef>",n[n.length]="<a:lnDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',n[n.length]="</a:lnDef>",n[n.length]="</a:objectDefaults>",n[n.length]="<a:extraClrSchemeLst/>",n[n.length]="</a:theme>",n.join("")}function FU(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:hr(t)}}function MU(t){var e=X(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),Pn(t.name,e),e.slice(0,e.l)}function LU(t){for(var e=[],n=t.read_shift(4);n-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function OU(t){var e=X(4+8*t.length);e.write_shift(4,t.length);for(var n=0;n<t.length;++n)e.write_shift(4,t[n][0]),e.write_shift(4,t[n][1]);return e}function VU(t,e){var n=X(8+2*e.length);return n.write_shift(4,t),Pn(e,n),n.slice(0,n.l)}function UU(t){return t.l+=4,t.read_shift(4)!=0}function BU(t,e){var n=X(8);return n.write_shift(4,t),n.write_shift(4,1),n}function zU(){var t=fr();return ue(t,332),ue(t,334,Li(1)),ue(t,335,MU({name:"XLDAPR",version:12e4,flags:3496657072})),ue(t,336),ue(t,339,VU(1,"XLDAPR")),ue(t,52),ue(t,35,Li(514)),ue(t,4096,Li(0)),ue(t,4097,fi(1)),ue(t,36),ue(t,53),ue(t,340),ue(t,337,BU(1)),ue(t,51,OU([[1,0]])),ue(t,338),ue(t,333),t.end()}function GU(){var t=[Rn];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function HU(t){var e={};e.i=t.read_shift(4);var n={};n.r=t.read_shift(4),n.c=t.read_shift(4),e.r=sn(n);var r=t.read_shift(1);return r&2&&(e.l="1"),r&8&&(e.a="1"),e}function gN(t,e,n){var r=[21600,21600],i=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),s=[xe("xml",null,{"xmlns:v":Zr.v,"xmlns:o":Zr.o,"xmlns:x":Zr.x,"xmlns:mv":Zr.mv}).replace(/\/>/,">"),xe("o:shapelayout",xe("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"})],o=65536*t,a=e||[];return a.length>0&&s.push(xe("v:shapetype",[xe("v:stroke",null,{joinstyle:"miter"}),xe("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202",coordsize:r.join(","),"o:spt":202,path:i})),a.forEach(function(l){++o,s.push($U(l,o))}),s.push("</xml>"),s.join("")}function $U(t,e,n){var r=en(t[0]),i={color2:"#BEFF82",type:"gradient"};i.type=="gradient"&&(i.angle="-180");var s=i.type=="gradient"?xe("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,o=xe("v:fill",s,i),a={on:"t",obscured:"t"};return["<v:shape"+of({id:"_x0000_s"+e,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(t[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",o,xe("v:shadow",null,a),xe("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",qn("x:Anchor",[r.c+1,0,r.r+1,0,r.c+3,20,r.r+5,20].join(",")),qn("x:AutoFill","False"),qn("x:Row",String(r.r)),qn("x:Column",String(r.c)),t[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"].join("")}function WU(t){var e=[Rn,xe("comments",null,{xmlns:ac[0]})],n=[];return e.push("<authors>"),t.forEach(function(r){r[1].forEach(function(i){var s=dt(i.a);n.indexOf(s)==-1&&(n.push(s),e.push("<author>"+s+"</author>")),i.T&&i.ID&&n.indexOf("tc="+i.ID)==-1&&(n.push("tc="+i.ID),e.push("<author>tc="+i.ID+"</author>"))})}),n.length==0&&(n.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(r){var i=0,s=[],o=0;if(r[1][0]&&r[1][0].T&&r[1][0].ID&&(i=n.indexOf("tc="+r[1][0].ID)),r[1].forEach(function(u){u.a&&(i=n.indexOf(dt(u.a))),u.T&&++o,s.push(u.t==null?"":dt(u.t))}),o===0)r[1].forEach(function(u){e.push('<comment ref="'+r[0]+'" authorId="'+n.indexOf(dt(u.a))+'"><text>'),e.push(qn("t",u.t==null?"":dt(u.t))),e.push("</text></comment>")});else{r[1][0]&&r[1][0].T&&r[1][0].ID&&(i=n.indexOf("tc="+r[1][0].ID)),e.push('<comment ref="'+r[0]+'" authorId="'+i+'"><text>');for(var a=`Comment:
    `+s[0]+`
`,l=1;l<s.length;++l)a+=`Reply:
    `+s[l]+`
`;e.push(qn("t",dt(a))),e.push("</text></comment>")}}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function vN(t,e,n){var r=[Rn,xe("ThreadedComments",null,{xmlns:On.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(i){var s="";(i[1]||[]).forEach(function(o,a){if(!o.T){delete o.ID;return}o.a&&e.indexOf(o.a)==-1&&e.push(o.a);var l={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+n.tcid++).slice(-12)+"}"};a==0?s=l.id:l.parentId=s,o.ID=l.id,o.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(o.a)).slice(-12)+"}"),r.push(xe("threadedComment",qn("text",o.t||""),l))})}),r.push("</ThreadedComments>"),r.join("")}function _N(t){var e=[Rn,xe("personList",null,{xmlns:On.TCMNT,"xmlns:x":ac[0]}).replace(/[\/]>/,">")];return t.forEach(function(n,r){e.push(xe("person",null,{displayName:n,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:n,providerId:"None"}))}),e.push("</personList>"),e.join("")}function qU(t){var e={};e.iauthor=t.read_shift(4);var n=pl(t);return e.rfx=n.s,e.ref=sn(n.s),t.l+=16,e}function jU(t,e){return e==null&&(e=X(36)),e.write_shift(4,t[1].iauthor),cc(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var KU=hr;function oI(t){return Pn(t.slice(0,54))}function JU(t){var e=fr(),n=[];return ue(e,628),ue(e,630),t.forEach(function(r){r[1].forEach(function(i){n.indexOf(i.a)>-1||(n.push(i.a.slice(0,54)),ue(e,632,oI(i.a)),i.T&&i.ID&&n.indexOf("tc="+i.ID)==-1&&(n.push("tc="+i.ID),ue(e,632,oI("tc="+i.ID))))})}),ue(e,631),ue(e,633),t.forEach(function(r){r[1].forEach(function(i){var s=-1;i.ID&&(s=n.indexOf("tc="+i.ID)),s==-1&&r[1][0].T&&r[1][0].ID&&(s=n.indexOf("tc="+r[1][0].ID)),s==-1&&(s=n.indexOf(i.a)),i.iauthor=s;var o={s:en(r[0]),e:en(r[0])};ue(e,635,jU([o,i])),i.t&&i.t.length>0&&ue(e,637,q3(i)),ue(e,636),delete i.iauthor})}),ue(e,634),ue(e,629),e.end()}function YU(t,e){e.FullPaths.forEach(function(n,r){if(r!=0){var i=n.replace(/^[\/]*[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&Ot.utils.cfb_add(t,i,e.FileIndex[r].content)}})}var XU=["xlsb","xlsm","xlam","biff8","xla"],aI=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function n(r,i,s,o){var a=!1,l=!1;s.length==0?l=!0:s.charAt(0)=="["&&(l=!0,s=s.slice(1,-1)),o.length==0?a=!0:o.charAt(0)=="["&&(a=!0,o=o.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,c=o.length>0?parseInt(o,10)|0:0;return a?c+=e.c:--c,l?u+=e.r:--u,i+(a?"":"$")+Nt(c)+(l?"":"$")+Ft(u)}return function(i,s){return e=s,i.replace(t,n)}}(),Sm=/(^|[^._A-Z0-9])(\$?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])(\$?)(\d{1,7})(?![_.\(A-Za-z0-9])/g;try{Sm=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g}catch{}var Am=function(){return function(e,n){return e.replace(Sm,function(r,i,s,o,a,l){var u=Ux(o)-(s?0:n.c),c=Vx(l)-(a?0:n.r),d=a=="$"?c+1:c==0?"":"["+c+"]",h=s=="$"?u+1:u==0?"":"["+u+"]";return i+"R"+d+"C"+h})}}();function QU(t,e){return t.replace(Sm,function(n,r,i,s,o,a){return r+(i=="$"?i+s:Nt(Ux(s)+e.c))+(o=="$"?o+a:Ft(Vx(a)+e.r))})}function ZU(t){return t.length!=1}function xn(t){t.l+=1}function Vo(t,e){var n=t.read_shift(2);return[n&16383,n>>14&1,n>>15&1]}function yN(t,e,n){var r=2;if(n){if(n.biff>=2&&n.biff<=5)return xN(t);n.biff==12&&(r=4)}var i=t.read_shift(r),s=t.read_shift(r),o=Vo(t),a=Vo(t);return{s:{r:i,c:o[0],cRel:o[1],rRel:o[2]},e:{r:s,c:a[0],cRel:a[1],rRel:a[2]}}}function xN(t){var e=Vo(t),n=Vo(t),r=t.read_shift(1),i=t.read_shift(1);return{s:{r:e[0],c:r,cRel:e[1],rRel:e[2]},e:{r:n[0],c:i,cRel:n[1],rRel:n[2]}}}function e5(t,e,n){if(n.biff<8)return xN(t);var r=t.read_shift(n.biff==12?4:2),i=t.read_shift(n.biff==12?4:2),s=Vo(t),o=Vo(t);return{s:{r,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}function wN(t,e,n){if(n&&n.biff>=2&&n.biff<=5)return t5(t);var r=t.read_shift(n&&n.biff==12?4:2),i=Vo(t);return{r,c:i[0],cRel:i[1],rRel:i[2]}}function t5(t){var e=Vo(t),n=t.read_shift(1);return{r:e[0],c:n,cRel:e[1],rRel:e[2]}}function n5(t){var e=t.read_shift(2),n=t.read_shift(2);return{r:e,c:n&255,fQuoted:!!(n&16384),cRel:n>>15,rRel:n>>15}}function r5(t,e,n){var r=n&&n.biff?n.biff:8;if(r>=2&&r<=5)return i5(t);var i=t.read_shift(r>=12?4:2),s=t.read_shift(2),o=(s&16384)>>14,a=(s&32768)>>15;if(s&=16383,a==1)for(;i>524287;)i-=1048576;if(o==1)for(;s>8191;)s=s-16384;return{r:i,c:s,cRel:o,rRel:a}}function i5(t){var e=t.read_shift(2),n=t.read_shift(1),r=(e&32768)>>15,i=(e&16384)>>14;return e&=16383,r==1&&e>=8192&&(e=e-16384),i==1&&n>=128&&(n=n-256),{r:e,c:n,cRel:i,rRel:r}}function s5(t,e,n){var r=(t[t.l++]&96)>>5,i=yN(t,n.biff>=2&&n.biff<=5?6:8,n);return[r,i]}function o5(t,e,n){var r=(t[t.l++]&96)>>5,i=t.read_shift(2,"i"),s=8;if(n)switch(n.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}var o=yN(t,s,n);return[r,i,o]}function a5(t,e,n){var r=(t[t.l++]&96)>>5;return t.l+=n&&n.biff>8?12:n.biff<8?6:8,[r]}function l5(t,e,n){var r=(t[t.l++]&96)>>5,i=t.read_shift(2),s=8;if(n)switch(n.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}return t.l+=s,[r,i]}function u5(t,e,n){var r=(t[t.l++]&96)>>5,i=e5(t,e-1,n);return[r,i]}function c5(t,e,n){var r=(t[t.l++]&96)>>5;return t.l+=n.biff==2?6:n.biff==12?14:7,[r]}function lI(t){var e=t[t.l+1]&1,n=1;return t.l+=4,[e,n]}function d5(t,e,n){t.l+=2;for(var r=t.read_shift(n&&n.biff==2?1:2),i=[],s=0;s<=r;++s)i.push(t.read_shift(n&&n.biff==2?1:2));return i}function f5(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=2,[r,t.read_shift(n&&n.biff==2?1:2)]}function h5(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=2,[r,t.read_shift(n&&n.biff==2?1:2)]}function p5(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function m5(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=n&&n.biff==2?3:4,[r]}function TN(t){var e=t.read_shift(1),n=t.read_shift(1);return[e,n]}function g5(t){return t.read_shift(2),TN(t)}function v5(t){return t.read_shift(2),TN(t)}function _5(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var i=wN(t,0,n);return[r,i]}function y5(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var i=r5(t,0,n);return[r,i]}function x5(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(2);n&&n.biff==5&&(t.l+=12);var s=wN(t,0,n);return[r,i,s]}function w5(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(n&&n.biff<=3?1:2);return[b6[i],SN[i],r]}function T5(t,e,n){var r=t[t.l++],i=t.read_shift(1),s=n&&n.biff<=3?[r==88?-1:0,t.read_shift(1)]:E5(t);return[i,(s[0]===0?SN:P6)[s[1]]]}function E5(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function I5(t,e,n){t.l+=n&&n.biff==2?3:4}function S5(t,e,n){if(t.l++,n&&n.biff==12)return[t.read_shift(4,"i"),0];var r=t.read_shift(2),i=t.read_shift(n&&n.biff==2?1:2);return[r,i]}function A5(t){return t.l++,Rr[t.read_shift(1)]}function C5(t){return t.l++,t.read_shift(2)}function R5(t){return t.l++,t.read_shift(1)!==0}function k5(t){return t.l++,dc(t)}function N5(t,e,n){return t.l++,oN(t,e-1,n)}function P5(t,e){var n=[t.read_shift(1)];if(e==12)switch(n[0]){case 2:n[0]=4;break;case 4:n[0]=16;break;case 0:n[0]=1;break;case 1:n[0]=2;break}switch(n[0]){case 4:n[1]=gV(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:n[1]=Rr[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:n[1]=dc(t);break;case 2:n[1]=xV(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+n[0])}return n}function b5(t,e,n){for(var r=t.read_shift(n.biff==12?4:2),i=[],s=0;s!=r;++s)i.push((n.biff==12?pl:EV)(t));return i}function D5(t,e,n){var r=0,i=0;n.biff==12?(r=t.read_shift(4),i=t.read_shift(4)):(i=1+t.read_shift(1),r=1+t.read_shift(2)),n.biff>=2&&n.biff<8&&(--r,--i==0&&(i=256));for(var s=0,o=[];s!=r&&(o[s]=[]);++s)for(var a=0;a!=i;++a)o[s][a]=P5(t,n.biff);return o}function F5(t,e,n){var r=t.read_shift(1)>>>5&3,i=!n||n.biff>=8?4:2,s=t.read_shift(i);switch(n.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[r,0,s]}function M5(t,e,n){if(n.biff==5)return L5(t);var r=t.read_shift(1)>>>5&3,i=t.read_shift(2),s=t.read_shift(4);return[r,i,s]}function L5(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2,"i");t.l+=8;var r=t.read_shift(2);return t.l+=12,[e,n,r]}function O5(t,e,n){var r=t.read_shift(1)>>>5&3;t.l+=n&&n.biff==2?3:4;var i=t.read_shift(n&&n.biff==2?1:2);return[r,i]}function V5(t,e,n){var r=t.read_shift(1)>>>5&3,i=t.read_shift(n&&n.biff==2?1:2);return[r,i]}function U5(t,e,n){var r=t.read_shift(1)>>>5&3;return t.l+=4,n.biff<8&&t.l--,n.biff==12&&(t.l+=2),[r]}function B5(t,e,n){var r=(t[t.l++]&96)>>5,i=t.read_shift(2),s=4;if(n)switch(n.biff){case 5:s=15;break;case 12:s=6;break}return t.l+=s,[r,i]}var z5=ds,G5=ds,H5=ds;function $f(t,e,n){return t.l+=2,[n5(t)]}function Wx(t){return t.l+=6,[]}var $5=$f,W5=Wx,q5=Wx,j5=$f;function EN(t){return t.l+=2,[w0(t),t.read_shift(2)&1]}var K5=$f,J5=EN,Y5=Wx,X5=$f,Q5=$f,Z5=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function e6(t){t.l+=2;var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(4),i=t.read_shift(2),s=t.read_shift(2),o=Z5[n>>2&31];return{ixti:e,coltype:n&3,rt:o,idx:r,c:i,C:s}}function t6(t){return t.l+=2,[t.read_shift(4)]}function n6(t,e,n){return t.l+=5,t.l+=2,t.l+=n.biff==2?1:4,["PTGSHEET"]}function r6(t,e,n){return t.l+=n.biff==2?4:5,["PTGENDSHEET"]}function i6(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2);return[e,n]}function s6(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2);return[e,n]}function o6(t){return t.l+=4,[0,0]}var uI={1:{n:"PtgExp",f:S5},2:{n:"PtgTbl",f:H5},3:{n:"PtgAdd",f:xn},4:{n:"PtgSub",f:xn},5:{n:"PtgMul",f:xn},6:{n:"PtgDiv",f:xn},7:{n:"PtgPower",f:xn},8:{n:"PtgConcat",f:xn},9:{n:"PtgLt",f:xn},10:{n:"PtgLe",f:xn},11:{n:"PtgEq",f:xn},12:{n:"PtgGe",f:xn},13:{n:"PtgGt",f:xn},14:{n:"PtgNe",f:xn},15:{n:"PtgIsect",f:xn},16:{n:"PtgUnion",f:xn},17:{n:"PtgRange",f:xn},18:{n:"PtgUplus",f:xn},19:{n:"PtgUminus",f:xn},20:{n:"PtgPercent",f:xn},21:{n:"PtgParen",f:xn},22:{n:"PtgMissArg",f:xn},23:{n:"PtgStr",f:N5},26:{n:"PtgSheet",f:n6},27:{n:"PtgEndSheet",f:r6},28:{n:"PtgErr",f:A5},29:{n:"PtgBool",f:R5},30:{n:"PtgInt",f:C5},31:{n:"PtgNum",f:k5},32:{n:"PtgArray",f:c5},33:{n:"PtgFunc",f:w5},34:{n:"PtgFuncVar",f:T5},35:{n:"PtgName",f:F5},36:{n:"PtgRef",f:_5},37:{n:"PtgArea",f:s5},38:{n:"PtgMemArea",f:O5},39:{n:"PtgMemErr",f:z5},40:{n:"PtgMemNoMem",f:G5},41:{n:"PtgMemFunc",f:V5},42:{n:"PtgRefErr",f:U5},43:{n:"PtgAreaErr",f:a5},44:{n:"PtgRefN",f:y5},45:{n:"PtgAreaN",f:u5},46:{n:"PtgMemAreaN",f:i6},47:{n:"PtgMemNoMemN",f:s6},57:{n:"PtgNameX",f:M5},58:{n:"PtgRef3d",f:x5},59:{n:"PtgArea3d",f:o5},60:{n:"PtgRefErr3d",f:B5},61:{n:"PtgAreaErr3d",f:l5},255:{}},a6={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},l6={1:{n:"PtgElfLel",f:EN},2:{n:"PtgElfRw",f:X5},3:{n:"PtgElfCol",f:$5},6:{n:"PtgElfRwV",f:Q5},7:{n:"PtgElfColV",f:j5},10:{n:"PtgElfRadical",f:K5},11:{n:"PtgElfRadicalS",f:Y5},13:{n:"PtgElfColS",f:W5},15:{n:"PtgElfColSV",f:q5},16:{n:"PtgElfRadicalLel",f:J5},25:{n:"PtgList",f:e6},29:{n:"PtgSxName",f:t6},255:{}},u6={0:{n:"PtgAttrNoop",f:o6},1:{n:"PtgAttrSemi",f:m5},2:{n:"PtgAttrIf",f:h5},4:{n:"PtgAttrChoose",f:d5},8:{n:"PtgAttrGoto",f:f5},16:{n:"PtgAttrSum",f:I5},32:{n:"PtgAttrBaxcel",f:lI},33:{n:"PtgAttrBaxcel",f:lI},64:{n:"PtgAttrSpace",f:g5},65:{n:"PtgAttrSpaceSemi",f:v5},128:{n:"PtgAttrIfError",f:p5},255:{}};function c6(t,e,n,r){if(r.biff<8)return ds(t,e);for(var i=t.l+e,s=[],o=0;o!==n.length;++o)switch(n[o][0]){case"PtgArray":n[o][1]=D5(t,0,r),s.push(n[o][1]);break;case"PtgMemArea":n[o][2]=b5(t,n[o][1],r),s.push(n[o][2]);break;case"PtgExp":r&&r.biff==12&&(n[o][1][1]=t.read_shift(4),s.push(n[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+n[o][0]}return e=i-t.l,e!==0&&s.push(ds(t,e)),s}function d6(t,e,n){for(var r=t.l+e,i,s,o=[];r!=t.l;)e=r-t.l,s=t[t.l],i=uI[s]||uI[a6[s]],(s===24||s===25)&&(i=(s===24?l6:u6)[t[t.l+1]]),!i||!i.f?ds(t,e):o.push([i.n,i.f(t,e,n)]);return o}function f6(t){for(var e=[],n=0;n<t.length;++n){for(var r=t[n],i=[],s=0;s<r.length;++s){var o=r[s];if(o)switch(o[0]){case 2:i.push('"'+o[1].replace(/"/g,'""')+'"');break;default:i.push(o[1])}else i.push("")}e.push(i.join(","))}return e.join(";")}var h6={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function p6(t,e){var n=t.lastIndexOf("!"),r=e.lastIndexOf("!");return n==-1&&r==-1?t+":"+e:n>0&&r>0&&t.slice(0,n).toLowerCase()==e.slice(0,r).toLowerCase()?t+":"+e.slice(r+1):(console.error("Cannot hydrate range",t,e),t+":"+e)}function IN(t,e,n){if(!t)return"SH33TJSERR0";if(n.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var r=t.XTI[e];if(n.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!r)return"SH33TJSERR1";var i="";if(n.biff>8)switch(t[r[0]][0]){case 357:return i=r[1]==-1?"#REF":t.SheetNames[r[1]],r[1]==r[2]?i:i+":"+t.SheetNames[r[2]];case 358:return n.SID!=null?t.SheetNames[n.SID]:"SH33TJSSAME"+t[r[0]][0];case 355:default:return"SH33TJSSRC"+t[r[0]][0]}switch(t[r[0]][0][0]){case 1025:return i=r[1]==-1?"#REF":t.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?i:i+":"+t.SheetNames[r[2]];case 14849:return t[r[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return t[r[0]][0][3]?(i=r[1]==-1?"#REF":t[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?i:i+":"+t[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function cI(t,e,n){var r=IN(t,e,n);return r=="#REF"?r:lf(r,n)}function Vu(t,e,n,r,i){var s=i&&i.biff||8,o={s:{c:0,r:0}},a=[],l,u,c,d=0,h=0,g,_="";if(!t[0]||!t[0][0])return"";for(var x=-1,w="",y=0,T=t[0].length;y<T;++y){var E=t[0][y];switch(E[0]){case"PtgUminus":a.push("-"+a.pop());break;case"PtgUplus":a.push("+"+a.pop());break;case"PtgPercent":a.push(a.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=a.pop(),u=a.pop(),x>=0){switch(t[0][x][1][0]){case 0:w=Jt(" ",t[0][x][1][1]);break;case 1:w=Jt("\r",t[0][x][1][1]);break;default:if(w="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][x][1][0])}u=u+w,x=-1}a.push(u+h6[E[0]]+l);break;case"PtgIsect":l=a.pop(),u=a.pop(),a.push(u+" "+l);break;case"PtgUnion":l=a.pop(),u=a.pop(),a.push(u+","+l);break;case"PtgRange":l=a.pop(),u=a.pop(),a.push(p6(u,l));break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":c=Rd(E[1][1],o,i),a.push(kd(c,s));break;case"PtgRefN":c=n?Rd(E[1][1],n,i):E[1][1],a.push(kd(c,s));break;case"PtgRef3d":d=E[1][1],c=Rd(E[1][2],o,i),_=cI(r,d,i),a.push(_+"!"+kd(c,s));break;case"PtgFunc":case"PtgFuncVar":var N=E[1][0],F=E[1][1];N||(N=0),N&=127;var O=N==0?[]:a.slice(-N);a.length-=N,F==="User"&&(F=O.shift()),a.push(F+"("+O.join(",")+")");break;case"PtgBool":a.push(E[1]?"TRUE":"FALSE");break;case"PtgInt":a.push(E[1]);break;case"PtgNum":a.push(String(E[1]));break;case"PtgStr":a.push('"'+E[1].replace(/"/g,'""')+'"');break;case"PtgErr":a.push(E[1]);break;case"PtgAreaN":g=WE(E[1][1],n?{s:n}:o,i),a.push(tv(g,i));break;case"PtgArea":g=WE(E[1][1],o,i),a.push(tv(g,i));break;case"PtgArea3d":d=E[1][1],g=E[1][2],_=cI(r,d,i),a.push(_+"!"+tv(g,i));break;case"PtgAttrSum":a.push("SUM("+a.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=E[1][2];var S=(r.names||[])[h-1]||(r[0]||[])[h],A=S?S.Name:"SH33TJSNAME"+String(h);A&&A.slice(0,6)=="_xlfn."&&!i.xlfn&&(A=A.slice(6)),a.push(A);break;case"PtgNameX":var C=E[1][1];h=E[1][2];var k;if(i.biff<=5)C<0&&(C=-C),r[C]&&(k=r[C][h]);else{var P="";if(((r[C]||[])[0]||[])[0]==14849||(((r[C]||[])[0]||[])[0]==1025?r[C][h]&&r[C][h].itab>0&&(P=r.SheetNames[r[C][h].itab-1]+"!"):P=r.SheetNames[h-1]+"!"),r[C]&&r[C][h])P+=r[C][h].Name;else if(r[0]&&r[0][h])P+=r[0][h].Name;else{var V=(IN(r,C,i)||"").split(";;");V[h-1]?P=V[h-1]:P+="SH33TJSERRX"}a.push(P);break}k||(k={Name:"SH33TJSERRY"}),a.push(k.Name);break;case"PtgParen":var D="(",oe=")";if(x>=0){switch(w="",t[0][x][1][0]){case 2:D=Jt(" ",t[0][x][1][1])+D;break;case 3:D=Jt("\r",t[0][x][1][1])+D;break;case 4:oe=Jt(" ",t[0][x][1][1])+oe;break;case 5:oe=Jt("\r",t[0][x][1][1])+oe;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][x][1][0])}x=-1}a.push(D+a.pop()+oe);break;case"PtgRefErr":a.push("#REF!");break;case"PtgRefErr3d":a.push("#REF!");break;case"PtgExp":c={c:E[1][1],r:E[1][0]};var Re={c:n.c,r:n.r};if(r.sharedf[sn(c)]){var Je=r.sharedf[sn(c)];a.push(Vu(Je,o,Re,r,i))}else{var Le=!1;for(l=0;l!=r.arrayf.length;++l)if(u=r.arrayf[l],!(c.c<u[0].s.c||c.c>u[0].e.c)&&!(c.r<u[0].s.r||c.r>u[0].e.r)){a.push(Vu(u[1],o,Re,r,i)),Le=!0;break}Le||a.push(E[1])}break;case"PtgArray":a.push("{"+f6(E[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":x=y;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":a.push("");break;case"PtgAreaErr":a.push("#REF!");break;case"PtgAreaErr3d":a.push("#REF!");break;case"PtgList":a.push("Table"+E[1].idx+"[#"+E[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(E));default:throw new Error("Unrecognized Formula Token: "+String(E))}var ce=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&x>=0&&ce.indexOf(t[0][y][0])==-1){E=t[0][x];var ae=!0;switch(E[1][0]){case 4:ae=!1;case 0:w=Jt(" ",E[1][1]);break;case 5:ae=!1;case 1:w=Jt("\r",E[1][1]);break;default:if(w="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+E[1][0])}a.push((ae?w:"")+a.pop()+(ae?"":w)),x=-1}}if(a.length>1&&i.WTF)throw new Error("bad formula stack");return a[0]=="TRUE"?!0:a[0]=="FALSE"?!1:a[0]}function m6(t){if(t==null){var e=X(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return Ja(t);return Ja(0)}function g6(t,e,n,r,i){var s=Ya(e,n,i),o=m6(t.v),a=X(6),l=33;a.write_shift(2,l),a.write_shift(4,0);for(var u=X(t.bf.length),c=0;c<t.bf.length;++c)u[c]=t.bf[c];var d=Sn([s,o,a,u]);return d}function Cm(t,e,n){var r=t.read_shift(4),i=d6(t,r,n),s=t.read_shift(4),o=s>0?c6(t,s,i,n):null;return[i,o]}var v6=Cm,Rm=Cm,_6=Cm,y6=Cm;function dI(t){if((t|0)==t&&t<Math.pow(2,16)&&t>=0){var e=X(11);return e.write_shift(4,3),e.write_shift(1,30),e.write_shift(2,t),e.write_shift(4,0),e}var n=X(17);return n.write_shift(4,11),n.write_shift(1,31),n.write_shift(8,t),n.write_shift(4,0),n}function x6(t){var e=X(10);return e.write_shift(4,2),e.write_shift(1,28),e.write_shift(1,t),e.write_shift(4,0),e}function w6(t){var e=X(10);return e.write_shift(4,2),e.write_shift(1,29),e.write_shift(1,t?1:0),e.write_shift(4,0),e}function T6(t){var e=X(7);e.write_shift(4,3+2*t.length),e.write_shift(1,23),e.write_shift(2,t.length);var n=X(2*t.length);n.write_shift(2*t.length,t,"utf16le");var r=X(4);return r.write_shift(4,0),Sn([e,n,r])}function E6(t){var e=en(t),n=X(15);return n.write_shift(4,7),n.write_shift(1,36),n.write_shift(4,e.r),n.write_shift(2,e.c|(t.charAt(0)=="$"?0:1)<<14|(t.match(/\$\d/)?0:1)<<15),n.write_shift(4,0),n}function I6(t,e){var n=t.lastIndexOf("!"),r=t.slice(0,n);t=t.slice(n+1);var i=en(t);r.charAt(0)=="'"&&(r=r.slice(1,-1).replace(/''/g,"'"));var s=X(17);return s.write_shift(4,9),s.write_shift(1,58),s.write_shift(2,2+e.SheetNames.map(function(o){return o.toLowerCase()}).indexOf(r.toLowerCase())),s.write_shift(4,i.r),s.write_shift(2,i.c|(t.charAt(0)=="$"?0:1)<<14|(t.match(/\$\d/)?0:1)<<15),s.write_shift(4,0),s}function S6(t,e){var n=t.lastIndexOf("!"),r=t.slice(0,n);t=t.slice(n+1),r.charAt(0)=="'"&&(r=r.slice(1,-1).replace(/''/g,"'"));var i=X(17);return i.write_shift(4,9),i.write_shift(1,60),i.write_shift(2,2+e.SheetNames.map(function(s){return s.toLowerCase()}).indexOf(r.toLowerCase())),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(4,0),i}function A6(t){var e=t.split(":"),n=e[0],r=X(23);r.write_shift(4,15),n=e[0];var i=en(n);return r.write_shift(1,36),r.write_shift(4,i.r),r.write_shift(2,i.c|(n.charAt(0)=="$"?0:1)<<14|(n.match(/\$\d/)?0:1)<<15),r.write_shift(4,0),n=e[1],i=en(n),r.write_shift(1,36),r.write_shift(4,i.r),r.write_shift(2,i.c|(n.charAt(0)=="$"?0:1)<<14|(n.match(/\$\d/)?0:1)<<15),r.write_shift(4,0),r.write_shift(1,17),r.write_shift(4,0),r}function C6(t,e){var n=t.lastIndexOf("!"),r=t.slice(0,n);t=t.slice(n+1),r.charAt(0)=="'"&&(r=r.slice(1,-1).replace(/''/g,"'"));var i=t.split(":"),s=X(27);s.write_shift(4,19);var o=i[0],a=en(o);return s.write_shift(1,58),s.write_shift(2,2+e.SheetNames.map(function(l){return l.toLowerCase()}).indexOf(r.toLowerCase())),s.write_shift(4,a.r),s.write_shift(2,a.c|(o.charAt(0)=="$"?0:1)<<14|(o.match(/\$\d/)?0:1)<<15),o=i[1],a=en(o),s.write_shift(1,58),s.write_shift(2,2+e.SheetNames.map(function(l){return l.toLowerCase()}).indexOf(r.toLowerCase())),s.write_shift(4,a.r),s.write_shift(2,a.c|(o.charAt(0)=="$"?0:1)<<14|(o.match(/\$\d/)?0:1)<<15),s.write_shift(1,17),s.write_shift(4,0),s}function R6(t,e){var n=t.lastIndexOf("!"),r=t.slice(0,n);t=t.slice(n+1),r.charAt(0)=="'"&&(r=r.slice(1,-1).replace(/''/g,"'"));var i=Jn(t),s=X(23);return s.write_shift(4,15),s.write_shift(1,59),s.write_shift(2,2+e.SheetNames.map(function(o){return o.toLowerCase()}).indexOf(r.toLowerCase())),s.write_shift(4,i.s.r),s.write_shift(4,i.e.r),s.write_shift(2,i.s.c),s.write_shift(2,i.e.c),s.write_shift(4,0),s}function k6(t,e){if(typeof t=="number")return dI(t);if(typeof t=="boolean")return w6(t);if(/^#(DIV\/0!|GETTING_DATA|N\/A|NAME\?|NULL!|NUM!|REF!|VALUE!)$/.test(t))return x6(+rs[t]);if(t.match(/^\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return E6(t);if(t.match(/^\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5}):\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return A6(t);if(t.match(/^#REF!\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5}):\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return R6(t,e);if(t.match(/^(?:'[^\\\/?*\[\]:]*'|[^'][^\\\/?*\[\]:'`~!@#$%^()\-=+{}|;,<.>]*)!\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return I6(t,e);if(t.match(/^(?:'[^\\\/?*\[\]:]*'|[^'][^\\\/?*\[\]:'`~!@#$%^()\-=+{}|;,<.>]*)!\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5}):\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return C6(t,e);if(/^(?:'[^\\\/?*\[\]:]*'|[^'][^\\\/?*\[\]:'`~!@#$%^()\-=+{}|;,<.>]*)!#REF!$/.test(t))return S6(t,e);if(/^".*"$/.test(t))return T6(t);if(/^[+-]\d+$/.test(t))return dI(parseInt(t,10));throw"Formula |"+t+"| not supported for XLSB"}var N6=k6,P6={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},SN={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},b6={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function D6(t){var e="of:="+t.replace(Sm,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function AN(t){return t.replace(/!/,".").replace(/:/,":.")}var Nd=typeof Map<"u";function qx(t,e,n){var r=0,i=t.length;if(n){if(Nd?n.has(e):Object.prototype.hasOwnProperty.call(n,e)){for(var s=Nd?n.get(e):n[e];r<s.length;++r)if(t[s[r]].t===e)return t.Count++,s[r]}}else for(;r<i;++r)if(t[r].t===e)return t.Count++,r;return t[i]={t:e},t.Count++,t.Unique++,n&&(Nd?(n.has(e)||n.set(e,[]),n.get(e).push(i)):(Object.prototype.hasOwnProperty.call(n,e)||(n[e]=[]),n[e].push(i))),i}function km(t,e){var n={min:t+1,max:t+1},r=-1;return e.MDW&&(Ls=e.MDW),e.width!=null?n.customWidth=1:e.wpx!=null?r=yp(e.wpx):e.wch!=null&&(r=e.wch),r>-1?(n.width=N_(r),n.customWidth=1):e.width!=null&&(n.width=e.width),e.hidden&&(n.hidden=!0),e.level!=null&&(n.outlineLevel=n.level=e.level),n}function CN(t,e){if(t){var n=[.7,.7,.75,.75,.3,.3];t.left==null&&(t.left=n[0]),t.right==null&&(t.right=n[1]),t.top==null&&(t.top=n[2]),t.bottom==null&&(t.bottom=n[3]),t.header==null&&(t.header=n[4]),t.footer==null&&(t.footer=n[5])}}function ta(t,e,n){var r=n.revssf[e.z!=null?e.z:"General"],i=60,s=t.length;if(r==null&&n.ssf){for(;i<392;++i)if(n.ssf[i]==null){o3(e.z,i),n.ssf[i]=e.z,n.revssf[e.z]=r=i;break}}for(i=0;i!=s;++i)if(t[i].numFmtId===r)return i;return t[s]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function F6(t,e,n){if(t&&t["!ref"]){var r=qt(t["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+n+"): "+t["!ref"])}}function M6(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',n=0;n!=t.length;++n)e+='<mergeCell ref="'+Cn(t[n])+'"/>';return e+"</mergeCells>"}function L6(t,e,n,r,i){var s=!1,o={},a=null;if(r.bookType!=="xlsx"&&e.vbaraw){var l=e.SheetNames[n];try{e.Workbook&&(l=e.Workbook.Sheets[n].CodeName||l)}catch{}s=!0,o.codeName=sf(dt(l))}if(t&&t["!outline"]){var u={summaryBelow:1,summaryRight:1};t["!outline"].above&&(u.summaryBelow=0),t["!outline"].left&&(u.summaryRight=0),a=(a||"")+xe("outlinePr",null,u)}!s&&!a||(i[i.length]=xe("sheetPr",a,o))}var O6=["objects","scenarios","selectLockedCells","selectUnlockedCells"],V6=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function U6(t){var e={sheet:1};return O6.forEach(function(n){t[n]!=null&&t[n]&&(e[n]="1")}),V6.forEach(function(n){t[n]!=null&&!t[n]&&(e[n]="0")}),t.password&&(e.password=dN(t.password).toString(16).toUpperCase()),xe("sheetProtection",null,e)}function B6(t){return CN(t),xe("pageMargins",null,t)}function z6(t,e){for(var n=["<cols>"],r,i=0;i!=e.length;++i)(r=e[i])&&(n[n.length]=xe("col",null,km(i,r)));return n[n.length]="</cols>",n.join("")}function G6(t,e,n,r){var i=typeof t.ref=="string"?t.ref:Cn(t.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var s=n.Workbook.Names,o=Jn(i);o.s.r==o.e.r&&(o.e.r=Jn(e["!ref"]).e.r,i=Cn(o));for(var a=0;a<s.length;++a){var l=s[a];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==r){l.Ref=lf(n.SheetNames[r])+"!"+af(i);break}}return a==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+i}),xe("autoFilter",null,{ref:i})}function H6(t,e,n,r){var i={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),xe("sheetViews",xe("sheetView",null,i),{})}function $6(t,e,n,r,i,s,o){if(t.c&&n["!comments"].push([e,t.c]),(t.v===void 0||t.t==="z"&&!(r||{}).sheetStubs)&&typeof t.f!="string"&&typeof t.z>"u")return"";var a="",l=t.t,u=t.v;if(t.t!=="z")switch(t.t){case"b":a=t.v?"1":"0";break;case"n":isNaN(t.v)?(t.t="e",a=Rr[t.v=36]):isFinite(t.v)?a=""+t.v:(t.t="e",a=Rr[t.v=7]);break;case"e":a=Rr[t.v];break;case"d":if(r&&r.cellDates){var c=jr(t.v,o);a=c.toISOString(),c.getUTCFullYear()<1900&&(a=a.slice(a.indexOf("T")+1).replace("Z",""))}else t=gr(t),t.t="n",a=""+(t.v=Qn(jr(t.v,o),o));typeof t.z>"u"&&(t.z=Wt[14]);break;default:a=t.v;break}var d=t.t=="z"||t.v==null?"":qn("v",dt(a)),h={r:e},g=ta(r.cellXfs,t,r);switch(g!==0&&(h.s=g),t.t){case"n":break;case"d":h.t="d";break;case"b":h.t="b";break;case"e":h.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){d=qn("v",""+qx(r.Strings,t.v,r.revStrings)),h.t="s";break}else h.t="str";break}if(t.t!=l&&(t.t=l,t.v=u),typeof t.f=="string"&&t.f){var _=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;d=xe("f",dt(t.f),_)+(t.v!=null?d:"")}return t.l&&(t.l.display=dt(a),n["!links"].push([e,t.l])),t.D&&(h.cm=1),xe("c",d,h)}function W6(t,e,n,r){var i=[],s=[],o=qt(t["!ref"]),a="",l,u="",c=[],d=0,h=0,g=t["!rows"],_=t["!data"]!=null,x=_?t["!data"]:[],w={r:u},y,T=-1,E=(((r||{}).Workbook||{}).WBProps||{}).date1904;for(h=o.s.c;h<=o.e.c;++h)c[h]=Nt(h);for(d=o.s.r;d<=o.e.r;++d){s=[],u=Ft(d);var N=_?x[d]:[];for(h=o.s.c;h<=o.e.c;++h){l=c[h]+u;var F=_?N[h]:t[l];F!==void 0&&(a=$6(F,l,t,e,n,r,E))!=null&&s.push(a)}(s.length>0||g&&g[d])&&(w={r:u},g&&g[d]&&(y=g[d],y.hidden&&(w.hidden=1),T=-1,y.hpx?T=xp(y.hpx):y.hpt&&(T=y.hpt),T>-1&&(w.ht=T,w.customHeight=1),y.level&&(w.outlineLevel=y.level)),i[i.length]=xe("row",s.join(""),w))}if(g)for(;d<g.length;++d)g&&g[d]&&(w={r:d+1},y=g[d],y.hidden&&(w.hidden=1),T=-1,y.hpx?T=xp(y.hpx):y.hpt&&(T=y.hpt),T>-1&&(w.ht=T,w.customHeight=1),y.level&&(w.outlineLevel=y.level),i[i.length]=xe("row","",w));return i.join("")}function q6(t,e,n,r){var i=[Rn,xe("worksheet",null,{xmlns:ac[0],"xmlns:r":On.r})],s=n.SheetNames[t],o=0,a="",l=n.Sheets[s];l==null&&(l={});var u=l["!ref"]||"A1",c=qt(u);if(c.e.c>16383||c.e.r>1048575){if(e.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575),u=Cn(c)}r||(r={}),l["!comments"]=[];var d=[];L6(l,n,t,e,i),i[i.length]=xe("dimension",null,{ref:u}),i[i.length]=H6(l,e,t,n),e.sheetFormat&&(i[i.length]=xe("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(i[i.length]=z6(l,l["!cols"])),i[o=i.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(a=W6(l,e,t,n),a.length>0&&(i[i.length]=a)),i.length>o+1&&(i[i.length]="</sheetData>",i[o]=i[o].replace("/>",">")),l["!protect"]&&(i[i.length]=U6(l["!protect"])),l["!autofilter"]!=null&&(i[i.length]=G6(l["!autofilter"],l,n,t)),l["!merges"]!=null&&l["!merges"].length>0&&(i[i.length]=M6(l["!merges"]));var h=-1,g,_=-1;return l["!links"].length>0&&(i[i.length]="<hyperlinks>",l["!links"].forEach(function(x){x[1].Target&&(g={ref:x[0]},x[1].Target.charAt(0)!="#"&&(_=At(r,-1,dt(x[1].Target).replace(/#[\s\S]*$/,""),xt.HLINK),g["r:id"]="rId"+_),(h=x[1].Target.indexOf("#"))>-1&&(g.location=dt(x[1].Target.slice(h+1))),x[1].Tooltip&&(g.tooltip=dt(x[1].Tooltip)),g.display=x[1].display,i[i.length]=xe("hyperlink",null,g))}),i[i.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(i[i.length]=B6(l["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(i[i.length]=qn("ignoredErrors",xe("ignoredError",null,{numberStoredAsText:1,sqref:u}))),d.length>0&&(_=At(r,-1,"../drawings/drawing"+(t+1)+".xml",xt.DRAW),i[i.length]=xe("drawing",null,{"r:id":"rId"+_}),l["!drawing"]=d),l["!comments"].length>0&&(_=At(r,-1,"../drawings/vmlDrawing"+(t+1)+".vml",xt.VML),i[i.length]=xe("legacyDrawing",null,{"r:id":"rId"+_}),l["!legacy"]=_),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function j6(t,e){var n={},r=t.l+e;n.r=t.read_shift(4),t.l+=4;var i=t.read_shift(2);t.l+=1;var s=t.read_shift(1);return t.l=r,s&7&&(n.level=s&7),s&16&&(n.hidden=!0),s&32&&(n.hpt=i/20),n}function K6(t,e,n){var r=X(145),i=(n["!rows"]||[])[t]||{};r.write_shift(4,t),r.write_shift(4,0);var s=320;i.hpx?s=xp(i.hpx)*20:i.hpt&&(s=i.hpt*20),r.write_shift(2,s),r.write_shift(1,0);var o=0;i.level&&(o|=i.level),i.hidden&&(o|=16),(i.hpx||i.hpt)&&(o|=32),r.write_shift(1,o),r.write_shift(1,0);var a=0,l=r.l;r.l+=4;for(var u={r:t,c:0},c=n["!data"]!=null,d=0;d<16;++d)if(!(e.s.c>d+1<<10||e.e.c<d<<10)){for(var h=-1,g=-1,_=d<<10;_<d+1<<10;++_){u.c=_;var x=c?(n["!data"][u.r]||[])[u.c]:n[sn(u)];x&&(h<0&&(h=_),g=_)}h<0||(++a,r.write_shift(4,h),r.write_shift(4,g))}var w=r.l;return r.l=l,r.write_shift(4,a),r.l=w,r.length>r.l?r.slice(0,r.l):r}function J6(t,e,n,r){var i=K6(r,n,e);(i.length>17||(e["!rows"]||[])[r])&&ue(t,0,i)}var Y6=pl,X6=cc;function Q6(){}function Z6(t,e){var n={},r=t[t.l];return++t.l,n.above=!(r&64),n.left=!(r&128),t.l+=18,n.name=j3(t),n}function e8(t,e,n){n==null&&(n=X(84+4*t.length));var r=192;e&&(e.above&&(r&=-65),e.left&&(r&=-129)),n.write_shift(1,r);for(var i=1;i<3;++i)n.write_shift(1,0);return gp({auto:1},n),n.write_shift(-4,-1),n.write_shift(-4,-1),qk(t,n),n.slice(0,n.l)}function t8(t){var e=Si(t);return[e]}function n8(t,e,n){return n==null&&(n=X(8)),dl(e,n)}function r8(t){var e=fl(t);return[e]}function i8(t,e,n){return n==null&&(n=X(4)),hl(e,n)}function s8(t){var e=Si(t),n=t.read_shift(1);return[e,n,"b"]}function o8(t,e,n){return n==null&&(n=X(9)),dl(e,n),n.write_shift(1,t.v?1:0),n}function a8(t){var e=fl(t),n=t.read_shift(1);return[e,n,"b"]}function l8(t,e,n){return n==null&&(n=X(5)),hl(e,n),n.write_shift(1,t.v?1:0),n}function u8(t){var e=Si(t),n=t.read_shift(1);return[e,n,"e"]}function ov(t,e,n){return n==null&&(n=X(9)),dl(e,n),n.write_shift(1,t.v),n}function c8(t){var e=fl(t),n=t.read_shift(1);return[e,n,"e"]}function av(t,e,n){return n==null&&(n=X(8)),hl(e,n),n.write_shift(1,t.v),n.write_shift(2,0),n.write_shift(1,0),n}function d8(t){var e=Si(t),n=t.read_shift(4);return[e,n,"s"]}function f8(t,e,n){return n==null&&(n=X(12)),dl(e,n),n.write_shift(4,e.v),n}function h8(t){var e=fl(t),n=t.read_shift(4);return[e,n,"s"]}function p8(t,e,n){return n==null&&(n=X(8)),hl(e,n),n.write_shift(4,e.v),n}function m8(t){var e=Si(t),n=dc(t);return[e,n,"n"]}function g8(t,e,n){return n==null&&(n=X(16)),dl(e,n),Ja(t.v,n),n}function v8(t){var e=fl(t),n=dc(t);return[e,n,"n"]}function _8(t,e,n){return n==null&&(n=X(12)),hl(e,n),Ja(t.v,n),n}function y8(t){var e=Si(t),n=Gx(t);return[e,n,"n"]}function x8(t,e,n){return n==null&&(n=X(12)),dl(e,n),jk(t.v,n),n}function w8(t){var e=fl(t),n=Gx(t);return[e,n,"n"]}function T8(t,e,n){return n==null&&(n=X(8)),hl(e,n),jk(t.v,n),n}function E8(t){var e=Si(t),n=Bx(t);return[e,n,"is"]}function I8(t){var e=Si(t),n=hr(t);return[e,n,"str"]}function S8(t,e,n){var r=t.v==null?"":String(t.v);return n==null&&(n=X(12+4*t.v.length)),dl(e,n),Pn(r,n),n.length>n.l?n.slice(0,n.l):n}function A8(t){var e=fl(t),n=hr(t);return[e,n,"str"]}function C8(t,e,n){var r=t.v==null?"":String(t.v);return n==null&&(n=X(8+4*r.length)),hl(e,n),Pn(r,n),n.length>n.l?n.slice(0,n.l):n}function R8(t,e,n){var r=t.l+e,i=Si(t);i.r=n["!row"];var s=t.read_shift(1),o=[i,s,"b"];if(n.cellFormula){t.l+=2;var a=Rm(t,r-t.l,n);o[3]=Vu(a,null,i,n.supbooks,n)}else t.l=r;return o}function k8(t,e,n){var r=t.l+e,i=Si(t);i.r=n["!row"];var s=t.read_shift(1),o=[i,s,"e"];if(n.cellFormula){t.l+=2;var a=Rm(t,r-t.l,n);o[3]=Vu(a,null,i,n.supbooks,n)}else t.l=r;return o}function N8(t,e,n){var r=t.l+e,i=Si(t);i.r=n["!row"];var s=dc(t),o=[i,s,"n"];if(n.cellFormula){t.l+=2;var a=Rm(t,r-t.l,n);o[3]=Vu(a,null,i,n.supbooks,n)}else t.l=r;return o}function P8(t,e,n){var r=t.l+e,i=Si(t);i.r=n["!row"];var s=hr(t),o=[i,s,"str"];if(n.cellFormula){t.l+=2;var a=Rm(t,r-t.l,n);o[3]=Vu(a,null,i,n.supbooks,n)}else t.l=r;return o}var b8=pl,D8=cc;function F8(t,e){return e==null&&(e=X(4)),e.write_shift(4,t),e}function M8(t,e){var n=t.l+e,r=pl(t),i=Im(t),s=hr(t),o=hr(t),a=hr(t);t.l=n;var l={rfx:r,relId:i,loc:s,display:a};return o&&(l.Tooltip=o),l}function L8(t,e){var n=X(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));cc({s:en(t[0]),e:en(t[0])},n),zx("rId"+e,n);var r=t[1].Target.indexOf("#"),i=r==-1?"":t[1].Target.slice(r+1);return Pn(i||"",n),Pn(t[1].Tooltip||"",n),Pn("",n),n.slice(0,n.l)}function O8(){}function V8(t,e,n){var r=t.l+e,i=Kk(t),s=t.read_shift(1),o=[i];if(o[2]=s,n.cellFormula){var a=v6(t,r-t.l,n);o[1]=a}else t.l=r;return o}function U8(t,e,n){var r=t.l+e,i=pl(t),s=[i];if(n.cellFormula){var o=y6(t,r-t.l,n);s[1]=o,t.l=r}else t.l=r;return s}function B8(t,e,n){n==null&&(n=X(18));var r=km(t,e);n.write_shift(-4,t),n.write_shift(-4,t),n.write_shift(4,(r.width||10)*256),n.write_shift(4,0);var i=0;return e.hidden&&(i|=1),typeof r.width=="number"&&(i|=2),e.level&&(i|=e.level<<8),n.write_shift(2,i),n}var RN=["left","right","top","bottom","header","footer"];function z8(t){var e={};return RN.forEach(function(n){e[n]=dc(t)}),e}function G8(t,e){return e==null&&(e=X(6*8)),CN(t),RN.forEach(function(n){Ja(t[n],e)}),e}function H8(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function $8(t,e,n){n==null&&(n=X(30));var r=924;return(((e||{}).Views||[])[0]||{}).RTL&&(r|=32),n.write_shift(2,r),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(2,0),n.write_shift(2,100),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(4,0),n}function W8(t){var e=X(24);return e.write_shift(4,4),e.write_shift(4,1),cc(t,e),e}function q8(t,e){return e==null&&(e=X(16*4+2)),e.write_shift(2,t.password?dN(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(n){n[1]?e.write_shift(4,t[n[0]]!=null&&!t[n[0]]?1:0):e.write_shift(4,t[n[0]]!=null&&t[n[0]]?0:1)}),e}function j8(){}function K8(){}function J8(t,e,n,r,i,s,o,a){var l={r:n,c:r};if(e.c&&s["!comments"].push([sn(l),e.c]),e.v===void 0)return!1;var u="";switch(e.t){case"b":u=e.v?"1":"0";break;case"d":e=gr(e),e.z=e.z||Wt[14],e.v=Qn(jr(e.v,a),a),e.t="n";break;case"n":case"e":u=""+e.v;break;default:u=e.v;break}switch(l.s=ta(i.cellXfs,e,i),e.l&&s["!links"].push([sn(l),e.l]),e.t){case"s":case"str":return i.bookSST?(u=qx(i.Strings,e.v==null?"":String(e.v),i.revStrings),l.t="s",l.v=u,o?ue(t,18,p8(e,l)):ue(t,7,f8(e,l))):(l.t="str",o?ue(t,17,C8(e,l)):ue(t,6,S8(e,l))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?o?ue(t,13,T8(e,l)):ue(t,2,x8(e,l)):isFinite(e.v)?o?ue(t,16,_8(e,l)):ue(t,5,g8(e,l)):(l.t="e",isNaN(e.v)?o?ue(t,14,av({v:36},l)):ue(t,3,ov({v:36},l)):o?ue(t,14,av({v:7},l)):ue(t,3,ov({v:7},l))),!0;case"b":return l.t="b",o?ue(t,15,l8(e,l)):ue(t,4,o8(e,l)),!0;case"e":return l.t="e",o?ue(t,14,av(e,l)):ue(t,3,ov(e,l)),!0}return o?ue(t,12,i8(e,l)):ue(t,1,n8(e,l)),!0}function Y8(t,e,n,r,i){var s=qt(e["!ref"]||"A1"),o="",a=[],l=(((i||{}).Workbook||{}).WBProps||{}).date1904;ue(t,145);var u=e["!data"]!=null,c=u?e["!data"][s.s.r]:[],d=s.e.r;e["!rows"]&&(d=Math.max(s.e.r,e["!rows"].length-1));for(var h=s.s.r;h<=d;++h)if(o=Ft(h),u&&(c=e["!data"][h]),J6(t,e,s,h),!(u&&!c)){var g=!1;if(h<=s.e.r)for(var _=s.s.c;_<=s.e.c;++_){h===s.s.r&&(a[_]=Nt(_));var x=u?c[_]:e[a[_]+o];if(!x){g=!1;continue}g=J8(t,x,h,_,r,e,g,l)}}ue(t,146)}function X8(t,e){!e||!e["!merges"]||(ue(t,177,F8(e["!merges"].length)),e["!merges"].forEach(function(n){ue(t,176,D8(n))}),ue(t,178))}function Q8(t,e){!e||!e["!cols"]||(ue(t,390),e["!cols"].forEach(function(n,r){n&&ue(t,60,B8(r,n))}),ue(t,391))}function Z8(t,e){!e||!e["!ref"]||(ue(t,648),ue(t,649,W8(qt(e["!ref"]))),ue(t,650))}function eB(t,e,n){e["!links"].forEach(function(r){if(r[1].Target){var i=At(n,-1,r[1].Target.replace(/#[\s\S]*$/,""),xt.HLINK);ue(t,494,L8(r,i))}}),delete e["!links"]}function tB(t,e,n,r){if(e["!comments"].length>0){var i=At(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",xt.VML);ue(t,551,zx("rId"+i)),e["!legacy"]=i}}function nB(t,e,n,r){if(e["!autofilter"]){var i=e["!autofilter"],s=typeof i.ref=="string"?i.ref:Cn(i.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var o=n.Workbook.Names,a=Jn(s);a.s.r==a.e.r&&(a.e.r=Jn(e["!ref"]).e.r,s=Cn(a));for(var l=0;l<o.length;++l){var u=o[l];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==r){u.Ref=lf(n.SheetNames[r])+"!"+af(s);break}}l==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:lf(n.SheetNames[r])+"!"+af(s)}),ue(t,161,cc(qt(s))),ue(t,162)}}function rB(t,e,n){ue(t,133),ue(t,137,$8(e,n)),ue(t,138),ue(t,134)}function iB(t,e){e["!protect"]&&ue(t,535,q8(e["!protect"]))}function sB(t,e,n,r){var i=fr(),s=n.SheetNames[t],o=n.Sheets[s]||{},a=s;try{n&&n.Workbook&&(a=n.Workbook.Sheets[t].CodeName||a)}catch{}var l=qt(o["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],ue(i,129),(n.vbaraw||o["!outline"])&&ue(i,147,e8(a,o["!outline"])),ue(i,148,X6(l)),rB(i,o,n.Workbook),Q8(i,o),Y8(i,o,t,e,n),iB(i,o),nB(i,o,n,t),X8(i,o),eB(i,o,r),o["!margins"]&&ue(i,476,G8(o["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&Z8(i,o),tB(i,o,t,r),ue(i,130),i.end()}function oB(t,e){t.l+=10;var n=hr(t);return{name:n}}var aB=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function lB(t){return!t.Workbook||!t.Workbook.WBProps?"false":I3(t.Workbook.WBProps.date1904)?"true":"false"}var uB=":][*?/\\".split("");function kN(t,e){try{if(t=="")throw new Error("Sheet name cannot be blank");if(t.length>31)throw new Error("Sheet name cannot exceed 31 chars");if(t.charCodeAt(0)==39||t.charCodeAt(t.length-1)==39)throw new Error("Sheet name cannot start or end with apostrophe (')");if(t.toLowerCase()=="history")throw new Error("Sheet name cannot be 'History'");uB.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")})}catch(n){throw n}return!0}function cB(t,e,n){t.forEach(function(r,i){kN(r);for(var s=0;s<i;++s)if(r==t[s])throw new Error("Duplicate Sheet Name: "+r);if(n){var o=e&&e[i]&&e[i].CodeName||r;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function dB(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];cB(t.SheetNames,e,!!t.vbaraw);for(var n=0;n<t.SheetNames.length;++n)F6(t.Sheets[t.SheetNames[n]],t.SheetNames[n],n);t.SheetNames.forEach(function(r,i){var s=t.Sheets[r];if(!(!s||!s["!autofilter"])){var o;t.Workbook||(t.Workbook={}),t.Workbook.Names||(t.Workbook.Names=[]),t.Workbook.Names.forEach(function(l){l.Name=="_xlnm._FilterDatabase"&&l.Sheet==i&&(o=l)});var a=lf(r)+"!"+af(s["!autofilter"].ref);o?o.Ref=a:t.Workbook.Names.push({Name:"_xlnm._FilterDatabase",Sheet:i,Ref:a})}})}function fB(t){var e=[Rn];e[e.length]=xe("workbook",null,{xmlns:ac[0],"xmlns:r":On.r});var n=t.Workbook&&(t.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(aB.forEach(function(a){t.Workbook.WBProps[a[0]]!=null&&t.Workbook.WBProps[a[0]]!=a[1]&&(r[a[0]]=t.Workbook.WBProps[a[0]])}),t.Workbook.WBProps.CodeName&&(r.codeName=t.Workbook.WBProps.CodeName,delete r.CodeName)),e[e.length]=xe("workbookPr",null,r);var i=t.Workbook&&t.Workbook.Sheets||[],s=0;if(i&&i[0]&&i[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=t.SheetNames.length&&!(!i[s]||!i[s].Hidden);++s);s==t.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=t.SheetNames.length;++s){var o={name:dt(t.SheetNames[s].slice(0,31))};if(o.sheetId=""+(s+1),o["r:id"]="rId"+(s+1),i[s])switch(i[s].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}e[e.length]=xe("sheet",null,o)}return e[e.length]="</sheets>",n&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(a){var l={name:a.Name};a.Comment&&(l.comment=a.Comment),a.Sheet!=null&&(l.localSheetId=""+a.Sheet),a.Hidden&&(l.hidden="1"),a.Ref&&(e[e.length]=xe("definedName",dt(a.Ref),l))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function hB(t,e){var n={};return n.Hidden=t.read_shift(4),n.iTabID=t.read_shift(4),n.strRelID=k_(t),n.name=hr(t),n}function pB(t,e){return e||(e=X(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),zx(t.strRelID,e),Pn(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function mB(t,e){var n={},r=t.read_shift(4);n.defaultThemeVersion=t.read_shift(4);var i=e>8?hr(t):"";return i.length>0&&(n.CodeName=i),n.autoCompressPictures=!!(r&65536),n.backupFile=!!(r&64),n.checkCompatibility=!!(r&4096),n.date1904=!!(r&1),n.filterPrivacy=!!(r&8),n.hidePivotFieldList=!!(r&1024),n.promptedSolutions=!!(r&16),n.publishItems=!!(r&2048),n.refreshAllConnections=!!(r&262144),n.saveExternalLinkValues=!!(r&128),n.showBorderUnselectedTables=!!(r&4),n.showInkAnnotation=!!(r&32),n.showObjects=["all","placeholders","none"][r>>13&3],n.showPivotChartFilter=!!(r&32768),n.updateLinks=["userSet","never","always"][r>>8&3],n}function gB(t,e){e||(e=X(72));var n=0;return t&&(t.date1904&&(n|=1),t.filterPrivacy&&(n|=8)),e.write_shift(4,n),e.write_shift(4,0),qk(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function vB(t,e,n){var r=t.l+e,i=t.read_shift(4);t.l+=1;var s=t.read_shift(4),o=K3(t),a,l="";try{a=_6(t,0,n);try{l=Im(t)}catch{}}catch{console.error("Could not parse defined name "+o)}i&32&&(o="_xlnm."+o),t.l=r;var u={Name:o,Ptg:a,Flags:i};return s<268435455&&(u.Sheet=s),l&&(u.Comment=l),u}function _B(t,e){var n=X(9),r=0,i=t.Name;oV.indexOf(i)>-1&&(r|=32,i=i.slice(6)),n.write_shift(4,r),n.write_shift(1,0),n.write_shift(4,t.Sheet==null?4294967295:t.Sheet);var s=[n,Pn(i),N6(t.Ref,e)];if(t.Comment)s.push(uf(t.Comment));else{var o=X(4);o.write_shift(4,4294967295),s.push(o)}return Sn(s)}function yB(t,e){ue(t,143);for(var n=0;n!=e.SheetNames.length;++n){var r=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[n]&&e.Workbook.Sheets[n].Hidden||0,i={Hidden:r,iTabID:n+1,strRelID:"rId"+(n+1),name:e.SheetNames[n]};ue(t,156,pB(i))}ue(t,144)}function xB(t,e){e||(e=X(127));for(var n=0;n!=4;++n)e.write_shift(4,0);return Pn("SheetJS",e),Pn(ap.version,e),Pn(ap.version,e),Pn("7262",e),e.length>e.l?e.slice(0,e.l):e}function wB(t,e){e||(e=X(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var n=120;return e.write_shift(1,n),e.length>e.l?e.slice(0,e.l):e}function TB(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var n=e.Workbook.Sheets,r=0,i=-1,s=-1;r<n.length;++r)!n[r]||!n[r].Hidden&&i==-1?i=r:n[r].Hidden==1&&s==-1&&(s=r);s>i||(ue(t,135),ue(t,158,wB(i)),ue(t,136))}}function EB(t,e){!e.Workbook||!e.Workbook.Names||e.Workbook.Names.forEach(function(n){try{if(n.Flags&14)return;ue(t,39,_B(n,e))}catch{console.error("Could not serialize defined name "+JSON.stringify(n))}})}function IB(t){var e=t.SheetNames.length,n=X(12*e+28);n.write_shift(4,e+2),n.write_shift(4,0),n.write_shift(4,-2),n.write_shift(4,-2),n.write_shift(4,0),n.write_shift(4,-1),n.write_shift(4,-1);for(var r=0;r<e;++r)n.write_shift(4,0),n.write_shift(4,r),n.write_shift(4,r);return n}function SB(t,e){ue(t,353),ue(t,357),ue(t,362,IB(e)),ue(t,354)}function AB(t,e){var n=fr();return ue(n,131),ue(n,128,xB()),ue(n,153,gB(t.Workbook&&t.Workbook.WBProps||null)),TB(n,t),yB(n,t),SB(n,t),(t.Workbook||{}).Names&&EB(n,t),ue(n,132),n.end()}function CB(t,e){var n=[];return t.Props&&n.push(dV(t.Props,e)),t.Custprops&&n.push(fV(t.Props,t.Custprops)),n.join("")}function RB(t){return(((t||{}).Workbook||{}).WBProps||{}).date1904?'<ExcelWorkbook xmlns="urn:schemas-microsoft-com:office:excel"><Date1904/></ExcelWorkbook>':""}function kB(t,e){var n=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(r,i){var s=[];s.push(xe("NumberFormat",null,{"ss:Format":dt(Wt[r.numFmtId])}));var o={"ss:ID":"s"+(21+i)};n.push(xe("Style",s.join(""),o))}),xe("Styles",n.join(""))}function NN(t){return xe("NamedRange",null,{"ss:Name":t.Name.slice(0,6)=="_xlnm."?t.Name.slice(6):t.Name,"ss:RefersTo":"="+Am(t.Ref,{r:0,c:0})})}function NB(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,n=[],r=0;r<e.length;++r){var i=e[r];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||n.push(NN(i)))}return xe("Names",n.join(""))}function PB(t,e,n,r){if(!t||!((r||{}).Workbook||{}).Names)return"";for(var i=r.Workbook.Names,s=[],o=0;o<i.length;++o){var a=i[o];a.Sheet==n&&(a.Name.match(/^_xlfn\./)||s.push(NN(a)))}return s.join("")}function bB(t,e,n,r){if(!t)return"";var i=[];if(t["!margins"]&&(i.push("<PageSetup>"),t["!margins"].header&&i.push(xe("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&i.push(xe("Footer",null,{"x:Margin":t["!margins"].footer})),i.push(xe("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),i.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[n])if(r.Workbook.Sheets[n].Hidden)i.push(xe("Visible",r.Workbook.Sheets[n].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<n&&!(r.Workbook.Sheets[s]&&!r.Workbook.Sheets[s].Hidden);++s);s==n&&i.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),t["!protect"]&&(i.push(qn("ProtectContents","True")),t["!protect"].objects&&i.push(qn("ProtectObjects","True")),t["!protect"].scenarios&&i.push(qn("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?i.push(qn("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&i.push(qn("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){t["!protect"][o[0]]&&i.push("<"+o[1]+"/>")})),i.length==0?"":xe("WorksheetOptions",i.join(""),{xmlns:Zr.x})}function DB(t){return t.map(function(e){var n=E3(e.t||""),r=xe("ss:Data",n,{xmlns:"http://www.w3.org/TR/REC-html40"}),i={};return e.a&&(i["ss:Author"]=e.a),t.hidden||(i["ss:ShowAlways"]="1"),xe("Comment",r,i)}).join("")}function FB(t,e,n,r,i,s,o){if(!t||t.v==null&&t.f==null)return"";var a={};if(t.f&&(a["ss:Formula"]="="+dt(Am(t.f,o))),t.F&&t.F.slice(0,e.length)==e){var l=en(t.F.slice(e.length+1));a["ss:ArrayRange"]="RC:R"+(l.r==o.r?"":"["+(l.r-o.r)+"]")+"C"+(l.c==o.c?"":"["+(l.c-o.c)+"]")}if(t.l&&t.l.Target&&(a["ss:HRef"]=dt(t.l.Target),t.l.Tooltip&&(a["x:HRefScreenTip"]=dt(t.l.Tooltip))),n["!merges"])for(var u=n["!merges"],c=0;c!=u.length;++c)u[c].s.c!=o.c||u[c].s.r!=o.r||(u[c].e.c>u[c].s.c&&(a["ss:MergeAcross"]=u[c].e.c-u[c].s.c),u[c].e.r>u[c].s.r&&(a["ss:MergeDown"]=u[c].e.r-u[c].s.r));var d="",h="";switch(t.t){case"z":if(!r.sheetStubs)return"";break;case"n":isFinite(t.v)?(d="Number",h=String(t.v)):(d="Error",h=Rr[isNaN(t.v)?36:7]);break;case"b":d="Boolean",h=t.v?"1":"0";break;case"e":d="Error",h=Rr[t.v];break;case"d":d="DateTime",h=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||Wt[14]);break;case"s":d="String",h=T3(t.v||"");break}var g=ta(r.cellXfs,t,r);a["ss:StyleID"]="s"+(21+g),a["ss:Index"]=o.c+1;var _=t.v!=null?h:"",x=t.t=="z"?"":'<Data ss:Type="'+d+'">'+_+"</Data>";return(t.c||[]).length>0&&(x+=DB(t.c)),xe("Cell",x,a)}function MB(t,e){var n='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=hN(e.hpt)),e.hpx&&(n+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(n+=' ss:Hidden="1"')),n+">"}function LB(t,e,n,r){if(!t["!ref"])return"";var i=qt(t["!ref"]),s=t["!merges"]||[],o=0,a=[];t["!cols"]&&t["!cols"].forEach(function(w,y){$x(w);var T=!!w.width,E=km(y,w),N={"ss:Index":y+1};T&&(N["ss:Width"]=_p(E.width)),w.hidden&&(N["ss:Hidden"]="1"),a.push(xe("Column",null,N))});for(var l=t["!data"]!=null,u={r:0,c:0},c=i.s.r;c<=i.e.r;++c){var d=[MB(c,(t["!rows"]||[])[c])];u.r=c;for(var h=i.s.c;h<=i.e.c;++h){u.c=h;var g=!1;for(o=0;o!=s.length;++o)if(!(s[o].s.c>h)&&!(s[o].s.r>c)&&!(s[o].e.c<h)&&!(s[o].e.r<c)){(s[o].s.c!=h||s[o].s.r!=c)&&(g=!0);break}if(!g){var _=Nt(h)+Ft(c),x=l?(t["!data"][c]||[])[h]:t[_];d.push(FB(x,_,t,e,n,r,u))}}d.push("</Row>"),d.length>2&&a.push(d.join(""))}return a.join("")}function OB(t,e,n){var r=[],i=n.SheetNames[t],s=n.Sheets[i],o=s?PB(s,e,t,n):"";return o.length>0&&r.push("<Names>"+o+"</Names>"),o=s?LB(s,e,t,n):"",o.length>0&&r.push("<Table>"+o+"</Table>"),r.push(bB(s,e,t,n)),s&&s["!autofilter"]&&r.push('<AutoFilter x:Range="'+Am(af(s["!autofilter"].ref),{r:0,c:0})+'" xmlns="urn:schemas-microsoft-com:office:excel"></AutoFilter>'),r.join("")}function VB(t,e){e||(e={}),t.SSF||(t.SSF=gr(Wt)),t.SSF&&(wm(),xm(t.SSF),e.revssf=Tm(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],ta(e.cellXfs,{},{revssf:{General:0}}));var n=[];n.push(CB(t,e)),n.push(RB(t)),n.push(""),n.push(NB(t));for(var r=0;r<t.SheetNames.length;++r)n.push(xe("Worksheet",OB(r,e,t),{"ss:Name":dt(t.SheetNames[r])}));return n[2]=kB(t,e),Rn+xe("Workbook",n.join(""),{xmlns:Zr.ss,"xmlns:o":Zr.o,"xmlns:x":Zr.x,"xmlns:ss":Zr.ss,"xmlns:dt":Zr.dt,"xmlns:html":Zr.html})}var lv={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function UB(t,e){var n=[],r=[],i=[],s=0,o,a=LE(jE,"n"),l=LE(KE,"n");if(t.Props)for(o=An(t.Props),s=0;s<o.length;++s)(Object.prototype.hasOwnProperty.call(a,o[s])?n:Object.prototype.hasOwnProperty.call(l,o[s])?r:i).push([o[s],t.Props[o[s]]]);if(t.Custprops)for(o=An(t.Custprops),s=0;s<o.length;++s)Object.prototype.hasOwnProperty.call(t.Props||{},o[s])||(Object.prototype.hasOwnProperty.call(a,o[s])?n:Object.prototype.hasOwnProperty.call(l,o[s])?r:i).push([o[s],t.Custprops[o[s]]]);var u=[];for(s=0;s<i.length;++s)iN.indexOf(i[s][0])>-1||tN.indexOf(i[s][0])>-1||i[s][1]!=null&&u.push(i[s]);r.length&&Ot.utils.cfb_add(e,"/SummaryInformation",ZE(r,lv.SI,l,KE)),(n.length||u.length)&&Ot.utils.cfb_add(e,"/DocumentSummaryInformation",ZE(n,lv.DSI,a,jE,u.length?u:null,lv.UDI))}function BB(t,e){var n=e||{},r=Ot.utils.cfb_new({root:"R"}),i="/Workbook";switch(n.bookType||"xls"){case"xls":n.bookType="biff8";case"xla":n.bookType||(n.bookType="xla");case"biff8":i="/Workbook",n.biff=8;break;case"biff5":i="/Book",n.biff=5;break;default:throw new Error("invalid type "+n.bookType+" for XLS CFB")}return Ot.utils.cfb_add(r,i,bN(t,n)),n.biff==8&&(t.Props||t.Custprops)&&UB(t,r),n.biff==8&&t.vbaraw&&YU(r,Ot.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),r}var zB={0:{f:j6},1:{f:t8},2:{f:y8},3:{f:u8},4:{f:s8},5:{f:m8},6:{f:I8},7:{f:d8},8:{f:P8},9:{f:N8},10:{f:R8},11:{f:k8},12:{f:r8},13:{f:w8},14:{f:c8},15:{f:a8},16:{f:v8},17:{f:A8},18:{f:h8},19:{f:Bx},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:vB},40:{},42:{},43:{f:mU},44:{f:hU},45:{f:_U},46:{f:xU},47:{f:yU},48:{},49:{f:z3},50:{},51:{f:LU},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:WV},62:{f:E8},63:{f:HU},64:{f:j8},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:ds,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:H8},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:Z6},148:{f:Y6,p:16},151:{f:O8},152:{},153:{f:mB},154:{},155:{},156:{f:hB},157:{},158:{},159:{T:1,f:nU},160:{T:-1},161:{T:1,f:pl},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:b8},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:FU},336:{T:-1},337:{f:UU,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:k_},357:{},358:{},359:{},360:{T:1},361:{},362:{f:BV},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:V8},427:{f:U8},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:z8},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:Q6},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:M8},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:k_},551:{f:Im},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:KU},633:{T:1},634:{T:-1},635:{T:1,f:qU},636:{T:-1},637:{f:W3},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:oB},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:K8},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function de(t,e,n,r){var i=e;if(!isNaN(i)){var s=r||(n||[]).length||0,o=t.next(4);o.write_shift(2,i),o.write_shift(2,s),s>0&&Ox(n)&&t.push(n)}}function GB(t,e,n,r){var i=(n||[]).length||0;if(i<=8224)return de(t,e,n,i);var s=e;if(!isNaN(s)){for(var o=n.parts||[],a=0,l=0,u=0;u+(o[a]||8224)<=8224;)u+=o[a]||8224,a++;var c=t.next(4);for(c.write_shift(2,s),c.write_shift(2,u),t.push(n.slice(l,l+u)),l+=u;l<i;){for(c=t.next(4),c.write_shift(2,60),u=0;u+(o[a]||8224)<=8224;)u+=o[a]||8224,a++;c.write_shift(2,u),t.push(n.slice(l,l+u)),l+=u}}}function uv(t,e,n,r){var i=X(9);return Hf(i,t,e),sN(n,r||"b",i),i}function HB(t,e,n){var r=X(8+2*n.length);return Hf(r,t,e),r.write_shift(1,n.length),r.write_shift(n.length,n,"sbcs"),r.l<r.length?r.slice(0,r.l):r}function PN(t,e){e.forEach(function(n){var r=n[0].map(function(s){return s.t}).join("");if(r.length<=2048)return de(t,28,iv(r,n[1],n[2]));de(t,28,iv(r.slice(0,2048),n[1],n[2],r.length));for(var i=2048;i<r.length;i+=2048)de(t,28,iv(r.slice(i,Math.min(i+2048,r.length)),-1,-1,Math.min(2048,r.length-i)))})}function $B(t,e,n,r,i,s){var o=0;e.z!=null&&(o=i._BIFF2FmtTable.indexOf(e.z),o==-1&&(i._BIFF2FmtTable.push(e.z),o=i._BIFF2FmtTable.length-1));var a=0;if(e.z!=null){for(;a<i.cellXfs.length&&i.cellXfs[a].numFmtId!=o;++a);a==i.cellXfs.length&&i.cellXfs.push({numFmtId:o})}if(e.v!=null)switch(e.t){case"d":case"n":var l=e.t=="d"?Qn(jr(e.v,s),s):e.v;i.biff==2&&l==(l|0)&&l>=0&&l<65536?de(t,2,JV(n,r,l,a,o)):isNaN(l)?de(t,5,uv(n,r,36,"e")):isFinite(l)?de(t,3,KV(n,r,l,a,o)):de(t,5,uv(n,r,7,"e"));return;case"b":case"e":de(t,5,uv(n,r,e.v,e.t));return;case"s":case"str":de(t,4,HB(n,r,e.v==null?"":String(e.v).slice(0,255)));return}de(t,1,Hf(null,n,r))}function WB(t,e,n,r,i){var s=e["!data"]!=null,o=qt(e["!ref"]||"A1"),a="",l=[];if(o.e.c>255||o.e.r>16383){if(r.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");o.e.c=Math.min(o.e.c,255),o.e.r=Math.min(o.e.r,16383)}for(var u=(((i||{}).Workbook||{}).WBProps||{}).date1904,c=[],d=[],h=o.s.c;h<=o.e.c;++h)l[h]=Nt(h);for(var g=o.s.r;g<=o.e.r;++g)for(s&&(c=e["!data"][g]||[]),a=Ft(g),h=o.s.c;h<=o.e.c;++h){var _=s?c[h]:e[l[h]+a];_&&($B(t,_,g,h,r,u),_.c&&d.push([_.c,g,h]))}PN(t,d)}function qB(t,e){for(var n=e||{},r=fr(),i=0,s=0;s<t.SheetNames.length;++s)t.SheetNames[s]==n.sheet&&(i=s);if(i==0&&n.sheet&&t.SheetNames[0]!=n.sheet)throw new Error("Sheet not found: "+n.sheet);de(r,n.biff==4?1033:n.biff==3?521:9,Hx(t,16,n)),((t.Workbook||{}).WBProps||{}).date1904&&de(r,34,lr(!0)),n.cellXfs=[{numFmtId:0}],n._BIFF2FmtTable=["General"],n._Fonts=[];var o=fr();return WB(o,t.Sheets[t.SheetNames[i]],i,n,t),n._BIFF2FmtTable.forEach(function(a){n.biff<=3?de(r,30,DV(a)):de(r,1054,FV(a))}),n.cellXfs.forEach(function(a){switch(n.biff){case 2:de(r,67,LV(a));break;case 3:de(r,579,uN(a));break;case 4:de(r,1091,OV(a));break}}),delete n._BIFF2FmtTable,delete n.cellXfs,delete n._Fonts,r.push(o.end()),de(r,10),r.end()}var ki=1,di=[];function jB(){var t=X(82+8*di.length);t.write_shift(2,15),t.write_shift(2,61440),t.write_shift(4,74+8*di.length);{t.write_shift(2,0),t.write_shift(2,61446),t.write_shift(4,16+8*di.length);{t.write_shift(4,ki),t.write_shift(4,di.length+1);for(var e=0,n=0;n<di.length;++n)e+=di[n]&&di[n][1]||0;t.write_shift(4,e),t.write_shift(4,di.length)}di.forEach(function(r){t.write_shift(4,r[0]),t.write_shift(4,r[2])})}return t.write_shift(2,51),t.write_shift(2,61451),t.write_shift(4,18),t.write_shift(2,191),t.write_shift(4,524296),t.write_shift(2,385),t.write_shift(4,134217793),t.write_shift(2,448),t.write_shift(4,134217792),t.write_shift(2,64),t.write_shift(2,61726),t.write_shift(4,16),t.write_shift(4,134217741),t.write_shift(4,134217740),t.write_shift(4,134217751),t.write_shift(4,268435703),t}function KB(t,e){var n=[],r=0,i=fr(),s=ki,o;e.forEach(function(l,u){var c="",d=l[0].map(function(E){return E.a&&!c&&(c=E.a),E.t}).join("");++ki;{var h=X(150);h.write_shift(2,15),h.write_shift(2,61444),h.write_shift(4,150),h.write_shift(2,3234),h.write_shift(2,61450),h.write_shift(4,8),h.write_shift(4,ki),h.write_shift(4,2560),h.write_shift(2,227),h.write_shift(2,61451),h.write_shift(4,84),h.write_shift(2,128),h.write_shift(4,0),h.write_shift(2,139),h.write_shift(4,2),h.write_shift(2,191),h.write_shift(4,524296),h.write_shift(2,344),h.l+=4,h.write_shift(2,385),h.write_shift(4,134217808),h.write_shift(2,387),h.write_shift(4,134217808),h.write_shift(2,389),h.write_shift(4,268435700),h.write_shift(2,447),h.write_shift(4,1048592),h.write_shift(2,448),h.write_shift(4,134217809),h.write_shift(2,451),h.write_shift(4,268435700),h.write_shift(2,513),h.write_shift(4,134217809),h.write_shift(2,515),h.write_shift(4,268435700),h.write_shift(2,575),h.write_shift(4,196609),h.write_shift(2,959),h.write_shift(4,131072|(l[0].hidden?2:0)),h.l+=2,h.write_shift(2,61456),h.write_shift(4,18),h.write_shift(2,3),h.write_shift(2,l[2]+2),h.l+=2,h.write_shift(2,l[1]+1),h.l+=2,h.write_shift(2,l[2]+4),h.l+=2,h.write_shift(2,l[1]+5),h.l+=2,h.l+=2,h.write_shift(2,61457),h.l+=4,h.l=150,u==0?o=h:de(i,236,h)}r+=150;{var g=X(52);g.write_shift(2,21),g.write_shift(2,18),g.write_shift(2,25),g.write_shift(2,ki),g.write_shift(2,0),g.l=22,g.write_shift(2,13),g.write_shift(2,22),g.write_shift(4,1651663474),g.write_shift(4,2503426821),g.write_shift(4,2150634280),g.write_shift(4,1768515844+ki*256),g.write_shift(2,0),g.write_shift(4,0),g.l+=4,de(i,93,g)}{var _=X(8);_.l+=2,_.write_shift(2,61453),_.l+=4,de(i,236,_)}r+=8;{var x=X(18);x.write_shift(2,18),x.l+=8,x.write_shift(2,d.length),x.write_shift(2,16),x.l+=4,de(i,438,x);{var w=X(1+d.length);w.write_shift(1,0),w.write_shift(d.length,d,"sbcs"),de(i,60,w)}{var y=X(16);y.l+=8,y.write_shift(2,d.length),y.l+=6,de(i,60,y)}}{var T=X(12+c.length);T.write_shift(2,l[1]),T.write_shift(2,l[2]),T.write_shift(2,0|(l[0].hidden?0:2)),T.write_shift(2,ki),T.write_shift(2,c.length),T.write_shift(1,0),T.write_shift(c.length,c,"sbcs"),T.l++,n.push(T)}});{var a=X(80);a.write_shift(2,15),a.write_shift(2,61442),a.write_shift(4,r+a.length-8),a.write_shift(2,16),a.write_shift(2,61448),a.write_shift(4,8),a.write_shift(4,e.length+1),a.write_shift(4,ki),a.write_shift(2,15),a.write_shift(2,61443),a.write_shift(4,r+48),a.write_shift(2,15),a.write_shift(2,61444),a.write_shift(4,40),a.write_shift(2,1),a.write_shift(2,61449),a.write_shift(4,16),a.l+=16,a.write_shift(2,2),a.write_shift(2,61450),a.write_shift(4,8),a.write_shift(4,s),a.write_shift(4,5),de(t,236,o?Sn([a,o]):a)}t.push(i.end()),n.forEach(function(l){de(t,28,l)}),di.push([s,e.length+1,ki]),++ki}function JB(t,e,n){de(t,49,kV({sz:12,name:"Arial"},n))}function YB(t,e,n){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&de(t,1054,bV(i,e[i],n))})}function XB(t,e){var n=X(19);n.write_shift(4,2151),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,1),n.write_shift(4,0),de(t,2151,n),n=X(39),n.write_shift(4,2152),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,0),n.write_shift(4,0),n.write_shift(2,1),n.write_shift(4,4),n.write_shift(2,0),lN(qt(e["!ref"]||"A1"),n),n.write_shift(4,4),de(t,2152,n)}function QB(t,e){for(var n=0;n<16;++n)de(t,224,tI({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(r){de(t,224,tI(r,0,e))})}function ZB(t,e){for(var n=0;n<e["!links"].length;++n){var r=e["!links"][n];de(t,440,GV(r)),r[1].Tooltip&&de(t,2048,HV(r))}delete e["!links"]}function e9(t,e){if(e){var n=0;e.forEach(function(r,i){++n<=256&&r&&de(t,125,qV(km(i,r),i))})}}function t9(t,e,n,r,i,s){var o=16+ta(i.cellXfs,e,i);if(e.v==null&&!e.bf){de(t,513,Ya(n,r,o));return}if(e.bf)de(t,6,g6(e,n,r,i,o));else switch(e.t){case"d":case"n":var a=e.t=="d"?Qn(jr(e.v,s),s):e.v;isNaN(a)?de(t,517,rv(n,r,36,o,i,"e")):isFinite(a)?de(t,515,UV(n,r,a,o)):de(t,517,rv(n,r,7,o,i,"e"));break;case"b":case"e":de(t,517,rv(n,r,e.v,o,i,e.t));break;case"s":case"str":if(i.bookSST){var l=qx(i.Strings,e.v==null?"":String(e.v),i.revStrings);de(t,253,NV(n,r,l,o))}else de(t,516,PV(n,r,(e.v==null?"":String(e.v)).slice(0,255),o,i));break;default:de(t,513,Ya(n,r,o))}}function n9(t,e,n){var r=fr(),i=n.SheetNames[t],s=n.Sheets[i]||{},o=(n||{}).Workbook||{},a=(o.Sheets||[])[t]||{},l=s["!data"]!=null,u=e.biff==8,c="",d=[],h=qt(s["!ref"]||"A1"),g=u?65536:16384;if(h.e.c>255||h.e.r>=g){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV"+g);h.e.c=Math.min(h.e.c,255),h.e.r=Math.min(h.e.r,g-1)}de(r,2057,Hx(n,16,e)),de(r,13,fi(1)),de(r,12,fi(100)),de(r,15,lr(!0)),de(r,17,lr(!1)),de(r,16,Ja(.001)),de(r,95,lr(!0)),de(r,42,lr(!1)),de(r,43,lr(!1)),de(r,130,fi(1)),de(r,128,VV()),de(r,131,lr(!1)),de(r,132,lr(!1)),u&&e9(r,s["!cols"]),de(r,512,MV(h,e));var _=(((n||{}).Workbook||{}).WBProps||{}).date1904;u&&(s["!links"]=[]);for(var x=h.s.c;x<=h.e.c;++x)d[x]=Nt(x);for(var w=[],y=[],T=h.s.r;T<=h.e.r;++T)for(l&&(y=s["!data"][T]||[]),c=Ft(T),x=h.s.c;x<=h.e.c;++x){var E=l?y[x]:s[d[x]+c];E&&(t9(r,E,T,x,e,_),u&&E.l&&s["!links"].push([d[x]+c,E.l]),E.c&&w.push([E.c,T,x]))}var N=a.CodeName||a.name||i;return u?KB(r,w):PN(r,w),u&&de(r,574,RV((o.Views||[])[0])),u&&(s["!merges"]||[]).length&&de(r,229,zV(s["!merges"])),u&&ZB(r,s),de(r,442,aN(N)),u&&XB(r,s),de(r,10),r.end()}function r9(t,e,n){var r=fr(),i=(t||{}).Workbook||{},s=i.Sheets||[],o=i.WBProps||{},a=n.biff==8,l=n.biff==5;if(de(r,2057,Hx(t,5,n)),n.bookType=="xla"&&de(r,135),de(r,225,a?fi(1200):null),de(r,193,mV(2)),l&&de(r,191),l&&de(r,192),de(r,226),de(r,92,IV("SheetJS",n)),de(r,66,fi(a?1200:1252)),a&&de(r,353,fi(0)),a&&de(r,448),de(r,317,jV(t.SheetNames.length)),a&&t.vbaraw&&de(r,211),a&&t.vbaraw){var u=o.CodeName||"ThisWorkbook";de(r,442,aN(u))}de(r,156,fi(17)),de(r,25,lr(!1)),de(r,18,lr(!1)),de(r,19,fi(0)),a&&de(r,431,lr(!1)),a&&de(r,444,fi(0)),de(r,61,CV()),de(r,64,lr(!1)),de(r,141,fi(0)),de(r,34,lr(lB(t)=="true")),de(r,14,lr(!0)),a&&de(r,439,lr(!1)),de(r,218,fi(0)),JB(r,t,n),YB(r,t.SSF,n),QB(r,n),a&&de(r,352,lr(!1));var c=r.end(),d=fr();a&&de(d,140,$V()),a&&di.length&&de(d,235,jB()),a&&n.Strings&&GB(d,252,AV(n.Strings)),de(d,10);var h=d.end(),g=fr(),_=0,x=0;for(x=0;x<t.SheetNames.length;++x)_+=(a?12:11)+(a?2:1)*t.SheetNames[x].length;var w=c.length+_+h.length;for(x=0;x<t.SheetNames.length;++x){var y=s[x]||{};de(g,133,SV({pos:w,hs:y.Hidden||0,dt:0,name:t.SheetNames[x]},n)),w+=e[x].length}var T=g.end();if(_!=T.length)throw new Error("BS8 "+_+" != "+T.length);var E=[];return c.length&&E.push(c),T.length&&E.push(T),h.length&&E.push(h),Sn(E)}function i9(t,e){var n=e||{},r=[];t&&!t.SSF&&(t.SSF=gr(Wt)),t&&t.SSF&&(wm(),xm(t.SSF),n.revssf=Tm(t.SSF),n.revssf[t.SSF[65535]]=0,n.ssf=t.SSF),ki=1,di=[],n.Strings=[],n.Strings.Count=0,n.Strings.Unique=0,jx(n),n.cellXfs=[],ta(n.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var i=0;i<t.SheetNames.length;++i)r[r.length]=n9(i,n,t);return r.unshift(r9(t,r,n)),Sn(r)}function bN(t,e){for(var n=0;n<=t.SheetNames.length;++n){var r=t.Sheets[t.SheetNames[n]];if(!(!r||!r["!ref"])){var i=Jn(r["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[n]+"' extends beyond column IV (255).  Data may be lost."),i.e.r>65535&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[n]+"' extends beyond row 65536.  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return i9(t,e);case 4:case 3:case 2:return qB(t,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function s9(t,e,n,r){for(var i=t["!merges"]||[],s=[],o={},a=t["!data"]!=null,l=e.s.c;l<=e.e.c;++l){for(var u=0,c=0,d=0;d<i.length;++d)if(!(i[d].s.r>n||i[d].s.c>l)&&!(i[d].e.r<n||i[d].e.c<l)){if(i[d].s.r<n||i[d].s.c<l){u=-1;break}u=i[d].e.r-i[d].s.r+1,c=i[d].e.c-i[d].s.c+1;break}if(!(u<0)){var h=Nt(l)+Ft(n),g=a?(t["!data"][n]||[])[l]:t[h];g&&g.t=="n"&&g.v!=null&&!isFinite(g.v)&&(isNaN(g.v)?g={t:"e",v:36,w:Rr[36]}:g={t:"e",v:7,w:Rr[7]});var _=g&&g.v!=null&&(g.h||Zg(g.w||(Hs(g),g.w)||""))||"";o={},u>1&&(o.rowspan=u),c>1&&(o.colspan=c),r.editable?_='<span contenteditable="true">'+_+"</span>":g&&(o["data-t"]=g&&g.t||"z",g.v!=null&&(o["data-v"]=Zg(g.v instanceof Date?g.v.toISOString():g.v)),g.z!=null&&(o["data-z"]=g.z),g.l&&(g.l.Target||"#").charAt(0)!="#"&&(_='<a href="'+Zg(g.l.Target)+'">'+_+"</a>")),o.id=(r.id||"sjs")+"-"+h,s.push(xe("td",_,o))}}var x="<tr>";return x+s.join("")+"</tr>"}var o9='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',a9="</body></html>";function l9(t,e,n){var r=[];return r.join("")+"<table"+(n&&n.id?' id="'+n.id+'"':"")+">"}function DN(t,e){var n=e||{},r=n.header!=null?n.header:o9,i=n.footer!=null?n.footer:a9,s=[r],o=Jn(t["!ref"]||"A1");if(s.push(l9(t,o,n)),t["!ref"])for(var a=o.s.r;a<=o.e.r;++a)s.push(s9(t,o,a,n));return s.push("</table>"+i),s.join("")}function FN(t,e,n){var r=e.rows;if(!r)throw"Unsupported origin when "+e.tagName+" is not a TABLE";var i=n||{},s=t["!data"]!=null,o=0,a=0;if(i.origin!=null)if(typeof i.origin=="number")o=i.origin;else{var l=typeof i.origin=="string"?en(i.origin):i.origin;o=l.r,a=l.c}var u=Math.min(i.sheetRows||1e7,r.length),c={s:{r:0,c:0},e:{r:o,c:a}};if(t["!ref"]){var d=Jn(t["!ref"]);c.s.r=Math.min(c.s.r,d.s.r),c.s.c=Math.min(c.s.c,d.s.c),c.e.r=Math.max(c.e.r,d.e.r),c.e.c=Math.max(c.e.c,d.e.c),o==-1&&(c.e.r=o=d.e.r+1)}var h=[],g=0,_=t["!rows"]||(t["!rows"]=[]),x=0,w=0,y=0,T=0,E=0,N=0;for(t["!cols"]||(t["!cols"]=[]);x<r.length&&w<u;++x){var F=r[x];if(fI(F)){if(i.display)continue;_[w]={hidden:!0}}var O=F.cells;for(y=T=0;y<O.length;++y){var S=O[y];if(!(i.display&&fI(S))){var A=S.hasAttribute("data-v")?S.getAttribute("data-v"):S.hasAttribute("v")?S.getAttribute("v"):S3(S.innerHTML),C=S.getAttribute("data-z")||S.getAttribute("z");for(g=0;g<h.length;++g){var k=h[g];k.s.c==T+a&&k.s.r<w+o&&w+o<=k.e.r&&(T=k.e.c+1-a,g=-1)}N=+S.getAttribute("colspan")||1,((E=+S.getAttribute("rowspan")||1)>1||N>1)&&h.push({s:{r:w+o,c:T+a},e:{r:w+o+(E||1)-1,c:T+a+(N||1)-1}});var P={t:"s",v:A},V=S.getAttribute("data-t")||S.getAttribute("t")||"";A!=null&&(A.length==0?P.t=V||"z":i.raw||A.trim().length==0||V=="s"||(V=="e"&&Rr[+A]?P={t:"e",v:+A,w:Rr[+A]}:A==="TRUE"?P={t:"b",v:!0}:A==="FALSE"?P={t:"b",v:!1}:isNaN(Ms(A))?isNaN(pp(A).getDate())?A.charCodeAt(0)==35&&rs[A]!=null&&(P={t:"e",v:rs[A],w:A}):(P={t:"d",v:jr(A)},i.UTC&&(P.v=Em(P.v)),i.cellDates||(P={t:"n",v:Qn(P.v)}),P.z=i.dateNF||Wt[14]):P={t:"n",v:Ms(A)})),P.z===void 0&&C!=null&&(P.z=C);var D="",oe=S.getElementsByTagName("A");if(oe&&oe.length)for(var Re=0;Re<oe.length&&!(oe[Re].hasAttribute("href")&&(D=oe[Re].getAttribute("href"),D.charAt(0)!="#"));++Re);D&&D.charAt(0)!="#"&&D.slice(0,11).toLowerCase()!="javascript:"&&(P.l={Target:D}),s?(t["!data"][w+o]||(t["!data"][w+o]=[]),t["!data"][w+o][T+a]=P):t[sn({c:T+a,r:w+o})]=P,c.e.c<T+a&&(c.e.c=T+a),T+=N}}++w}return h.length&&(t["!merges"]=(t["!merges"]||[]).concat(h)),c.e.r=Math.max(c.e.r,w-1+o),t["!ref"]=Cn(c),w>=u&&(t["!fullref"]=Cn((c.e.r=r.length-x+w-1+o,c))),t}function MN(t,e){var n=e||{},r={};return n.dense&&(r["!data"]=[]),FN(r,t,e)}function u9(t,e){var n=lc(MN(t,e),e);return n}function fI(t){var e="",n=c9(t);return n&&(e=n(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function c9(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var d9=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+of({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return Rn+e}}();function f9(t,e){var n="number",r="",i={"style:name":e},s="",o=0;t=t.replace(/"[$]"/g,"$");e:{if(t.indexOf(";")>-1&&(console.error("Unsupported ODS Style Map exported.  Using first branch of "+t),t=t.slice(0,t.indexOf(";"))),t=="@"){n="text",r="<number:text-content/>";break e}if(t.indexOf(/\$/)>-1&&(n="currency"),t[o]=='"'){for(s="";t[++o]!='"'||t[++o]=='"';)s+=t[o];--o,t[o+1]=="*"?(o++,r+="<number:fill-character>"+dt(s.replace(/""/g,'"'))+"</number:fill-character>"):r+="<number:text>"+dt(s.replace(/""/g,'"'))+"</number:text>",t=t.slice(o+1),o=0}var a=t.match(/# (\?+)\/(\?+)/);if(a){r+=xe("number:fraction",null,{"number:min-integer-digits":0,"number:min-numerator-digits":a[1].length,"number:max-denominator-value":Math.max(+a[1].replace(/./g,"9"),+a[2].replace(/./g,"9"))});break e}if(a=t.match(/# (\?+)\/(\d+)/)){r+=xe("number:fraction",null,{"number:min-integer-digits":0,"number:min-numerator-digits":a[1].length,"number:denominator-value":+a[2]});break e}if(a=t.match(/\b(\d+)(|\.\d+)%/)){n="percentage",r+=xe("number:number",null,{"number:decimal-places":a[2]&&a.length-1||0,"number:min-decimal-places":a[2]&&a.length-1||0,"number:min-integer-digits":a[1].length})+"<number:text>%</number:text>";break e}var l=!1;if(["y","m","d"].indexOf(t[0])>-1){n="date";t:for(;o<t.length;++o)switch(s=t[o].toLowerCase()){case"h":case"s":l=!0,--o;break t;case"m":n:for(var u=o+1;u<t.length;++u)switch(t[u]){case"y":case"d":break n;case"h":case"s":l=!0,--o;break t}case"y":case"d":for(;(t[++o]||"").toLowerCase()==s[0];)s+=s[0];switch(--o,s){case"y":case"yy":r+="<number:year/>";break;case"yyy":case"yyyy":r+='<number:year number:style="long"/>';break;case"mmmmm":console.error("ODS has no equivalent of format |mmmmm|");case"m":case"mm":case"mmm":case"mmmm":r+='<number:month number:style="'+(s.length%2?"short":"long")+'" number:textual="'+(s.length>=3?"true":"false")+'"/>';break;case"d":case"dd":r+='<number:day number:style="'+(s.length%2?"short":"long")+'"/>';break;case"ddd":case"dddd":r+='<number:day-of-week number:style="'+(s.length%2?"short":"long")+'"/>';break}break;case'"':for(;t[++o]!='"'||t[++o]=='"';)s+=t[o];--o,r+="<number:text>"+dt(s.slice(1).replace(/""/g,'"'))+"</number:text>";break;case"\\":s=t[++o],r+="<number:text>"+dt(s)+"</number:text>";break;case"/":case":":r+="<number:text>"+dt(s)+"</number:text>";break;default:console.error("unrecognized character "+s+" in ODF format "+t)}if(!l)break e;t=t.slice(o+1),o=0}if(t.match(/^\[?[hms]/)){for(n=="number"&&(n="time"),t.match(/\[/)&&(t=t.replace(/[\[\]]/g,""),i["number:truncate-on-overflow"]="false");o<t.length;++o)switch(s=t[o].toLowerCase()){case"h":case"m":case"s":for(;(t[++o]||"").toLowerCase()==s[0];)s+=s[0];switch(--o,s){case"h":case"hh":r+='<number:hours number:style="'+(s.length%2?"short":"long")+'"/>';break;case"m":case"mm":r+='<number:minutes number:style="'+(s.length%2?"short":"long")+'"/>';break;case"s":case"ss":if(t[o+1]==".")do s+=t[o+1],++o;while(t[o+1]=="0");r+='<number:seconds number:style="'+(s.match("ss")?"long":"short")+'"'+(s.match(/\./)?' number:decimal-places="'+(s.match(/0+/)||[""])[0].length+'"':"")+"/>";break}break;case'"':for(;t[++o]!='"'||t[++o]=='"';)s+=t[o];--o,r+="<number:text>"+dt(s.slice(1).replace(/""/g,'"'))+"</number:text>";break;case"/":case":":r+="<number:text>"+dt(s)+"</number:text>";break;case"a":if(t.slice(o,o+3).toLowerCase()=="a/p"){r+="<number:am-pm/>",o+=2;break}if(t.slice(o,o+5).toLowerCase()=="am/pm"){r+="<number:am-pm/>",o+=4;break}default:console.error("unrecognized character "+s+" in ODF format "+t)}break e}if(t.indexOf(/\$/)>-1&&(n="currency"),t[0]=="$"&&(r+='<number:currency-symbol number:language="en" number:country="US">$</number:currency-symbol>',t=t.slice(1),o=0),o=0,t[o]=='"'){for(;t[++o]!='"'||t[++o]=='"';)s+=t[o];--o,t[o+1]=="*"?(o++,r+="<number:fill-character>"+dt(s.replace(/""/g,'"'))+"</number:fill-character>"):r+="<number:text>"+dt(s.replace(/""/g,'"'))+"</number:text>",t=t.slice(o+1),o=0}var c=t.match(/([#0][0#,]*)(\.[0#]*|)(E[+]?0*|)/i);if(!c||!c[0])console.error("Could not find numeric part of "+t);else{var d=c[1].replace(/,/g,"");r+="<number:"+(c[3]?"scientific-":"")+'number number:min-integer-digits="'+(d.indexOf("0")==-1?"0":d.length-d.indexOf("0"))+'"'+(c[0].indexOf(",")>-1?' number:grouping="true"':"")+(c[2]&&' number:decimal-places="'+(c[2].length-1)+'"'||' number:decimal-places="0"')+(c[3]&&c[3].indexOf("+")>-1?' number:forced-exponent-sign="true"':"")+(c[3]?' number:min-exponent-digits="'+c[3].match(/0+/)[0].length+'"':"")+"></number:"+(c[3]?"scientific-":"")+"number>",o=c.index+c[0].length}if(t[o]=='"'){for(s="";t[++o]!='"'||t[++o]=='"';)s+=t[o];--o,r+="<number:text>"+dt(s.replace(/""/g,'"'))+"</number:text>"}}return r?xe("number:"+n+"-style",r,i):(console.error("Could not generate ODS number format for |"+t+"|"),"")}function hI(t,e,n){for(var r=[],i=0;i<t.length;++i){var s=t[i];s&&s.Sheet==(n==-1?null:n)&&r.push(s)}return r.length?`      <table:named-expressions>
`+r.map(function(o){var a=(n==-1?"$":"")+AN(o.Ref);return"        "+xe("table:named-range",null,{"table:name":o.Name,"table:cell-range-address":a,"table:base-cell-address":a.replace(/[\.][^\.]*$/,".$A$1")})}).join(`
`)+`
      </table:named-expressions>
`:""}var pI=function(){var t=function(i,s){return dt(i).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,n=function(i,s,o,a,l,u){var c=[];c.push('      <table:table table:name="'+dt(s.SheetNames[o])+`" table:style-name="ta1">
`);var d=0,h=0,g=Jn(i["!ref"]||"A1"),_=i["!merges"]||[],x=0,w=i["!data"]!=null;if(i["!cols"])for(h=0;h<=g.e.c;++h)c.push("        <table:table-column"+(i["!cols"][h]?' table:style-name="co'+i["!cols"][h].ods+'"':"")+`></table:table-column>
`);var y="",T=i["!rows"]||[];for(d=0;d<g.s.r;++d)y=T[d]?' table:style-name="ro'+T[d].ods+'"':"",c.push("        <table:table-row"+y+`></table:table-row>
`);for(;d<=g.e.r;++d){for(y=T[d]?' table:style-name="ro'+T[d].ods+'"':"",c.push("        <table:table-row"+y+`>
`),h=0;h<g.s.c;++h)c.push(e);for(;h<=g.e.c;++h){var E=!1,N={},F="";for(x=0;x!=_.length;++x)if(!(_[x].s.c>h)&&!(_[x].s.r>d)&&!(_[x].e.c<h)&&!(_[x].e.r<d)){(_[x].s.c!=h||_[x].s.r!=d)&&(E=!0),N["table:number-columns-spanned"]=_[x].e.c-_[x].s.c+1,N["table:number-rows-spanned"]=_[x].e.r-_[x].s.r+1;break}if(E){c.push(`          <table:covered-table-cell/>
`);continue}var O=sn({r:d,c:h}),S=w?(i["!data"][d]||[])[h]:i[O];if(S&&S.f&&(N["table:formula"]=dt(D6(S.f)),S.F&&S.F.slice(0,O.length)==O)){var A=Jn(S.F);N["table:number-matrix-columns-spanned"]=A.e.c-A.s.c+1,N["table:number-matrix-rows-spanned"]=A.e.r-A.s.r+1}if(!S){c.push(e);continue}switch(S.t){case"b":F=S.v?"TRUE":"FALSE",N["office:value-type"]="boolean",N["office:boolean-value"]=S.v?"true":"false";break;case"n":isFinite(S.v)?(F=S.w||String(S.v||0),N["office:value-type"]="float",N["office:value"]=S.v||0):(isNaN(S.v)?(F="#NUM!",N["table:formula"]="of:=#NUM!"):(F="#DIV/0!",N["table:formula"]="of:="+(S.v<0?"-":"")+"1/0"),N["office:string-value"]="",N["office:value-type"]="string",N["calcext:value-type"]="error");break;case"s":case"str":F=S.v==null?"":S.v,N["office:value-type"]="string";break;case"d":F=S.w||jr(S.v,u).toISOString(),N["office:value-type"]="date",N["office:date-value"]=jr(S.v,u).toISOString(),N["table:style-name"]="ce1";break;default:c.push(e);continue}var C=t(F);if(S.l&&S.l.Target){var k=S.l.Target;k=k.charAt(0)=="#"?"#"+AN(k.slice(1)):k,k.charAt(0)!="#"&&!k.match(/^\w+:/)&&(k="../"+k),C=xe("text:a",C,{"xlink:href":k.replace(/&/g,"&amp;")})}l[S.z]&&(N["table:style-name"]="ce"+l[S.z].slice(1));var P=xe("text:p",C,{});if(S.c){for(var V="",D="",oe={},Re=0;Re<S.c.length;++Re)!V&&S.c[Re].a&&(V=S.c[Re].a),D+="<text:p>"+t(S.c[Re].t)+"</text:p>";S.c.hidden||(oe["office:display"]=!0),P=xe("office:annotation",D,oe)+P}c.push("          "+xe("table:table-cell",P,N)+`
`)}c.push(`        </table:table-row>
`)}return(s.Workbook||{}).Names&&c.push(hI(s.Workbook.Names,s.SheetNames,o)),c.push(`      </table:table>
`),c.join("")},r=function(i,s){i.push(` <office:automatic-styles>
`);var o=0;s.SheetNames.map(function(c){return s.Sheets[c]}).forEach(function(c){if(c&&c["!cols"]){for(var d=0;d<c["!cols"].length;++d)if(c["!cols"][d]){var h=c["!cols"][d];if(h.width==null&&h.wpx==null&&h.wch==null)continue;$x(h),h.ods=o;var g=c["!cols"][d].wpx+"px";i.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+g+`"/>
`),i.push(`  </style:style>
`),++o}}});var a=0;s.SheetNames.map(function(c){return s.Sheets[c]}).forEach(function(c){if(c&&c["!rows"]){for(var d=0;d<c["!rows"].length;++d)if(c["!rows"][d]){c["!rows"][d].ods=a;var h=c["!rows"][d].hpx+"px";i.push('  <style:style style:name="ro'+a+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+h+`"/>
`),i.push(`  </style:style>
`),++a}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var l={},u=69;return s.SheetNames.map(function(c){return s.Sheets[c]}).forEach(function(c){if(c){var d=c["!data"]!=null;if(c["!ref"])for(var h=Jn(c["!ref"]),g=0;g<=h.e.r;++g)for(var _=0;_<=h.e.c;++_){var x=d?(c["!data"][g]||[])[_]:c[sn({r:g,c:_})];if(!(!x||!x.z||x.z.toLowerCase()=="general")&&!l[x.z]){var w=f9(x.z,"N"+u);w&&(l[x.z]="N"+u,++u,i.push(w+`
`))}}}}),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),An(l).forEach(function(c){i.push('<style:style style:name="ce'+l[c].slice(1)+'" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="'+l[c]+`"/>
`)}),i.push(` </office:automatic-styles>
`),l};return function(s,o){var a=[Rn],l=of({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),u=of({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(a.push("<office:document"+l+u+`>
`),a.push(Zk().replace(/<office:document-meta[^<>]*?>/,"").replace(/<\/office:document-meta>/,"")+`
`)):a.push("<office:document-content"+l+`>
`);var c=r(a,s);a.push(`  <office:body>
`),a.push(`    <office:spreadsheet>
`),((s.Workbook||{}).WBProps||{}).date1904&&a.push(`      <table:calculation-settings table:case-sensitive="false" table:search-criteria-must-apply-to-whole-cell="true" table:use-wildcards="true" table:use-regular-expressions="false" table:automatic-find-labels="false">
        <table:null-date table:date-value="1904-01-01"/>
      </table:calculation-settings>
`);for(var d=0;d!=s.SheetNames.length;++d)a.push(n(s.Sheets[s.SheetNames[d]],s,d,o,c,((s.Workbook||{}).WBProps||{}).date1904));return(s.Workbook||{}).Names&&a.push(hI(s.Workbook.Names,s.SheetNames,-1)),a.push(`    </office:spreadsheet>
`),a.push(`  </office:body>
`),o.bookType=="fods"?a.push("</office:document>"):a.push("</office:document-content>"),a.join("")}}();function LN(t,e){if(e.bookType=="fods")return pI(t,e);var n=Dx(),r="",i=[],s=[];return r="mimetype",ct(n,r,"application/vnd.oasis.opendocument.spreadsheet"),r="content.xml",ct(n,r,pI(t,e)),i.push([r,"text/xml"]),s.push([r,"ContentFile"]),r="styles.xml",ct(n,r,d9(t,e)),i.push([r,"text/xml"]),s.push([r,"StylesFile"]),r="meta.xml",ct(n,r,Rn+Zk()),i.push([r,"text/xml"]),s.push([r,"MetadataFile"]),r="manifest.rdf",ct(n,r,cV(s)),i.push([r,"application/rdf+xml"]),r="META-INF/manifest.xml",ct(n,r,lV(i)),n}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */var Ar=function(){try{return typeof Uint8Array>"u"||typeof Uint8Array.prototype.subarray>"u"?"slice":typeof Buffer<"u"?typeof Buffer.prototype.subarray>"u"?"slice":(typeof Buffer.from=="function"?Buffer.from([72,62]):new Buffer([72,62]))instanceof Uint8Array?"subarray":"slice":"subarray"}catch{return"slice"}}();function wp(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function cf(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):mu(ja(t))}function xr(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):Qr(sf(t))}function Uo(t){for(var e=0,n=0;n<t.length;++n)e+=t[n].length;var r=new Uint8Array(e),i=0;for(n=0;n<t.length;++n){var s=t[n],o=s.length;if(o<250)for(var a=0;a<o;++a)r[i++]=s[a];else r.set(s,i),i+=o}return r}function h9(t,e,n){var r=Math.floor(n==0?0:Math.LOG10E*Math.log(Math.abs(n)))+6176-16,i=n/Math.pow(10,r-6176);t[e+15]|=r>>7,t[e+14]|=(r&127)<<1;for(var s=0;i>=1;++s,i/=256)t[e+s]=i&255;t[e+15]|=n>=0?0:128}function df(t,e){var n=e.l,r=t[n]&127;e:if(t[n++]>=128&&(r|=(t[n]&127)<<7,t[n++]<128||(r|=(t[n]&127)<<14,t[n++]<128)||(r|=(t[n]&127)<<21,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,28),++n,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,35),++n,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,42),++n,t[n++]<128)))break e;return e.l=n,r}function je(t){var e=new Uint8Array(7);e[0]=t&127;var n=1;e:if(t>127){if(e[n-1]|=128,e[n]=t>>7&127,++n,t<=16383||(e[n-1]|=128,e[n]=t>>14&127,++n,t<=2097151)||(e[n-1]|=128,e[n]=t>>21&127,++n,t<=268435455)||(e[n-1]|=128,e[n]=t/256>>>21&127,++n,t<=34359738367)||(e[n-1]|=128,e[n]=t/65536>>>21&127,++n,t<=4398046511103))break e;e[n-1]|=128,e[n]=t/16777216>>>21&127,++n}return e[Ar](0,n)}function ON(t){for(var e={l:0},n=[];e.l<t.length;)n.push(df(t,e));return n}function VN(t){return Uo(t.map(function(e){return je(e)}))}function ri(t){var e=0,n=t[e]&127;return t[e++]<128||(n|=(t[e]&127)<<7,t[e++]<128)||(n|=(t[e]&127)<<14,t[e++]<128)||(n|=(t[e]&127)<<21,t[e++]<128)||(n|=(t[e]&15)<<28),n}function nt(t){for(var e=[],n={l:0};n.l<t.length;){var r=n.l,i=df(t,n),s=i&7;i=i/8|0;var o,a=n.l;switch(s){case 0:{for(;t[a++]>=128;);o=t[Ar](n.l,a),n.l=a}break;case 1:o=t[Ar](a,a+8),n.l=a+8;break;case 2:{var l=df(t,n);o=t[Ar](n.l,n.l+l),n.l+=l}break;case 5:o=t[Ar](a,a+4),n.l=a+4;break;default:throw new Error("PB Type ".concat(s," for Field ").concat(i," at offset ").concat(r))}var u={data:o,type:s};e[i]==null&&(e[i]=[]),e[i].push(u)}return e}function Xe(t){var e=[];return t.forEach(function(n,r){r!=0&&n.forEach(function(i){i.data&&(e.push(je(r*8+i.type)),i.type==2&&e.push(je(i.data.length)),e.push(i.data))})}),Uo(e)}function Tp(t,e){return(t==null?void 0:t.map(function(n){return e(n.data)}))||[]}function Ep(t){for(var e,n=[],r={l:0};r.l<t.length;){var i=df(t,r),s=nt(t[Ar](r.l,r.l+i));r.l+=i;var o={id:ri(s[1][0].data),messages:[]};s[2].forEach(function(a){var l=nt(a.data),u=ri(l[3][0].data);o.messages.push({meta:l,data:t[Ar](r.l,r.l+u)}),r.l+=u}),(e=s[3])!=null&&e[0]&&(o.merge=ri(s[3][0].data)>>>0>0),n.push(o)}return n}function _u(t){var e=[];return t.forEach(function(n){var r=[[],[{data:je(n.id),type:0}],[]];n.merge!=null&&(r[3]=[{data:je(+!!n.merge),type:0}]);var i=[];n.messages.forEach(function(o){i.push(o.data),o.meta[3]=[{type:0,data:je(o.data.length)}],r[2].push({data:Xe(o.meta),type:2})});var s=Xe(r);e.push(je(s.length)),e.push(s),i.forEach(function(o){return e.push(o)})}),Uo(e)}function p9(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var n={l:0},r=df(e,n),i=[],s=n.l;s<e.length;){var o=e[s]&3;if(o==0){var a=e[s++]>>2;if(a<60)++a;else{var l=a-59;a=e[s],l>1&&(a|=e[s+1]<<8),l>2&&(a|=e[s+2]<<16),l>3&&(a|=e[s+3]<<24),a>>>=0,a++,s+=l}i.push(e[Ar](s,s+a)),s+=a;continue}else{var u=0,c=0;if(o==1?(c=(e[s]>>2&7)+4,u=(e[s++]&224)<<3,u|=e[s++]):(c=(e[s++]>>2)+1,o==2?(u=e[s]|e[s+1]<<8,s+=2):(u=(e[s]|e[s+1]<<8|e[s+2]<<16|e[s+3]<<24)>>>0,s+=4)),u==0)throw new Error("Invalid offset 0");for(var d=i.length-1,h=u;d>=0&&h>=i[d].length;)h-=i[d].length,--d;if(d<0)if(h==0)h=i[d=0].length;else throw new Error("Invalid offset beyond length");if(c<h)i.push(i[d][Ar](i[d].length-h,i[d].length-h+c));else{for(h>0&&(i.push(i[d][Ar](i[d].length-h)),c-=h),++d;c>=i[d].length;)i.push(i[d]),c-=i[d].length,++d;c&&i.push(i[d][Ar](0,c))}i.length>25&&(i=[Uo(i)])}}for(var g=0,_=0;_<i.length;++_)g+=i[_].length;if(g!=r)throw new Error("Unexpected length: ".concat(g," != ").concat(r));return i}function Ip(t){Array.isArray(t)&&(t=new Uint8Array(t));for(var e=[],n=0;n<t.length;){var r=t[n++],i=t[n]|t[n+1]<<8|t[n+2]<<16;n+=3,e.push.apply(e,p9(r,t[Ar](n,n+i))),n+=i}if(n!==t.length)throw new Error("data is not a valid framed stream!");return e.length==1?e[0]:Uo(e)}function yu(t){for(var e=[],n=0;n<t.length;){var r=Math.min(t.length-n,268435455),i=new Uint8Array(4);e.push(i);var s=je(r),o=s.length;e.push(s),r<=60?(o++,e.push(new Uint8Array([r-1<<2]))):r<=256?(o+=2,e.push(new Uint8Array([240,r-1&255]))):r<=65536?(o+=3,e.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(o+=4,e.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(o+=5,e.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),e.push(t[Ar](n,n+r)),o+=r,i[0]=0,i[1]=o&255,i[2]=o>>8&255,i[3]=o>>16&255,n+=r}return Uo(e)}function cv(t,e){var n=new Uint8Array(32),r=wp(n),i=12,s=0;switch(n[0]=5,t.t){case"n":if(t.z&&Ka(t.z)){n[1]=5,r.setFloat64(i,(pu(t.v+1462).getTime()-Date.UTC(2001,0,1))/1e3,!0),s|=4,i+=8;break}else n[1]=2,h9(n,i,t.v),s|=1,i+=16;break;case"b":n[1]=6,r.setFloat64(i,t.v?1:0,!0),s|=2,i+=8;break;case"s":{var o=t.v==null?"":String(t.v);if(t.l){var a=e.rsst.findIndex(function(u){var c;return u.v==o&&u.l==((c=t.l)==null?void 0:c.Target)});a==-1&&(e.rsst[a=e.rsst.length]={v:o,l:t.l.Target}),n[1]=9,r.setUint32(i,a,!0),s|=16,i+=4}else{var l=e.sst.indexOf(o);l==-1&&(e.sst[l=e.sst.length]=o),n[1]=3,r.setUint32(i,l,!0),s|=8,i+=4}}break;case"d":n[1]=5,r.setFloat64(i,(t.v.getTime()-Date.UTC(2001,0,1))/1e3,!0),s|=4,i+=8;break;case"z":n[1]=0;break;default:throw"unsupported cell type "+t.t}return t.c&&(e.cmnt.push(m9(t.c)),r.setUint32(i,e.cmnt.length-1,!0),s|=524288,i+=4),r.setUint32(8,s,!0),n[Ar](0,i)}function dv(t,e){var n=new Uint8Array(32),r=wp(n),i=12,s=0,o="";switch(n[0]=4,t.t){case"n":break;case"b":break;case"s":if(o=t.v==null?"":String(t.v),t.l){var a=e.rsst.findIndex(function(u){var c;return u.v==o&&u.l==((c=t.l)==null?void 0:c.Target)});a==-1&&(e.rsst[a=e.rsst.length]={v:o,l:t.l.Target}),n[1]=9,r.setUint32(i,a,!0),s|=512,i+=4}break;case"d":break;case"e":break;case"z":break;default:throw"unsupported cell type "+t.t}switch(t.c&&(r.setUint32(i,e.cmnt.length-1,!0),s|=4096,i+=4),t.t){case"n":n[1]=2,r.setFloat64(i,t.v,!0),s|=32,i+=8;break;case"b":n[1]=6,r.setFloat64(i,t.v?1:0,!0),s|=32,i+=8;break;case"s":if(o=t.v==null?"":String(t.v),!t.l){var l=e.sst.indexOf(o);l==-1&&(e.sst[l=e.sst.length]=o),n[1]=3,r.setUint32(i,l,!0),s|=16,i+=4}break;case"d":n[1]=5,r.setFloat64(i,(t.v.getTime()-Date.UTC(2001,0,1))/1e3,!0),s|=64,i+=8;break;case"z":n[1]=0;break;default:throw"unsupported cell type "+t.t}return r.setUint32(8,s,!0),n[Ar](0,i)}function Tn(t){var e=nt(t);return ri(e[1][0].data)}function ar(t){return Xe([[],[{type:0,data:je(t)}]])}function or(t,e){var n,r=(n=t.messages[0].meta[5])!=null&&n[0]?ON(t.messages[0].meta[5][0].data):[],i=r.indexOf(e);i==-1&&(r.push(e),t.messages[0].meta[5]=[{type:2,data:VN(r)}])}function Es(t,e){var n,r=(n=t.messages[0].meta[5])!=null&&n[0]?ON(t.messages[0].meta[5][0].data):[];t.messages[0].meta[5]=[{type:2,data:VN(r.filter(function(i){return i!=e}))}]}function m9(t){for(var e={a:"",t:"",replies:[]},n=0;n<t.length;++n)n==0?(e.a=t[n].a,e.t=t[n].t):e.replies.push({a:t[n].a,t:t[n].t});return e}function g9(t,e,n){var r,i,s,o=[[],[{type:0,data:je(0)}],[{type:0,data:je(0)}],[{type:2,data:new Uint8Array([])}],[{type:2,data:new Uint8Array(Array.from({length:510},function(){return 255}))}],[{type:0,data:je(5)}],[{type:2,data:new Uint8Array([])}],[{type:2,data:new Uint8Array(Array.from({length:510},function(){return 255}))}],[{type:0,data:je(1)}]];if(!((r=o[6])!=null&&r[0])||!((i=o[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var a=0;if(o[7][0].data.length<2*t.length){var l=new Uint8Array(2*t.length);l.set(o[7][0].data),o[7][0].data=l}if(o[4][0].data.length<2*t.length){var u=new Uint8Array(2*t.length);u.set(o[4][0].data),o[4][0].data=u}for(var c=wp(o[7][0].data),d=0,h=[],g=wp(o[4][0].data),_=0,x=[],w=4,y=0;y<t.length;++y){if(t[y]==null||t[y].t=="z"&&!((s=t[y].c)!=null&&s.length)||t[y].t=="e"){c.setUint16(y*2,65535,!0),g.setUint16(y*2,65535);continue}c.setUint16(y*2,d/w,!0),g.setUint16(y*2,_/w,!0);var T,E;switch(t[y].t){case"d":if(t[y].v instanceof Date){T=cv(t[y],e),E=dv(t[y],e);break}T=cv(t[y],e),E=dv(t[y],e);break;case"s":case"n":case"b":case"z":T=cv(t[y],e),E=dv(t[y],e);break;default:throw new Error("Unsupported value "+t[y])}h.push(T),d+=T.length,x.push(E),_+=E.length,++a}for(o[2][0].data=je(a),o[5][0].data=je(5);y<o[7][0].data.length/2;++y)c.setUint16(y*2,65535,!0),g.setUint16(y*2,65535,!0);return o[6][0].data=Uo(h),o[3][0].data=Uo(x),o[8]=[{type:0,data:je(1)}],o}function P_(t,e){return{meta:[[],[{type:0,data:je(t)}]],data:e}}function Yi(t,e){e.last||(e.last=927262);for(var n=e.last;n<2e6;++n)if(!e[n])return e[e.last=n]=t,n;throw new Error("Too many messages")}function v9(t){var e={},n=[];return t.FileIndex.map(function(r,i){return[r,t.FullPaths[i]]}).forEach(function(r){var i=r[0],s=r[1];i.type==2&&i.name.match(/\.iwa/)&&i.content[0]==0&&Ep(Ip(i.content)).forEach(function(o){n.push(o.id),e[o.id]={deps:[],location:s,type:ri(o.messages[0].meta[1][0].data)}})}),t.FileIndex.forEach(function(r){r.name.match(/\.iwa/)&&r.content[0]==0&&Ep(Ip(r.content)).forEach(function(i){i.messages.forEach(function(s){[5,6].forEach(function(o){s.meta[o]&&s.meta[o].forEach(function(a){e[i.id].deps.push(ri(a.data))})})})})}),e}function Jh(t,e,n){return Xe([[],[{type:0,data:je(1)}],[],[{type:5,data:new Uint8Array(Float32Array.from([t/255]).buffer)}],[{type:5,data:new Uint8Array(Float32Array.from([e/255]).buffer)}],[{type:5,data:new Uint8Array(Float32Array.from([n/255]).buffer)}],[{type:5,data:new Uint8Array(Float32Array.from([1]).buffer)}],[],[],[],[],[],[{type:0,data:je(1)}]])}function mI(t){switch(t){case 0:return Jh(99,222,171);case 1:return Jh(162,197,240);case 2:return Jh(255,189,189)}return Jh(Math.random()*255,Math.random()*255,Math.random()*255)}function _9(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var n=Ot.read(e.numbers,{type:"base64"}),r=v9(n),i=Xi(n,r,1);if(i==null)throw"Could not find message ".concat(1," in Numbers template");var s=Tp(nt(i.messages[0].data)[1],Tn);if(s.length>1)throw new Error("Template NUMBERS file must have exactly one sheet");return t.SheetNames.forEach(function(o,a){a>=1&&(x9(n,r,a+1),i=Xi(n,r,1),s=Tp(nt(i.messages[0].data)[1],Tn)),w9(n,r,t.Sheets[o],o,a,s[a])}),n}function kt(t,e,n,r){var i=Ot.find(t,e[n].location);if(!i)throw"Could not find ".concat(e[n].location," in Numbers template");var s=Ep(Ip(i.content)),o=s.find(function(a){return a.id==n});r(o,s),i.content=yu(_u(s)),i.size=i.content.length}function Xi(t,e,n){var r=Ot.find(t,e[n].location);if(!r)throw"Could not find ".concat(e[n].location," in Numbers template");var i=Ep(Ip(r.content)),s=i.find(function(o){return o.id==n});return s}function b_(t,e,n){t[3].push({type:2,data:Xe([[],[{type:0,data:je(e)}],[{type:2,data:xr(n.replace(/-[\s\S]*$/,""))}],[{type:2,data:xr(n)}],[{type:2,data:new Uint8Array([2,0,0])}],[{type:2,data:new Uint8Array([2,0,0])}],[],[],[],[],[{type:0,data:je(0)}],[],[{type:0,data:je(0)}]])}),t[1]=[{type:0,data:je(Math.max(e+1,ri(t[1][0].data)))}]}function ma(t,e,n,r,i,s){s||(s=Yi({deps:[],location:"",type:e},i));var o="".concat(r,"-").concat(s,".iwa");i[s].location="Root Entry"+o,Ot.utils.cfb_add(t,o,yu(_u([{id:s,messages:[P_(e,Xe(n))]}])));var a=o.replace(/^[\/]/,"").replace(/^Index\//,"").replace(/\.iwa$/,"");return kt(t,i,2,function(l){var u=nt(l.messages[0].data);b_(u,s||0,a),l.messages[0].data=Xe(u)}),s}function Lr(t,e,n,r){var i=e[n].location.replace(/^Root Entry\//,"").replace(/^Index\//,"").replace(/\.iwa$/,""),s=t[3].findIndex(function(a){var l,u,c=nt(a.data);return(l=c[3])!=null&&l[0]?cf(c[3][0].data)==i:!!((u=c[2])!=null&&u[0]&&cf(c[2][0].data)==i)}),o=nt(t[3][s].data);o[6]||(o[6]=[]),(Array.isArray(r)?r:[r]).forEach(function(a){o[6].push({type:2,data:Xe([[],[{type:0,data:je(a)}]])})}),t[3][s].data=Xe(o)}function y9(t,e,n,r){var i=e[n].location.replace(/^Root Entry\//,"").replace(/^Index\//,"").replace(/\.iwa$/,""),s=t[3].findIndex(function(a){var l,u,c=nt(a.data);return(l=c[3])!=null&&l[0]?cf(c[3][0].data)==i:!!((u=c[2])!=null&&u[0]&&cf(c[2][0].data)==i)}),o=nt(t[3][s].data);o[6]||(o[6]=[]),o[6]=o[6].filter(function(a){return ri(nt(a.data)[1][0].data)!=r}),t[3][s].data=Xe(o)}function x9(t,e,n){var r=-1,i=-1,s={};kt(t,e,1,function(l,u){var c=nt(l.messages[0].data);r=Tn(nt(l.messages[0].data)[1][0].data),i=Yi({deps:[1],location:e[r].location,type:2},e),s[r]=i,or(l,i),c[1].push({type:2,data:ar(i)});var d=Xi(t,e,r);d.id=i,e[1].location==e[i].location?u.push(d):kt(t,e,i,function(h,g){return g.push(d)}),l.messages[0].data=Xe(c)});var o=-1;kt(t,e,i,function(l,u){for(var c=nt(l.messages[0].data),d=3;d<=69;++d)delete c[d];var h=Tp(c[2],Tn);h.forEach(function(_){return Es(l,_)}),o=Yi({deps:[i],location:e[h[0]].location,type:e[h[0]].type},e),or(l,o),s[h[0]]=o,c[2]=[{type:2,data:ar(o)}];var g=Xi(t,e,h[0]);g.id=o,e[h[0]].location==e[i].location?u.push(g):(kt(t,e,2,function(_){var x=nt(_.messages[0].data);Lr(x,e,i,o),_.messages[0].data=Xe(x)}),kt(t,e,o,function(_,x){return x.push(g)})),l.messages[0].data=Xe(c)});var a=-1;kt(t,e,o,function(l,u){for(var c=nt(l.messages[0].data),d=nt(c[1][0].data),h=3;h<=69;++h)delete d[h];var g=Tn(d[2][0].data);d[2][0].data=ar(s[g]),c[1][0].data=Xe(d);var _=Tn(c[2][0].data);Es(l,_),a=Yi({deps:[o],location:e[_].location,type:e[_].type},e),or(l,a),s[_]=a,c[2][0].data=ar(a);var x=Xi(t,e,_);x.id=a,e[o].location==e[a].location?u.push(x):kt(t,e,a,function(w,y){return y.push(x)}),l.messages[0].data=Xe(c)}),kt(t,e,a,function(l,u){var c,d,h=nt(l.messages[0].data),g=cf(h[1][0].data),_=g.replace(/-[A-Z0-9]*/,"-".concat(("0000"+n.toString(16)).slice(-4)));if(h[1][0].data=xr(_),[12,13,29,31,32,33,39,44,47,81,82,84].forEach(function(F){return delete h[F]}),h[45]){var x=nt(h[45][0].data),w=Tn(x[1][0].data);Es(l,w),delete h[45]}if(h[70]){var y=nt(h[70][0].data);(c=y[2])==null||c.forEach(function(F){var O=nt(F.data);[2,3].map(function(S){return O[S][0]}).forEach(function(S){var A=nt(S.data);if(A[8]){var C=Tn(A[8][0].data);Es(l,C)}})}),delete h[70]}[46,30,34,35,36,38,48,49,60,61,62,63,64,71,72,73,74,75,85,86,87,88,89].forEach(function(F){if(h[F]){var O=Tn(h[F][0].data);delete h[F],Es(l,O)}});var T=nt(h[4][0].data);{[2,4,5,6,11,12,13,15,16,17,18,19,20,21,22].forEach(function(F){var O;if((O=T[F])!=null&&O[0]){var S=Tn(T[F][0].data),A=Yi({deps:[a],location:e[S].location,type:e[S].type},e);Es(l,S),or(l,A),s[S]=A;var C=Xi(t,e,S);if(C.id=A,e[S].location==e[a].location)u.push(C);else{e[A].location=e[S].location.replace(S.toString(),A.toString()),e[A].location==e[S].location&&(e[A].location=e[A].location.replace(/\.iwa/,"-".concat(A,".iwa"))),Ot.utils.cfb_add(t,e[A].location,yu(_u([C])));var k=e[A].location.replace(/^Root Entry\//,"").replace(/^Index\//,"").replace(/\.iwa$/,"");kt(t,e,2,function(P){var V=nt(P.messages[0].data);b_(V,A,k),Lr(V,e,a,A),P.messages[0].data=Xe(V)})}T[F][0].data=ar(A)}});var E=nt(T[1][0].data);(d=E[2])==null||d.forEach(function(F){var O=Tn(F.data),S=Yi({deps:[a],location:e[O].location,type:e[O].type},e);Es(l,O),or(l,S),s[O]=S;var A=Xi(t,e,O);if(A.id=S,e[O].location==e[a].location)u.push(A);else{e[S].location=e[O].location.replace(O.toString(),S.toString()),e[S].location==e[O].location&&(e[S].location=e[S].location.replace(/\.iwa/,"-".concat(S,".iwa"))),Ot.utils.cfb_add(t,e[S].location,yu(_u([A])));var C=e[S].location.replace(/^Root Entry\//,"").replace(/^Index\//,"").replace(/\.iwa$/,"");kt(t,e,2,function(k){var P=nt(k.messages[0].data);b_(P,S,C),Lr(P,e,a,S),k.messages[0].data=Xe(P)})}F.data=ar(S)}),T[1][0].data=Xe(E);var N=nt(T[3][0].data);N[1].forEach(function(F){var O=nt(F.data),S=Tn(O[2][0].data),A=s[S];if(!s[S]){A=Yi({deps:[a],location:"",type:e[S].type},e),e[A].location="Root Entry/Index/Tables/Tile-".concat(A,".iwa"),s[S]=A;var C=Xi(t,e,S);C.id=A,Es(l,S),or(l,A),Ot.utils.cfb_add(t,"/Index/Tables/Tile-".concat(A,".iwa"),yu(_u([C]))),kt(t,e,2,function(k){var P=nt(k.messages[0].data);P[3].push({type:2,data:Xe([[],[{type:0,data:je(A)}],[{type:2,data:xr("Tables/Tile")}],[{type:2,data:xr("Tables/Tile-".concat(A))}],[{type:2,data:new Uint8Array([2,0,0])}],[{type:2,data:new Uint8Array([2,0,0])}],[],[],[],[],[{type:0,data:je(0)}],[],[{type:0,data:je(0)}]])}),P[1]=[{type:0,data:je(Math.max(A+1,ri(P[1][0].data)))}],Lr(P,e,a,A),k.messages[0].data=Xe(P)})}O[2][0].data=ar(A),F.data=Xe(O)}),T[3][0].data=Xe(N)}h[4][0].data=Xe(T),l.messages[0].data=Xe(h)})}function w9(t,e,n,r,i,s){var o=[];kt(t,e,s,function(u){var c=nt(u.messages[0].data);c[1]=[{type:2,data:xr(r)}],o=Tp(c[2],Tn),u.messages[0].data=Xe(c)});var a=Xi(t,e,o[0]),l=Tn(nt(a.messages[0].data)[2][0].data);kt(t,e,l,function(u,c){return T9(t,e,n,u,c,l)})}function T9(t,e,n,r,i,s){if(!n["!ref"])throw new Error("Cannot export empty sheet to NUMBERS");var o=Jn(n["!ref"]);o.s.r=o.s.c=0;var a=!1;o.e.c>999&&(a=!0,o.e.c=999),o.e.r>999999&&(a=!0,o.e.r=999999),a&&console.error("Truncating to ".concat(Cn(o)));var l=[];if(n["!data"])l=n["!data"];else{for(var u=[],c=0;c<=o.e.c;++c)u[c]=Nt(c);for(var d=0;d<=o.e.r;++d){l[d]=[];var h=""+(d+1);for(c=0;c<=o.e.c;++c){var g=n[u[c]+h];g&&(l[d][c]=g)}}}var _={cmnt:[{a:"~54ee77S~",t:"... the people who are crazy enough to think they can change the world, are the ones who do."}],rsst:[{v:"~54ee77S~",l:"https://sheetjs.com/"}],sst:["~Sh33tJ5~"]},x=nt(r.messages[0].data);{x[6][0].data=je(o.e.r+1),x[7][0].data=je(o.e.c+1),delete x[46];var w=nt(x[4][0].data);{var y=Tn(nt(w[1][0].data)[2][0].data);kt(t,e,y,function(Ae,Ve){var Te,Ne=nt(Ae.messages[0].data);if((Te=Ne==null?void 0:Ne[2])!=null&&Te[0])for(var Ge=0;Ge<l.length;++Ge){var We=nt(Ne[2][0].data);We[1][0].data=je(Ge),We[4][0].data=je(l[Ge].length),Ne[2][Ge]={type:Ne[2][0].type,data:Xe(We)}}Ae.messages[0].data=Xe(Ne)});var T=Tn(w[2][0].data);kt(t,e,T,function(Ae,Ve){for(var Te=nt(Ae.messages[0].data),Ne=0;Ne<=o.e.c;++Ne){var Ge=nt(Te[2][0].data);Ge[1][0].data=je(Ne),Ge[4][0].data=je(o.e.r+1),Te[2][Ne]={type:Te[2][0].type,data:Xe(Ge)}}Ae.messages[0].data=Xe(Te)});var E=nt(w[9][0].data);E[1]=[];var N=nt(w[3][0].data);{var F=256;N[2]=[{type:0,data:je(F)}];var O=Tn(nt(N[1][0].data)[2][0].data),S=function(){var Ae=Xi(t,e,2),Ve=nt(Ae.messages[0].data),Te=Ve[3].filter(function(Ne){return ri(nt(Ne.data)[1][0].data)==O});return Te!=null&&Te.length?ri(nt(Te[0].data)[12][0].data):0}();Ot.utils.cfb_del(t,e[O].location),kt(t,e,2,function(Ae){var Ve=nt(Ae.messages[0].data);Ve[3]=Ve[3].filter(function(Te){return ri(nt(Te.data)[1][0].data)!=O}),y9(Ve,e,s,O),Ae.messages[0].data=Xe(Ve)}),Es(r,O),N[1]=[];for(var A=Math.ceil((o.e.r+1)/F),C=0;C<A;++C){var k=Yi({deps:[],location:"",type:6002},e);e[k].location="Root Entry/Index/Tables/Tile-".concat(k,".iwa");for(var P=[[],[{type:0,data:je(0)}],[{type:0,data:je(Math.min(o.e.r+1,(C+1)*F))}],[{type:0,data:je(0)}],[{type:0,data:je(Math.min((C+1)*F,o.e.r+1)-C*F)}],[],[{type:0,data:je(5)}],[{type:0,data:je(1)}],[{type:0,data:je(1)}]],V=C*F;V<=Math.min(o.e.r,(C+1)*F-1);++V){var D=g9(l[V],_);D[1][0].data=je(V-C*F),P[5].push({data:Xe(D),type:2})}N[1].push({type:2,data:Xe([[],[{type:0,data:je(C)}],[{type:2,data:ar(k)}]])});var oe={id:k,messages:[P_(6002,Xe(P))]},Re=yu(_u([oe]));Ot.utils.cfb_add(t,"/Index/Tables/Tile-".concat(k,".iwa"),Re),kt(t,e,2,function(Ae){var Ve=nt(Ae.messages[0].data);Ve[3].push({type:2,data:Xe([[],[{type:0,data:je(k)}],[{type:2,data:xr("Tables/Tile")}],[{type:2,data:xr("Tables/Tile-".concat(k))}],[{type:2,data:new Uint8Array([2,0,0])}],[{type:2,data:new Uint8Array([2,0,0])}],[],[],[],[],[{type:0,data:je(0)}],[],[{type:0,data:je(S)}]])}),Ve[1]=[{type:0,data:je(Math.max(k+1,ri(Ve[1][0].data)))}],Lr(Ve,e,s,k),Ae.messages[0].data=Xe(Ve)}),or(r,k),E[1].push({type:2,data:Xe([[],[{type:0,data:je(C*F)}],[{type:0,data:je(C)}]])})}}if(w[3][0].data=Xe(N),w[9][0].data=Xe(E),w[10]=[{type:2,data:new Uint8Array([])}],n["!merges"]){var Je=Yi({type:6144,deps:[s],location:e[s].location},e);i.push({id:Je,messages:[P_(6144,Xe([[],n["!merges"].map(function(Ae){return{type:2,data:Xe([[],[{type:2,data:Xe([[],[{type:5,data:new Uint8Array(new Uint16Array([Ae.s.r,Ae.s.c]).buffer)}]])}],[{type:2,data:Xe([[],[{type:5,data:new Uint8Array(new Uint16Array([Ae.e.r-Ae.s.r+1,Ae.e.c-Ae.s.c+1]).buffer)}]])}]])}})]))]}),w[13]=[{type:2,data:ar(Je)}],kt(t,e,2,function(Ae){var Ve=nt(Ae.messages[0].data);Lr(Ve,e,s,Je),Ae.messages[0].data=Xe(Ve)}),or(r,Je)}else delete w[13];var Le=Tn(w[4][0].data);kt(t,e,Le,function(Ae){var Ve=nt(Ae.messages[0].data);Ve[3]=[],_.sst.forEach(function(Te,Ne){Ne!=0&&Ve[3].push({type:2,data:Xe([[],[{type:0,data:je(Ne)}],[{type:0,data:je(1)}],[{type:2,data:xr(Te)}]])})}),Ae.messages[0].data=Xe(Ve)});var ce=Tn(w[17][0].data);if(kt(t,e,ce,function(Ae){var Ve=nt(Ae.messages[0].data);Ve[3]=[];var Te=[904980,903835,903815,903845];_.rsst.forEach(function(Ne,Ge){if(Ge!=0){var We=[[],[{type:0,data:new Uint8Array([5])}],[],[{type:2,data:xr(Ne.v)}]];We[10]=[{type:0,data:new Uint8Array([1])}],We[19]=[{type:2,data:new Uint8Array([10,6,8,0,18,2,101,110])}],We[5]=[{type:2,data:new Uint8Array([10,8,8,0,18,4,8,155,149,55])}],We[2]=[{type:2,data:new Uint8Array([8,148,158,55])}],We[6]=[{type:2,data:new Uint8Array([10,6,8,0,16,0,24,0])}],We[7]=[{type:2,data:new Uint8Array([10,8,8,0,18,4,8,135,149,55])}],We[8]=[{type:2,data:new Uint8Array([10,8,8,0,18,4,8,165,149,55])}],We[14]=[{type:2,data:new Uint8Array([10,6,8,0,16,0,24,0])}],We[24]=[{type:2,data:new Uint8Array([10,6,8,0,16,0,24,0])}];var G=Yi({deps:[],location:"",type:2001},e),j=[];if(Ne.l){var q=ma(t,2032,[[],[],[{type:2,data:xr(Ne.l)}]],"/Index/Tables/DataList",e);We[11]=[];var W=[[],[]];W[1]||(W[1]=[]),W[1].push({type:2,data:Xe([[],[{type:0,data:je(0)}],[{type:2,data:ar(q)}]])}),We[11][0]={type:2,data:Xe(W)},j.push(q)}ma(t,2001,We,"/Index/Tables/DataList",e,G),kt(t,e,G,function(le){Te.forEach(function(pe){return or(le,pe)}),j.forEach(function(pe){return or(le,pe)})});var te=ma(t,6218,[[],[{type:2,data:ar(G)}],[],[{type:2,data:new Uint8Array([13,255,255,255,0,18,10,16,255,255,1,24,255,255,255,255,7])}]],"/Index/Tables/DataList",e);kt(t,e,te,function(le){return or(le,G)}),Ve[3].push({type:2,data:Xe([[],[{type:0,data:je(Ge)}],[{type:0,data:je(1)}],[],[],[],[],[],[],[{type:2,data:ar(te)}]])}),or(Ae,te),kt(t,e,2,function(le){var pe=nt(le.messages[0].data);Lr(pe,e,ce,te),Lr(pe,e,te,G),Lr(pe,e,G,j),Lr(pe,e,G,Te),le.messages[0].data=Xe(pe)})}}),Ae.messages[0].data=Xe(Ve)}),_.cmnt.length>1){var ae=Tn(w[19][0].data),we={},$e=0;kt(t,e,ae,function(Ae){var Ve=nt(Ae.messages[0].data);Ve[3]=[],_.cmnt.forEach(function(Te,Ne){if(Ne!=0){var Ge=[];Te.replies&&Te.replies.forEach(function(j){we[j.a||""]||(we[j.a||""]=ma(t,212,[[],[{type:2,data:xr(j.a||"")}],[{type:2,data:mI(++$e)}],[],[{type:0,data:je(0)}]],"/Index/Tables/DataList",e));var q=we[j.a||""],W=ma(t,3056,[[],[{type:2,data:xr(j.t||"")}],[{type:2,data:Xe([[],[{type:1,data:new Uint8Array([0,0,0,128,116,109,182,65])}]])}],[{type:2,data:ar(q)}]],"/Index/Tables/DataList",e);kt(t,e,W,function(te){return or(te,q)}),Ge.push(W),kt(t,e,2,function(te){var le=nt(te.messages[0].data);Lr(le,e,W,q),te.messages[0].data=Xe(le)})}),we[Te.a||""]||(we[Te.a||""]=ma(t,212,[[],[{type:2,data:xr(Te.a||"")}],[{type:2,data:mI(++$e)}],[],[{type:0,data:je(0)}]],"/Index/Tables/DataList",e));var We=we[Te.a||""],G=ma(t,3056,[[],[{type:2,data:xr(Te.t||"")}],[{type:2,data:Xe([[],[{type:1,data:new Uint8Array([0,0,0,128,116,109,182,65])}]])}],[{type:2,data:ar(We)}],Ge.map(function(j){return{type:2,data:ar(j)}}),[{type:2,data:Xe([[],[{type:0,data:je(Ne)}],[{type:0,data:je(0)}]])}]],"/Index/Tables/DataList",e);kt(t,e,G,function(j){or(j,We),Ge.forEach(function(q){return or(j,q)})}),Ve[3].push({type:2,data:Xe([[],[{type:0,data:je(Ne)}],[{type:0,data:je(1)}],[],[],[],[],[],[],[],[{type:2,data:ar(G)}]])}),or(Ae,G),kt(t,e,2,function(j){var q=nt(j.messages[0].data);Lr(q,e,ae,G),Lr(q,e,G,We),Ge.length&&Lr(q,e,G,Ge),j.messages[0].data=Xe(q)})}}),Ve[2][0].data=je(_.cmnt.length+1),Ae.messages[0].data=Xe(Ve)})}}x[4][0].data=Xe(w)}r.messages[0].data=Xe(x)}function E9(t){return function(n){for(var r=0;r!=t.length;++r){var i=t[r];n[i[0]]===void 0&&(n[i[0]]=i[1]),i[2]==="n"&&(n[i[0]]=Number(n[i[0]]))}}}function jx(t){E9([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function I9(t,e){t&&!t.SSF&&(t.SSF=gr(Wt)),t&&t.SSF&&(wm(),xm(t.SSF),e.revssf=Tm(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Nd?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var n="bin",r=!0,i=Yk();jx(e=e||{});var s=Dx(),o="",a=0;if(e.cellXfs=[],ta(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),o="docProps/core.xml",ct(s,o,eN(t.Props,e)),i.coreprops.push(o),At(e.rels,2,o,xt.CORE_PROPS),o="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(t.SheetNames[u]);t.Props.SheetNames=l}t.Props.Worksheets=t.Props.SheetNames.length,ct(s,o,nN(t.Props)),i.extprops.push(o),At(e.rels,3,o,xt.EXT_PROPS),t.Custprops!==t.Props&&An(t.Custprops||{}).length>0&&(o="docProps/custom.xml",ct(s,o,rN(t.Custprops)),i.custprops.push(o),At(e.rels,4,o,xt.CUST_PROPS));var c=["SheetJ5"];for(e.tcid=0,a=1;a<=t.SheetNames.length;++a){var d={"!id":{}},h=t.Sheets[t.SheetNames[a-1]],g=(h||{})["!type"]||"sheet";switch(g){case"chart":default:o="xl/worksheets/sheet"+a+"."+n,ct(s,o,sB(a-1,e,t,d)),i.sheets.push(o),At(e.wbrels,-1,"worksheets/sheet"+a+"."+n,xt.WS[0])}if(h){var _=h["!comments"],x=!1,w="";if(_&&_.length>0){var y=!1;_.forEach(function(E){E[1].forEach(function(N){N.T==!0&&(y=!0)})}),y&&(w="xl/threadedComments/threadedComment"+a+".xml",ct(s,w,vN(_,c,e)),i.threadedcomments.push(w),At(d,-1,"../threadedComments/threadedComment"+a+".xml",xt.TCMNT)),w="xl/comments"+a+"."+n,ct(s,w,JU(_)),i.comments.push(w),At(d,-1,"../comments"+a+"."+n,xt.CMNT),x=!0}h["!legacy"]&&x&&ct(s,"xl/drawings/vmlDrawing"+a+".vml",gN(a,h["!comments"])),delete h["!comments"],delete h["!legacy"]}d["!id"].rId1&&ct(s,Qk(o),gu(d))}e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+n,ct(s,o,sU(e.Strings)),i.strs.push(o),At(e.wbrels,-1,"sharedStrings."+n,xt.SST)),o="xl/workbook."+n,ct(s,o,AB(t)),i.workbooks.push(o),At(e.rels,1,o,xt.WB),o="xl/theme/theme1.xml";var T=mN(t.Themes,e);return ct(s,o,T),i.themes.push(o),At(e.wbrels,-1,"theme/theme1.xml",xt.THEME),o="xl/styles."+n,ct(s,o,DU(t,e)),i.styles.push(o),At(e.wbrels,-1,"styles."+n,xt.STY),t.vbaraw&&r&&(o="xl/vbaProject.bin",ct(s,o,t.vbaraw),i.vba.push(o),At(e.wbrels,-1,"vbaProject.bin",xt.VBA)),o="xl/metadata."+n,ct(s,o,zU()),i.metadata.push(o),At(e.wbrels,-1,"metadata."+n,xt.XLMETA),c.length>1&&(o="xl/persons/person.xml",ct(s,o,_N(c)),i.people.push(o),At(e.wbrels,-1,"persons/person.xml",xt.PEOPLE)),ct(s,"[Content_Types].xml",Xk(i,e)),ct(s,"_rels/.rels",gu(e.rels)),ct(s,"xl/_rels/workbook."+n+".rels",gu(e.wbrels)),delete e.revssf,delete e.ssf,s}function S9(t,e){t&&!t.SSF&&(t.SSF=gr(Wt)),t&&t.SSF&&(wm(),xm(t.SSF),e.revssf=Tm(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Nd?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var n="xml",r=XU.indexOf(e.bookType)>-1,i=Yk();jx(e=e||{});var s=Dx(),o="",a=0;if(e.cellXfs=[],ta(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),o="docProps/core.xml",ct(s,o,eN(t.Props,e)),i.coreprops.push(o),At(e.rels,2,o,xt.CORE_PROPS),o="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(t.SheetNames[u]);t.Props.SheetNames=l}t.Props.Worksheets=t.Props.SheetNames.length,ct(s,o,nN(t.Props)),i.extprops.push(o),At(e.rels,3,o,xt.EXT_PROPS),t.Custprops!==t.Props&&An(t.Custprops||{}).length>0&&(o="docProps/custom.xml",ct(s,o,rN(t.Custprops)),i.custprops.push(o),At(e.rels,4,o,xt.CUST_PROPS));var c=["SheetJ5"];for(e.tcid=0,a=1;a<=t.SheetNames.length;++a){var d={"!id":{}},h=t.Sheets[t.SheetNames[a-1]],g=(h||{})["!type"]||"sheet";switch(g){case"chart":default:o="xl/worksheets/sheet"+a+"."+n,ct(s,o,q6(a-1,e,t,d)),i.sheets.push(o),At(e.wbrels,-1,"worksheets/sheet"+a+"."+n,xt.WS[0])}if(h){var _=h["!comments"],x=!1,w="";if(_&&_.length>0){var y=!1;_.forEach(function(T){T[1].forEach(function(E){E.T==!0&&(y=!0)})}),y&&(w="xl/threadedComments/threadedComment"+a+".xml",ct(s,w,vN(_,c,e)),i.threadedcomments.push(w),At(d,-1,"../threadedComments/threadedComment"+a+".xml",xt.TCMNT)),w="xl/comments"+a+"."+n,ct(s,w,WU(_)),i.comments.push(w),At(d,-1,"../comments"+a+"."+n,xt.CMNT),x=!0}h["!legacy"]&&x&&ct(s,"xl/drawings/vmlDrawing"+a+".vml",gN(a,h["!comments"])),delete h["!comments"],delete h["!legacy"]}d["!id"].rId1&&ct(s,Qk(o),gu(d))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+n,ct(s,o,tU(e.Strings,e)),i.strs.push(o),At(e.wbrels,-1,"sharedStrings."+n,xt.SST)),o="xl/workbook."+n,ct(s,o,fB(t)),i.workbooks.push(o),At(e.rels,1,o,xt.WB),o="xl/theme/theme1.xml",ct(s,o,mN(t.Themes,e)),i.themes.push(o),At(e.wbrels,-1,"theme/theme1.xml",xt.THEME),o="xl/styles."+n,ct(s,o,fU(t,e)),i.styles.push(o),At(e.wbrels,-1,"styles."+n,xt.STY),t.vbaraw&&r&&(o="xl/vbaProject.bin",ct(s,o,t.vbaraw),i.vba.push(o),At(e.wbrels,-1,"vbaProject.bin",xt.VBA)),o="xl/metadata."+n,ct(s,o,GU()),i.metadata.push(o),At(e.wbrels,-1,"metadata."+n,xt.XLMETA),c.length>1&&(o="xl/persons/person.xml",ct(s,o,_N(c)),i.people.push(o),At(e.wbrels,-1,"persons/person.xml",xt.PEOPLE)),ct(s,"[Content_Types].xml",Xk(i,e)),ct(s,"_rels/.rels",gu(e.rels)),ct(s,"xl/_rels/workbook."+n+".rels",gu(e.wbrels)),delete e.revssf,delete e.ssf,s}function A9(t,e){var n="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":n=Oo(t.slice(0,12));break;case"binary":n=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3),n.charCodeAt(4),n.charCodeAt(5),n.charCodeAt(6),n.charCodeAt(7)]}function UN(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return zf(e.file,Ot.write(t,{type:Ct?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return Ot.write(t,e)}function C9(t,e){switch(e.bookType){case"ods":return LN(t,e);case"numbers":return _9(t,e);case"xlsb":return I9(t,e);default:return S9(t,e)}}function R9(t,e){var n=gr(e||{}),r=C9(t,n);return k9(r,n)}function k9(t,e){var n={},r=Ct?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(n.compression="DEFLATE"),e.password)n.type=r;else switch(e.type){case"base64":n.type="base64";break;case"binary":n.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":n.type=r;break;default:throw new Error("Unrecognized type "+e.type)}var i=t.FullPaths?Ot.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[n.type]||n.type,compression:!!e.compression}):t.generate(n);if(typeof Deno<"u"&&typeof i=="string"){if(e.type=="binary"||e.type=="base64")return i;i=new Uint8Array(ym(i))}return e.password&&typeof encrypt_agile<"u"?UN(encrypt_agile(i,e.password),e):e.type==="file"?zf(e.file,i):e.type=="string"?mu(i):i}function N9(t,e){var n=e||{},r=BB(t,n);return UN(r,n)}function Ki(t,e,n){n||(n="");var r=n+t;switch(e.type){case"base64":return lp(sf(r));case"binary":return sf(r);case"string":return t;case"file":return zf(e.file,r,"utf8");case"buffer":return Ct?vs(r,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(r):Ki(r,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function P9(t,e){switch(e.type){case"base64":return PO(t);case"binary":return t;case"string":return t;case"file":return zf(e.file,t,"binary");case"buffer":return Ct?vs(t,"binary"):t.split("").map(function(n){return n.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function Yh(t,e){switch(e.type){case"string":case"base64":case"binary":for(var n="",r=0;r<t.length;++r)n+=String.fromCharCode(t[r]);return e.type=="base64"?lp(n):e.type=="string"?mu(n):n;case"file":return zf(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function BN(t,e){NO(),dB(t);var n=gr(e||{});if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),n.type=="array"){n.type="binary";var r=BN(t,n);return n.type="array",ym(r)}var i=0;if(n.sheet&&(typeof n.sheet=="number"?i=n.sheet:i=t.SheetNames.indexOf(n.sheet),!t.SheetNames[i]))throw new Error("Sheet not found: "+n.sheet+" : "+typeof n.sheet);switch(n.bookType||"xlsb"){case"xml":case"xlml":return Ki(VB(t,n),n);case"slk":case"sylk":return Ki(XV.from_sheet(t.Sheets[t.SheetNames[i]],n,t),n);case"htm":case"html":return Ki(DN(t.Sheets[t.SheetNames[i]],n),n);case"txt":return P9(zN(t.Sheets[t.SheetNames[i]],n),n);case"csv":return Ki(Kx(t.Sheets[t.SheetNames[i]],n),n,"\uFEFF");case"dif":return Ki(QV.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"dbf":return Yh(YV.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"prn":return Ki(ZV.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"rtf":return Ki(aU(t.Sheets[t.SheetNames[i]]),n);case"eth":return Ki(cN.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"fods":return Ki(LN(t,n),n);case"wk1":return Yh(rI.sheet_to_wk1(t.Sheets[t.SheetNames[i]],n),n);case"wk3":return Yh(rI.book_to_wk3(t,n),n);case"biff2":n.biff||(n.biff=2);case"biff3":n.biff||(n.biff=3);case"biff4":return n.biff||(n.biff=4),Yh(bN(t,n),n);case"biff5":n.biff||(n.biff=5);case"biff8":case"xla":case"xls":return n.biff||(n.biff=8),N9(t,n);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return R9(t,n);default:throw new Error("Unrecognized bookType |"+n.bookType+"|")}}function b9(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},n=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();n.match(/^\.[a-z]+$/)&&(t.bookType=n.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function gI(t,e,n){var r=n||{};return r.type="file",r.file=e,b9(r),BN(t,r)}function D9(t,e,n,r,i,s,o){var a=Ft(n),l=o.defval,u=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),c=!0,d=t["!data"]!=null,h=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:n,enumerable:!1})}catch{h.__rowNum__=n}else h.__rowNum__=n;if(!d||t["!data"][n])for(var g=e.s.c;g<=e.e.c;++g){var _=d?(t["!data"][n]||[])[g]:t[r[g]+a];if(_==null||_.t===void 0){if(l===void 0)continue;s[g]!=null&&(h[s[g]]=l);continue}var x=_.v;switch(_.t){case"z":if(x==null)break;continue;case"e":x=x==0?null:void 0;break;case"s":case"b":case"n":if(!_.z||!Ka(_.z)||(x=pu(x),typeof x=="number"))break;case"d":o&&(o.UTC||o.raw===!1)||(x=Ou(new Date(x)));break;default:throw new Error("unrecognized type "+_.t)}if(s[g]!=null){if(x==null)if(_.t=="e"&&x===null)h[s[g]]=null;else if(l!==void 0)h[s[g]]=l;else if(u&&x===null)h[s[g]]=null;else continue;else h[s[g]]=(_.t==="n"&&typeof o.rawNumbers=="boolean"?o.rawNumbers:u)?x:Hs(_,x,o);x!=null&&(c=!1)}}return{row:h,isempty:c}}function D_(t,e){if(t==null||t["!ref"]==null)return[];var n={t:"n",v:0},r=0,i=1,s=[],o=0,a="",l={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},c=u.range!=null?u.range:t["!ref"];switch(u.header===1?r=1:u.header==="A"?r=2:Array.isArray(u.header)?r=3:u.header==null&&(r=0),typeof c){case"string":l=qt(c);break;case"number":l=qt(t["!ref"]),l.s.r=c;break;default:l=c}r>0&&(i=0);var d=Ft(l.s.r),h=[],g=[],_=0,x=0,w=t["!data"]!=null,y=l.s.r,T=0,E={};w&&!t["!data"][y]&&(t["!data"][y]=[]);var N=u.skipHidden&&t["!cols"]||[],F=u.skipHidden&&t["!rows"]||[];for(T=l.s.c;T<=l.e.c;++T)if(!(N[T]||{}).hidden)switch(h[T]=Nt(T),n=w?t["!data"][y][T]:t[h[T]+d],r){case 1:s[T]=T-l.s.c;break;case 2:s[T]=h[T];break;case 3:s[T]=u.header[T-l.s.c];break;default:if(n==null&&(n={w:"__EMPTY",t:"s"}),a=o=Hs(n,null,u),x=E[o]||0,!x)E[o]=1;else{do a=o+"_"+x++;while(E[a]);E[o]=x,E[a]=1}s[T]=a}for(y=l.s.r+i;y<=l.e.r;++y)if(!(F[y]||{}).hidden){var O=D9(t,l,y,h,r,s,u);(O.isempty===!1||(r===1?u.blankrows!==!1:u.blankrows))&&(g[_++]=O.row)}return g.length=_,g}var vI=/"/g;function F9(t,e,n,r,i,s,o,a,l){for(var u=!0,c=[],d="",h=Ft(n),g=t["!data"]!=null,_=g&&t["!data"][n]||[],x=e.s.c;x<=e.e.c;++x)if(r[x]){var w=g?_[x]:t[r[x]+h];if(w==null)d="";else if(w.v!=null){u=!1,d=""+(l.rawNumbers&&w.t=="n"?w.v:Hs(w,null,l));for(var y=0,T=0;y!==d.length;++y)if((T=d.charCodeAt(y))===i||T===s||T===34||l.forceQuotes){d='"'+d.replace(vI,'""')+'"';break}d=="ID"&&a==0&&c.length==0&&(d='"ID"')}else w.f!=null&&!w.F?(u=!1,d="="+w.f,d.indexOf(",")>=0&&(d='"'+d.replace(vI,'""')+'"')):d="";c.push(d)}if(l.strip)for(;c[c.length-1]==="";)--c.length;return l.blankrows===!1&&u?null:c.join(o)}function Kx(t,e){var n=[],r=e??{};if(t==null||t["!ref"]==null)return"";for(var i=qt(t["!ref"]),s=r.FS!==void 0?r.FS:",",o=s.charCodeAt(0),a=r.RS!==void 0?r.RS:`
`,l=a.charCodeAt(0),u="",c=[],d=r.skipHidden&&t["!cols"]||[],h=r.skipHidden&&t["!rows"]||[],g=i.s.c;g<=i.e.c;++g)(d[g]||{}).hidden||(c[g]=Nt(g));for(var _=0,x=i.s.r;x<=i.e.r;++x)(h[x]||{}).hidden||(u=F9(t,i,x,c,o,l,s,_,r),u!=null&&(u||r.blankrows!==!1)&&n.push((_++?a:"")+u));return n.join("")}function zN(t,e){e||(e={}),e.FS="	",e.RS=`
`;var n=Kx(t,e);return n}function M9(t,e){var n="",r,i="";if(t==null||t["!ref"]==null)return[];var s=qt(t["!ref"]),o="",a=[],l,u=[],c=t["!data"]!=null;for(l=s.s.c;l<=s.e.c;++l)a[l]=Nt(l);for(var d=s.s.r;d<=s.e.r;++d)for(o=Ft(d),l=s.s.c;l<=s.e.c;++l)if(n=a[l]+o,r=c?(t["!data"][d]||[])[l]:t[n],i="",r!==void 0){if(r.F!=null){if(n=r.F,!r.f)continue;i=r.f,n.indexOf(":")==-1&&(n=n+":"+n)}if(r.f!=null)i=r.f;else{if(e&&e.values===!1)continue;if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)i=""+r.v;else if(r.t=="b")i=r.v?"TRUE":"FALSE";else if(r.w!==void 0)i="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?i="'"+r.v:i=""+r.v}}u[u.length]=n+"="+i}return u}function GN(t,e,n){var r=n||{},i=t?t["!data"]!=null:r.dense,s=+!r.skipHeader,o=t||{};!t&&i&&(o["!data"]=[]);var a=0,l=0;if(o&&r.origin!=null)if(typeof r.origin=="number")a=r.origin;else{var u=typeof r.origin=="string"?en(r.origin):r.origin;a=u.r,l=u.c}var c={s:{c:0,r:0},e:{c:l,r:a+e.length-1+s}};if(o["!ref"]){var d=qt(o["!ref"]);c.e.c=Math.max(c.e.c,d.e.c),c.e.r=Math.max(c.e.r,d.e.r),a==-1&&(a=d.e.r+1,c.e.r=a+e.length-1+s)}else a==-1&&(a=0,c.e.r=e.length-1+s);var h=r.header||[],g=0,_=[];e.forEach(function(w,y){i&&!o["!data"][a+y+s]&&(o["!data"][a+y+s]=[]),i&&(_=o["!data"][a+y+s]),An(w).forEach(function(T){(g=h.indexOf(T))==-1&&(h[g=h.length]=T);var E=w[T],N="z",F="",O=i?"":Nt(l+g)+Ft(a+y+s),S=i?_[l+g]:o[O];E&&typeof E=="object"&&!(E instanceof Date)?i?_[l+g]=E:o[O]=E:(typeof E=="number"?N="n":typeof E=="boolean"?N="b":typeof E=="string"?N="s":E instanceof Date?(N="d",r.UTC||(E=Em(E)),r.cellDates||(N="n",E=Qn(E)),F=S!=null&&S.z&&Ka(S.z)?S.z:r.dateNF||Wt[14]):E===null&&r.nullError&&(N="e",E=0),S?(S.t=N,S.v=E,delete S.w,delete S.R,F&&(S.z=F)):i?_[l+g]=S={t:N,v:E}:o[O]=S={t:N,v:E},F&&(S.z=F))})}),c.e.c=Math.max(c.e.c,l+h.length-1);var x=Ft(a);if(i&&!o["!data"][a]&&(o["!data"][a]=[]),s)for(g=0;g<h.length;++g)i?o["!data"][a][g+l]={t:"s",v:h[g]}:o[Nt(g+l)+x]={t:"s",v:h[g]};return o["!ref"]=Cn(c),o}function L9(t,e){return GN(null,t,e)}function Sp(t,e,n){if(typeof e=="string"){if(t["!data"]!=null){var r=en(e);return t["!data"][r.r]||(t["!data"][r.r]=[]),t["!data"][r.r][r.c]||(t["!data"][r.r][r.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?Sp(t,sn(e)):Sp(t,Nt(n||0)+Ft(e))}function O9(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var n=t.SheetNames.indexOf(e);if(n>-1)return n;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function V9(t,e){var n={SheetNames:[],Sheets:{}};return t&&Jx(n,t,e||"Sheet1"),n}function Jx(t,e,n,r){var i=1;if(!n)for(;i<=65535&&t.SheetNames.indexOf(n="Sheet"+i)!=-1;++i,n=void 0);if(!n||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&t.SheetNames.indexOf(n)>=0&&n.length<32){var s=n.match(/\d+$/);i=s&&+s[0]||0;var o=s&&n.slice(0,s.index)||n;for(++i;i<=65535&&t.SheetNames.indexOf(n=o+i)!=-1;++i);}if(kN(n),t.SheetNames.indexOf(n)>=0)throw new Error("Worksheet with name |"+n+"| already exists!");return t.SheetNames.push(n),t.Sheets[n]=e,n}function U9(t,e,n){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var r=O9(t,e);switch(t.Workbook.Sheets[r]||(t.Workbook.Sheets[r]={}),n){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+n)}t.Workbook.Sheets[r].Hidden=n}function B9(t,e){return t.z=e,t}function HN(t,e,n){return e?(t.l={Target:e},n&&(t.l.Tooltip=n)):delete t.l,t}function z9(t,e,n){return HN(t,"#"+e,n)}function G9(t,e,n){t.c||(t.c=[]),t.c.push({t:e,a:n||"SheetJS"})}function H9(t,e,n,r){for(var i=typeof e!="string"?e:qt(e),s=typeof e=="string"?e:Cn(e),o=i.s.r;o<=i.e.r;++o)for(var a=i.s.c;a<=i.e.c;++a){var l=Sp(t,o,a);l.t="n",l.F=s,delete l.v,o==i.s.r&&a==i.s.c&&(l.f=n,r&&(l.D=!0))}var u=Jn(t["!ref"]);return u.s.r>i.s.r&&(u.s.r=i.s.r),u.s.c>i.s.c&&(u.s.c=i.s.c),u.e.r<i.e.r&&(u.e.r=i.e.r),u.e.c<i.e.c&&(u.e.c=i.e.c),t["!ref"]=Cn(u),t}var lo={encode_col:Nt,encode_row:Ft,encode_cell:sn,encode_range:Cn,decode_col:Ux,decode_row:Vx,split_cell:U3,decode_cell:en,decode_range:Jn,format_cell:Hs,sheet_new:B3,sheet_add_aoa:Wk,sheet_add_json:GN,sheet_add_dom:FN,aoa_to_sheet:uc,json_to_sheet:L9,table_to_sheet:MN,table_to_book:u9,sheet_to_csv:Kx,sheet_to_txt:zN,sheet_to_json:D_,sheet_to_html:DN,sheet_to_formulae:M9,sheet_to_row_object_array:D_,sheet_get_cell:Sp,book_new:V9,book_append_sheet:Jx,book_set_sheet_visibility:U9,cell_set_number_format:B9,cell_set_hyperlink:HN,cell_set_internal_link:z9,cell_add_comment:G9,sheet_set_array_formula:H9,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};function F_(){return F_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},F_.apply(null,arguments)}function _I(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function M_(t,e){return M_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},M_(t,e)}function $9(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,M_(t,e)}var yI=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function W9(t,e){return!!(t===e||yI(t)&&yI(e))}function q9(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!W9(t[n],e[n]))return!1;return!0}function fv(t,e){e===void 0&&(e=q9);var n,r=[],i,s=!1;function o(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return s&&n===this&&e(a,r)||(i=t.apply(this,a),s=!0,n=this,r=a),i}return o}var j9=typeof performance=="object"&&typeof performance.now=="function",xI=j9?function(){return performance.now()}:function(){return Date.now()};function wI(t){cancelAnimationFrame(t.id)}function K9(t,e){var n=xI();function r(){xI()-n>=e?t.call(null):i.id=requestAnimationFrame(r)}var i={id:requestAnimationFrame(r)};return i}var hv=-1;function TI(t){if(t===void 0&&(t=!1),hv===-1||t){var e=document.createElement("div"),n=e.style;n.width="50px",n.height="50px",n.overflow="scroll",document.body.appendChild(e),hv=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return hv}var Dl=null;function EI(t){if(t===void 0&&(t=!1),Dl===null||t){var e=document.createElement("div"),n=e.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";var r=document.createElement("div"),i=r.style;return i.width="100px",i.height="100px",e.appendChild(r),document.body.appendChild(e),e.scrollLeft>0?Dl="positive-descending":(e.scrollLeft=1,e.scrollLeft===0?Dl="negative":Dl="positive-ascending"),document.body.removeChild(e),Dl}return Dl}var J9=150,Y9=function(e,n){return e};function X9(t){var e,n=t.getItemOffset,r=t.getEstimatedTotalSize,i=t.getItemSize,s=t.getOffsetForIndexAndAlignment,o=t.getStartIndexForOffset,a=t.getStopIndexForStartIndex,l=t.initInstanceProps,u=t.shouldResetStyleCacheOnItemSizeChange,c=t.validateProps;return e=function(d){$9(h,d);function h(_){var x;return x=d.call(this,_)||this,x._instanceProps=l(x.props,_I(x)),x._outerRef=void 0,x._resetIsScrollingTimeoutId=null,x.state={instance:_I(x),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof x.props.initialScrollOffset=="number"?x.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},x._callOnItemsRendered=void 0,x._callOnItemsRendered=fv(function(w,y,T,E){return x.props.onItemsRendered({overscanStartIndex:w,overscanStopIndex:y,visibleStartIndex:T,visibleStopIndex:E})}),x._callOnScroll=void 0,x._callOnScroll=fv(function(w,y,T){return x.props.onScroll({scrollDirection:w,scrollOffset:y,scrollUpdateWasRequested:T})}),x._getItemStyle=void 0,x._getItemStyle=function(w){var y=x.props,T=y.direction,E=y.itemSize,N=y.layout,F=x._getItemStyleCache(u&&E,u&&N,u&&T),O;if(F.hasOwnProperty(w))O=F[w];else{var S=n(x.props,w,x._instanceProps),A=i(x.props,w,x._instanceProps),C=T==="horizontal"||N==="horizontal",k=T==="rtl",P=C?S:0;F[w]=O={position:"absolute",left:k?void 0:P,right:k?P:void 0,top:C?0:S,height:C?"100%":A,width:C?A:"100%"}}return O},x._getItemStyleCache=void 0,x._getItemStyleCache=fv(function(w,y,T){return{}}),x._onScrollHorizontal=function(w){var y=w.currentTarget,T=y.clientWidth,E=y.scrollLeft,N=y.scrollWidth;x.setState(function(F){if(F.scrollOffset===E)return null;var O=x.props.direction,S=E;if(O==="rtl")switch(EI()){case"negative":S=-E;break;case"positive-descending":S=N-T-E;break}return S=Math.max(0,Math.min(S,N-T)),{isScrolling:!0,scrollDirection:F.scrollOffset<S?"forward":"backward",scrollOffset:S,scrollUpdateWasRequested:!1}},x._resetIsScrollingDebounced)},x._onScrollVertical=function(w){var y=w.currentTarget,T=y.clientHeight,E=y.scrollHeight,N=y.scrollTop;x.setState(function(F){if(F.scrollOffset===N)return null;var O=Math.max(0,Math.min(N,E-T));return{isScrolling:!0,scrollDirection:F.scrollOffset<O?"forward":"backward",scrollOffset:O,scrollUpdateWasRequested:!1}},x._resetIsScrollingDebounced)},x._outerRefSetter=function(w){var y=x.props.outerRef;x._outerRef=w,typeof y=="function"?y(w):y!=null&&typeof y=="object"&&y.hasOwnProperty("current")&&(y.current=w)},x._resetIsScrollingDebounced=function(){x._resetIsScrollingTimeoutId!==null&&wI(x._resetIsScrollingTimeoutId),x._resetIsScrollingTimeoutId=K9(x._resetIsScrolling,J9)},x._resetIsScrolling=function(){x._resetIsScrollingTimeoutId=null,x.setState({isScrolling:!1},function(){x._getItemStyleCache(-1,null)})},x}h.getDerivedStateFromProps=function(x,w){return Q9(x,w),c(x),null};var g=h.prototype;return g.scrollTo=function(x){x=Math.max(0,x),this.setState(function(w){return w.scrollOffset===x?null:{scrollDirection:w.scrollOffset<x?"forward":"backward",scrollOffset:x,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},g.scrollToItem=function(x,w){w===void 0&&(w="auto");var y=this.props,T=y.itemCount,E=y.layout,N=this.state.scrollOffset;x=Math.max(0,Math.min(x,T-1));var F=0;if(this._outerRef){var O=this._outerRef;E==="vertical"?F=O.scrollWidth>O.clientWidth?TI():0:F=O.scrollHeight>O.clientHeight?TI():0}this.scrollTo(s(this.props,x,w,N,this._instanceProps,F))},g.componentDidMount=function(){var x=this.props,w=x.direction,y=x.initialScrollOffset,T=x.layout;if(typeof y=="number"&&this._outerRef!=null){var E=this._outerRef;w==="horizontal"||T==="horizontal"?E.scrollLeft=y:E.scrollTop=y}this._callPropsCallbacks()},g.componentDidUpdate=function(){var x=this.props,w=x.direction,y=x.layout,T=this.state,E=T.scrollOffset,N=T.scrollUpdateWasRequested;if(N&&this._outerRef!=null){var F=this._outerRef;if(w==="horizontal"||y==="horizontal")if(w==="rtl")switch(EI()){case"negative":F.scrollLeft=-E;break;case"positive-ascending":F.scrollLeft=E;break;default:var O=F.clientWidth,S=F.scrollWidth;F.scrollLeft=S-O-E;break}else F.scrollLeft=E;else F.scrollTop=E}this._callPropsCallbacks()},g.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&wI(this._resetIsScrollingTimeoutId)},g.render=function(){var x=this.props,w=x.children,y=x.className,T=x.direction,E=x.height,N=x.innerRef,F=x.innerElementType,O=x.innerTagName,S=x.itemCount,A=x.itemData,C=x.itemKey,k=C===void 0?Y9:C,P=x.layout,V=x.outerElementType,D=x.outerTagName,oe=x.style,Re=x.useIsScrolling,Je=x.width,Le=this.state.isScrolling,ce=T==="horizontal"||P==="horizontal",ae=ce?this._onScrollHorizontal:this._onScrollVertical,we=this._getRangeToRender(),$e=we[0],Ae=we[1],Ve=[];if(S>0)for(var Te=$e;Te<=Ae;Te++)Ve.push(qe.createElement(w,{data:A,key:k(Te,A),index:Te,isScrolling:Re?Le:void 0,style:this._getItemStyle(Te)}));var Ne=r(this.props,this._instanceProps);return qe.createElement(V||D||"div",{className:y,onScroll:ae,ref:this._outerRefSetter,style:F_({position:"relative",height:E,width:Je,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:T},oe)},qe.createElement(F||O||"div",{children:Ve,ref:N,style:{height:ce?"100%":Ne,pointerEvents:Le?"none":void 0,width:ce?Ne:"100%"}}))},g._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var x=this.props.itemCount;if(x>0){var w=this._getRangeToRender(),y=w[0],T=w[1],E=w[2],N=w[3];this._callOnItemsRendered(y,T,E,N)}}if(typeof this.props.onScroll=="function"){var F=this.state,O=F.scrollDirection,S=F.scrollOffset,A=F.scrollUpdateWasRequested;this._callOnScroll(O,S,A)}},g._getRangeToRender=function(){var x=this.props,w=x.itemCount,y=x.overscanCount,T=this.state,E=T.isScrolling,N=T.scrollDirection,F=T.scrollOffset;if(w===0)return[0,0,0,0];var O=o(this.props,F,this._instanceProps),S=a(this.props,O,F,this._instanceProps),A=!E||N==="backward"?Math.max(1,y):1,C=!E||N==="forward"?Math.max(1,y):1;return[Math.max(0,O-A),Math.max(0,Math.min(w-1,S+C)),O,S]},h}(qe.PureComponent),e.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},e}var Q9=function(e,n){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,n.instance},Z9=X9({getItemOffset:function(e,n){var r=e.itemSize;return n*r},getItemSize:function(e,n){var r=e.itemSize;return r},getEstimatedTotalSize:function(e){var n=e.itemCount,r=e.itemSize;return r*n},getOffsetForIndexAndAlignment:function(e,n,r,i,s,o){var a=e.direction,l=e.height,u=e.itemCount,c=e.itemSize,d=e.layout,h=e.width,g=a==="horizontal"||d==="horizontal",_=g?h:l,x=Math.max(0,u*c-_),w=Math.min(x,n*c),y=Math.max(0,n*c-_+c+o);switch(r==="smart"&&(i>=y-_&&i<=w+_?r="auto":r="center"),r){case"start":return w;case"end":return y;case"center":{var T=Math.round(y+(w-y)/2);return T<Math.ceil(_/2)?0:T>x+Math.floor(_/2)?x:T}case"auto":default:return i>=y&&i<=w?i:i<y?y:w}},getStartIndexForOffset:function(e,n){var r=e.itemCount,i=e.itemSize;return Math.max(0,Math.min(r-1,Math.floor(n/i)))},getStopIndexForStartIndex:function(e,n,r){var i=e.direction,s=e.height,o=e.itemCount,a=e.itemSize,l=e.layout,u=e.width,c=i==="horizontal"||l==="horizontal",d=n*a,h=c?u:s,g=Math.ceil((h+r-d)/a);return Math.max(0,Math.min(o-1,n+g-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.itemSize}});let _i;typeof window<"u"?_i=window:typeof self<"u"?_i=self:_i=global;let L_=null,O_=null;const II=20,pv=_i.clearTimeout,SI=_i.setTimeout,mv=_i.cancelAnimationFrame||_i.mozCancelAnimationFrame||_i.webkitCancelAnimationFrame,AI=_i.requestAnimationFrame||_i.mozRequestAnimationFrame||_i.webkitRequestAnimationFrame;mv==null||AI==null?(L_=pv,O_=function(e){return SI(e,II)}):(L_=function([e,n]){mv(e),pv(n)},O_=function(e){const n=AI(function(){pv(r),e()}),r=SI(function(){mv(n),e()},II);return[n,r]});function e7(t){let e,n,r,i,s,o,a;const l=typeof document<"u"&&document.attachEvent;if(!l){o=function(y){const T=y.__resizeTriggers__,E=T.firstElementChild,N=T.lastElementChild,F=E.firstElementChild;N.scrollLeft=N.scrollWidth,N.scrollTop=N.scrollHeight,F.style.width=E.offsetWidth+1+"px",F.style.height=E.offsetHeight+1+"px",E.scrollLeft=E.scrollWidth,E.scrollTop=E.scrollHeight},s=function(y){return y.offsetWidth!==y.__resizeLast__.width||y.offsetHeight!==y.__resizeLast__.height},a=function(y){if(y.target.className&&typeof y.target.className.indexOf=="function"&&y.target.className.indexOf("contract-trigger")<0&&y.target.className.indexOf("expand-trigger")<0)return;const T=this;o(this),this.__resizeRAF__&&L_(this.__resizeRAF__),this.__resizeRAF__=O_(function(){s(T)&&(T.__resizeLast__.width=T.offsetWidth,T.__resizeLast__.height=T.offsetHeight,T.__resizeListeners__.forEach(function(F){F.call(T,y)}))})};let h=!1,g="";r="animationstart";const _="Webkit Moz O ms".split(" ");let x="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),w="";{const y=document.createElement("fakeelement");if(y.style.animationName!==void 0&&(h=!0),h===!1){for(let T=0;T<_.length;T++)if(y.style[_[T]+"AnimationName"]!==void 0){w=_[T],g="-"+w.toLowerCase()+"-",r=x[T],h=!0;break}}}n="resizeanim",e="@"+g+"keyframes "+n+" { from { opacity: 0; } to { opacity: 0; } } ",i=g+"animation: 1ms "+n+"; "}const u=function(h){if(!h.getElementById("detectElementResize")){const g=(e||"")+".resize-triggers { "+(i||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',_=h.head||h.getElementsByTagName("head")[0],x=h.createElement("style");x.id="detectElementResize",x.type="text/css",t!=null&&x.setAttribute("nonce",t),x.styleSheet?x.styleSheet.cssText=g:x.appendChild(h.createTextNode(g)),_.appendChild(x)}};return{addResizeListener:function(h,g){if(l)h.attachEvent("onresize",g);else{if(!h.__resizeTriggers__){const _=h.ownerDocument,x=_i.getComputedStyle(h);x&&x.position==="static"&&(h.style.position="relative"),u(_),h.__resizeLast__={},h.__resizeListeners__=[],(h.__resizeTriggers__=_.createElement("div")).className="resize-triggers";const w=_.createElement("div");w.className="expand-trigger",w.appendChild(_.createElement("div"));const y=_.createElement("div");y.className="contract-trigger",h.__resizeTriggers__.appendChild(w),h.__resizeTriggers__.appendChild(y),h.appendChild(h.__resizeTriggers__),o(h),h.addEventListener("scroll",a,!0),r&&(h.__resizeTriggers__.__animationListener__=function(E){E.animationName===n&&o(h)},h.__resizeTriggers__.addEventListener(r,h.__resizeTriggers__.__animationListener__))}h.__resizeListeners__.push(g)}},removeResizeListener:function(h,g){if(l)h.detachEvent("onresize",g);else if(h.__resizeListeners__.splice(h.__resizeListeners__.indexOf(g),1),!h.__resizeListeners__.length){h.removeEventListener("scroll",a,!0),h.__resizeTriggers__.__animationListener__&&(h.__resizeTriggers__.removeEventListener(r,h.__resizeTriggers__.__animationListener__),h.__resizeTriggers__.__animationListener__=null);try{h.__resizeTriggers__=!h.removeChild(h.__resizeTriggers__)}catch{}}}}}let CI=class extends qe.Component{constructor(...e){super(...e),this.state={height:this.props.defaultHeight||0,width:this.props.defaultWidth||0},this._autoSizer=null,this._detectElementResize=null,this._didLogDeprecationWarning=!1,this._parentNode=null,this._resizeObserver=null,this._timeoutId=null,this._onResize=()=>{this._timeoutId=null;const{disableHeight:n,disableWidth:r,onResize:i}=this.props;if(this._parentNode){const s=window.getComputedStyle(this._parentNode)||{},o=parseFloat(s.paddingLeft||"0"),a=parseFloat(s.paddingRight||"0"),l=parseFloat(s.paddingTop||"0"),u=parseFloat(s.paddingBottom||"0"),c=this._parentNode.getBoundingClientRect(),d=c.height-l-u,h=c.width-o-a;if(!n&&this.state.height!==d||!r&&this.state.width!==h){this.setState({height:d,width:h});const g=()=>{this._didLogDeprecationWarning||(this._didLogDeprecationWarning=!0,console.warn("scaledWidth and scaledHeight parameters have been deprecated; use width and height instead"))};typeof i=="function"&&i({height:d,width:h,get scaledHeight(){return g(),d},get scaledWidth(){return g(),h}})}}},this._setRef=n=>{this._autoSizer=n}}componentDidMount(){const{nonce:e}=this.props,n=this._autoSizer?this._autoSizer.parentNode:null;if(n!=null&&n.ownerDocument&&n.ownerDocument.defaultView&&n instanceof n.ownerDocument.defaultView.HTMLElement){this._parentNode=n;const r=n.ownerDocument.defaultView.ResizeObserver;r!=null?(this._resizeObserver=new r(()=>{this._timeoutId=setTimeout(this._onResize,0)}),this._resizeObserver.observe(n)):(this._detectElementResize=e7(e),this._detectElementResize.addResizeListener(n,this._onResize)),this._onResize()}}componentWillUnmount(){this._parentNode&&(this._detectElementResize&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize),this._timeoutId!==null&&clearTimeout(this._timeoutId),this._resizeObserver&&this._resizeObserver.disconnect())}render(){const{children:e,defaultHeight:n,defaultWidth:r,disableHeight:i=!1,disableWidth:s=!1,doNotBailOutOnEmptyChildren:o=!1,nonce:a,onResize:l,style:u={},tagName:c="div",...d}=this.props,{height:h,width:g}=this.state,_={overflow:"visible"},x={};let w=!1;return i||(h===0&&(w=!0),_.height=0,x.height=h,x.scaledHeight=h),s||(g===0&&(w=!0),_.width=0,x.width=g,x.scaledWidth=g),o&&(w=!1),qe.createElement(c,{ref:this._setRef,style:{..._,...u},...d},!w&&e(x))}};const RI=[{id:"3",name:"Filip",role:"admin",weeklyFund:32.5,email:"filip.vicar01@seznam.cz"},{id:"4",name:"Petr",role:"employee",weeklyFund:5,email:"petr@kratochvile.org"},{id:"1",name:"Hanna",role:"employee",weeklyFund:8,email:"hanna@kratochvile.org"},{id:"9",name:"Matj",role:"employee",weeklyFund:20,email:"matej@kratochvile.org"},{id:"5",name:"Luk",role:"admin",weeklyFund:40,email:"weipro4@gmail.com"},{id:"6",name:"Renata",role:"admin",weeklyFund:40,email:"renabotkovaa@gmail.com"}],Oa={R:"bg-sky-50 text-sky-800 border-sky-200",C:"bg-sky-100 text-sky-900 border-sky-300",O:"bg-amber-50 text-amber-800 border-amber-200",S:"bg-slate-100 text-slate-800 border-slate-200",P:"bg-emerald-50 text-emerald-800 border-emerald-200","S/P":"bg-sky-50 text-sky-700 border-sky-200","P/S":"bg-emerald-50 text-emerald-700 border-emerald-200",RS:"bg-cyan-50 text-cyan-800 border-cyan-200",OS:"bg-amber-100 text-amber-900 border-amber-300",D:"bg-blue-50 text-blue-800 border-blue-200",N:"bg-purple-50 text-purple-800 border-purple-200",DOV:"bg-primary/10 text-primary border-primary/20",OFF:"bg-slate-100 text-slate-400 border-slate-200",SICK:"bg-red-50 text-red-800 border-red-200"},t7={R:"bg-sky-400",C:"bg-sky-600",O:"bg-amber-400",S:"bg-slate-400",P:"bg-emerald-400","S/P":"bg-sky-300","P/S":"bg-emerald-300",RS:"bg-cyan-400",OS:"bg-amber-500",D:"bg-blue-400",N:"bg-purple-400",DOV:"bg-sky-500",OFF:"bg-slate-300",SICK:"bg-red-400"},$N=[{code:"R",startTime:"09:00",endTime:"13:30",breakDuration:0},{code:"C",startTime:"09:00",endTime:"18:00",breakDuration:30},{code:"O",startTime:"13:30",endTime:"18:00",breakDuration:0},{code:"S",startTime:"09:00",endTime:"18:00",breakDuration:30},{code:"P",startTime:"09:00",endTime:"18:00",breakDuration:30},{code:"RS",startTime:"09:00",endTime:"13:30",breakDuration:0},{code:"OS",startTime:"13:30",endTime:"18:00",breakDuration:0},{code:"D",startTime:"09:00",endTime:"18:00",breakDuration:30},{code:"N",startTime:"09:00",endTime:"18:00",breakDuration:30},{code:"S/P",startTime:"09:00",endTime:"18:00",breakDuration:30},{code:"P/S",startTime:"09:00",endTime:"18:00",breakDuration:30}],sr=t=>{const e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${r}`},n7=t=>{if(!t)return"";let e=t.replace(/[^0-9]/g,"");if(!e)return t;if(e.length===1)return`0${e}:00`;if(e.length===2){let n=parseInt(e);return n>23&&(n=23),`${n.toString().padStart(2,"0")}:00`}if(e.length===3){let n=parseInt(e.substring(0,1)),r=parseInt(e.substring(1,3));return r>59&&(r=59),`0${n}:${r.toString().padStart(2,"0")}`}if(e.length>=4){let n=parseInt(e.substring(0,2)),r=parseInt(e.substring(2,4));return n>23&&(n=23),r>59&&(r=59),`${n.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`}return t},r7=(t,e)=>{const n=new Date(t,e,1),r=[];for(;n.getMonth()===e;)r.push(new Date(n)),n.setDate(n.getDate()+1);return r},xu=t=>{const e=t.getDate(),n=t.getMonth()+1;return t.getFullYear(),e===1&&n===1?"Nov rok":e===1&&n===5?"Svtek prce":e===8&&n===5?"Den vtzstv":e===5&&n===7?"Den slovanskch vrozvst":e===6&&n===7?"Den uplen mistra Jana Husa":e===28&&n===9?"Den esk sttnosti":e===28&&n===10?"Den vzniku samostatnho sttu":e===17&&n===11?"Den boje za svobodu":e===24&&n===12?"tdr den":e===25&&n===12?"1. svtek vnon":e===26&&n===12?"2. svtek vnon":null},wu=(t,e=8)=>{if(t.startTime&&t.endTime&&t.startTime.includes(":")&&t.endTime.includes(":")){const[n,r]=t.startTime.split(":").map(Number),[i,s]=t.endTime.split(":").map(Number);if(isNaN(n)||isNaN(r)||isNaN(i)||isNaN(s))return 0;const o=new Date(0,0,0,n,r);let l=(new Date(0,0,0,i,s).getTime()-o.getTime())/1e3/60;return l<0&&(l+=24*60),Math.max(0,(l-(t.breakDuration||0))/60)}return t.confirmedType==="DOV"||t.confirmedType==="SICK"?e:0},T0=t=>{const e=Math.floor(t),n=Math.round((t-e)*60);return`${e.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`},i7=(t,e,n=40)=>{let r=0,i=0,s=0,o=0,a=0;const l=n/5;t.forEach(c=>{if(!c.confirmedType||c.confirmedType==="OFF")return;const d=wu(c,l);c.confirmedType==="DOV"?(i+=d,a+=1):c.confirmedType==="SICK"?(s+=d,a+=1):(r+=d,d>=6&&(o+=1),d>0&&(a+=1))});const u=r+i+s;return{totalHours:u,workHours:r,vacationHours:i,sickHours:s,mealVouchers:o,workDays:a,monthlyFund:e,diff:u-e}},s7=t=>["Nedle","Pondl","ter","Steda","tvrtek","Ptek","Sobota"][t.getDay()],ld=t=>["Ne","Po","t","St","t","P","So"][t.getDay()],WN=(t,e,n=$N)=>{if(["OFF","DOV","SICK"].includes(e))return{start:"",end:"",breakDuration:0};const r=n.find(u=>u.code===e),i=t.getDay(),s=i===1||i===3;if(!r)return{start:"",end:"",breakDuration:0};let o=r.startTime,a=r.endTime,l=r.breakDuration;return["O","OS"].includes(e)&&(o=s?"14:00":"13:30"),["R","RS"].includes(e)?a=s?"14:00":"13:30":["O","OS","D","N","C","S","P","S/P","P/S"].includes(e)&&(a=s?"19:00":"18:00"),{start:o,end:a,breakDuration:l}},Bo=t=>{if(!t)return 0;const[e,n]=t.split(":").map(Number);return e*60+n},o7=(t,e,n=6,r=22)=>{const i=Bo(t),s=Bo(e),o=n*60,a=(r-n)*60;if(i===0&&s===0)return{left:0,width:0};let l=(i-o)/a*100,u=(s-i)/a*100;return l<0&&(u+=l,l=0),l+u>100&&(u=100-l),{left:Math.max(0,l),width:Math.max(0,u)}},a7=(t,e)=>{const n=e.getDay(),r=n===1||n===3?19:18,i=9*60,s=r*60,o=[];if(t.forEach(d=>{if(d&&d.startTime&&d.endTime&&!["OFF","DOV","SICK"].includes(d.confirmedType)){const h=Bo(d.startTime),g=Bo(d.endTime);h<g&&o.push([h,g])}}),o.length===0)return!1;o.sort((d,h)=>d[0]-h[0]);const a=[];let[l,u]=o[0];for(let d=1;d<o.length;d++){const[h,g]=o[d];h<=u?u=Math.max(u,g):(a.push([l,u]),l=h,u=g)}a.push([l,u]);let c=i;for(const[d,h]of a){if(d>c)return!1;if(c=Math.max(c,h),c>=s)return!0}return c>=s},kI=(t,e)=>{const n={isValid:!0,warnings:[],errors:[]};if(!t.startTime||!t.endTime||["OFF","DOV","SICK"].includes(t.confirmedType))return n;if(wu(t)*60>360&&t.breakDuration<30&&(n.warnings.push("Chyb povinn pestvka (30 min) po 6h prce."),n.isValid=!1),e&&e.endTime){const i=Bo(e.endTime),o=Bo(t.startTime)+1440-i;o<660&&(n.warnings.push(`Krtk odpoinek mezi smnami (${(o/60).toFixed(1)}h). Minimum 11h.`),n.isValid=!1)}return n},NI=(t,e)=>{if(!t||!e)return{finalTime:t,status:"ANOMALY"};const n=Bo(t),r=Bo(e),i=Math.abs(n-r);return i<=15?{finalTime:e,status:i===0?"MATCH":"ROUNDED"}:{finalTime:t,status:"ANOMALY"}},qN=({size:t=24,className:e=""})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),v.jsx("circle",{cx:"9",cy:"7",r:"4"}),v.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),v.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),l7=({size:t=24,className:e=""})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:v.jsx("path",{d:"m15 18-6-6 6-6"})}),u7=({size:t=24,className:e=""})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:v.jsx("path",{d:"m9 18 6-6-6-6"})}),ud=({size:t=24,className:e=""})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}),v.jsx("path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}),v.jsx("path",{d:"M12 18v-6"}),v.jsx("path",{d:"m9 15 3 3 3-3"})]}),c7=({size:t=24,className:e=""})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 127.14 96.36",fill:"currentColor",className:e,children:v.jsx("path",{d:"M107.7,8.07A105.15,105.15,0,0,0,81.47,0a72.06,72.06,0,0,0-3.36,6.83A97.68,97.68,0,0,0,49,6.83,72.37,72.37,0,0,0,45.64,0,105.89,105.89,0,0,0,19.39,8.09C2.71,32.65-1.82,56.6.48,80.21h0A105.73,105.73,0,0,0,32.47,96.36,77.7,77.7,0,0,0,39.2,85.25a68.42,68.42,0,0,1-10.85-5.18c.91-.66,1.8-1.34,2.66-2a75.57,75.57,0,0,0,64.32,0c.87.71,1.76,1.39,2.66,2a68.68,68.68,0,0,1-10.87,5.19,77,77,0,0,0,6.73,11.1,105.32,105.32,0,0,0,32.05-16.14h0C130.46,50.45,121.91,26.85,107.7,8.07ZM42.45,65.69C36.18,65.69,31,60,31,53s5.07-12.73,11.41-12.73S54,45.92,53.86,53,48.79,65.69,42.45,65.69Zm42.24,0C78.41,65.69,73.25,60,73.25,53s5.07-12.73,11.44-12.73S96.23,45.92,96.11,53,91,65.69,84.69,65.69Z"})}),jN=({size:t=24,className:e=""})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),v.jsx("circle",{cx:"12",cy:"7",r:"4"}),v.jsx("path",{d:"M19 8v2"}),v.jsx("path",{d:"M19 12v.01"}),v.jsx("path",{d:"M19 14v2"}),v.jsx("path",{d:"M8 2h8"})]}),KN=({size:t=24,className:e=""})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`${e} animate-spin`,children:v.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),Yx=({size:t=24,className:e=""})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("path",{d:"M5 12h14"}),v.jsx("path",{d:"M12 5v14"})]}),fc=({size:t=24,className:e=""})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("path",{d:"M18 6 6 18"}),v.jsx("path",{d:"m6 6 12 12"})]}),JN=({size:t=24,className:e=""})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("path",{d:"M3 6h18"}),v.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),v.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]}),d7=({size:t=24,className:e=""})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("path",{d:"M3 6h18"}),v.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),v.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),v.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),v.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),YN=({size:t=24,className:e=""})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("path",{d:"M9 14 4 9l5-5"}),v.jsx("path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H11"})]}),XN=({size:t=24,className:e=""})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}),v.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),f7=({size:t=24,className:e=""})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}),v.jsx("path",{d:"M7 11V7a5 5 0 0 1 9.9-1"})]}),h7=({size:t=24,className:e=""})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),v.jsx("polyline",{points:"16 17 21 12 16 7"}),v.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),V_=({size:t=24,className:e=""})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("circle",{cx:"12",cy:"12",r:"10"}),v.jsx("polyline",{points:"12 6 12 12 16 14"})]}),Xx=({size:t=24,className:e=""})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("path",{d:"M8 2v4"}),v.jsx("path",{d:"M16 2v4"}),v.jsx("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2"}),v.jsx("path",{d:"M3 10h18"})]}),p7=({size:t=24,className:e=""})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("rect",{width:"20",height:"14",x:"2",y:"5",rx:"2"}),v.jsx("line",{x1:"2",x2:"22",y1:"10",y2:"10"})]}),ff=({size:t=24,className:e=""})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}),v.jsx("path",{d:"M12 9v4"}),v.jsx("path",{d:"M12 17h.01"})]}),Ap=({size:t=24,className:e=""})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:v.jsx("polyline",{points:"20 6 9 17 4 12"})}),Cp=({size:t=24,className:e=""})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"}),v.jsx("circle",{cx:"12",cy:"13",r:"3"})]}),PI=({size:t=24,className:e=""})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("path",{d:"M5 12h14"}),v.jsx("path",{d:"m12 5 7 7-7 7"})]}),Rp=({size:t=24,className:e=""})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("polyline",{points:"6 9 6 2 18 2 18 9"}),v.jsx("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),v.jsx("rect",{width:"12",height:"8",x:"6",y:"14"})]}),kp=({size:t=24,className:e=""})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("path",{d:"m17 2 4 4-4 4"}),v.jsx("path",{d:"M3 11v-1a4 4 0 0 1 4-4h14"}),v.jsx("path",{d:"m7 22-4-4 4-4"}),v.jsx("path",{d:"M21 13v1a4 4 0 0 1-4 4H3"})]}),m7=({size:t=24,className:e=""})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),v.jsx("path",{d:"M21 3v5h-5"}),v.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),v.jsx("path",{d:"M8 16H3v5"})]}),g7=({size:t=24,className:e=""})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("circle",{cx:"12",cy:"12",r:"10"}),v.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),v.jsx("path",{d:"M12 17h.01"})]}),bI=({size:t=24,className:e=""})=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[v.jsx("path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}),v.jsx("path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}),v.jsx("path",{d:"M12 12v6"}),v.jsx("path",{d:"m15 15-3-3-3 3"})]}),v7=({date:t,shift:e,employeeId:n,employee:r,onChange:i,readOnly:s=!1,shiftDefinitions:o,validation:a,isLocked:l=!1})=>{const[u,c]=qe.useState(!1),d=t.getDay()===0||t.getDay()===6,h=xu(t),g=!!h,_=sr(t),x=(e==null?void 0:e.availability)||"",w=(e==null?void 0:e.confirmedType)||"",[y,T]=qe.useState((e==null?void 0:e.startTime)||""),[E,N]=qe.useState((e==null?void 0:e.endTime)||""),F=(e==null?void 0:e.breakDuration)||0,O=(e==null?void 0:e.note)||"",S=(e==null?void 0:e.history)||[],A=(e==null?void 0:e.isOffered)||!1,C=((r==null?void 0:r.weeklyFund)||40)/5,k=wu({...e,startTime:y,endTime:E,confirmedType:w},C);mC.useEffect(()=>{T((e==null?void 0:e.startTime)||""),N((e==null?void 0:e.endTime)||"")},[e==null?void 0:e.startTime,e==null?void 0:e.endTime]);const P=(ae,we)=>({id:(e==null?void 0:e.id)||`${n}-${_}`,employeeId:n,date:_,availability:x,confirmedType:w,startTime:y,endTime:E,breakDuration:F,note:O,isWeekend:d,isOffered:A,history:S,[ae]:we}),V=()=>{l||confirm(`Opravdu chcete vyistit zznam pro ${t.toLocaleDateString()}?`)&&i({id:(e==null?void 0:e.id)||`${n}-${_}`,employeeId:n,date:_,availability:"",confirmedType:"OFF",startTime:"",endTime:"",breakDuration:0,note:"",isWeekend:d,isOffered:!1,history:S})},D=ae=>{if(!l&&confirm("Opravdu chcete obnovit tento pedchoz stav?")){const we={...ae,history:S};i(we,!0),c(!1)}},oe=(ae,we)=>{if(l)return;const $e=n7(we);ae==="startTime"?(T($e),i(P("startTime",$e))):(N($e),i(P("endTime",$e)))},Re=(ae,we)=>{(ae.key==="Enter"||ae.key==="Tab")&&oe(we,ae.target.value)},Je=ae=>{if(l)return;const we=ae.target.value,$e=WN(t,we,o);T($e.start),N($e.end),i({id:(e==null?void 0:e.id)||`${n}-${_}`,employeeId:n,date:_,availability:x,confirmedType:we,startTime:$e.start,endTime:$e.end,breakDuration:$e.breakDuration,note:O,isWeekend:d,isOffered:A,history:S})},Le=g?"bg-amber-50/60":d?"bg-slate-50":"bg-white hover:bg-sky-50/20",ce=s||l;return v.jsxs(v.Fragment,{children:[v.jsxs("tr",{className:`${Le} border-b border-slate-100 transition-colors group relative ${l?"opacity-70":""}`,children:[v.jsxs("td",{className:"px-6 py-5 text-sm whitespace-nowrap align-middle",children:[v.jsx("div",{className:"font-black text-slate-900 text-base leading-none mb-1",children:s7(t)}),v.jsx("div",{className:"text-slate-500 text-[11px] font-bold",children:t.toLocaleDateString("cs-CZ")}),g&&v.jsx("div",{className:"text-[9px] text-amber-600 font-black uppercase mt-0.5",children:h})]}),v.jsx("td",{className:"px-2 py-3 align-middle",children:v.jsx("input",{type:"text",value:x,onChange:ae=>i(P("availability",ae.target.value)),disabled:ce,className:"w-full p-2.5 border border-slate-200 rounded-xl text-xs font-bold outline-none focus:ring-2 focus:ring-primary focus:bg-white bg-slate-50/50 transition-all disabled:cursor-not-allowed",placeholder:"..."})}),v.jsx("td",{className:"px-2 py-3 align-middle",children:v.jsxs("select",{value:w,onChange:Je,disabled:ce,className:`w-full p-2.5 border rounded-xl text-sm font-black outline-none focus:ring-2 focus:ring-primary/50 transition-all shadow-sm disabled:cursor-not-allowed ${w?Oa[w]:"border-slate-200 bg-white"}`,children:[v.jsx("option",{value:"",children:"-"}),o.map(ae=>v.jsx("option",{value:ae.code,children:ae.code},ae.code)),v.jsx("option",{value:"OFF",children:"OFF"}),v.jsx("option",{value:"DOV",children:"DOV"}),v.jsx("option",{value:"SICK",children:"SICK"})]})}),v.jsx("td",{className:"px-2 py-3 align-middle",children:v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[v.jsx("input",{type:"text",value:y,disabled:ce,onChange:ae=>T(ae.target.value),onBlur:ae=>oe("startTime",ae.target.value),onKeyDown:ae=>Re(ae,"startTime"),className:"w-20 p-2 text-lg border border-slate-200 rounded-xl text-center font-black text-slate-900 focus:ring-2 focus:ring-primary outline-none transition-all disabled:cursor-not-allowed",placeholder:["DOV","SICK"].includes(w)?"":"09:00"}),v.jsx("span",{className:"text-slate-300 font-black text-xl",children:"-"}),v.jsx("input",{type:"text",value:E,disabled:ce,onChange:ae=>N(ae.target.value),onBlur:ae=>oe("endTime",ae.target.value),onKeyDown:ae=>Re(ae,"endTime"),className:"w-20 p-2 text-lg border border-slate-200 rounded-xl text-center font-black text-slate-900 focus:ring-2 focus:ring-primary outline-none transition-all disabled:cursor-not-allowed",placeholder:["DOV","SICK"].includes(w)?"":"18:00"})]}),a&&!a.isValid&&v.jsxs("div",{className:"text-[9px] text-danger mt-1 flex items-center justify-center gap-1 font-black uppercase",children:[v.jsx(ff,{size:10})," ",a.warnings[0]]})]})}),v.jsx("td",{className:"px-2 py-3 align-middle",children:v.jsx("div",{className:"flex items-center justify-center",children:v.jsx("input",{type:"number",value:F,disabled:ce,onChange:ae=>i(P("breakDuration",Number(ae.target.value))),className:"w-16 p-2 text-sm border border-slate-200 rounded-xl text-center font-black text-slate-900 focus:ring-2 focus:ring-primary outline-none disabled:cursor-not-allowed",step:"15",min:"0"})})}),v.jsx("td",{className:"px-4 py-3 text-center align-middle",children:v.jsx("span",{className:`font-black text-xl tabular-nums ${k>0?"text-slate-900":"text-slate-200"}`,children:T0(k)})}),v.jsx("td",{className:"px-2 py-3 align-middle",children:v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("input",{type:"text",value:O,disabled:ce,onChange:ae=>i(P("note",ae.target.value)),className:"w-full p-2.5 border border-transparent hover:border-slate-200 focus:border-primary rounded-xl text-sm text-slate-800 font-bold focus:bg-white transition-all disabled:cursor-not-allowed",placeholder:"Poznmka..."}),v.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[!l&&v.jsx("button",{onClick:V,className:"p-2 text-slate-300 hover:text-red-500 transition-colors",title:"Vyistit den",children:v.jsx(d7,{size:18})}),e&&w&&w!=="OFF"&&!l&&v.jsx("button",{onClick:()=>i(P("isOffered",!A)),className:`p-2.5 rounded-xl border-2 transition-all ${A?"bg-orange-500 text-white border-orange-600 shadow-lg scale-110":"bg-orange-50 text-orange-600 border-orange-200 hover:bg-orange-100"}`,title:"Nabdnout do burzy",children:v.jsx(kp,{size:18})}),v.jsx("button",{onClick:()=>S.length>0&&c(!u),disabled:S.length===0,className:`p-2.5 rounded-xl border-2 transition-all shadow-sm ${u?"bg-primary text-white border-primary":S.length>0?"bg-white text-primary border-primary hover:bg-primary hover:text-white":"bg-slate-50 text-slate-200 border-slate-100 cursor-not-allowed opacity-30"}`,title:S.length>0?"Zobrazit historii prav":"dn historie",children:v.jsx(V_,{size:18})})]})]})})]}),u&&v.jsx("tr",{className:"bg-slate-100/50",children:v.jsx("td",{colSpan:7,className:"px-6 py-5 shadow-inner",children:v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 tracking-widest flex items-center gap-2",children:[v.jsx(V_,{size:12})," Detailn historie zmn dne:"]}),v.jsx("div",{className:"grid gap-2 max-w-4xl",children:S.slice().reverse().map((ae,we)=>v.jsxs("div",{className:"text-[11px] font-bold text-slate-700 flex items-center justify-between bg-white p-3 rounded-xl border border-slate-200 shadow-sm group/item",children:[v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("span",{className:"font-mono text-slate-400 border-r border-slate-100 pr-4",children:new Date(ae.timestamp).toLocaleString("cs-CZ")}),v.jsx("span",{className:"text-primary font-black uppercase tracking-tight w-28 truncate",children:ae.userEmail.split("@")[0]}),v.jsx("span",{className:"italic text-slate-900 font-medium",children:ae.action})]}),ae.prevState&&!l&&v.jsxs("button",{onClick:()=>D(ae.prevState),className:"opacity-0 group-hover/item:opacity-100 flex items-center gap-1.5 px-3 py-1.5 bg-slate-900 text-white rounded-lg text-[9px] font-black uppercase transition-all hover:bg-primary",children:[v.jsx(YN,{size:10})," Obnovit tuto verzi"]})]},we))})]})})})]})},_7=({date:t,shifts:e,employeeId:n,onSave:r,shiftDefinitions:i,validation:s,isLocked:o=!1})=>{const[a,l]=qe.useState(!1),[u,c]=qe.useState(null),[d,h]=qe.useState(""),[g,_]=qe.useState(""),[x,w]=qe.useState(""),[y,T]=qe.useState(0),[E,N]=qe.useState(""),[F,O]=qe.useState(""),S=t.getDay()===0||t.getDay()===6,A=xu(t),C=!!A,k=D=>{o||(D?(c(D.id),h(D.confirmedType||""),_(D.startTime||""),w(D.endTime||""),T(D.breakDuration||0),N(D.note||""),O(D.availability||"")):(l(!0),c(null),h(""),_(""),w(""),T(0),N(""),O("")))},P=D=>{const oe=WN(t,D,i);h(D),_(oe.start),w(oe.end),T(oe.breakDuration)},V=()=>{const D={id:u||`${n}-${sr(t)}-${Date.now()}`,employeeId:n,date:sr(t),availability:F,confirmedType:d,startTime:g,endTime:x,breakDuration:y,note:E,isWeekend:S,isOffered:!1,history:[]};r(D),l(!1),c(null)};return e.some(D=>D.confirmedType&&D.confirmedType!=="OFF"),v.jsxs("div",{className:`rounded-[32px] border shadow-sm overflow-hidden flex flex-col transition-all mb-4 ${C?"border-amber-200 bg-amber-50/30":S?"border-slate-200 bg-slate-50":"bg-white border-slate-100"} ${o?"opacity-75":""}`,children:[v.jsxs("div",{className:"px-6 py-4 flex justify-between items-center border-b border-black/5",children:[v.jsxs("div",{className:"flex items-baseline gap-2",children:[v.jsxs("span",{className:"font-black text-xl text-slate-900",children:[t.getDate(),". ",t.getMonth()+1,"."]}),v.jsx("span",{className:"text-[10px] uppercase font-black tracking-widest text-slate-400",children:["Ne","Po","t","St","t","P","So"][t.getDay()]}),C&&v.jsx("div",{className:"text-[9px] font-black text-amber-600 uppercase bg-amber-100 px-2 py-0.5 rounded-md ml-1",children:A})]}),!a&&!u&&!o&&v.jsx("button",{onClick:()=>k(),className:"p-2 bg-slate-100 text-slate-500 rounded-full hover:bg-primary hover:text-white transition-all",children:v.jsx(Yx,{size:18})})]}),v.jsxs("div",{className:"p-4 space-y-3",children:[!a&&!u&&v.jsx(v.Fragment,{children:e.filter(D=>D.confirmedType!=="OFF").length===0?v.jsx("div",{className:"text-center py-4 text-slate-300 italic text-sm",children:"dn smny"}):e.filter(D=>D.confirmedType!=="OFF").map((D,oe)=>v.jsxs("div",{className:`flex items-center justify-between p-4 rounded-2xl border shadow-sm transition-transform active:scale-95 ${Oa[D.confirmedType]||"bg-slate-100"}`,children:[v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("div",{className:"text-2xl font-black",children:D.confirmedType}),v.jsxs("div",{className:"flex flex-col",children:[v.jsxs("span",{className:"font-black text-lg leading-none",children:[D.startTime,"-",D.endTime]}),D.availability&&v.jsx("span",{className:"text-[10px] uppercase font-bold opacity-60 mt-1",children:D.availability})]})]}),!o&&v.jsxs("div",{className:"flex gap-2",children:[v.jsx("button",{onClick:()=>r({...D,isOffered:!D.isOffered}),className:`p-2 rounded-xl border ${D.isOffered?"bg-orange-500 text-white border-orange-600":"bg-white/50 text-orange-600 border-orange-200"}`,children:v.jsx(kp,{size:16})}),v.jsx("button",{onClick:()=>k(D),className:"px-3 py-1.5 bg-white/50 text-slate-700 font-black text-[10px] uppercase rounded-xl border border-black/10",children:"Upravit"})]})]},D.id))}),(a||u)&&v.jsxs("div",{className:"space-y-4 animate-in slide-in-from-top-2 duration-200",children:[v.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[i.map(D=>v.jsx("button",{onClick:()=>P(D.code),className:`p-2 text-xs rounded-xl font-black border transition-all ${d===D.code?"bg-primary text-white border-primary shadow-md":"bg-white text-slate-600"}`,children:D.code},D.code)),v.jsx("button",{onClick:()=>P("DOV"),className:`p-2 text-xs rounded-xl font-black border ${d==="DOV"?"bg-emerald-500 text-white":"bg-emerald-50 text-emerald-600"}`,children:"DOV"}),v.jsx("button",{onClick:()=>P("SICK"),className:`p-2 text-xs rounded-xl font-black border ${d==="SICK"?"bg-red-500 text-white":"bg-red-50 text-red-600"}`,children:"SICK"}),v.jsx("button",{onClick:()=>{P("OFF"),V()},className:`p-2 text-xs rounded-xl font-black border ${d==="OFF"?"bg-slate-800 text-white":"bg-slate-100 text-slate-400"}`,children:"SMAZAT"})]}),v.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[v.jsxs("div",{children:[v.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase ml-1",children:"Od"}),v.jsx("input",{type:"time",value:g,onChange:D=>_(D.target.value),className:"w-full p-3 border rounded-xl font-black bg-slate-50 outline-none focus:bg-white"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase ml-1",children:"Do"}),v.jsx("input",{type:"time",value:x,onChange:D=>w(D.target.value),className:"w-full p-3 border rounded-xl font-black bg-slate-50 outline-none focus:bg-white"})]})]}),v.jsxs("div",{className:"flex gap-2 pt-2",children:[v.jsx("button",{onClick:()=>{l(!1),c(null)},className:"flex-1 py-3 bg-slate-100 text-slate-600 font-black rounded-2xl uppercase text-xs",children:"Zruit"}),v.jsx("button",{onClick:V,className:"flex-2 py-3 bg-primary text-white font-black rounded-2xl shadow-lg uppercase text-xs",children:"Uloit smnu"})]})]})]})]})};var DI={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},y7=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},ZN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=s>>2,d=(s&3)<<4|a>>4;let h=(a&15)<<2|u>>6,g=u&63;l||(g=64,o||(h=64)),r.push(n[c],n[d],n[h],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(QN(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):y7(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new x7;const h=s<<2|a>>4;if(r.push(h),u!==64){const g=a<<4&240|u>>2;if(r.push(g),d!==64){const _=u<<6&192|d;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class x7 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const w7=function(t){const e=QN(t);return ZN.encodeByteArray(e,!0)},Np=function(t){return w7(t).replace(/\./g,"")},eP=function(t){try{return ZN.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Pp(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!T7(n)||(t[n]=Pp(t[n],e[n]));return t}function T7(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E7=()=>tP().__FIREBASE_DEFAULTS__,I7=()=>{if(typeof process>"u"||typeof DI>"u")return;const t=DI.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},S7=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&eP(t[1]);return e&&JSON.parse(e)},Qx=()=>{try{return E7()||I7()||S7()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},nP=()=>{var t;return(t=Qx())===null||t===void 0?void 0:t.config},A7=t=>{var e;return(e=Qx())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C7{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R7(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Np(JSON.stringify(n)),Np(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function k7(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ln())}function Zx(){var t;const e=(t=Qx())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function N7(){return typeof window<"u"||rP()}function rP(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function P7(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function iP(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function e1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sP(){const t=ln();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function oP(){return!Zx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hf(){try{return typeof indexedDB=="object"}catch{return!1}}function b7(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D7="FirebaseError";class kr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=D7,Object.setPrototypeOf(this,kr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ml.prototype.create)}}class ml{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?F7(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new kr(i,a,r)}}function F7(t,e){return t.replace(M7,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const M7=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function L7(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function pf(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(MI(s)&&MI(o)){if(!pf(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function MI(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function iu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function cd(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function aP(t,e){const n=new O7(t,e);return n.subscribe.bind(n)}class O7{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");V7(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=gv),i.error===void 0&&(i.error=gv),i.complete===void 0&&(i.complete=gv);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function V7(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function gv(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(t){return t&&t._delegate?t._delegate:t}class fs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U7{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new C7;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(z7(e))try{this.getOrInitializeService({instanceIdentifier:ya})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ya){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ya){return this.instances.has(e)}getOptions(e=ya){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:B7(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ya){return this.component?this.component.multipleInstances?e:ya:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function B7(t){return t===ya?void 0:t}function z7(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new U7(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1=[];var ht;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ht||(ht={}));const uP={debug:ht.DEBUG,verbose:ht.VERBOSE,info:ht.INFO,warn:ht.WARN,error:ht.ERROR,silent:ht.SILENT},G7=ht.INFO,H7={[ht.DEBUG]:"log",[ht.VERBOSE]:"log",[ht.INFO]:"info",[ht.WARN]:"warn",[ht.ERROR]:"error"},$7=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=H7[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Nm{constructor(e){this.name=e,this._logLevel=G7,this._logHandler=$7,this._userLogHandler=null,t1.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ht))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ht.DEBUG,...e),this._logHandler(this,ht.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ht.VERBOSE,...e),this._logHandler(this,ht.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ht.INFO,...e),this._logHandler(this,ht.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ht.WARN,...e),this._logHandler(this,ht.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ht.ERROR,...e),this._logHandler(this,ht.ERROR,...e)}}function W7(t){t1.forEach(e=>{e.setLogLevel(t)})}function q7(t,e){for(const n of t1){let r=null;e&&e.level&&(r=uP[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(r??i.logLevel)&&t({level:ht[s].toLowerCase(),message:a,args:o,type:i.name})}}}const j7=(t,e)=>e.some(n=>t instanceof n);let LI,OI;function K7(){return LI||(LI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function J7(){return OI||(OI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cP=new WeakMap,U_=new WeakMap,dP=new WeakMap,vv=new WeakMap,n1=new WeakMap;function Y7(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Do(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&cP.set(n,t)}).catch(()=>{}),n1.set(e,t),e}function X7(t){if(U_.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});U_.set(t,e)}let B_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return U_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||dP.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Do(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Q7(t){B_=t(B_)}function Z7(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(_v(this),e,...n);return dP.set(r,e.sort?e.sort():[e]),Do(r)}:J7().includes(t)?function(...e){return t.apply(_v(this),e),Do(cP.get(this))}:function(...e){return Do(t.apply(_v(this),e))}}function ez(t){return typeof t=="function"?Z7(t):(t instanceof IDBTransaction&&X7(t),j7(t,K7())?new Proxy(t,B_):t)}function Do(t){if(t instanceof IDBRequest)return Y7(t);if(vv.has(t))return vv.get(t);const e=ez(t);return e!==t&&(vv.set(t,e),n1.set(e,t)),e}const _v=t=>n1.get(t);function tz(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Do(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Do(o.result),l.oldVersion,l.newVersion,Do(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const nz=["get","getKey","getAll","getAllKeys","count"],rz=["put","add","delete","clear"],yv=new Map;function VI(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(yv.get(e))return yv.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=rz.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||nz.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return yv.set(e,s),s}Q7(t=>({...t,get:(e,n,r)=>VI(e,n)||t.get(e,n,r),has:(e,n)=>!!VI(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iz{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(sz(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function sz(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const bp="@firebase/app",z_="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s=new Nm("@firebase/app"),oz="@firebase/app-compat",az="@firebase/analytics-compat",lz="@firebase/analytics",uz="@firebase/app-check-compat",cz="@firebase/app-check",dz="@firebase/auth",fz="@firebase/auth-compat",hz="@firebase/database",pz="@firebase/data-connect",mz="@firebase/database-compat",gz="@firebase/functions",vz="@firebase/functions-compat",_z="@firebase/installations",yz="@firebase/installations-compat",xz="@firebase/messaging",wz="@firebase/messaging-compat",Tz="@firebase/performance",Ez="@firebase/performance-compat",Iz="@firebase/remote-config",Sz="@firebase/remote-config-compat",Az="@firebase/storage",Cz="@firebase/storage-compat",Rz="@firebase/firestore",kz="@firebase/vertexai-preview",Nz="@firebase/firestore-compat",Pz="firebase",bz="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo="[DEFAULT]",Dz={[bp]:"fire-core",[oz]:"fire-core-compat",[lz]:"fire-analytics",[az]:"fire-analytics-compat",[cz]:"fire-app-check",[uz]:"fire-app-check-compat",[dz]:"fire-auth",[fz]:"fire-auth-compat",[hz]:"fire-rtdb",[pz]:"fire-data-connect",[mz]:"fire-rtdb-compat",[gz]:"fire-fn",[vz]:"fire-fn-compat",[_z]:"fire-iid",[yz]:"fire-iid-compat",[xz]:"fire-fcm",[wz]:"fire-fcm-compat",[Tz]:"fire-perf",[Ez]:"fire-perf-compat",[Iz]:"fire-rc",[Sz]:"fire-rc-compat",[Az]:"fire-gcs",[Cz]:"fire-gcs-compat",[Rz]:"fire-fst",[Nz]:"fire-fst-compat",[kz]:"fire-vertex","fire-js":"fire-js",[Pz]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go=new Map,Uu=new Map,Bu=new Map;function mf(t,e){try{t.container.addComponent(e)}catch(n){$s.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function fP(t,e){t.container.addOrOverwriteComponent(e)}function Ho(t){const e=t.name;if(Bu.has(e))return $s.debug(`There were multiple attempts to register component ${e}.`),!1;Bu.set(e,t);for(const n of Go.values())mf(n,t);for(const n of Uu.values())mf(n,t);return!0}function hP(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Fz(t,e,n=zo){hP(t,e).clearInstance(n)}function pP(t){return t.options!==void 0}function dn(t){return t.settings!==void 0}function Mz(){Bu.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lz={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yi=new ml("app","Firebase",Lz);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mP=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new fs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yi.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oz extends mP{constructor(e,n,r,i){const s=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,o={name:r,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,o,i);else{const a=e;super(a.options,o,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},n),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,Oi(bp,z_,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){i1(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw yi.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na=bz;function r1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:zo,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw yi.create("bad-app-name",{appName:String(i)});if(n||(n=nP()),!n)throw yi.create("no-options");const s=Go.get(i);if(s){if(pf(n,s.options)&&pf(r,s.config))return s;throw yi.create("duplicate-app",{appName:i})}const o=new lP(i);for(const l of Bu.values())o.addComponent(l);const a=new mP(n,r,o);return Go.set(i,a),a}function Vz(t,e){if(N7()&&!rP())throw yi.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;pP(t)?n=t.options:n=t;const r=Object.assign(Object.assign({},e),n);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const i=u=>[...u].reduce((c,d)=>Math.imul(31,c)+d.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw yi.create("finalization-registry-not-supported",{});const s=""+i(JSON.stringify(r)),o=Uu.get(s);if(o)return o.incRefCount(e.releaseOnDeref),o;const a=new lP(s);for(const u of Bu.values())a.addComponent(u);const l=new Oz(n,e,s,a);return Uu.set(s,l),l}function Uz(t=zo){const e=Go.get(t);if(!e&&t===zo&&nP())return r1();if(!e)throw yi.create("no-app",{appName:t});return e}function Bz(){return Array.from(Go.values())}async function i1(t){let e=!1;const n=t.name;Go.has(n)?(e=!0,Go.delete(n)):Uu.has(n)&&t.decRefCount()<=0&&(Uu.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function Oi(t,e,n){var r;let i=(r=Dz[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$s.warn(a.join(" "));return}Ho(new fs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function gP(t,e){if(t!==null&&typeof t!="function")throw yi.create("invalid-log-argument");q7(t,e)}function vP(t){W7(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zz="firebase-heartbeat-database",Gz=1,gf="firebase-heartbeat-store";let xv=null;function _P(){return xv||(xv=tz(zz,Gz,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(gf)}catch(n){console.warn(n)}}}}).catch(t=>{throw yi.create("idb-open",{originalErrorMessage:t.message})})),xv}async function Hz(t){try{const n=(await _P()).transaction(gf),r=await n.objectStore(gf).get(yP(t));return await n.done,r}catch(e){if(e instanceof kr)$s.warn(e.message);else{const n=yi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});$s.warn(n.message)}}}async function UI(t,e){try{const r=(await _P()).transaction(gf,"readwrite");await r.objectStore(gf).put(e,yP(t)),await r.done}catch(n){if(n instanceof kr)$s.warn(n.message);else{const r=yi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});$s.warn(r.message)}}}function yP(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $z=1024,Wz=30*24*60*60*1e3;class qz{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Kz(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=BI();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Wz}),this._storage.overwrite(this._heartbeatsCache))}catch(r){$s.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=BI(),{heartbeatsToSend:r,unsentEntries:i}=jz(this._heartbeatsCache.heartbeats),s=Np(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return $s.warn(n),""}}}function BI(){return new Date().toISOString().substring(0,10)}function jz(t,e=$z){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),zI(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),zI(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Kz{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hf()?b7().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Hz(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return UI(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return UI(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function zI(t){return Np(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jz(t){Ho(new fs("platform-logger",e=>new iz(e),"PRIVATE")),Ho(new fs("heartbeat",e=>new qz(e),"PRIVATE")),Oi(bp,z_,t),Oi(bp,z_,"esm2017"),Oi("fire-js","")}Jz("");const Yz=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:kr,SDK_VERSION:na,_DEFAULT_ENTRY_NAME:zo,_addComponent:mf,_addOrOverwriteComponent:fP,_apps:Go,_clearComponents:Mz,_components:Bu,_getProvider:hP,_isFirebaseApp:pP,_isFirebaseServerApp:dn,_registerComponent:Ho,_removeServiceInstance:Fz,_serverApps:Uu,deleteApp:i1,getApp:Uz,getApps:Bz,initializeApp:r1,initializeServerApp:Vz,onLog:gP,registerVersion:Oi,setLogLevel:vP},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xz{constructor(e,n){this._delegate=e,this.firebase=n,mf(e,new fs("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),i1(this._delegate)))}_getService(e,n=zo){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=zo){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){mf(this._delegate,e)}_addOrOverwriteComponent(e){fP(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qz={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},GI=new ml("app-compat","Firebase",Qz);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zz(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:Oi,setLogLevel:vP,onLog:gP,apps:null,SDK_VERSION:na,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:Yz}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(u){delete e[u]}function i(u){if(u=u||zo,!FI(e,u))throw GI.create("no-app",{appName:u});return e[u]}i.App=t;function s(u,c={}){const d=r1(u,c);if(FI(e,d.name))return e[d.name];const h=new t(d,n);return e[d.name]=h,h}function o(){return Object.keys(e).map(u=>e[u])}function a(u){const c=u.name,d=c.replace("-compat","");if(Ho(u)&&u.type==="PUBLIC"){const h=(g=i())=>{if(typeof g[d]!="function")throw GI.create("invalid-app-argument",{appName:c});return g[d]()};u.serviceProps!==void 0&&Pp(h,u.serviceProps),n[d]=h,t.prototype[d]=function(...g){return this._getService.bind(this,c).apply(this,u.multipleInstances?g:[])}}return u.type==="PUBLIC"?n[d]:null}function l(u,c){return c==="serverAuth"?null:c}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(){const t=Zz(Xz);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:xP,extendNamespace:e,createSubscribe:aP,ErrorFactory:ml,deepExtend:Pp});function e(n){Pp(t,n)}return t}const eG=xP();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI=new Nm("@firebase/app-compat"),tG="@firebase/app-compat",nG="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rG(t){Oi(tG,nG,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=tP();if(t.firebase!==void 0){HI.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&HI.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Vi=eG;rG();var iG="firebase",sG="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vi.registerVersion(iG,sG,"app-compat");var $I=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Va,wP;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,A){function C(){}C.prototype=A.prototype,S.D=A.prototype,S.prototype=new C,S.prototype.constructor=S,S.C=function(k,P,V){for(var D=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)D[oe-2]=arguments[oe];return A.prototype[P].apply(k,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,A,C){C||(C=0);var k=Array(16);if(typeof A=="string")for(var P=0;16>P;++P)k[P]=A.charCodeAt(C++)|A.charCodeAt(C++)<<8|A.charCodeAt(C++)<<16|A.charCodeAt(C++)<<24;else for(P=0;16>P;++P)k[P]=A[C++]|A[C++]<<8|A[C++]<<16|A[C++]<<24;A=S.g[0],C=S.g[1],P=S.g[2];var V=S.g[3],D=A+(V^C&(P^V))+k[0]+3614090360&4294967295;A=C+(D<<7&4294967295|D>>>25),D=V+(P^A&(C^P))+k[1]+3905402710&4294967295,V=A+(D<<12&4294967295|D>>>20),D=P+(C^V&(A^C))+k[2]+606105819&4294967295,P=V+(D<<17&4294967295|D>>>15),D=C+(A^P&(V^A))+k[3]+3250441966&4294967295,C=P+(D<<22&4294967295|D>>>10),D=A+(V^C&(P^V))+k[4]+4118548399&4294967295,A=C+(D<<7&4294967295|D>>>25),D=V+(P^A&(C^P))+k[5]+1200080426&4294967295,V=A+(D<<12&4294967295|D>>>20),D=P+(C^V&(A^C))+k[6]+2821735955&4294967295,P=V+(D<<17&4294967295|D>>>15),D=C+(A^P&(V^A))+k[7]+4249261313&4294967295,C=P+(D<<22&4294967295|D>>>10),D=A+(V^C&(P^V))+k[8]+1770035416&4294967295,A=C+(D<<7&4294967295|D>>>25),D=V+(P^A&(C^P))+k[9]+2336552879&4294967295,V=A+(D<<12&4294967295|D>>>20),D=P+(C^V&(A^C))+k[10]+4294925233&4294967295,P=V+(D<<17&4294967295|D>>>15),D=C+(A^P&(V^A))+k[11]+2304563134&4294967295,C=P+(D<<22&4294967295|D>>>10),D=A+(V^C&(P^V))+k[12]+1804603682&4294967295,A=C+(D<<7&4294967295|D>>>25),D=V+(P^A&(C^P))+k[13]+4254626195&4294967295,V=A+(D<<12&4294967295|D>>>20),D=P+(C^V&(A^C))+k[14]+2792965006&4294967295,P=V+(D<<17&4294967295|D>>>15),D=C+(A^P&(V^A))+k[15]+1236535329&4294967295,C=P+(D<<22&4294967295|D>>>10),D=A+(P^V&(C^P))+k[1]+4129170786&4294967295,A=C+(D<<5&4294967295|D>>>27),D=V+(C^P&(A^C))+k[6]+3225465664&4294967295,V=A+(D<<9&4294967295|D>>>23),D=P+(A^C&(V^A))+k[11]+643717713&4294967295,P=V+(D<<14&4294967295|D>>>18),D=C+(V^A&(P^V))+k[0]+3921069994&4294967295,C=P+(D<<20&4294967295|D>>>12),D=A+(P^V&(C^P))+k[5]+3593408605&4294967295,A=C+(D<<5&4294967295|D>>>27),D=V+(C^P&(A^C))+k[10]+38016083&4294967295,V=A+(D<<9&4294967295|D>>>23),D=P+(A^C&(V^A))+k[15]+3634488961&4294967295,P=V+(D<<14&4294967295|D>>>18),D=C+(V^A&(P^V))+k[4]+3889429448&4294967295,C=P+(D<<20&4294967295|D>>>12),D=A+(P^V&(C^P))+k[9]+568446438&4294967295,A=C+(D<<5&4294967295|D>>>27),D=V+(C^P&(A^C))+k[14]+3275163606&4294967295,V=A+(D<<9&4294967295|D>>>23),D=P+(A^C&(V^A))+k[3]+4107603335&4294967295,P=V+(D<<14&4294967295|D>>>18),D=C+(V^A&(P^V))+k[8]+1163531501&4294967295,C=P+(D<<20&4294967295|D>>>12),D=A+(P^V&(C^P))+k[13]+2850285829&4294967295,A=C+(D<<5&4294967295|D>>>27),D=V+(C^P&(A^C))+k[2]+4243563512&4294967295,V=A+(D<<9&4294967295|D>>>23),D=P+(A^C&(V^A))+k[7]+1735328473&4294967295,P=V+(D<<14&4294967295|D>>>18),D=C+(V^A&(P^V))+k[12]+2368359562&4294967295,C=P+(D<<20&4294967295|D>>>12),D=A+(C^P^V)+k[5]+4294588738&4294967295,A=C+(D<<4&4294967295|D>>>28),D=V+(A^C^P)+k[8]+2272392833&4294967295,V=A+(D<<11&4294967295|D>>>21),D=P+(V^A^C)+k[11]+1839030562&4294967295,P=V+(D<<16&4294967295|D>>>16),D=C+(P^V^A)+k[14]+4259657740&4294967295,C=P+(D<<23&4294967295|D>>>9),D=A+(C^P^V)+k[1]+2763975236&4294967295,A=C+(D<<4&4294967295|D>>>28),D=V+(A^C^P)+k[4]+1272893353&4294967295,V=A+(D<<11&4294967295|D>>>21),D=P+(V^A^C)+k[7]+4139469664&4294967295,P=V+(D<<16&4294967295|D>>>16),D=C+(P^V^A)+k[10]+3200236656&4294967295,C=P+(D<<23&4294967295|D>>>9),D=A+(C^P^V)+k[13]+681279174&4294967295,A=C+(D<<4&4294967295|D>>>28),D=V+(A^C^P)+k[0]+3936430074&4294967295,V=A+(D<<11&4294967295|D>>>21),D=P+(V^A^C)+k[3]+3572445317&4294967295,P=V+(D<<16&4294967295|D>>>16),D=C+(P^V^A)+k[6]+76029189&4294967295,C=P+(D<<23&4294967295|D>>>9),D=A+(C^P^V)+k[9]+3654602809&4294967295,A=C+(D<<4&4294967295|D>>>28),D=V+(A^C^P)+k[12]+3873151461&4294967295,V=A+(D<<11&4294967295|D>>>21),D=P+(V^A^C)+k[15]+530742520&4294967295,P=V+(D<<16&4294967295|D>>>16),D=C+(P^V^A)+k[2]+3299628645&4294967295,C=P+(D<<23&4294967295|D>>>9),D=A+(P^(C|~V))+k[0]+4096336452&4294967295,A=C+(D<<6&4294967295|D>>>26),D=V+(C^(A|~P))+k[7]+1126891415&4294967295,V=A+(D<<10&4294967295|D>>>22),D=P+(A^(V|~C))+k[14]+2878612391&4294967295,P=V+(D<<15&4294967295|D>>>17),D=C+(V^(P|~A))+k[5]+4237533241&4294967295,C=P+(D<<21&4294967295|D>>>11),D=A+(P^(C|~V))+k[12]+1700485571&4294967295,A=C+(D<<6&4294967295|D>>>26),D=V+(C^(A|~P))+k[3]+2399980690&4294967295,V=A+(D<<10&4294967295|D>>>22),D=P+(A^(V|~C))+k[10]+4293915773&4294967295,P=V+(D<<15&4294967295|D>>>17),D=C+(V^(P|~A))+k[1]+2240044497&4294967295,C=P+(D<<21&4294967295|D>>>11),D=A+(P^(C|~V))+k[8]+1873313359&4294967295,A=C+(D<<6&4294967295|D>>>26),D=V+(C^(A|~P))+k[15]+4264355552&4294967295,V=A+(D<<10&4294967295|D>>>22),D=P+(A^(V|~C))+k[6]+2734768916&4294967295,P=V+(D<<15&4294967295|D>>>17),D=C+(V^(P|~A))+k[13]+1309151649&4294967295,C=P+(D<<21&4294967295|D>>>11),D=A+(P^(C|~V))+k[4]+4149444226&4294967295,A=C+(D<<6&4294967295|D>>>26),D=V+(C^(A|~P))+k[11]+3174756917&4294967295,V=A+(D<<10&4294967295|D>>>22),D=P+(A^(V|~C))+k[2]+718787259&4294967295,P=V+(D<<15&4294967295|D>>>17),D=C+(V^(P|~A))+k[9]+3951481745&4294967295,S.g[0]=S.g[0]+A&4294967295,S.g[1]=S.g[1]+(P+(D<<21&4294967295|D>>>11))&4294967295,S.g[2]=S.g[2]+P&4294967295,S.g[3]=S.g[3]+V&4294967295}r.prototype.u=function(S,A){A===void 0&&(A=S.length);for(var C=A-this.blockSize,k=this.B,P=this.h,V=0;V<A;){if(P==0)for(;V<=C;)i(this,S,V),V+=this.blockSize;if(typeof S=="string"){for(;V<A;)if(k[P++]=S.charCodeAt(V++),P==this.blockSize){i(this,k),P=0;break}}else for(;V<A;)if(k[P++]=S[V++],P==this.blockSize){i(this,k),P=0;break}}this.h=P,this.o+=A},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var A=1;A<S.length-8;++A)S[A]=0;var C=8*this.o;for(A=S.length-8;A<S.length;++A)S[A]=C&255,C/=256;for(this.u(S),S=Array(16),A=C=0;4>A;++A)for(var k=0;32>k;k+=8)S[C++]=this.g[A]>>>k&255;return S};function s(S,A){var C=a;return Object.prototype.hasOwnProperty.call(C,S)?C[S]:C[S]=A(S)}function o(S,A){this.h=A;for(var C=[],k=!0,P=S.length-1;0<=P;P--){var V=S[P]|0;k&&V==A||(C[P]=V,k=!1)}this.g=C}var a={};function l(S){return-128<=S&&128>S?s(S,function(A){return new o([A|0],0>A?-1:0)}):new o([S|0],0>S?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return d;if(0>S)return w(u(-S));for(var A=[],C=1,k=0;S>=C;k++)A[k]=S/C|0,C*=4294967296;return new o(A,0)}function c(S,A){if(S.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(S.charAt(0)=="-")return w(c(S.substring(1),A));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=u(Math.pow(A,8)),k=d,P=0;P<S.length;P+=8){var V=Math.min(8,S.length-P),D=parseInt(S.substring(P,P+V),A);8>V?(V=u(Math.pow(A,V)),k=k.j(V).add(u(D))):(k=k.j(C),k=k.add(u(D)))}return k}var d=l(0),h=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(x(this))return-w(this).m();for(var S=0,A=1,C=0;C<this.g.length;C++){var k=this.i(C);S+=(0<=k?k:4294967296+k)*A,A*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(_(this))return"0";if(x(this))return"-"+w(this).toString(S);for(var A=u(Math.pow(S,6)),C=this,k="";;){var P=N(C,A).g;C=y(C,P.j(A));var V=((0<C.g.length?C.g[0]:C.h)>>>0).toString(S);if(C=P,_(C))return V+k;for(;6>V.length;)V="0"+V;k=V+k}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function _(S){if(S.h!=0)return!1;for(var A=0;A<S.g.length;A++)if(S.g[A]!=0)return!1;return!0}function x(S){return S.h==-1}t.l=function(S){return S=y(this,S),x(S)?-1:_(S)?0:1};function w(S){for(var A=S.g.length,C=[],k=0;k<A;k++)C[k]=~S.g[k];return new o(C,~S.h).add(h)}t.abs=function(){return x(this)?w(this):this},t.add=function(S){for(var A=Math.max(this.g.length,S.g.length),C=[],k=0,P=0;P<=A;P++){var V=k+(this.i(P)&65535)+(S.i(P)&65535),D=(V>>>16)+(this.i(P)>>>16)+(S.i(P)>>>16);k=D>>>16,V&=65535,D&=65535,C[P]=D<<16|V}return new o(C,C[C.length-1]&-2147483648?-1:0)};function y(S,A){return S.add(w(A))}t.j=function(S){if(_(this)||_(S))return d;if(x(this))return x(S)?w(this).j(w(S)):w(w(this).j(S));if(x(S))return w(this.j(w(S)));if(0>this.l(g)&&0>S.l(g))return u(this.m()*S.m());for(var A=this.g.length+S.g.length,C=[],k=0;k<2*A;k++)C[k]=0;for(k=0;k<this.g.length;k++)for(var P=0;P<S.g.length;P++){var V=this.i(k)>>>16,D=this.i(k)&65535,oe=S.i(P)>>>16,Re=S.i(P)&65535;C[2*k+2*P]+=D*Re,T(C,2*k+2*P),C[2*k+2*P+1]+=V*Re,T(C,2*k+2*P+1),C[2*k+2*P+1]+=D*oe,T(C,2*k+2*P+1),C[2*k+2*P+2]+=V*oe,T(C,2*k+2*P+2)}for(k=0;k<A;k++)C[k]=C[2*k+1]<<16|C[2*k];for(k=A;k<2*A;k++)C[k]=0;return new o(C,0)};function T(S,A){for(;(S[A]&65535)!=S[A];)S[A+1]+=S[A]>>>16,S[A]&=65535,A++}function E(S,A){this.g=S,this.h=A}function N(S,A){if(_(A))throw Error("division by zero");if(_(S))return new E(d,d);if(x(S))return A=N(w(S),A),new E(w(A.g),w(A.h));if(x(A))return A=N(S,w(A)),new E(w(A.g),A.h);if(30<S.g.length){if(x(S)||x(A))throw Error("slowDivide_ only works with positive integers.");for(var C=h,k=A;0>=k.l(S);)C=F(C),k=F(k);var P=O(C,1),V=O(k,1);for(k=O(k,2),C=O(C,2);!_(k);){var D=V.add(k);0>=D.l(S)&&(P=P.add(C),V=D),k=O(k,1),C=O(C,1)}return A=y(S,P.j(A)),new E(P,A)}for(P=d;0<=S.l(A);){for(C=Math.max(1,Math.floor(S.m()/A.m())),k=Math.ceil(Math.log(C)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),V=u(C),D=V.j(A);x(D)||0<D.l(S);)C-=k,V=u(C),D=V.j(A);_(V)&&(V=h),P=P.add(V),S=y(S,D)}return new E(P,S)}t.A=function(S){return N(this,S).h},t.and=function(S){for(var A=Math.max(this.g.length,S.g.length),C=[],k=0;k<A;k++)C[k]=this.i(k)&S.i(k);return new o(C,this.h&S.h)},t.or=function(S){for(var A=Math.max(this.g.length,S.g.length),C=[],k=0;k<A;k++)C[k]=this.i(k)|S.i(k);return new o(C,this.h|S.h)},t.xor=function(S){for(var A=Math.max(this.g.length,S.g.length),C=[],k=0;k<A;k++)C[k]=this.i(k)^S.i(k);return new o(C,this.h^S.h)};function F(S){for(var A=S.g.length+1,C=[],k=0;k<A;k++)C[k]=S.i(k)<<1|S.i(k-1)>>>31;return new o(C,S.h)}function O(S,A){var C=A>>5;A%=32;for(var k=S.g.length-C,P=[],V=0;V<k;V++)P[V]=0<A?S.i(V+C)>>>A|S.i(V+C+1)<<32-A:S.i(V+C);return new o(P,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,wP=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=c,Va=o}).apply(typeof $I<"u"?$I:typeof self<"u"?self:typeof window<"u"?window:{});var Xh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var TP,dd,EP,E0,G_,IP,SP,AP;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,I,R){return p==Array.prototype||p==Object.prototype||(p[I]=R.value),p};function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xh=="object"&&Xh];for(var I=0;I<p.length;++I){var R=p[I];if(R&&R.Math==Math)return R}throw Error("Cannot find global object")}var r=n(this);function i(p,I){if(I)e:{var R=r;p=p.split(".");for(var M=0;M<p.length-1;M++){var K=p[M];if(!(K in R))break e;R=R[K]}p=p[p.length-1],M=R[p],I=I(M),I!=M&&I!=null&&e(R,p,{configurable:!0,writable:!0,value:I})}}function s(p,I){p instanceof String&&(p+="");var R=0,M=!1,K={next:function(){if(!M&&R<p.length){var ie=R++;return{value:I(ie,p[ie]),done:!1}}return M=!0,{done:!0,value:void 0}}};return K[Symbol.iterator]=function(){return K},K}i("Array.prototype.values",function(p){return p||function(){return s(this,function(I,R){return R})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(p){var I=typeof p;return I=I!="object"?I:p?Array.isArray(p)?"array":I:"null",I=="array"||I=="object"&&typeof p.length=="number"}function u(p){var I=typeof p;return I=="object"&&p!=null||I=="function"}function c(p,I,R){return p.call.apply(p.bind,arguments)}function d(p,I,R){if(!p)throw Error();if(2<arguments.length){var M=Array.prototype.slice.call(arguments,2);return function(){var K=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(K,M),p.apply(I,K)}}return function(){return p.apply(I,arguments)}}function h(p,I,R){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:d,h.apply(null,arguments)}function g(p,I){var R=Array.prototype.slice.call(arguments,1);return function(){var M=R.slice();return M.push.apply(M,arguments),p.apply(this,M)}}function _(p,I){function R(){}R.prototype=I.prototype,p.aa=I.prototype,p.prototype=new R,p.prototype.constructor=p,p.Qb=function(M,K,ie){for(var ke=Array(arguments.length-2),Lt=2;Lt<arguments.length;Lt++)ke[Lt-2]=arguments[Lt];return I.prototype[K].apply(M,ke)}}function x(p){const I=p.length;if(0<I){const R=Array(I);for(let M=0;M<I;M++)R[M]=p[M];return R}return[]}function w(p,I){for(let R=1;R<arguments.length;R++){const M=arguments[R];if(l(M)){const K=p.length||0,ie=M.length||0;p.length=K+ie;for(let ke=0;ke<ie;ke++)p[K+ke]=M[ke]}else p.push(M)}}class y{constructor(I,R){this.i=I,this.j=R,this.h=0,this.g=null}get(){let I;return 0<this.h?(this.h--,I=this.g,this.g=I.next,I.next=null):I=this.i(),I}}function T(p){return/^[\s\xa0]*$/.test(p)}function E(){var p=a.navigator;return p&&(p=p.userAgent)?p:""}function N(p){return N[" "](p),p}N[" "]=function(){};var F=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function O(p,I,R){for(const M in p)I.call(R,p[M],M,p)}function S(p,I){for(const R in p)I.call(void 0,p[R],R,p)}function A(p){const I={};for(const R in p)I[R]=p[R];return I}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(p,I){let R,M;for(let K=1;K<arguments.length;K++){M=arguments[K];for(R in M)p[R]=M[R];for(let ie=0;ie<C.length;ie++)R=C[ie],Object.prototype.hasOwnProperty.call(M,R)&&(p[R]=M[R])}}function P(p){var I=1;p=p.split(":");const R=[];for(;0<I&&p.length;)R.push(p.shift()),I--;return p.length&&R.push(p.join(":")),R}function V(p){a.setTimeout(()=>{throw p},0)}function D(){var p=ae;let I=null;return p.g&&(I=p.g,p.g=p.g.next,p.g||(p.h=null),I.next=null),I}class oe{constructor(){this.h=this.g=null}add(I,R){const M=Re.get();M.set(I,R),this.h?this.h.next=M:this.g=M,this.h=M}}var Re=new y(()=>new Je,p=>p.reset());class Je{constructor(){this.next=this.g=this.h=null}set(I,R){this.h=I,this.g=R,this.next=null}reset(){this.next=this.g=this.h=null}}let Le,ce=!1,ae=new oe,we=()=>{const p=a.Promise.resolve(void 0);Le=()=>{p.then($e)}};var $e=()=>{for(var p;p=D();){try{p.h.call(p.g)}catch(R){V(R)}var I=Re;I.j(p),100>I.h&&(I.h++,p.next=I.g,I.g=p)}ce=!1};function Ae(){this.s=this.s,this.C=this.C}Ae.prototype.s=!1,Ae.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ve(p,I){this.type=p,this.g=this.target=I,this.defaultPrevented=!1}Ve.prototype.h=function(){this.defaultPrevented=!0};var Te=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var p=!1,I=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const R=()=>{};a.addEventListener("test",R,I),a.removeEventListener("test",R,I)}catch{}return p}();function Ne(p,I){if(Ve.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var R=this.type=p.type,M=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=I,I=p.relatedTarget){if(F){e:{try{N(I.nodeName);var K=!0;break e}catch{}K=!1}K||(I=null)}}else R=="mouseover"?I=p.fromElement:R=="mouseout"&&(I=p.toElement);this.relatedTarget=I,M?(this.clientX=M.clientX!==void 0?M.clientX:M.pageX,this.clientY=M.clientY!==void 0?M.clientY:M.pageY,this.screenX=M.screenX||0,this.screenY=M.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:Ge[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&Ne.aa.h.call(this)}}_(Ne,Ve);var Ge={2:"touch",3:"pen",4:"mouse"};Ne.prototype.h=function(){Ne.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var We="closure_listenable_"+(1e6*Math.random()|0),G=0;function j(p,I,R,M,K){this.listener=p,this.proxy=null,this.src=I,this.type=R,this.capture=!!M,this.ha=K,this.key=++G,this.da=this.fa=!1}function q(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function W(p){this.src=p,this.g={},this.h=0}W.prototype.add=function(p,I,R,M,K){var ie=p.toString();p=this.g[ie],p||(p=this.g[ie]=[],this.h++);var ke=le(p,I,M,K);return-1<ke?(I=p[ke],R||(I.fa=!1)):(I=new j(I,this.src,ie,!!M,K),I.fa=R,p.push(I)),I};function te(p,I){var R=I.type;if(R in p.g){var M=p.g[R],K=Array.prototype.indexOf.call(M,I,void 0),ie;(ie=0<=K)&&Array.prototype.splice.call(M,K,1),ie&&(q(I),p.g[R].length==0&&(delete p.g[R],p.h--))}}function le(p,I,R,M){for(var K=0;K<p.length;++K){var ie=p[K];if(!ie.da&&ie.listener==I&&ie.capture==!!R&&ie.ha==M)return K}return-1}var pe="closure_lm_"+(1e6*Math.random()|0),Pe={};function me(p,I,R,M,K){if(Array.isArray(I)){for(var ie=0;ie<I.length;ie++)me(p,I[ie],R,M,K);return null}return R=Se(R),p&&p[We]?p.K(I,R,u(M)?!!M.capture:!1,K):Ye(p,I,R,!1,M,K)}function Ye(p,I,R,M,K,ie){if(!I)throw Error("Invalid event type");var ke=u(K)?!!K.capture:!!K,Lt=Me(p);if(Lt||(p[pe]=Lt=new W(p)),R=Lt.add(I,R,M,ke,ie),R.proxy)return R;if(M=He(),R.proxy=M,M.src=p,M.listener=R,p.addEventListener)Te||(K=ke),K===void 0&&(K=!1),p.addEventListener(I.toString(),M,K);else if(p.attachEvent)p.attachEvent(_t(I.toString()),M);else if(p.addListener&&p.removeListener)p.addListener(M);else throw Error("addEventListener and attachEvent are unavailable.");return R}function He(){function p(R){return I.call(p.src,p.listener,R)}const I=jt;return p}function et(p,I,R,M,K){if(Array.isArray(I))for(var ie=0;ie<I.length;ie++)et(p,I[ie],R,M,K);else M=u(M)?!!M.capture:!!M,R=Se(R),p&&p[We]?(p=p.i,I=String(I).toString(),I in p.g&&(ie=p.g[I],R=le(ie,R,M,K),-1<R&&(q(ie[R]),Array.prototype.splice.call(ie,R,1),ie.length==0&&(delete p.g[I],p.h--)))):p&&(p=Me(p))&&(I=p.g[I.toString()],p=-1,I&&(p=le(I,R,M,K)),(R=-1<p?I[p]:null)&&ut(R))}function ut(p){if(typeof p!="number"&&p&&!p.da){var I=p.src;if(I&&I[We])te(I.i,p);else{var R=p.type,M=p.proxy;I.removeEventListener?I.removeEventListener(R,M,p.capture):I.detachEvent?I.detachEvent(_t(R),M):I.addListener&&I.removeListener&&I.removeListener(M),(R=Me(I))?(te(R,p),R.h==0&&(R.src=null,I[pe]=null)):q(p)}}}function _t(p){return p in Pe?Pe[p]:Pe[p]="on"+p}function jt(p,I){if(p.da)p=!0;else{I=new Ne(I,this);var R=p.listener,M=p.ha||p.src;p.fa&&ut(p),p=R.call(M,I)}return p}function Me(p){return p=p[pe],p instanceof W?p:null}var mt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Se(p){return typeof p=="function"?p:(p[mt]||(p[mt]=function(I){return p.handleEvent(I)}),p[mt])}function se(){Ae.call(this),this.i=new W(this),this.M=this,this.F=null}_(se,Ae),se.prototype[We]=!0,se.prototype.removeEventListener=function(p,I,R,M){et(this,p,I,R,M)};function be(p,I){var R,M=p.F;if(M)for(R=[];M;M=M.F)R.push(M);if(p=p.M,M=I.type||I,typeof I=="string")I=new Ve(I,p);else if(I instanceof Ve)I.target=I.target||p;else{var K=I;I=new Ve(M,p),k(I,K)}if(K=!0,R)for(var ie=R.length-1;0<=ie;ie--){var ke=I.g=R[ie];K=Ce(ke,M,!0,I)&&K}if(ke=I.g=p,K=Ce(ke,M,!0,I)&&K,K=Ce(ke,M,!1,I)&&K,R)for(ie=0;ie<R.length;ie++)ke=I.g=R[ie],K=Ce(ke,M,!1,I)&&K}se.prototype.N=function(){if(se.aa.N.call(this),this.i){var p=this.i,I;for(I in p.g){for(var R=p.g[I],M=0;M<R.length;M++)q(R[M]);delete p.g[I],p.h--}}this.F=null},se.prototype.K=function(p,I,R,M){return this.i.add(String(p),I,!1,R,M)},se.prototype.L=function(p,I,R,M){return this.i.add(String(p),I,!0,R,M)};function Ce(p,I,R,M){if(I=p.i.g[String(I)],!I)return!0;I=I.concat();for(var K=!0,ie=0;ie<I.length;++ie){var ke=I[ie];if(ke&&!ke.da&&ke.capture==R){var Lt=ke.listener,Gn=ke.ha||ke.src;ke.fa&&te(p.i,ke),K=Lt.call(Gn,M)!==!1&&K}}return K&&!M.defaultPrevented}function tt(p,I,R){if(typeof p=="function")R&&(p=h(p,R));else if(p&&typeof p.handleEvent=="function")p=h(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(I)?-1:a.setTimeout(p,I||0)}function st(p){p.g=tt(()=>{p.g=null,p.i&&(p.i=!1,st(p))},p.l);const I=p.h;p.h=null,p.m.apply(null,I)}class Ze extends Ae{constructor(I,R){super(),this.m=I,this.l=R,this.h=null,this.i=!1,this.g=null}j(I){this.h=arguments,this.g?this.i=!0:st(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rt(p){Ae.call(this),this.h=p,this.g={}}_(rt,Ae);var wt=[];function $i(p){O(p.g,function(I,R){this.g.hasOwnProperty(R)&&ut(I)},p),p.g={}}rt.prototype.N=function(){rt.aa.N.call(this),$i(this)},rt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bt=a.JSON.stringify,Ai=a.JSON.parse,El=class{stringify(p){return a.JSON.stringify(p,void 0)}parse(p){return a.JSON.parse(p,void 0)}};function Il(){}Il.prototype.h=null;function Rc(p){return p.h||(p.h=p.i())}function kc(){}var ua={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Nc(){Ve.call(this,"d")}_(Nc,Ve);function ro(){Ve.call(this,"c")}_(ro,Ve);var _s={},dh=null;function Sl(){return dh=dh||new se}_s.La="serverreachability";function fh(p){Ve.call(this,_s.La,p)}_(fh,Ve);function ca(p){const I=Sl();be(I,new fh(I))}_s.STAT_EVENT="statevent";function hh(p,I){Ve.call(this,_s.STAT_EVENT,p),this.stat=I}_(hh,Ve);function zn(p){const I=Sl();be(I,new hh(I,p))}_s.Ma="timingevent";function ph(p,I){Ve.call(this,_s.Ma,p),this.size=I}_(ph,Ve);function ys(p,I){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){p()},I)}function da(){this.g=!0}da.prototype.xa=function(){this.g=!1};function _g(p,I,R,M,K,ie){p.info(function(){if(p.g)if(ie)for(var ke="",Lt=ie.split("&"),Gn=0;Gn<Lt.length;Gn++){var Et=Lt[Gn].split("=");if(1<Et.length){var er=Et[0];Et=Et[1];var tr=er.split("_");ke=2<=tr.length&&tr[1]=="type"?ke+(er+"="+Et+"&"):ke+(er+"=redacted&")}}else ke=null;else ke=ie;return"XMLHTTP REQ ("+M+") [attempt "+K+"]: "+I+`
`+R+`
`+ke})}function yg(p,I,R,M,K,ie,ke){p.info(function(){return"XMLHTTP RESP ("+M+") [ attempt "+K+"]: "+I+`
`+R+`
`+ie+" "+ke})}function b(p,I,R,M){p.info(function(){return"XMLHTTP TEXT ("+I+"): "+L(p,R)+(M?" "+M:"")})}function z(p,I){p.info(function(){return"TIMEOUT: "+I})}da.prototype.info=function(){};function L(p,I){if(!p.g)return I;if(!I)return null;try{var R=JSON.parse(I);if(R){for(p=0;p<R.length;p++)if(Array.isArray(R[p])){var M=R[p];if(!(2>M.length)){var K=M[1];if(Array.isArray(K)&&!(1>K.length)){var ie=K[0];if(ie!="noop"&&ie!="stop"&&ie!="close")for(var ke=1;ke<K.length;ke++)K[ke]=""}}}}return Bt(R)}catch{return I}}var U={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},B={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},H;function Y(){}_(Y,Il),Y.prototype.g=function(){return new XMLHttpRequest},Y.prototype.i=function(){return{}},H=new Y;function re(p,I,R,M){this.j=p,this.i=I,this.l=R,this.R=M||1,this.U=new rt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new J}function J(){this.i=null,this.g="",this.h=!1}var ee={},Q={};function ge(p,I,R){p.L=1,p.v=vh(ws(I)),p.m=R,p.P=!0,Ee(p,null)}function Ee(p,I){p.F=Date.now(),Ie(p),p.A=ws(p.v);var R=p.A,M=p.R;Array.isArray(M)||(M=[String(M)]),jw(R.i,"t",M),p.C=0,R=p.j.J,p.h=new J,p.g=dT(p.j,R?I:null,!p.m),0<p.O&&(p.M=new Ze(h(p.Y,p,p.g),p.O)),I=p.U,R=p.g,M=p.ca;var K="readystatechange";Array.isArray(K)||(K&&(wt[0]=K.toString()),K=wt);for(var ie=0;ie<K.length;ie++){var ke=me(R,K[ie],M||I.handleEvent,!1,I.h||I);if(!ke)break;I.g[ke.key]=ke}I=p.H?A(p.H):{},p.m?(p.u||(p.u="POST"),I["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,I)):(p.u="GET",p.g.ea(p.A,p.u,null,I)),ca(),_g(p.i,p.u,p.A,p.l,p.R,p.m)}re.prototype.ca=function(p){p=p.target;const I=this.M;I&&Ts(p)==3?I.j():this.Y(p)},re.prototype.Y=function(p){try{if(p==this.g)e:{const tr=Ts(this.g);var I=this.g.Ba();const kl=this.g.Z();if(!(3>tr)&&(tr!=3||this.g&&(this.h.h||this.g.oa()||eT(this.g)))){this.J||tr!=4||I==7||(I==8||0>=kl?ca(3):ca(2)),Dt(this);var R=this.g.Z();this.X=R;t:if(Ue(this)){var M=eT(this.g);p="";var K=M.length,ie=Ts(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Kt(this),Rt(this);var ke="";break t}this.h.i=new a.TextDecoder}for(I=0;I<K;I++)this.h.h=!0,p+=this.h.i.decode(M[I],{stream:!(ie&&I==K-1)});M.length=0,this.h.g+=p,this.C=0,ke=this.h.g}else ke=this.g.oa();if(this.o=R==200,yg(this.i,this.u,this.A,this.l,this.R,tr,R),this.o){if(this.T&&!this.K){t:{if(this.g){var Lt,Gn=this.g;if((Lt=Gn.g?Gn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(Lt)){var Et=Lt;break t}}Et=null}if(R=Et)b(this.i,this.l,R,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xs(this,R);else{this.o=!1,this.s=3,zn(12),Kt(this),Rt(this);break e}}if(this.P){R=!0;let Ci;for(;!this.J&&this.C<ke.length;)if(Ci=ve(this,ke),Ci==Q){tr==4&&(this.s=4,zn(14),R=!1),b(this.i,this.l,null,"[Incomplete Response]");break}else if(Ci==ee){this.s=4,zn(15),b(this.i,this.l,ke,"[Invalid Chunk]"),R=!1;break}else b(this.i,this.l,Ci,null),xs(this,Ci);if(Ue(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),tr!=4||ke.length!=0||this.h.h||(this.s=1,zn(16),R=!1),this.o=this.o&&R,!R)b(this.i,this.l,ke,"[Invalid Chunked Response]"),Kt(this),Rt(this);else if(0<ke.length&&!this.W){this.W=!0;var er=this.j;er.g==this&&er.ba&&!er.M&&(er.j.info("Great, no buffering proxy detected. Bytes received: "+ke.length),Ig(er),er.M=!0,zn(11))}}else b(this.i,this.l,ke,null),xs(this,ke);tr==4&&Kt(this),this.o&&!this.J&&(tr==4?aT(this.j,this):(this.o=!1,Ie(this)))}else QF(this.g),R==400&&0<ke.indexOf("Unknown SID")?(this.s=3,zn(12)):(this.s=0,zn(13)),Kt(this),Rt(this)}}}catch{}finally{}};function Ue(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function ve(p,I){var R=p.C,M=I.indexOf(`
`,R);return M==-1?Q:(R=Number(I.substring(R,M)),isNaN(R)?ee:(M+=1,M+R>I.length?Q:(I=I.slice(M,M+R),p.C=M+R,I)))}re.prototype.cancel=function(){this.J=!0,Kt(this)};function Ie(p){p.S=Date.now()+p.I,ot(p,p.I)}function ot(p,I){if(p.B!=null)throw Error("WatchDog timer not null");p.B=ys(h(p.ba,p),I)}function Dt(p){p.B&&(a.clearTimeout(p.B),p.B=null)}re.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(z(this.i,this.A),this.L!=2&&(ca(),zn(17)),Kt(this),this.s=2,Rt(this)):ot(this,this.S-p)};function Rt(p){p.j.G==0||p.J||aT(p.j,p)}function Kt(p){Dt(p);var I=p.M;I&&typeof I.ma=="function"&&I.ma(),p.M=null,$i(p.U),p.g&&(I=p.g,p.g=null,I.abort(),I.ma())}function xs(p,I){try{var R=p.j;if(R.G!=0&&(R.g==p||Kr(R.h,p))){if(!p.K&&Kr(R.h,p)&&R.G==3){try{var M=R.Da.g.parse(I)}catch{M=null}if(Array.isArray(M)&&M.length==3){var K=M;if(K[0]==0){e:if(!R.u){if(R.g)if(R.g.F+3e3<p.F)Eh(R),wh(R);else break e;Eg(R),zn(18)}}else R.za=K[1],0<R.za-R.T&&37500>K[2]&&R.F&&R.v==0&&!R.C&&(R.C=ys(h(R.Za,R),6e3));if(1>=Al(R.h)&&R.ca){try{R.ca()}catch{}R.ca=void 0}}else pa(R,11)}else if((p.K||R.g==p)&&Eh(R),!T(I))for(K=R.Da.g.parse(I),I=0;I<K.length;I++){let Et=K[I];if(R.T=Et[0],Et=Et[1],R.G==2)if(Et[0]=="c"){R.K=Et[1],R.ia=Et[2];const er=Et[3];er!=null&&(R.la=er,R.j.info("VER="+R.la));const tr=Et[4];tr!=null&&(R.Aa=tr,R.j.info("SVER="+R.Aa));const kl=Et[5];kl!=null&&typeof kl=="number"&&0<kl&&(M=1.5*kl,R.L=M,R.j.info("backChannelRequestTimeoutMs_="+M)),M=R;const Ci=p.g;if(Ci){const Sh=Ci.g?Ci.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Sh){var ie=M.h;ie.g||Sh.indexOf("spdy")==-1&&Sh.indexOf("quic")==-1&&Sh.indexOf("h2")==-1||(ie.j=ie.l,ie.g=new Set,ie.h&&(xg(ie,ie.h),ie.h=null))}if(M.D){const Sg=Ci.g?Ci.g.getResponseHeader("X-HTTP-Session-Id"):null;Sg&&(M.ya=Sg,zt(M.I,M.D,Sg))}}R.G=3,R.l&&R.l.ua(),R.ba&&(R.R=Date.now()-p.F,R.j.info("Handshake RTT: "+R.R+"ms")),M=R;var ke=p;if(M.qa=cT(M,M.J?M.ia:null,M.W),ke.K){Uw(M.h,ke);var Lt=ke,Gn=M.L;Gn&&(Lt.I=Gn),Lt.B&&(Dt(Lt),Ie(Lt)),M.g=ke}else sT(M);0<R.i.length&&Th(R)}else Et[0]!="stop"&&Et[0]!="close"||pa(R,7);else R.G==3&&(Et[0]=="stop"||Et[0]=="close"?Et[0]=="stop"?pa(R,7):Tg(R):Et[0]!="noop"&&R.l&&R.l.ta(Et),R.v=0)}}ca(4)}catch{}}var fa=class{constructor(p,I){this.g=p,this.map=I}};function io(p){this.l=p||10,a.PerformanceNavigationTiming?(p=a.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Wi(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function Al(p){return p.h?1:p.g?p.g.size:0}function Kr(p,I){return p.h?p.h==I:p.g?p.g.has(I):!1}function xg(p,I){p.g?p.g.add(I):p.h=I}function Uw(p,I){p.h&&p.h==I?p.h=null:p.g&&p.g.has(I)&&p.g.delete(I)}io.prototype.cancel=function(){if(this.i=Bw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function Bw(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let I=p.i;for(const R of p.g.values())I=I.concat(R.D);return I}return x(p.i)}function OF(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(l(p)){for(var I=[],R=p.length,M=0;M<R;M++)I.push(p[M]);return I}I=[],R=0;for(M in p)I[R++]=p[M];return I}function VF(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(l(p)||typeof p=="string"){var I=[];p=p.length;for(var R=0;R<p;R++)I.push(R);return I}I=[],R=0;for(const M in p)I[R++]=M;return I}}}function zw(p,I){if(p.forEach&&typeof p.forEach=="function")p.forEach(I,void 0);else if(l(p)||typeof p=="string")Array.prototype.forEach.call(p,I,void 0);else for(var R=VF(p),M=OF(p),K=M.length,ie=0;ie<K;ie++)I.call(void 0,M[ie],R&&R[ie],p)}var Gw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function UF(p,I){if(p){p=p.split("&");for(var R=0;R<p.length;R++){var M=p[R].indexOf("="),K=null;if(0<=M){var ie=p[R].substring(0,M);K=p[R].substring(M+1)}else ie=p[R];I(ie,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function ha(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof ha){this.h=p.h,mh(this,p.j),this.o=p.o,this.g=p.g,gh(this,p.s),this.l=p.l;var I=p.i,R=new Dc;R.i=I.i,I.g&&(R.g=new Map(I.g),R.h=I.h),Hw(this,R),this.m=p.m}else p&&(I=String(p).match(Gw))?(this.h=!1,mh(this,I[1]||"",!0),this.o=Pc(I[2]||""),this.g=Pc(I[3]||"",!0),gh(this,I[4]),this.l=Pc(I[5]||"",!0),Hw(this,I[6]||"",!0),this.m=Pc(I[7]||"")):(this.h=!1,this.i=new Dc(null,this.h))}ha.prototype.toString=function(){var p=[],I=this.j;I&&p.push(bc(I,$w,!0),":");var R=this.g;return(R||I=="file")&&(p.push("//"),(I=this.o)&&p.push(bc(I,$w,!0),"@"),p.push(encodeURIComponent(String(R)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),R=this.s,R!=null&&p.push(":",String(R))),(R=this.l)&&(this.g&&R.charAt(0)!="/"&&p.push("/"),p.push(bc(R,R.charAt(0)=="/"?GF:zF,!0))),(R=this.i.toString())&&p.push("?",R),(R=this.m)&&p.push("#",bc(R,$F)),p.join("")};function ws(p){return new ha(p)}function mh(p,I,R){p.j=R?Pc(I,!0):I,p.j&&(p.j=p.j.replace(/:$/,""))}function gh(p,I){if(I){if(I=Number(I),isNaN(I)||0>I)throw Error("Bad port number "+I);p.s=I}else p.s=null}function Hw(p,I,R){I instanceof Dc?(p.i=I,WF(p.i,p.h)):(R||(I=bc(I,HF)),p.i=new Dc(I,p.h))}function zt(p,I,R){p.i.set(I,R)}function vh(p){return zt(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function Pc(p,I){return p?I?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function bc(p,I,R){return typeof p=="string"?(p=encodeURI(p).replace(I,BF),R&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function BF(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var $w=/[#\/\?@]/g,zF=/[#\?:]/g,GF=/[#\?]/g,HF=/[#\?@]/g,$F=/#/g;function Dc(p,I){this.h=this.g=null,this.i=p||null,this.j=!!I}function so(p){p.g||(p.g=new Map,p.h=0,p.i&&UF(p.i,function(I,R){p.add(decodeURIComponent(I.replace(/\+/g," ")),R)}))}t=Dc.prototype,t.add=function(p,I){so(this),this.i=null,p=Cl(this,p);var R=this.g.get(p);return R||this.g.set(p,R=[]),R.push(I),this.h+=1,this};function Ww(p,I){so(p),I=Cl(p,I),p.g.has(I)&&(p.i=null,p.h-=p.g.get(I).length,p.g.delete(I))}function qw(p,I){return so(p),I=Cl(p,I),p.g.has(I)}t.forEach=function(p,I){so(this),this.g.forEach(function(R,M){R.forEach(function(K){p.call(I,K,M,this)},this)},this)},t.na=function(){so(this);const p=Array.from(this.g.values()),I=Array.from(this.g.keys()),R=[];for(let M=0;M<I.length;M++){const K=p[M];for(let ie=0;ie<K.length;ie++)R.push(I[M])}return R},t.V=function(p){so(this);let I=[];if(typeof p=="string")qw(this,p)&&(I=I.concat(this.g.get(Cl(this,p))));else{p=Array.from(this.g.values());for(let R=0;R<p.length;R++)I=I.concat(p[R])}return I},t.set=function(p,I){return so(this),this.i=null,p=Cl(this,p),qw(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[I]),this.h+=1,this},t.get=function(p,I){return p?(p=this.V(p),0<p.length?String(p[0]):I):I};function jw(p,I,R){Ww(p,I),0<R.length&&(p.i=null,p.g.set(Cl(p,I),x(R)),p.h+=R.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],I=Array.from(this.g.keys());for(var R=0;R<I.length;R++){var M=I[R];const ie=encodeURIComponent(String(M)),ke=this.V(M);for(M=0;M<ke.length;M++){var K=ie;ke[M]!==""&&(K+="="+encodeURIComponent(String(ke[M]))),p.push(K)}}return this.i=p.join("&")};function Cl(p,I){return I=String(I),p.j&&(I=I.toLowerCase()),I}function WF(p,I){I&&!p.j&&(so(p),p.i=null,p.g.forEach(function(R,M){var K=M.toLowerCase();M!=K&&(Ww(this,M),jw(this,K,R))},p)),p.j=I}function qF(p,I){const R=new da;if(a.Image){const M=new Image;M.onload=g(oo,R,"TestLoadImage: loaded",!0,I,M),M.onerror=g(oo,R,"TestLoadImage: error",!1,I,M),M.onabort=g(oo,R,"TestLoadImage: abort",!1,I,M),M.ontimeout=g(oo,R,"TestLoadImage: timeout",!1,I,M),a.setTimeout(function(){M.ontimeout&&M.ontimeout()},1e4),M.src=p}else I(!1)}function jF(p,I){const R=new da,M=new AbortController,K=setTimeout(()=>{M.abort(),oo(R,"TestPingServer: timeout",!1,I)},1e4);fetch(p,{signal:M.signal}).then(ie=>{clearTimeout(K),ie.ok?oo(R,"TestPingServer: ok",!0,I):oo(R,"TestPingServer: server error",!1,I)}).catch(()=>{clearTimeout(K),oo(R,"TestPingServer: error",!1,I)})}function oo(p,I,R,M,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),M(R)}catch{}}function KF(){this.g=new El}function JF(p,I,R){const M=R||"";try{zw(p,function(K,ie){let ke=K;u(K)&&(ke=Bt(K)),I.push(M+ie+"="+encodeURIComponent(ke))})}catch(K){throw I.push(M+"type="+encodeURIComponent("_badmap")),K}}function _h(p){this.l=p.Ub||null,this.j=p.eb||!1}_(_h,Il),_h.prototype.g=function(){return new yh(this.l,this.j)},_h.prototype.i=function(p){return function(){return p}}({});function yh(p,I){se.call(this),this.D=p,this.o=I,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(yh,se),t=yh.prototype,t.open=function(p,I){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=I,this.readyState=1,Mc(this)},t.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const I={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(I.body=p),(this.D||a).fetch(new Request(this.A,I)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Fc(this)),this.readyState=0},t.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Mc(this)),this.g&&(this.readyState=3,Mc(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Kw(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function Kw(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}t.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var I=p.value?p.value:new Uint8Array(0);(I=this.v.decode(I,{stream:!p.done}))&&(this.response=this.responseText+=I)}p.done?Fc(this):Mc(this),this.readyState==3&&Kw(this)}},t.Ra=function(p){this.g&&(this.response=this.responseText=p,Fc(this))},t.Qa=function(p){this.g&&(this.response=p,Fc(this))},t.ga=function(){this.g&&Fc(this)};function Fc(p){p.readyState=4,p.l=null,p.j=null,p.v=null,Mc(p)}t.setRequestHeader=function(p,I){this.u.append(p,I)},t.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],I=this.h.entries();for(var R=I.next();!R.done;)R=R.value,p.push(R[0]+": "+R[1]),R=I.next();return p.join(`\r
`)};function Mc(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(yh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function Jw(p){let I="";return O(p,function(R,M){I+=M,I+=":",I+=R,I+=`\r
`}),I}function wg(p,I,R){e:{for(M in R){var M=!1;break e}M=!0}M||(R=Jw(R),typeof p=="string"?R!=null&&encodeURIComponent(String(R)):zt(p,I,R))}function un(p){se.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(un,se);var YF=/^https?$/i,XF=["POST","PUT"];t=un.prototype,t.Ha=function(p){this.J=p},t.ea=function(p,I,R,M){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);I=I?I.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():H.g(),this.v=this.o?Rc(this.o):Rc(H),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(I,String(p),!0),this.B=!1}catch(ie){Yw(this,ie);return}if(p=R||"",R=new Map(this.headers),M)if(Object.getPrototypeOf(M)===Object.prototype)for(var K in M)R.set(K,M[K]);else if(typeof M.keys=="function"&&typeof M.get=="function")for(const ie of M.keys())R.set(ie,M.get(ie));else throw Error("Unknown input type for opt_headers: "+String(M));M=Array.from(R.keys()).find(ie=>ie.toLowerCase()=="content-type"),K=a.FormData&&p instanceof a.FormData,!(0<=Array.prototype.indexOf.call(XF,I,void 0))||M||K||R.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,ke]of R)this.g.setRequestHeader(ie,ke);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Zw(this),this.u=!0,this.g.send(p),this.u=!1}catch(ie){Yw(this,ie)}};function Yw(p,I){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=I,p.m=5,Xw(p),xh(p)}function Xw(p){p.A||(p.A=!0,be(p,"complete"),be(p,"error"))}t.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,be(this,"complete"),be(this,"abort"),xh(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xh(this,!0)),un.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Qw(this):this.bb())},t.bb=function(){Qw(this)};function Qw(p){if(p.h&&typeof o<"u"&&(!p.v[1]||Ts(p)!=4||p.Z()!=2)){if(p.u&&Ts(p)==4)tt(p.Ea,0,p);else if(be(p,"readystatechange"),Ts(p)==4){p.h=!1;try{const ke=p.Z();e:switch(ke){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var I=!0;break e;default:I=!1}var R;if(!(R=I)){var M;if(M=ke===0){var K=String(p.D).match(Gw)[1]||null;!K&&a.self&&a.self.location&&(K=a.self.location.protocol.slice(0,-1)),M=!YF.test(K?K.toLowerCase():"")}R=M}if(R)be(p,"complete"),be(p,"success");else{p.m=6;try{var ie=2<Ts(p)?p.g.statusText:""}catch{ie=""}p.l=ie+" ["+p.Z()+"]",Xw(p)}}finally{xh(p)}}}}function xh(p,I){if(p.g){Zw(p);const R=p.g,M=p.v[0]?()=>{}:null;p.g=null,p.v=null,I||be(p,"ready");try{R.onreadystatechange=M}catch{}}}function Zw(p){p.I&&(a.clearTimeout(p.I),p.I=null)}t.isActive=function(){return!!this.g};function Ts(p){return p.g?p.g.readyState:0}t.Z=function(){try{return 2<Ts(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(p){if(this.g){var I=this.g.responseText;return p&&I.indexOf(p)==0&&(I=I.substring(p.length)),Ai(I)}};function eT(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function QF(p){const I={};p=(p.g&&2<=Ts(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let M=0;M<p.length;M++){if(T(p[M]))continue;var R=P(p[M]);const K=R[0];if(R=R[1],typeof R!="string")continue;R=R.trim();const ie=I[K]||[];I[K]=ie,ie.push(R)}S(I,function(M){return M.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Lc(p,I,R){return R&&R.internalChannelParams&&R.internalChannelParams[p]||I}function tT(p){this.Aa=0,this.i=[],this.j=new da,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Lc("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Lc("baseRetryDelayMs",5e3,p),this.cb=Lc("retryDelaySeedMs",1e4,p),this.Wa=Lc("forwardChannelMaxRetries",2,p),this.wa=Lc("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new io(p&&p.concurrentRequestLimit),this.Da=new KF,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=tT.prototype,t.la=8,t.G=1,t.connect=function(p,I,R,M){zn(0),this.W=p,this.H=I||{},R&&M!==void 0&&(this.H.OSID=R,this.H.OAID=M),this.F=this.X,this.I=cT(this,null,this.W),Th(this)};function Tg(p){if(nT(p),p.G==3){var I=p.U++,R=ws(p.I);if(zt(R,"SID",p.K),zt(R,"RID",I),zt(R,"TYPE","terminate"),Oc(p,R),I=new re(p,p.j,I),I.L=2,I.v=vh(ws(R)),R=!1,a.navigator&&a.navigator.sendBeacon)try{R=a.navigator.sendBeacon(I.v.toString(),"")}catch{}!R&&a.Image&&(new Image().src=I.v,R=!0),R||(I.g=dT(I.j,null),I.g.ea(I.v)),I.F=Date.now(),Ie(I)}uT(p)}function wh(p){p.g&&(Ig(p),p.g.cancel(),p.g=null)}function nT(p){wh(p),p.u&&(a.clearTimeout(p.u),p.u=null),Eh(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&a.clearTimeout(p.s),p.s=null)}function Th(p){if(!Wi(p.h)&&!p.s){p.s=!0;var I=p.Ga;Le||we(),ce||(Le(),ce=!0),ae.add(I,p),p.B=0}}function ZF(p,I){return Al(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=I.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=ys(h(p.Ga,p,I),lT(p,p.B)),p.B++,!0)}t.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const K=new re(this,this.j,p);let ie=this.o;if(this.S&&(ie?(ie=A(ie),k(ie,this.S)):ie=this.S),this.m!==null||this.O||(K.H=ie,ie=null),this.P)e:{for(var I=0,R=0;R<this.i.length;R++){t:{var M=this.i[R];if("__data__"in M.map&&(M=M.map.__data__,typeof M=="string")){M=M.length;break t}M=void 0}if(M===void 0)break;if(I+=M,4096<I){I=R;break e}if(I===4096||R===this.i.length-1){I=R+1;break e}}I=1e3}else I=1e3;I=iT(this,K,I),R=ws(this.I),zt(R,"RID",p),zt(R,"CVER",22),this.D&&zt(R,"X-HTTP-Session-Id",this.D),Oc(this,R),ie&&(this.O?I="headers="+encodeURIComponent(String(Jw(ie)))+"&"+I:this.m&&wg(R,this.m,ie)),xg(this.h,K),this.Ua&&zt(R,"TYPE","init"),this.P?(zt(R,"$req",I),zt(R,"SID","null"),K.T=!0,ge(K,R,null)):ge(K,R,I),this.G=2}}else this.G==3&&(p?rT(this,p):this.i.length==0||Wi(this.h)||rT(this))};function rT(p,I){var R;I?R=I.l:R=p.U++;const M=ws(p.I);zt(M,"SID",p.K),zt(M,"RID",R),zt(M,"AID",p.T),Oc(p,M),p.m&&p.o&&wg(M,p.m,p.o),R=new re(p,p.j,R,p.B+1),p.m===null&&(R.H=p.o),I&&(p.i=I.D.concat(p.i)),I=iT(p,R,1e3),R.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),xg(p.h,R),ge(R,M,I)}function Oc(p,I){p.H&&O(p.H,function(R,M){zt(I,M,R)}),p.l&&zw({},function(R,M){zt(I,M,R)})}function iT(p,I,R){R=Math.min(p.i.length,R);var M=p.l?h(p.l.Na,p.l,p):null;e:{var K=p.i;let ie=-1;for(;;){const ke=["count="+R];ie==-1?0<R?(ie=K[0].g,ke.push("ofs="+ie)):ie=0:ke.push("ofs="+ie);let Lt=!0;for(let Gn=0;Gn<R;Gn++){let Et=K[Gn].g;const er=K[Gn].map;if(Et-=ie,0>Et)ie=Math.max(0,K[Gn].g-100),Lt=!1;else try{JF(er,ke,"req"+Et+"_")}catch{M&&M(er)}}if(Lt){M=ke.join("&");break e}}}return p=p.i.splice(0,R),I.D=p,M}function sT(p){if(!p.g&&!p.u){p.Y=1;var I=p.Fa;Le||we(),ce||(Le(),ce=!0),ae.add(I,p),p.v=0}}function Eg(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=ys(h(p.Fa,p),lT(p,p.v)),p.v++,!0)}t.Fa=function(){if(this.u=null,oT(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=ys(h(this.ab,this),p)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,zn(10),wh(this),oT(this))};function Ig(p){p.A!=null&&(a.clearTimeout(p.A),p.A=null)}function oT(p){p.g=new re(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var I=ws(p.qa);zt(I,"RID","rpc"),zt(I,"SID",p.K),zt(I,"AID",p.T),zt(I,"CI",p.F?"0":"1"),!p.F&&p.ja&&zt(I,"TO",p.ja),zt(I,"TYPE","xmlhttp"),Oc(p,I),p.m&&p.o&&wg(I,p.m,p.o),p.L&&(p.g.I=p.L);var R=p.g;p=p.ia,R.L=1,R.v=vh(ws(I)),R.m=null,R.P=!0,Ee(R,p)}t.Za=function(){this.C!=null&&(this.C=null,wh(this),Eg(this),zn(19))};function Eh(p){p.C!=null&&(a.clearTimeout(p.C),p.C=null)}function aT(p,I){var R=null;if(p.g==I){Eh(p),Ig(p),p.g=null;var M=2}else if(Kr(p.h,I))R=I.D,Uw(p.h,I),M=1;else return;if(p.G!=0){if(I.o)if(M==1){R=I.m?I.m.length:0,I=Date.now()-I.F;var K=p.B;M=Sl(),be(M,new ph(M,R)),Th(p)}else sT(p);else if(K=I.s,K==3||K==0&&0<I.X||!(M==1&&ZF(p,I)||M==2&&Eg(p)))switch(R&&0<R.length&&(I=p.h,I.i=I.i.concat(R)),K){case 1:pa(p,5);break;case 4:pa(p,10);break;case 3:pa(p,6);break;default:pa(p,2)}}}function lT(p,I){let R=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(R*=2),R*I}function pa(p,I){if(p.j.info("Error code "+I),I==2){var R=h(p.fb,p),M=p.Xa;const K=!M;M=new ha(M||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||mh(M,"https"),vh(M),K?qF(M.toString(),R):jF(M.toString(),R)}else zn(2);p.G=0,p.l&&p.l.sa(I),uT(p),nT(p)}t.fb=function(p){p?(this.j.info("Successfully pinged google.com"),zn(2)):(this.j.info("Failed to ping google.com"),zn(1))};function uT(p){if(p.G=0,p.ka=[],p.l){const I=Bw(p.h);(I.length!=0||p.i.length!=0)&&(w(p.ka,I),w(p.ka,p.i),p.h.i.length=0,x(p.i),p.i.length=0),p.l.ra()}}function cT(p,I,R){var M=R instanceof ha?ws(R):new ha(R);if(M.g!="")I&&(M.g=I+"."+M.g),gh(M,M.s);else{var K=a.location;M=K.protocol,I=I?I+"."+K.hostname:K.hostname,K=+K.port;var ie=new ha(null);M&&mh(ie,M),I&&(ie.g=I),K&&gh(ie,K),R&&(ie.l=R),M=ie}return R=p.D,I=p.ya,R&&I&&zt(M,R,I),zt(M,"VER",p.la),Oc(p,M),M}function dT(p,I,R){if(I&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return I=p.Ca&&!p.pa?new un(new _h({eb:R})):new un(p.pa),I.Ha(p.J),I}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function fT(){}t=fT.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ih(){}Ih.prototype.g=function(p,I){return new Jr(p,I)};function Jr(p,I){se.call(this),this.g=new tT(I),this.l=p,this.h=I&&I.messageUrlParams||null,p=I&&I.messageHeaders||null,I&&I.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=I&&I.initMessageHeaders||null,I&&I.messageContentType&&(p?p["X-WebChannel-Content-Type"]=I.messageContentType:p={"X-WebChannel-Content-Type":I.messageContentType}),I&&I.va&&(p?p["X-WebChannel-Client-Profile"]=I.va:p={"X-WebChannel-Client-Profile":I.va}),this.g.S=p,(p=I&&I.Sb)&&!T(p)&&(this.g.m=p),this.v=I&&I.supportsCrossDomainXhr||!1,this.u=I&&I.sendRawJson||!1,(I=I&&I.httpSessionIdParam)&&!T(I)&&(this.g.D=I,p=this.h,p!==null&&I in p&&(p=this.h,I in p&&delete p[I])),this.j=new Rl(this)}_(Jr,se),Jr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Jr.prototype.close=function(){Tg(this.g)},Jr.prototype.o=function(p){var I=this.g;if(typeof p=="string"){var R={};R.__data__=p,p=R}else this.u&&(R={},R.__data__=Bt(p),p=R);I.i.push(new fa(I.Ya++,p)),I.G==3&&Th(I)},Jr.prototype.N=function(){this.g.l=null,delete this.j,Tg(this.g),delete this.g,Jr.aa.N.call(this)};function hT(p){Nc.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var I=p.__sm__;if(I){e:{for(const R in I){p=R;break e}p=void 0}(this.i=p)&&(p=this.i,I=I!==null&&p in I?I[p]:void 0),this.data=I}else this.data=p}_(hT,Nc);function pT(){ro.call(this),this.status=1}_(pT,ro);function Rl(p){this.g=p}_(Rl,fT),Rl.prototype.ua=function(){be(this.g,"a")},Rl.prototype.ta=function(p){be(this.g,new hT(p))},Rl.prototype.sa=function(p){be(this.g,new pT)},Rl.prototype.ra=function(){be(this.g,"b")},Ih.prototype.createWebChannel=Ih.prototype.g,Jr.prototype.send=Jr.prototype.o,Jr.prototype.open=Jr.prototype.m,Jr.prototype.close=Jr.prototype.close,AP=function(){return new Ih},SP=function(){return Sl()},IP=_s,G_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},U.NO_ERROR=0,U.TIMEOUT=8,U.HTTP_ERROR=6,E0=U,B.COMPLETE="complete",EP=B,kc.EventType=ua,ua.OPEN="a",ua.CLOSE="b",ua.ERROR="c",ua.MESSAGE="d",se.prototype.listen=se.prototype.K,dd=kc,un.prototype.listenOnce=un.prototype.L,un.prototype.getLastError=un.prototype.Ka,un.prototype.getLastErrorCode=un.prototype.Ba,un.prototype.getStatus=un.prototype.Z,un.prototype.getResponseJson=un.prototype.Oa,un.prototype.getResponseText=un.prototype.oa,un.prototype.send=un.prototype.ea,un.prototype.setWithCredentials=un.prototype.Ha,TP=un}).apply(typeof Xh<"u"?Xh:typeof self<"u"?self:typeof window<"u"?window:{});const WI="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ln=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ln.UNAUTHENTICATED=new Ln(null),Ln.GOOGLE_CREDENTIALS=new Ln("google-credentials-uid"),Ln.FIRST_PARTY=new Ln("first-party-uid"),Ln.MOCK_USER=new Ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pc="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o=new Nm("@firebase/firestore");function Bl(){return $o.logLevel}function oG(t){$o.setLogLevel(t)}function he(t,...e){if($o.logLevel<=ht.DEBUG){const n=e.map(s1);$o.debug(`Firestore (${pc}): ${t}`,...n)}}function vn(t,...e){if($o.logLevel<=ht.ERROR){const n=e.map(s1);$o.error(`Firestore (${pc}): ${t}`,...n)}}function hs(t,...e){if($o.logLevel<=ht.WARN){const n=e.map(s1);$o.warn(`Firestore (${pc}): ${t}`,...n)}}function s1(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(t="Unexpected state"){const e=`FIRESTORE (${pc}) INTERNAL ASSERTION FAILED: `+t;throw vn(e),new Error(e)}function Ke(t,e){t||Be()}function aG(t,e){t||Be()}function Fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends kr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lG{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ln.UNAUTHENTICATED))}shutdown(){}}class uG{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class cG{constructor(e){this.t=e,this.currentUser=Ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ke(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Yn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Yn,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Yn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ke(typeof r.accessToken=="string"),new CP(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string"),new Ln(e)}}class dG{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ln.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class fG{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new dG(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ln.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class hG{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pG{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ke(this.o===void 0);const r=s=>{s.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,he("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ke(typeof n.token=="string"),this.R=n.token,new hG(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mG(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=mG(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function lt(t,e){return t<e?-1:t>e?1:0}function zu(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function kP(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new fe(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new fe(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new fe(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return tn.fromMillis(Date.now())}static fromDate(e){return tn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new tn(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?lt(this.nanoseconds,e.nanoseconds):lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Qe(e)}static min(){return new Qe(new tn(0,0))}static max(){return new Qe(new tn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,n,r){n===void 0?n=0:n>e.length&&Be(),r===void 0?r=e.length-n:r>e.length-n&&Be(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return vf.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof vf?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class gt extends vf{construct(e,n,r){return new gt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new fe(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new gt(n)}static emptyPath(){return new gt([])}}const gG=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qt extends vf{construct(e,n,r){return new Qt(e,n,r)}static isValidIdentifier(e){return gG.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Qt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new fe(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new fe(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new fe(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new fe(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qt(n)}static emptyPath(){return new Qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e){this.path=e}static fromPath(e){return new De(gt.fromString(e))}static fromName(e){return new De(gt.fromString(e).popFirst(5))}static empty(){return new De(gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&gt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return gt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new De(new gt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function H_(t){return t.fields.find(e=>e.kind===2)}function xa(t){return t.fields.filter(e=>e.kind!==2)}Dp.UNKNOWN_ID=-1;class I0{constructor(e,n){this.fieldPath=e,this.kind=n}}class _f{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new _f(0,ai.min())}}function NP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Qe.fromTimestamp(r===1e9?new tn(n+1,0):new tn(n,r));return new ai(i,De.empty(),e)}function PP(t){return new ai(t.readTime,t.key,-1)}class ai{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ai(Qe.min(),De.empty(),-1)}static max(){return new ai(Qe.max(),De.empty(),-1)}}function o1(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=De.comparator(t.documentKey,e.documentKey),n!==0?n:lt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ra(t){if(t.code!==ne.FAILED_PRECONDITION||t.message!==bP)throw t;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Be(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Z((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Z?n:Z.resolve(n)}catch(n){return Z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.reject(n)}static resolve(e){return new Z((n,r)=>{n(e)})}static reject(e){return new Z((n,r)=>{r(e)})}static waitFor(e){return new Z((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=Z.resolve(!1);for(const r of e)n=n.next(i=>i?Z.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new Z((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(e,n){return new Z((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Yn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Pd(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=a1(r.target.error);this.V.reject(new Pd(e,i))}}static open(e,n,r,i){try{return new Pm(n,e.transaction(i,r))}catch(s){throw new Pd(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(he("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new _G(n)}}class us{constructor(e,n,r){this.name=e,this.version=n,this.p=r,us.S(ln())===12.2&&vn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return he("SimpleDb","Removing database:",e),Ea(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!hf())return!1;if(us.v())return!0;const e=ln(),n=us.S(e),r=0<n&&n<10,i=FP(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(he("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new Pd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new fe(ne.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new fe(ne.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Pd(e,o))},i.onupgradeneeded=s=>{he("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{he("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=Pm.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),Z.reject(u))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if(he("SimpleDb","Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function FP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class vG{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Ea(this.B.delete())}}class Pd extends fe{constructor(e,n){super(ne.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ia(t){return t.name==="IndexedDbTransactionError"}class _G{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(he("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(he("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ea(r)}add(e){return he("SimpleDb","ADD",this.store.name,e,e),Ea(this.store.add(e))}get(e){return Ea(this.store.get(e)).next(n=>(n===void 0&&(n=null),he("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return he("SimpleDb","DELETE",this.store.name,e),Ea(this.store.delete(e))}count(){return he("SimpleDb","COUNT",this.store.name),Ea(this.store.count())}U(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new Z((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new Z((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,n){he("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.W(i,n)}Y(e){const n=this.cursor({});return new Z((r,i)=>{n.onerror=s=>{const o=a1(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){const r=[];return new Z((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new vG(a),u=n(a.primaryKey,a.value,l);if(u instanceof Z){const c=u.catch(d=>(l.done(),Z.reject(d)));r.push(c)}l.isDone?i():l.K===null?a.continue():a.continue(l.K)}}).next(()=>Z.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Ea(t){return new Z((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=a1(r.target.error);n(i)}})}let qI=!1;function a1(t){const e=us.S(ln());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new fe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return qI||(qI=!0,setTimeout(()=>{throw r},0)),r}}return t}class yG{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){he("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{he("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){ia(n)?he("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await ra(n)}await this.X(6e4)})}}class xG{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let i=n,s=!0;return Z.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return he("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(he("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=PP(s);o1(o,r)>0&&(r=o)}),new ai(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}zr.oe=-1;function Wf(t){return t==null}function yf(t){return t===0&&1/t==-1/0}function MP(t){return typeof t=="number"&&Number.isInteger(t)&&!yf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=jI(e)),e=wG(t.get(n),e);return jI(e)}function wG(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function jI(t){return t+""}function is(t){const e=t.length;if(Ke(e>=2),e===2)return Ke(t.charAt(0)===""&&t.charAt(1)===""),gt.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&Be(),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:Be()}s=o+2}return new gt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(t,e){return[t,Nr(e)]}function LP(t,e,n){return[t,Nr(e),n]}const TG={},EG=["prefixPath","collectionGroup","readTime","documentId"],IG=["prefixPath","collectionGroup","documentId"],SG=["collectionGroup","readTime","prefixPath","documentId"],AG=["canonicalId","targetId"],CG=["targetId","path"],RG=["path","targetId"],kG=["collectionId","parent"],NG=["indexId","uid"],PG=["uid","sequenceNumber"],bG=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],DG=["indexId","uid","orderedDocumentKey"],FG=["userId","collectionPath","documentId"],MG=["userId","collectionPath","largestBatchId"],LG=["userId","collectionGroup","largestBatchId"],OP=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],OG=[...OP,"documentOverlays"],VP=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],UP=VP,l1=[...UP,"indexConfiguration","indexState","indexEntries"],VG=l1,UG=[...l1,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_ extends DP{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function Dn(t,e){const n=Fe(t);return us.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function gl(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function BP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,n){this.comparator=e,this.root=n||Wn.EMPTY}insert(e,n){return new Ut(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Wn.BLACK,null,null))}remove(e){return new Ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qh(this.root,e,this.comparator,!0)}}class Qh{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Wn.RED,this.left=i??Wn.EMPTY,this.right=s??Wn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Wn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Wn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Wn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Be();const e=this.left.check();if(e!==this.right.check())throw Be();return e+(this.isRed()?0:1)}}Wn.EMPTY=null,Wn.RED=!0,Wn.BLACK=!1;Wn.EMPTY=new class{constructor(){this.size=0}get key(){throw Be()}get value(){throw Be()}get color(){throw Be()}get left(){throw Be()}get right(){throw Be()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Wn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.comparator=e,this.data=new Ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new YI(this.data.getIterator())}getIteratorFrom(e){return new YI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Mt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Mt(this.comparator);return n.data=e,n}}class YI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Fl(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e){this.fields=e,e.sort(Qt.comparator)}static empty(){return new Gr([])}unionWith(e){let n=new Mt(Qt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Gr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return zu(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BG(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new zP("Invalid base64 string: "+s):s}}(e);return new fn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new fn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fn.EMPTY_BYTE_STRING=new fn("");const zG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ws(t){if(Ke(!!t),typeof t=="string"){let e=0;const n=zG.exec(t);if(Ke(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Yt(t.seconds),nanos:Yt(t.nanos)}}function Yt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Wo(t){return typeof t=="string"?fn.fromBase64String(t):fn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function u1(t){const e=t.mapValue.fields.__previous_value__;return bm(e)?u1(e):e}function xf(t){const e=Ws(t.mapValue.fields.__local_write_time__.timestampValue);return new tn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GG{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class qo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new qo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof qo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},A0={nullValue:"NULL_VALUE"};function Xa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?bm(t)?4:GP(t)?9007199254740991:Dm(t)?10:11:Be()}function ps(t,e){if(t===e)return!0;const n=Xa(t);if(n!==Xa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return xf(t).isEqual(xf(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Ws(i.timestampValue),a=Ws(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Wo(i.bytesValue).isEqual(Wo(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Yt(i.geoPointValue.latitude)===Yt(s.geoPointValue.latitude)&&Yt(i.geoPointValue.longitude)===Yt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Yt(i.integerValue)===Yt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Yt(i.doubleValue),a=Yt(s.doubleValue);return o===a?yf(o)===yf(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return zu(t.arrayValue.values||[],e.arrayValue.values||[],ps);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(JI(o)!==JI(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ps(o[l],a[l])))return!1;return!0}(t,e);default:return Be()}}function wf(t,e){return(t.values||[]).find(n=>ps(n,e))!==void 0}function jo(t,e){if(t===e)return 0;const n=Xa(t),r=Xa(e);if(n!==r)return lt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return lt(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Yt(s.integerValue||s.doubleValue),l=Yt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return XI(t.timestampValue,e.timestampValue);case 4:return XI(xf(t),xf(e));case 5:return lt(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Wo(s),l=Wo(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const c=lt(a[u],l[u]);if(c!==0)return c}return lt(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=lt(Yt(s.latitude),Yt(o.latitude));return a!==0?a:lt(Yt(s.longitude),Yt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return QI(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,c;const d=s.fields||{},h=o.fields||{},g=(a=d.value)===null||a===void 0?void 0:a.arrayValue,_=(l=h.value)===null||l===void 0?void 0:l.arrayValue,x=lt(((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0,((c=_==null?void 0:_.values)===null||c===void 0?void 0:c.length)||0);return x!==0?x:QI(g,_)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Eo.mapValue&&o===Eo.mapValue)return 0;if(s===Eo.mapValue)return 1;if(o===Eo.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let d=0;d<l.length&&d<c.length;++d){const h=lt(l[d],c[d]);if(h!==0)return h;const g=jo(a[l[d]],u[c[d]]);if(g!==0)return g}return lt(l.length,c.length)}(t.mapValue,e.mapValue);default:throw Be()}}function XI(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return lt(t,e);const n=Ws(t),r=Ws(e),i=lt(n.seconds,r.seconds);return i!==0?i:lt(n.nanos,r.nanos)}function QI(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=jo(n[i],r[i]);if(s)return s}return lt(n.length,r.length)}function Gu(t){return W_(t)}function W_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ws(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Wo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return De.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=W_(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${W_(n.fields[o])}`;return i+"}"}(t.mapValue):Be()}function Qa(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function q_(t){return!!t&&"integerValue"in t}function Tf(t){return!!t&&"arrayValue"in t}function ZI(t){return!!t&&"nullValue"in t}function eS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function C0(t){return!!t&&"mapValue"in t}function Dm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function bd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return gl(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=bd(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=bd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function GP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const HP={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function HG(t){return"nullValue"in t?A0:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Qa(qo.empty(),De.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Dm(t)?HP:{mapValue:{}}:Be()}function $G(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Qa(qo.empty(),De.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?HP:"mapValue"in t?Dm(t)?{mapValue:{}}:Eo:Be()}function tS(t,e){const n=jo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function nS(t,e){const n=jo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.value=e}static empty(){return new jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!C0(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=bd(n)}setAll(e){let n=Qt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=bd(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());C0(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ps(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];C0(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){gl(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new jn(bd(this.value))}}function $P(t){const e=[];return gl(t.fields,(n,r)=>{const i=new Qt([n]);if(C0(r)){const s=$P(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Gr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ht(e,0,Qe.min(),Qe.min(),Qe.min(),jn.empty(),0)}static newFoundDocument(e,n,r,i){return new Ht(e,1,n,Qe.min(),r,i,0)}static newNoDocument(e,n){return new Ht(e,2,n,Qe.min(),Qe.min(),jn.empty(),0)}static newUnknownDocument(e,n){return new Ht(e,3,n,Qe.min(),Qe.min(),jn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Qe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,n){this.position=e,this.inclusive=n}}function rS(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=De.comparator(De.fromName(o.referenceValue),n.key):r=jo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function iS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ps(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,n="asc"){this.field=e,this.dir=n}}function WG(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{}class vt extends WP{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new qG(e,n,r):n==="array-contains"?new JG(e,r):n==="in"?new XP(e,r):n==="not-in"?new YG(e,r):n==="array-contains-any"?new XG(e,r):new vt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new jG(e,r):new KG(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(jo(n,this.value)):n!==null&&Xa(this.value)===Xa(n)&&this.matchesComparison(jo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Be()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pt extends WP{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Pt(e,n)}matches(e){return Hu(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Hu(t){return t.op==="and"}function j_(t){return t.op==="or"}function c1(t){return qP(t)&&Hu(t)}function qP(t){for(const e of t.filters)if(e instanceof Pt)return!1;return!0}function K_(t){if(t instanceof vt)return t.field.canonicalString()+t.op.toString()+Gu(t.value);if(c1(t))return t.filters.map(e=>K_(e)).join(",");{const e=t.filters.map(n=>K_(n)).join(",");return`${t.op}(${e})`}}function jP(t,e){return t instanceof vt?function(r,i){return i instanceof vt&&r.op===i.op&&r.field.isEqual(i.field)&&ps(r.value,i.value)}(t,e):t instanceof Pt?function(r,i){return i instanceof Pt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&jP(o,i.filters[a]),!0):!1}(t,e):void Be()}function KP(t,e){const n=t.filters.concat(e);return Pt.create(n,t.op)}function JP(t){return t instanceof vt?function(n){return`${n.field.canonicalString()} ${n.op} ${Gu(n.value)}`}(t):t instanceof Pt?function(n){return n.op.toString()+" {"+n.getFilters().map(JP).join(" ,")+"}"}(t):"Filter"}class qG extends vt{constructor(e,n,r){super(e,n,r),this.key=De.fromName(r.referenceValue)}matches(e){const n=De.comparator(e.key,this.key);return this.matchesComparison(n)}}class jG extends vt{constructor(e,n){super(e,"in",n),this.keys=YP("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class KG extends vt{constructor(e,n){super(e,"not-in",n),this.keys=YP("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function YP(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>De.fromName(r.referenceValue))}class JG extends vt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Tf(n)&&wf(n.arrayValue,this.value)}}class XP extends vt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&wf(this.value.arrayValue,n)}}class YG extends vt{constructor(e,n){super(e,"not-in",n)}matches(e){if(wf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!wf(this.value.arrayValue,n)}}class XG extends vt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Tf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>wf(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QG{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function J_(t,e=null,n=[],r=[],i=null,s=null,o=null){return new QG(t,e,n,r,i,s,o)}function Za(t){const e=Fe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>K_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Wf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Gu(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Gu(r)).join(",")),e.ue=n}return e.ue}function qf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!WG(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!jP(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!iS(t.startAt,e.startAt)&&iS(t.endAt,e.endAt)}function Fp(t){return De.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Mp(t,e){return t.filters.filter(n=>n instanceof vt&&n.field.isEqual(e))}function sS(t,e,n){let r=A0,i=!0;for(const s of Mp(t,e)){let o=A0,a=!0;switch(s.op){case"<":case"<=":o=HG(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=A0}tS({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];tS({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function oS(t,e,n){let r=Eo,i=!0;for(const s of Mp(t,e)){let o=Eo,a=!0;switch(s.op){case">=":case">":o=$G(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Eo}nS({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];nS({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function QP(t,e,n,r,i,s,o,a){return new Ys(t,e,n,r,i,s,o,a)}function mc(t){return new Ys(t)}function aS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function d1(t){return t.collectionGroup!==null}function Tu(t){const e=Fe(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Mt(Qt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Ef(s,r))}),n.has(Qt.keyField().canonicalString())||e.ce.push(new Ef(Qt.keyField(),r))}return e.ce}function Pr(t){const e=Fe(t);return e.le||(e.le=ZG(e,Tu(t))),e.le}function ZG(t,e){if(t.limitType==="F")return J_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Ef(i.field,s)});const n=t.endAt?new Ko(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ko(t.startAt.position,t.startAt.inclusive):null;return J_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Y_(t,e){const n=t.filters.concat([e]);return new Ys(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Lp(t,e,n){return new Ys(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function jf(t,e){return qf(Pr(t),Pr(e))&&t.limitType===e.limitType}function ZP(t){return`${Za(Pr(t))}|lt:${t.limitType}`}function zl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>JP(i)).join(", ")}]`),Wf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Gu(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Gu(i)).join(",")),`Target(${r})`}(Pr(t))}; limitType=${t.limitType})`}function Kf(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):De.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Tu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=rS(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,Tu(r),i)||r.endAt&&!function(o,a,l){const u=rS(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,Tu(r),i))}(t,e)}function eb(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function tb(t){return(e,n)=>{let r=!1;for(const i of Tu(t)){const s=eH(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function eH(t,e,n){const r=t.field.isKeyField()?De.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?jo(l,u):Be()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Be()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){gl(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return BP(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tH=new Ut(De.comparator);function Hr(){return tH}const nb=new Ut(De.comparator);function fd(...t){let e=nb;for(const n of t)e=e.insert(n.key,n);return e}function rb(t){let e=nb;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ss(){return Dd()}function ib(){return Dd()}function Dd(){return new sa(t=>t.toString(),(t,e)=>t.isEqual(e))}const nH=new Ut(De.comparator),rH=new Mt(De.comparator);function ft(...t){let e=rH;for(const n of t)e=e.add(n);return e}const iH=new Mt(lt);function f1(){return iH}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yf(e)?"-0":e}}function sb(t){return{integerValue:""+t}}function ob(t,e){return MP(e)?sb(e):h1(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(){this._=void 0}}function sH(t,e,n){return t instanceof $u?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&bm(s)&&(s=u1(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof el?lb(t,e):t instanceof tl?ub(t,e):function(i,s){const o=ab(i,s),a=lS(o)+lS(i.Pe);return q_(o)&&q_(i.Pe)?sb(a):h1(i.serializer,a)}(t,e)}function oH(t,e,n){return t instanceof el?lb(t,e):t instanceof tl?ub(t,e):n}function ab(t,e){return t instanceof Wu?function(r){return q_(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class $u extends Fm{}class el extends Fm{constructor(e){super(),this.elements=e}}function lb(t,e){const n=cb(e);for(const r of t.elements)n.some(i=>ps(i,r))||n.push(r);return{arrayValue:{values:n}}}class tl extends Fm{constructor(e){super(),this.elements=e}}function ub(t,e){let n=cb(e);for(const r of t.elements)n=n.filter(i=>!ps(i,r));return{arrayValue:{values:n}}}class Wu extends Fm{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function lS(t){return Yt(t.integerValue||t.doubleValue)}function cb(t){return Tf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,n){this.field=e,this.transform=n}}function aH(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof el&&i instanceof el||r instanceof tl&&i instanceof tl?zu(r.elements,i.elements,ps):r instanceof Wu&&i instanceof Wu?ps(r.Pe,i.Pe):r instanceof $u&&i instanceof $u}(t.transform,e.transform)}class lH{constructor(e,n){this.version=e,this.transformResults=n}}class Zt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Zt}static exists(e){return new Zt(void 0,e)}static updateTime(e){return new Zt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function R0(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Mm{}function db(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new vc(t.key,Zt.none()):new gc(t.key,t.data,Zt.none());{const n=t.data,r=jn.empty();let i=new Mt(Qt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Xs(t.key,r,new Gr(i.toArray()),Zt.none())}}function uH(t,e,n){t instanceof gc?function(i,s,o){const a=i.value.clone(),l=cS(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Xs?function(i,s,o){if(!R0(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=cS(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(fb(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Fd(t,e,n,r){return t instanceof gc?function(s,o,a,l){if(!R0(s.precondition,o))return a;const u=s.value.clone(),c=dS(s.fieldTransforms,l,o);return u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Xs?function(s,o,a,l){if(!R0(s.precondition,o))return a;const u=dS(s.fieldTransforms,l,o),c=o.data;return c.setAll(fb(s)),c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return R0(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function cH(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=ab(r.transform,i||null);s!=null&&(n===null&&(n=jn.empty()),n.set(r.field,s))}return n||null}function uS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&zu(r,i,(s,o)=>aH(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class gc extends Mm{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Xs extends Mm{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function fb(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function cS(t,e,n){const r=new Map;Ke(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,oH(o,a,n[i]))}return r}function dS(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,sH(s,o,e))}return r}class vc extends Mm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class p1 extends Mm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&uH(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Fd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Fd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=ib();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=db(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Qe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ft())}isEqual(e){return this.batchId===e.batchId&&zu(this.mutations,e.mutations,(n,r)=>uS(n,r))&&zu(this.baseMutations,e.baseMutations,(n,r)=>uS(n,r))}}class g1{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ke(e.mutations.length===r.length);let i=function(){return nH}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new g1(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dH{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wn,yt;function hb(t){switch(t){default:return Be();case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0}}function pb(t){if(t===void 0)return vn("GRPC error has no .code"),ne.UNKNOWN;switch(t){case wn.OK:return ne.OK;case wn.CANCELLED:return ne.CANCELLED;case wn.UNKNOWN:return ne.UNKNOWN;case wn.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case wn.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case wn.INTERNAL:return ne.INTERNAL;case wn.UNAVAILABLE:return ne.UNAVAILABLE;case wn.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case wn.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case wn.NOT_FOUND:return ne.NOT_FOUND;case wn.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case wn.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case wn.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case wn.ABORTED:return ne.ABORTED;case wn.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case wn.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case wn.DATA_LOSS:return ne.DATA_LOSS;default:return Be()}}(yt=wn||(wn={}))[yt.OK=0]="OK",yt[yt.CANCELLED=1]="CANCELLED",yt[yt.UNKNOWN=2]="UNKNOWN",yt[yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yt[yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yt[yt.NOT_FOUND=5]="NOT_FOUND",yt[yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",yt[yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",yt[yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",yt[yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yt[yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yt[yt.ABORTED=10]="ABORTED",yt[yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",yt[yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",yt[yt.INTERNAL=13]="INTERNAL",yt[yt.UNAVAILABLE=14]="UNAVAILABLE",yt[yt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mb(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fH=new Va([4294967295,4294967295],0);function fS(t){const e=mb().encode(t),n=new wP;return n.update(e),new Uint8Array(n.digest())}function hS(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Va([n,r],0),new Va([i,s],0)]}class _1{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new hd(`Invalid padding: ${n}`);if(r<0)throw new hd(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new hd(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new hd(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Va.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Va.fromNumber(r)));return i.compare(fH)===1&&(i=new Va([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=fS(e),[r,i]=hS(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new _1(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=fS(e),[r,i]=hS(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class hd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Xf.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Yf(Qe.min(),i,new Ut(lt),Hr(),ft())}}class Xf{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Xf(r,n,ft(),ft(),ft())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class gb{constructor(e,n){this.targetId=e,this.me=n}}class vb{constructor(e,n,r=fn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class pS{constructor(){this.fe=0,this.ge=gS(),this.pe=fn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ft(),n=ft(),r=ft();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Be()}}),new Xf(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=gS()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ke(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class hH{constructor(e){this.Le=e,this.Be=new Map,this.ke=Hr(),this.qe=mS(),this.Qe=new Ut(lt)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Be()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Fp(s))if(r===0){const o=new De(s.path);this.Ue(n,o,Ht.newNoDocument(o,Qe.min()))}else Ke(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Wo(r).toUint8Array()}catch(l){if(l instanceof zP)return hs("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new _1(o,i,s)}catch(l){return hs(l instanceof hd?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Fp(a.target)){const l=new De(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Ht.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ft();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Yf(e,n,this.Qe,this.ke,r);return this.ke=Hr(),this.qe=mS(),this.Qe=new Ut(lt),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new pS,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Mt(lt),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||he("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new pS),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function mS(){return new Ut(De.comparator)}function gS(){return new Ut(De.comparator)}const pH={asc:"ASCENDING",desc:"DESCENDING"},mH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gH={and:"AND",or:"OR"};class vH{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function X_(t,e){return t.useProto3Json||Wf(e)?e:{value:e}}function qu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _b(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function _H(t,e){return qu(t,e.toTimestamp())}function _n(t){return Ke(!!t),Qe.fromTimestamp(function(n){const r=Ws(n);return new tn(r.seconds,r.nanos)}(t))}function y1(t,e){return Q_(t,e).canonicalString()}function Q_(t,e){const n=function(i){return new gt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function yb(t){const e=gt.fromString(t);return Ke(kb(e)),e}function If(t,e){return y1(t.databaseId,e.path)}function cs(t,e){const n=yb(e);if(n.get(1)!==t.databaseId.projectId)throw new fe(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new fe(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new De(Tb(n))}function xb(t,e){return y1(t.databaseId,e)}function wb(t){const e=yb(t);return e.length===4?gt.emptyPath():Tb(e)}function Z_(t){return new gt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Tb(t){return Ke(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function vS(t,e,n){return{name:If(t,e),fields:n.value.mapValue.fields}}function Eb(t,e,n){const r=cs(t,e.name),i=_n(e.updateTime),s=e.createTime?_n(e.createTime):Qe.min(),o=new jn({mapValue:{fields:e.fields}}),a=Ht.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function yH(t,e){return"found"in e?function(r,i){Ke(!!i.found),i.found.name,i.found.updateTime;const s=cs(r,i.found.name),o=_n(i.found.updateTime),a=i.found.createTime?_n(i.found.createTime):Qe.min(),l=new jn({mapValue:{fields:i.found.fields}});return Ht.newFoundDocument(s,o,a,l)}(t,e):"missing"in e?function(r,i){Ke(!!i.missing),Ke(!!i.readTime);const s=cs(r,i.missing),o=_n(i.readTime);return Ht.newNoDocument(s,o)}(t,e):Be()}function xH(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Be()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,c){return u.useProto3Json?(Ke(c===void 0||typeof c=="string"),fn.fromBase64String(c||"")):(Ke(c===void 0||c instanceof Buffer||c instanceof Uint8Array),fn.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const c=u.code===void 0?ne.UNKNOWN:pb(u.code);return new fe(c,u.message||"")}(o);n=new vb(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=cs(t,r.document.name),s=_n(r.document.updateTime),o=r.document.createTime?_n(r.document.createTime):Qe.min(),a=new jn({mapValue:{fields:r.document.fields}}),l=Ht.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new k0(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=cs(t,r.document),s=r.readTime?_n(r.readTime):Qe.min(),o=Ht.newNoDocument(i,s),a=r.removedTargetIds||[];n=new k0([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=cs(t,r.document),s=r.removedTargetIds||[];n=new k0([],s,i,null)}else{if(!("filter"in e))return Be();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new dH(i,s),a=r.targetId;n=new gb(a,o)}}return n}function Sf(t,e){let n;if(e instanceof gc)n={update:vS(t,e.key,e.value)};else if(e instanceof vc)n={delete:If(t,e.key)};else if(e instanceof Xs)n={update:vS(t,e.key,e.data),updateMask:AH(e.fieldMask)};else{if(!(e instanceof p1))return Be();n={verify:If(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof $u)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof el)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof tl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Wu)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Be()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:_H(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Be()}(t,e.precondition)),n}function ey(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Zt.updateTime(_n(s.updateTime)):s.exists!==void 0?Zt.exists(s.exists):Zt.none()}(e.currentDocument):Zt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)Ke(a.setToServerValue==="REQUEST_TIME"),l=new $u;else if("appendMissingElements"in a){const c=a.appendMissingElements.values||[];l=new el(c)}else if("removeAllFromArray"in a){const c=a.removeAllFromArray.values||[];l=new tl(c)}else"increment"in a?l=new Wu(o,a.increment):Be();const u=Qt.fromServerFormat(a.fieldPath);return new Jf(u,l)}(t,i)):[];if(e.update){e.update.name;const i=cs(t,e.update.name),s=new jn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const u=l.fieldPaths||[];return new Gr(u.map(c=>Qt.fromServerFormat(c)))}(e.updateMask);return new Xs(i,s,o,n,r)}return new gc(i,s,n,r)}if(e.delete){const i=cs(t,e.delete);return new vc(i,n)}if(e.verify){const i=cs(t,e.verify);return new p1(i,n)}return Be()}function wH(t,e){return t&&t.length>0?(Ke(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?_n(i.updateTime):_n(s);return o.isEqual(Qe.min())&&(o=_n(s)),new lH(o,i.transformResults||[])}(n,e))):[]}function Ib(t,e){return{documents:[xb(t,e.path)]}}function Sb(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=xb(t,i);const s=function(u){if(u.length!==0)return Rb(Pt.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(c=>function(h){return{field:Gl(h.field),direction:EH(h.dir)}}(c))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=X_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function Ab(t){let e=wb(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ke(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];n.where&&(s=function(d){const h=Cb(d);return h instanceof Pt&&c1(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(h=>function(_){return new Ef(Hl(_.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,Wf(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(d){const h=!!d.before,g=d.values||[];return new Ko(g,h)}(n.startAt));let u=null;return n.endAt&&(u=function(d){const h=!d.before,g=d.values||[];return new Ko(g,h)}(n.endAt)),QP(e,i,o,s,a,"F",l,u)}function TH(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Be()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Cb(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Hl(n.unaryFilter.field);return vt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Hl(n.unaryFilter.field);return vt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Hl(n.unaryFilter.field);return vt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Hl(n.unaryFilter.field);return vt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Be()}}(t):t.fieldFilter!==void 0?function(n){return vt.create(Hl(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Be()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Pt.create(n.compositeFilter.filters.map(r=>Cb(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Be()}}(n.compositeFilter.op))}(t):Be()}function EH(t){return pH[t]}function IH(t){return mH[t]}function SH(t){return gH[t]}function Gl(t){return{fieldPath:t.canonicalString()}}function Hl(t){return Qt.fromServerFormat(t.fieldPath)}function Rb(t){return t instanceof vt?function(n){if(n.op==="=="){if(eS(n.value))return{unaryFilter:{field:Gl(n.field),op:"IS_NAN"}};if(ZI(n.value))return{unaryFilter:{field:Gl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(eS(n.value))return{unaryFilter:{field:Gl(n.field),op:"IS_NOT_NAN"}};if(ZI(n.value))return{unaryFilter:{field:Gl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gl(n.field),op:IH(n.op),value:n.value}}}(t):t instanceof Pt?function(n){const r=n.getFilters().map(i=>Rb(i));return r.length===1?r[0]:{compositeFilter:{op:SH(n.op),filters:r}}}(t):Be()}function AH(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function kb(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,n,r,i,s=Qe.min(),o=Qe.min(),a=fn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ks(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e){this.ct=e}}function CH(t,e){let n;if(e.document)n=Eb(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=De.fromSegments(e.noDocument.path),i=rl(e.noDocument.readTime);n=Ht.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Be();{const r=De.fromSegments(e.unknownDocument.path),i=rl(e.unknownDocument.version);n=Ht.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new tn(i[0],i[1]);return Qe.fromTimestamp(s)}(e.readTime)),n}function _S(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Op(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:If(s,o.key),fields:o.data.value.mapValue.fields,updateTime:qu(s,o.version.toTimestamp()),createTime:qu(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:nl(e.version)};else{if(!e.isUnknownDocument())return Be();r.unknownDocument={path:n.path.toArray(),version:nl(e.version)}}return r}function Op(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function nl(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function rl(t){const e=new tn(t.seconds,t.nanoseconds);return Qe.fromTimestamp(e)}function Ia(t,e){const n=(e.baseMutations||[]).map(s=>ey(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>ey(t.ct,s)),i=tn.fromMillis(e.localWriteTimeMs);return new m1(e.batchId,i,n,r)}function pd(t){const e=rl(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?rl(t.lastLimboFreeSnapshotVersion):Qe.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return Ke(s.documents.length===1),Pr(mc(wb(s.documents[0])))}(t.query):function(s){return Pr(Ab(s))}(t.query),new ks(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,fn.fromBase64String(t.resumeToken))}function Pb(t,e){const n=nl(e.snapshotVersion),r=nl(e.lastLimboFreeSnapshotVersion);let i;i=Fp(e.target)?Ib(t.ct,e.target):Sb(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Za(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function x1(t){const e=Ab({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Lp(e,e.limit,"L"):e}function wv(t,e){return new v1(e.largestBatchId,ey(t.ct,e.overlayMutation))}function yS(t,e){const n=e.path.lastSegment();return[t,Nr(e.path.popLast()),n]}function xS(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:nl(r.readTime),documentKey:Nr(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RH{getBundleMetadata(e,n){return wS(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:rl(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return wS(e).put(function(i){return{bundleId:i.id,createTime:nl(_n(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return TS(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:x1(s.bundledQuery),readTime:rl(s.readTime)}}(r)})}saveNamedQuery(e,n){return TS(e).put(function(i){return{name:i.name,readTime:nl(_n(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function wS(t){return Dn(t,"bundles")}function TS(t){return Dn(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new Lm(e,r)}getOverlay(e,n){return jc(e).get(yS(this.userId,n)).next(r=>r?wv(this.serializer,r):null)}getOverlays(e,n){const r=ss();return Z.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new v1(n,o);i.push(this.ht(e,a))}),Z.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(Nr(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(jc(e).j("collectionPathOverlayIndex",a))}),Z.waitFor(s)}getOverlaysForCollection(e,n,r){const i=ss(),s=Nr(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return jc(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const u=wv(this.serializer,l);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=ss();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return jc(e).J({index:"collectionGroupOverlayIndex",range:a},(l,u,c)=>{const d=wv(this.serializer,u);s.size()<i||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):c.done()}).next(()=>s)}ht(e,n){return jc(e).put(function(i,s,o){const[a,l,u]=yS(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Sf(i.ct,o.mutation)}}(this.serializer,this.userId,n))}}function jc(t){return Dn(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kH{Pt(e){return Dn(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?fn.fromUint8Array(r):fn.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Yt(e.integerValue));else if("doubleValue"in e){const r=Yt(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),yf(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Ws(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Wo(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?GP(e)?this.dt(n,Number.MAX_SAFE_INTEGER):Dm(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):Be()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;const s=e.fields||{};this.dt(n,53);const o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Yt(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),De.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}Sa.vt=new Sa;function NH(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function ES(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=NH(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class PH{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=n.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const n=this.qt(e),r=ES(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Kt(e){const n=this.qt(e),r=ES(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class bH{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class DH{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Kc{constructor(){this.jt=new PH,this.Ht=new bH(this.jt),this.Jt=new DH(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Aa(this.indexId,this.documentKey,this.arrayValue,r)}}function uo(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=IS(t.arrayValue,e.arrayValue),n!==0?n:(n=IS(t.directionalValue,e.directionalValue),n!==0?n:De.comparator(t.documentKey,e.documentKey)))}function IS(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e){this.Xt=new Mt((n,r)=>Qt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Ke(e.collectionGroup===this.collectionId),this.nn)return!1;const n=H_(e);if(n!==void 0&&!this.sn(n))return!1;const r=xa(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.on(a,l)||!this._n(this.en[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Mt(Qt.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new I0(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new I0(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new I0(r.field,r.dir==="asc"?0:1)));return new Dp(Dp.UNKNOWN_ID,this.collectionId,n,_f.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(t){var e,n;if(Ke(t instanceof vt||t instanceof Pt),t instanceof vt){if(t instanceof XP){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>vt.create(t.field,"==",s)))||[];return Pt.create(i,"or")}return t}const r=t.filters.map(i=>bb(i));return Pt.create(r,t.op)}function FH(t){if(t.getFilters().length===0)return[];const e=ry(bb(t));return Ke(Db(e)),ty(e)||ny(e)?[e]:e.getFilters()}function ty(t){return t instanceof vt}function ny(t){return t instanceof Pt&&c1(t)}function Db(t){return ty(t)||ny(t)||function(n){if(n instanceof Pt&&j_(n)){for(const r of n.getFilters())if(!ty(r)&&!ny(r))return!1;return!0}return!1}(t)}function ry(t){if(Ke(t instanceof vt||t instanceof Pt),t instanceof vt)return t;if(t.filters.length===1)return ry(t.filters[0]);const e=t.filters.map(r=>ry(r));let n=Pt.create(e,t.op);return n=Vp(n),Db(n)?n:(Ke(n instanceof Pt),Ke(Hu(n)),Ke(n.filters.length>1),n.filters.reduce((r,i)=>w1(r,i)))}function w1(t,e){let n;return Ke(t instanceof vt||t instanceof Pt),Ke(e instanceof vt||e instanceof Pt),n=t instanceof vt?e instanceof vt?function(i,s){return Pt.create([i,s],"and")}(t,e):AS(t,e):e instanceof vt?AS(e,t):function(i,s){if(Ke(i.filters.length>0&&s.filters.length>0),Hu(i)&&Hu(s))return KP(i,s.getFilters());const o=j_(i)?i:s,a=j_(i)?s:i,l=o.filters.map(u=>w1(u,a));return Pt.create(l,"or")}(t,e),Vp(n)}function AS(t,e){if(Hu(e))return KP(e,t.getFilters());{const n=e.filters.map(r=>w1(t,r));return Pt.create(n,"or")}}function Vp(t){if(Ke(t instanceof vt||t instanceof Pt),t instanceof vt)return t;const e=t.getFilters();if(e.length===1)return Vp(e[0]);if(qP(t))return t;const n=e.map(i=>Vp(i)),r=[];return n.forEach(i=>{i instanceof vt?r.push(i):i instanceof Pt&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Pt.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MH{constructor(){this.un=new T1}addToCollectionParentIndex(e,n){return this.un.add(n),Z.resolve()}getCollectionParents(e,n){return Z.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Z.resolve()}deleteFieldIndex(e,n){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,n){return Z.resolve()}getDocumentsMatchingTarget(e,n){return Z.resolve(null)}getIndexType(e,n){return Z.resolve(0)}getFieldIndexes(e,n){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,n){return Z.resolve(ai.min())}getMinOffsetFromCollectionGroup(e,n){return Z.resolve(ai.min())}updateCollectionGroup(e,n,r){return Z.resolve()}updateIndexEntries(e,n){return Z.resolve()}}class T1{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Mt(gt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Mt(gt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zh=new Uint8Array(0);class LH{constructor(e,n){this.databaseId=n,this.cn=new T1,this.ln=new sa(r=>Za(r),(r,i)=>qf(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const s={collectionId:r,parent:Nr(i)};return CS(e).put(s)}return Z.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[kP(n),""],!1,!0);return CS(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(is(o.parent))}return r})}addFieldIndex(e,n){const r=Jc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=Ll(e);return s.next(a=>{o.put(xS(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Jc(e),i=Ll(e),s=Ml(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Jc(e),r=Ml(e),i=Ll(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return Z.forEach(this.hn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new SS(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=Ml(e);let i=!0;const s=new Map;return Z.forEach(this.hn(n),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=ft();const a=[];return Z.forEach(s,(l,u)=>{he("IndexedDbIndexManager",`Using index ${function(E){return`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(N=>`${N.fieldPath}:${N.kind}`).join(",")}`}(l)} to execute ${Za(n)}`);const c=function(E,N){const F=H_(N);if(F===void 0)return null;for(const O of Mp(E,F.fieldPath))switch(O.op){case"array-contains-any":return O.value.arrayValue.values||[];case"array-contains":return[O.value]}return null}(u,l),d=function(E,N){const F=new Map;for(const O of xa(N))for(const S of Mp(E,O.fieldPath))switch(S.op){case"==":case"in":F.set(O.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return F.set(O.fieldPath.canonicalString(),S.value),Array.from(F.values())}return null}(u,l),h=function(E,N){const F=[];let O=!0;for(const S of xa(N)){const A=S.kind===0?sS(E,S.fieldPath,E.startAt):oS(E,S.fieldPath,E.startAt);F.push(A.value),O&&(O=A.inclusive)}return new Ko(F,O)}(u,l),g=function(E,N){const F=[];let O=!0;for(const S of xa(N)){const A=S.kind===0?oS(E,S.fieldPath,E.endAt):sS(E,S.fieldPath,E.endAt);F.push(A.value),O&&(O=A.inclusive)}return new Ko(F,O)}(u,l),_=this.In(l,u,h),x=this.In(l,u,g),w=this.Tn(l,u,d),y=this.En(l.indexId,c,_,h.inclusive,x,g.inclusive,w);return Z.forEach(y,T=>r.G(T,n.limit).next(E=>{E.forEach(N=>{const F=De.fromSegments(N.documentKey);o.has(F)||(o=o.add(F),a.push(F))})}))}).next(()=>a)}return Z.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=FH(Pt.create(e.filters,"and")).map(r=>J_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),u=l/(n!=null?n.length:1),c=[];for(let d=0;d<l;++d){const h=n?this.dn(n[d/u]):Zh,g=this.An(e,h,r[d%u],i),_=this.Rn(e,h,s[d%u],o),x=a.map(w=>this.An(e,h,w,!0));c.push(...this.createRange(g,_,x))}return c}An(e,n,r,i){const s=new Aa(e,De.empty(),n,r);return i?s:s.Zt()}Rn(e,n,r,i){const s=new Aa(e,De.empty(),n,r);return i?s.Zt():s}Pn(e,n){const r=new SS(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.hn(n);return Z.forEach(i,s=>this.Pn(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let u=new Mt(Qt.comparator),c=!1;for(const d of l.filters)for(const h of d.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?c=!0:u=u.add(h.field));for(const d of l.orderBy)d.field.isKeyField()||(u=u.add(d.field));return u.size+(c?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}Vn(e,n){const r=new Kc;for(const i of xa(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Yt(i.kind);Sa.vt.It(s,o)}return r.zt()}dn(e){const n=new Kc;return Sa.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new Kc;return Sa.vt.It(Qa(this.databaseId,n),r.Yt(function(s){const o=xa(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let i=[];i.push(new Kc);let s=0;for(const o of xa(e)){const a=r[s++];for(const l of i)if(this.fn(n,o.fieldPath)&&Tf(a))i=this.gn(i,o,a);else{const u=l.Yt(o.kind);Sa.vt.It(a,u)}}return this.pn(i)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new Kc;l.seed(a.zt()),Sa.vt.It(o,l.Yt(n.kind)),s.push(l)}return s}fn(e,n){return!!e.filters.find(r=>r instanceof vt&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Jc(e),i=Ll(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(s=>{const o=[];return Z.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(c,d){const h=d?new _f(d.sequenceNumber,new ai(rl(d.readTime),new De(is(d.documentKey)),d.largestBatchId)):_f.empty(),g=c.fields.map(([_,x])=>new I0(Qt.fromServerFormat(_),x));return new Dp(c.indexId,c.collectionGroup,g,h)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:lt(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Jc(e),s=Ll(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>Z.forEach(a,l=>s.put(xS(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return Z.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?Z.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),Z.forEach(a,l=>this.wn(e,i,l).next(u=>{const c=this.Sn(s,l);return u.isEqual(c)?Z.resolve():this.bn(e,s,l,u,c)}))))})}Dn(e,n,r,i){return Ml(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,i){return Ml(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const i=Ml(e);let s=new Mt(uo);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(o,a)=>{s=s.add(new Aa(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,n){let r=new Mt(uo);const i=this.Vn(n,e);if(i==null)return r;const s=H_(n);if(s!=null){const o=e.data.field(s.fieldPath);if(Tf(o))for(const a of o.arrayValue.values||[])r=r.add(new Aa(n.indexId,e.key,this.dn(a),i))}else r=r.add(new Aa(n.indexId,e.key,Zh,i));return r}bn(e,n,r,i,s){he("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(l,u,c,d,h){const g=l.getIterator(),_=u.getIterator();let x=Fl(g),w=Fl(_);for(;x||w;){let y=!1,T=!1;if(x&&w){const E=c(x,w);E<0?T=!0:E>0&&(y=!0)}else x!=null?T=!0:y=!0;y?(d(w),w=Fl(_)):T?(h(x),x=Fl(g)):(x=Fl(g),w=Fl(_))}}(i,s,uo,a=>{o.push(this.Dn(e,n,r,a))},a=>{o.push(this.vn(e,n,r,a))}),Z.waitFor(o)}yn(e){let n=1;return Ll(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>uo(o,a)).filter((o,a,l)=>!a||uo(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=uo(o,e),l=uo(o,n);if(a===0)i[0]=e.Zt();else if(a>0&&l<0)i.push(o),i.push(o.Zt());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Zh,[]],l=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Zh,[]];s.push(IDBKeyRange.bound(a,l))}return s}Cn(e,n){return uo(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(RS)}getMinOffset(e,n){return Z.mapArray(this.hn(n),r=>this.Pn(e,r).next(i=>i||Be())).next(RS)}}function CS(t){return Dn(t,"collectionParents")}function Ml(t){return Dn(t,"indexEntries")}function Jc(t){return Dn(t,"indexConfiguration")}function Ll(t){return Dn(t,"indexState")}function RS(t){Ke(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;o1(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new ai(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Or{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Or(e,Or.DEFAULT_COLLECTION_PERCENTILE,Or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.J({range:o},(c,d,h)=>(a++,h.delete()));s.push(l.next(()=>{Ke(a===1)}));const u=[];for(const c of n.mutations){const d=LP(e,c.key.path,n.batchId);s.push(i.delete(d)),u.push(c.key)}return Z.waitFor(s).next(()=>u)}function Up(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Be();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Or.DEFAULT_COLLECTION_PERCENTILE=10,Or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Or.DEFAULT=new Or(41943040,Or.DEFAULT_COLLECTION_PERCENTILE,Or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Or.DISABLED=new Or(-1,0,0);class Om{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,n,r,i){Ke(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Om(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return co(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=$l(e),o=co(e);return o.add({}).next(a=>{Ke(typeof a=="number");const l=new m1(a,n,r,i),u=function(g,_,x){const w=x.baseMutations.map(T=>Sf(g.ct,T)),y=x.mutations.map(T=>Sf(g.ct,T));return{userId:_,batchId:x.batchId,localWriteTimeMs:x.localWriteTime.toMillis(),baseMutations:w,mutations:y}}(this.serializer,this.userId,l),c=[];let d=new Mt((h,g)=>lt(h.canonicalString(),g.canonicalString()));for(const h of i){const g=LP(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),c.push(o.put(u)),c.push(s.put(g,TG))}return d.forEach(h=>{c.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Fn[a]=l.keys()}),Z.waitFor(c).next(()=>l)})}lookupMutationBatch(e,n){return co(e).get(n).next(r=>r?(Ke(r.userId===this.userId),Ia(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?Z.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Fn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return co(e).J({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(Ke(a.batchId>=r),s=Ia(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return co(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return co(e).U("userMutationsIndex",n).next(r=>r.map(i=>Ia(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=S0(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return $l(e).J({range:i},(o,a,l)=>{const[u,c,d]=o,h=is(c);if(u===this.userId&&n.path.isEqual(h))return co(e).get(d).next(g=>{if(!g)throw Be();Ke(g.userId===this.userId),s.push(Ia(this.serializer,g))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Mt(lt);const i=[];return n.forEach(s=>{const o=S0(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=$l(e).J({range:a},(u,c,d)=>{const[h,g,_]=u,x=is(g);h===this.userId&&s.path.isEqual(x)?r=r.add(_):d.done()});i.push(l)}),Z.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=S0(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Mt(lt);return $l(e).J({range:o},(l,u,c)=>{const[d,h,g]=l,_=is(h);d===this.userId&&r.isPrefixOf(_)?_.length===i&&(a=a.add(g)):c.done()}).next(()=>this.xn(e,a))}xn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(co(e).get(s).next(o=>{if(o===null)throw Be();Ke(o.userId===this.userId),r.push(Ia(this.serializer,o))}))}),Z.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return Fb(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),Z.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return Z.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return $l(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=is(s[1]);i.push(l)}else a.done()}).next(()=>{Ke(i.length===0)})})}containsKey(e,n){return Mb(e,this.userId,n)}Nn(e){return Lb(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Mb(t,e,n){const r=S0(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return $l(t).J({range:s,H:!0},(a,l,u)=>{const[c,d,h]=a;c===e&&d===i&&(o=!0),u.done()}).next(()=>o)}function co(t){return Dn(t,"mutations")}function $l(t){return Dn(t,"documentMutations")}function Lb(t){return Dn(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new il(0)}static kn(){return new il(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OH{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new il(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>Qe.fromTimestamp(new tn(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Qn(e,i)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Ol(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(Ke(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return Ol(e).J((o,a)=>{const l=pd(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>Z.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Ol(e).J((r,i)=>{const s=pd(i);n(s)})}qn(e){return NS(e).get("targetGlobalKey").next(n=>(Ke(n!==null),n))}Qn(e,n){return NS(e).put("targetGlobalKey",n)}Kn(e,n){return Ol(e).put(Pb(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Za(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Ol(e).J({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const u=pd(a);qf(n,u.target)&&(s=u,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=_o(e);return n.forEach(o=>{const a=Nr(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),Z.waitFor(i)}removeMatchingKeys(e,n,r){const i=_o(e);return Z.forEach(n,s=>{const o=Nr(s.path);return Z.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=_o(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=_o(e);let s=ft();return i.J({range:r,H:!0},(o,a,l)=>{const u=is(o[1]),c=new De(u);s=s.add(c)}).next(()=>s)}containsKey(e,n){const r=Nr(n.path),i=IDBKeyRange.bound([r],[kP(r)],!1,!0);let s=0;return _o(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],l,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}ot(e,n){return Ol(e).get(n).next(r=>r?pd(r):null)}}function Ol(t){return Dn(t,"targets")}function NS(t){return Dn(t,"targetGlobal")}function _o(t){return Dn(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PS([t,e],[n,r]){const i=lt(t,n);return i===0?lt(e,r):i}class VH{constructor(e){this.Un=e,this.buffer=new Mt(PS),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();PS(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class UH{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){he("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ia(n)?he("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await ra(n)}await this.Hn(3e5)})}}class BH{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return Z.resolve(zr.oe);const r=new VH(n);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(kS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kS):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,i,s,o,a,l,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(u=Date.now(),Bl()<=ht.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-c}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function zH(t,e){return new BH(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GH{constructor(e,n){this.db=e,this.garbageCollector=zH(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,i)=>n(i))}addReference(e,n,r){return e0(e,r)}removeReference(e,n,r){return e0(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return e0(e,n)}nr(e,n){return function(i,s){let o=!1;return Lb(i).Y(a=>Mb(i,a,s).next(l=>(l&&(o=!0),Z.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,a)=>{if(a<=n){const l=this.nr(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Qe.min()),_o(e).delete(function(d){return[0,Nr(d.path)]}(o))))});i.push(l)}}).next(()=>Z.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return e0(e,n)}tr(e,n){const r=_o(e);let i,s=zr.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:u})=>{o===0?(s!==zr.oe&&n(new De(is(i)),s),s=u,i=l):s=zr.oe}).next(()=>{s!==zr.oe&&n(new De(is(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function e0(t,e){return _o(t).put(function(r,i){return{targetId:0,path:Nr(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(){this.changes=new sa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ht.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HH{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return ga(e).put(r)}removeEntry(e,n,r){return ga(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Op(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=Ht.newInvalidDocument(n);return ga(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Yc(n))},(i,s)=>{r=this.ir(n,s)}).next(()=>r)}sr(e,n){let r={size:0,document:Ht.newInvalidDocument(n)};return ga(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Yc(n))},(i,s)=>{r={document:this.ir(n,s),size:Up(s)}}).next(()=>r)}getEntries(e,n){let r=Hr();return this._r(e,n,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,n){let r=Hr(),i=new Ut(De.comparator);return this._r(e,n,(s,o)=>{const a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,Up(o))}).next(()=>({documents:r,ur:i}))}_r(e,n,r){if(n.isEmpty())return Z.resolve();let i=new Mt(FS);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(Yc(i.first()),Yc(i.last())),o=i.getIterator();let a=o.getNext();return ga(e).J({index:"documentKeyIndex",range:s},(l,u,c)=>{const d=De.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&FS(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?c.$(Yc(a)):c.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Op(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ga(e).U(IDBKeyRange.bound(a,l,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let c=Hr();for(const d of u){const h=this.ir(De.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);h.isFoundDocument()&&(Kf(n,h)||i.has(h.key))&&(c=c.insert(h.key,h))}return c})}getAllFromCollectionGroup(e,n,r,i){let s=Hr();const o=DS(n,r),a=DS(n,ai.max());return ga(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,u,c)=>{const d=this.ir(De.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(d.key,d),s.size===i&&c.done()}).next(()=>s)}newChangeBuffer(e){return new $H(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return bS(e).get("remoteDocumentGlobalKey").next(n=>(Ke(!!n),n))}rr(e,n){return bS(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=CH(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Qe.min())))return r}return Ht.newInvalidDocument(e)}}function Vb(t){return new HH(t)}class $H extends Ob{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new sa(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Mt((s,o)=>lt(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.lr.get(s);if(n.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=_S(this.cr.serializer,o);i=i.add(s.path.popLast());const u=Up(l);r+=u-a.size,n.push(this.cr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=_S(this.cr.serializer,o.convertToNoDocument(Qe.min()));n.push(this.cr.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.cr.updateMetadata(e,r)),Z.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function bS(t){return Dn(t,"remoteDocumentGlobal")}function ga(t){return Dn(t,"remoteDocumentsV14")}function Yc(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function DS(t,e){const n=e.documentKey.path.toArray();return[t,Op(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function FS(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=lt(n[s],r[s]),i)return i;return i=lt(n.length,r.length),i||(i=lt(n[n.length-2],r[r.length-2]),i||lt(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WH{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Fd(r.mutation,i,Gr.empty(),tn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ft()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ft()){const i=ss();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=fd();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ss();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ft()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Hr();const o=Dd(),a=function(){return Dd()}();return n.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof Xs)?s=s.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),Fd(c.mutation,u,c.mutation.getFieldMask(),tn.now())):o.set(u.key,Gr.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var d;return a.set(u,new WH(c,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Dd();let i=new Ut((o,a)=>o-a),s=ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||Gr.empty();c=a.applyToLocalView(u,c),r.set(l,c);const d=(i.get(a.batchId)||ft()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,d=ib();c.forEach(h=>{if(!s.has(h)){const g=db(n.get(h),r.get(h));g!==null&&d.set(h,g),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return Z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return De.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):d1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):Z.resolve(ss());let a=-1,l=s;return o.next(u=>Z.forEach(u,(c,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(c)?Z.resolve():this.remoteDocumentCache.getEntry(e,c).next(h=>{l=l.insert(c,h)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,ft())).next(c=>({batchId:a,changes:rb(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new De(n)).next(r=>{let i=fd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=fd();return this.indexManager.getCollectionParents(e,s).next(a=>Z.forEach(a,l=>{const u=function(d,h){return new Ys(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(c=>{c.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const c=u.getKey();o.get(c)===null&&(o=o.insert(c,Ht.newInvalidDocument(c)))});let a=fd();return o.forEach((l,u)=>{const c=s.get(l);c!==void 0&&Fd(c.mutation,u,Gr.empty(),tn.now()),Kf(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qH{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Z.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:_n(i.createTime)}}(n)),Z.resolve()}getNamedQuery(e,n){return Z.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:x1(i.bundledQuery),readTime:_n(i.readTime)}}(n)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jH{constructor(){this.overlays=new Ut(De.comparator),this.Ir=new Map}getOverlay(e,n){return Z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ss();return Z.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),Z.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),Z.resolve()}getOverlaysForCollection(e,n,r){const i=ss(),s=n.length+1,o=new De(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return Z.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ut((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=s.get(u.largestBatchId);c===null&&(c=ss(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=ss(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=i)););return Z.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new v1(n,r));let s=this.Ir.get(n);s===void 0&&(s=ft(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KH{constructor(){this.sessionToken=fn.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(){this.Tr=new Mt(Fn.Er),this.dr=new Mt(Fn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Fn(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Fn(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new De(new gt([])),r=new Fn(n,e),i=new Fn(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new De(new gt([])),r=new Fn(n,e),i=new Fn(n,e+1);let s=ft();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Fn(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Fn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return De.comparator(e.key,n.key)||lt(e.wr,n.wr)}static Ar(e,n){return lt(e.wr,n.wr)||De.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JH{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Mt(Fn.Er)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new m1(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new Fn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Z.resolve(o)}lookupMutationBatch(e,n){return Z.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return Z.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Fn(n,0),i=new Fn(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),Z.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Mt(lt);return n.forEach(i=>{const s=new Fn(i,0),o=new Fn(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),Z.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;De.isDocumentKey(s)||(s=s.child(""));const o=new Fn(new De(s),0);let a=new Mt(lt);return this.br.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.wr)),!0)},o),Z.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ke(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Z.forEach(n.mutations,i=>{const s=new Fn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Fn(n,0),i=this.br.firstAfterOrEqual(r);return Z.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YH{constructor(e){this.Mr=e,this.docs=function(){return new Ut(De.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Z.resolve(r?r.document.mutableCopy():Ht.newInvalidDocument(n))}getEntries(e,n){let r=Hr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ht.newInvalidDocument(i))}),Z.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Hr();const o=n.path,a=new De(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||o1(PP(c),r)<=0||(i.has(c.key)||Kf(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Z.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Be()}Or(e,n){return Z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new XH(this)}getSize(e){return Z.resolve(this.size)}}class XH extends Ob{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),Z.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QH{constructor(e){this.persistence=e,this.Nr=new sa(n=>Za(n),qf),this.lastRemoteSnapshotVersion=Qe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new E1,this.targetCount=0,this.kr=il.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),Z.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new il(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Z.resolve()}updateTargetData(e,n){return this.Kn(n),Z.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Z.waitFor(s).next(()=>i)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return Z.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),Z.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Z.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Z.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return Z.resolve(r)}containsKey(e,n){return Z.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e,n){this.qr={},this.overlays={},this.Qr=new zr(0),this.Kr=!1,this.Kr=!0,this.$r=new KH,this.referenceDelegate=e(this),this.Ur=new QH(this),this.indexManager=new MH,this.remoteDocumentCache=function(i){return new YH(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Nb(n),this.Gr=new qH(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new jH,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new JH(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){he("MemoryPersistence","Starting transaction:",e);const i=new ZH(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return Z.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class ZH extends DP{constructor(e){super(),this.currentSequenceNumber=e}}class Vm{constructor(e){this.persistence=e,this.Jr=new E1,this.Yr=null}static Zr(e){return new Vm(e)}get Xr(){if(this.Yr)return this.Yr;throw Be()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),Z.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),Z.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Z.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.Xr,r=>{const i=De.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,Qe.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Z.or([()=>Z.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e${constructor(e){this.serializer=e}O(e,n,r,i){const s=new Pm("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",KI,{unique:!0}),l.createObjectStore("documentMutations")}(e),MS(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=Z.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),MS(e)),o=o.next(()=>function(l){const u=l.store("targetGlobal"),c={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Qe.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",c)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,u){return u.store("mutations").U().next(c=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",KI,{unique:!0});const d=u.store("mutations"),h=c.map(g=>d.put(g));return Z.waitFor(h)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const u=l.createObjectStore("documentOverlays",{keyPath:FG});u.createIndex("collectionPathOverlayIndex",MG,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",LG,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const u=l.createObjectStore("remoteDocumentsV14",{keyPath:EG});u.createIndex("documentKeyIndex",IG),u.createIndex("collectionGroupIndex",SG)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:NG}).createIndex("sequenceNumberIndex",PG,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:bG}).createIndex("documentKeyIndex",DG,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=Up(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>Z.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>Z.forEach(a,l=>{Ke(l.userId===s.userId);const u=Ia(this.serializer,l);return Fb(e,s.userId,u).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const l=new gt(o),u=function(d){return[0,Nr(d)]}(l);s.push(n.get(u).next(c=>c?Z.resolve():(d=>n.put({targetId:0,path:Nr(d),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>Z.waitFor(s))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:kG});const r=n.store("collectionParents"),i=new T1,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Nr(l)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new gt(o);return s(l.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,l],u)=>{const c=is(a);return s(c.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,i)=>{const s=pd(i),o=Pb(this.serializer,s);return n.put(o)})}_i(e,n){const r=n.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=n.store("remoteDocumentsV14"),l=function(d){return d.document?new De(gt.fromString(d.document.name).popFirst(5)):d.noDocument?De.fromSegments(d.noDocument.path):d.unknownDocument?De.fromSegments(d.unknownDocument.path):Be()}(o).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(u))}).next(()=>Z.waitFor(i))}ai(e,n){const r=n.store("mutations"),i=Vb(this.serializer),s=new Bb(Vm.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(l=>{var u;let c=(u=a.get(l.userId))!==null&&u!==void 0?u:ft();Ia(this.serializer,l).keys().forEach(d=>c=c.add(d)),a.set(l.userId,c)}),Z.forEach(a,(l,u)=>{const c=new Ln(u),d=Lm.lt(this.serializer,c),h=s.getIndexManager(c),g=Om.lt(c,this.serializer,h,s.referenceDelegate);return new Ub(i,g,d,h).recalculateAndSaveOverlaysForDocumentKeys(new $_(n,zr.oe),l).next()})})}}function MS(t){t.createObjectStore("targetDocuments",{keyPath:CG}).createIndex("documentTargetsIndex",RG,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",AG,{unique:!0}),t.createObjectStore("targetGlobal")}const Tv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class I1{constructor(e,n,r,i,s,o,a,l,u,c,d=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=u,this.li=c,this.hi=d,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=h=>Promise.resolve(),!I1.D())throw new fe(ne.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new GH(this,i),this.Ai=n+"main",this.serializer=new Nb(l),this.Ri=new us(this.Ai,this.hi,new e$(this.serializer)),this.$r=new kH,this.Ur=new OH(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Vb(this.serializer),this.Gr=new RH,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,c===!1&&vn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new fe(ne.FAILED_PRECONDITION,Tv);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new zr(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>t0(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(ia(e))return he("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return he("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Xc(e).get("owner").next(n=>Z.resolve(this.vi(n)))}Ci(e){return t0(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Dn(n,"clientMetadata");return r.U().next(i=>{const s=this.xi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return Z.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Z.resolve(!0):Xc(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new fe(ne.FAILED_PRECONDITION,Tv);return!1}}return!(!this.networkEnabled||!this.inForeground)||t0(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&he("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new $_(e,zr.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>t0(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return Om.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new LH(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Lm.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){he("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===17?UG:l===16?VG:l===15?l1:l===14?UP:l===13?VP:l===12?OG:l===11?OP:void Be()}(this.hi);let o;return this.Ri.runTransaction(e,i,s,a=>(o=new $_(a,this.Qr?this.Qr.next():zr.oe),n==="readwrite-primary"?this.wi(o).next(l=>!!l||this.Si(o)).next(l=>{if(!l)throw vn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new fe(ne.FAILED_PRECONDITION,bP);return r(o)}).next(l=>this.Di(o).next(()=>l)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return Xc(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new fe(ne.FAILED_PRECONDITION,Tv)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Xc(e).put("owner",n)}static D(){return us.D()}bi(e){const n=Xc(e);return n.get("owner").next(r=>this.vi(r)?(he("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Z.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(vn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;oP()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return he("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return vn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){vn("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Xc(t){return Dn(t,"owner")}function t0(t){return Dn(t,"clientMetadata")}function S1(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ft(),i=ft();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new A1(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t${constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return oP()?8:FP(ln())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new t$;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Bl()<=ht.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",zl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Z.resolve()):(Bl()<=ht.DEBUG&&he("QueryEngine","Query:",zl(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Bl()<=ht.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",zl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pr(n))):Z.resolve())}Yi(e,n){if(aS(n))return Z.resolve(null);let r=Pr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Lp(n,null,"F"),r=Pr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ft(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ts(n,a);return this.ns(n,u,o,l.readTime)?this.Yi(e,Lp(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,r,i){return aS(n)||i.isEqual(Qe.min())?Z.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?Z.resolve(null):(Bl()<=ht.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),zl(n)),this.rs(e,o,n,NP(i,-1)).next(a=>a))})}ts(e,n){let r=new Mt(tb(e));return n.forEach((i,s)=>{Kf(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Bl()<=ht.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",zl(n)),this.Ji.getDocumentsMatchingQuery(e,n,ai.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n${constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ut(lt),this._s=new sa(s=>Za(s),qf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ub(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function Gb(t,e,n,r){return new n$(t,e,n,r)}async function Hb(t,e){const n=Fe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=ft();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function r$(t,e){const n=Fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,c){const d=u.batch,h=d.keys();let g=Z.resolve();return h.forEach(_=>{g=g.next(()=>c.getEntry(l,_)).next(x=>{const w=u.docVersions.get(_);Ke(w!==null),x.version.compareTo(w)<0&&(d.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),c.addEntry(x)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ft();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function $b(t){const e=Fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function i$(t,e){const n=Fe(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((c,d)=>{const h=i.get(d);if(!h)return;a.push(n.Ur.removeMatchingKeys(s,c.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(s,c.addedDocuments,d)));let g=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(fn.EMPTY_BYTE_STRING,Qe.min()).withLastLimboFreeSnapshotVersion(Qe.min()):c.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(c.resumeToken,r)),i=i.insert(d,g),function(x,w,y){return x.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(h,g,c)&&a.push(n.Ur.updateTargetData(s,g))});let l=Hr(),u=ft();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(Wb(s,o,e.documentUpdates).next(c=>{l=c.Ps,u=c.Is})),!r.isEqual(Qe.min())){const c=n.Ur.getLastRemoteSnapshotVersion(s).next(d=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return Z.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.os=i,s))}function Wb(t,e,n){let r=ft(),i=ft();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Hr();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Qe.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):he("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function s$(t,e){const n=Fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ju(t,e){const n=Fe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,Z.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new ks(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Ku(t,e,n){const r=Fe(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!ia(o))throw o;he("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Bp(t,e,n){const r=Fe(t);let i=Qe.min(),s=ft();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,c){const d=Fe(l),h=d._s.get(c);return h!==void 0?Z.resolve(d.os.get(h)):d.Ur.getTargetData(u,c)}(r,o,Pr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:Qe.min(),n?s:ft())).next(a=>(Kb(r,eb(e),a),{documents:a,Ts:s})))}function qb(t,e){const n=Fe(t),r=Fe(n.Ur),i=n.os.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function jb(t,e){const n=Fe(t),r=n.us.get(e)||Qe.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.cs.getAllFromCollectionGroup(i,e,NP(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Kb(n,e,i),i))}function Kb(t,e,n){let r=t.us.get(e)||Qe.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}async function o$(t,e,n,r){const i=Fe(t);let s=ft(),o=Hr();for(const u of n){const c=e.Es(u.metadata.name);u.document&&(s=s.add(c));const d=e.ds(u);d.setReadTime(e.As(u.metadata.readTime)),o=o.insert(c,d)}const a=i.cs.newChangeBuffer({trackRemovals:!0}),l=await ju(i,function(c){return Pr(mc(gt.fromString(`__bundle__/docs/${c}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>Wb(u,a,o).next(c=>(a.apply(u),c)).next(c=>i.Ur.removeMatchingKeysForTargetId(u,l.targetId).next(()=>i.Ur.addMatchingKeys(u,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,c.Ps,c.Is)).next(()=>c.Ps)))}async function a$(t,e,n=ft()){const r=await ju(t,Pr(x1(e.bundledQuery))),i=Fe(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=_n(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Gr.saveNamedQuery(s,e);const a=r.withResumeToken(fn.EMPTY_BYTE_STRING,o);return i.os=i.os.insert(a.targetId,a),i.Ur.updateTargetData(s,a).next(()=>i.Ur.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ur.addMatchingKeys(s,n,r.targetId)).next(()=>i.Gr.saveNamedQuery(s,e))})}function LS(t,e){return`firestore_clients_${t}_${e}`}function OS(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Ev(t,e){return`firestore_targets_${t}_${e}`}class zp{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Rs(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new fe(i.error.code,i.error.message))),o?new zp(e,n,i.state,s):(vn("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Md{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new fe(r.error.code,r.error.message))),s?new Md(e,r.state,i):(vn("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gp{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=f1();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=MP(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new Gp(e,s):(vn("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class C1{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new C1(n.clientId,n.onlineState):(vn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class iy{constructor(){this.activeTargetIds=f1()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Iv{constructor(e,n,r,i,s){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Ut(lt),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=LS(this.persistenceKey,this.ps),this.vs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new iy),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const i=this.getItem(LS(this.persistenceKey,r));if(i){const s=Gp.Rs(r,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();const n=this.storage.getItem(this.xs);if(n){const r=this.Ls(n);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Ev(this.persistenceKey,e));if(i){const s=Md.Rs(e,i);s&&(r=s.state)}}return n&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ev(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return he("SharedClientState","READ",e,n),n}setItem(e,n){he("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){he("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const n=e;if(n.storageArea===this.storage){if(he("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void vn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){const r=this.Gs(n.key);return this.zs(r,null)}{const r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){const r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){const r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){const r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){const r=function(s){let o=zr.oe;if(s!=null)try{const a=JSON.parse(s);Ke(typeof a=="number"),o=a}catch(a){vn("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==zr.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){const r=this.Xs(n.newValue);await Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(n)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){const i=new zp(this.currentUser,e,n,r),s=OS(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const n=OS(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){const n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){const i=Ev(this.persistenceKey,e),s=new Md(e,n,r);this.setItem(i,s.Vs())}Ws(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){const n=this.Cs.exec(e);return n?n[1]:null}js(e,n){const r=this.Gs(e);return Gp.Rs(r,n)}Hs(e,n){const r=this.Fs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return zp.Rs(new Ln(s),i,n)}Ys(e,n){const r=this.Ms.exec(e),i=Number(r[1]);return Md.Rs(i,n)}Ls(e){return C1.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);he("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){const r=n?this.Ss.insert(e,n):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=f1();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class Jb{constructor(){this.so=new iy,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new iy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l${_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){he("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){he("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let n0=null;function Sv(){return n0===null?n0=function(){return 268435456+Math.round(2147483648*Math.random())}():n0++,"0x"+n0.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c${constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir="WebChannelConnection";class d$ extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=Sv(),l=this.xo(n,r.toUriEncodedString());he("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(n,l,u,i).then(c=>(he("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw hs("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",l,"request:",i),c})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+pc}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=u$[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Sv();return new Promise((o,a)=>{const l=new TP;l.setWithCredentials(!0),l.listenOnce(EP.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case E0.NO_ERROR:const c=l.getResponseJson();he(ir,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(c)),o(c);break;case E0.TIMEOUT:he(ir,`RPC '${e}' ${s} timed out`),a(new fe(ne.DEADLINE_EXCEEDED,"Request time out"));break;case E0.HTTP_ERROR:const d=l.getStatus();if(he(ir,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);const g=h==null?void 0:h.error;if(g&&g.status&&g.message){const _=function(w){const y=w.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(y)>=0?y:ne.UNKNOWN}(g.status);a(new fe(_,g.message))}else a(new fe(ne.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new fe(ne.UNAVAILABLE,"Connection failed."));break;default:Be()}}finally{he(ir,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);he(ir,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Bo(e,n,r){const i=Sv(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=AP(),a=SP(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=s.join("");he(ir,`Creating RPC '${e}' stream ${i}: ${c}`,l);const d=o.createWebChannel(c,l);let h=!1,g=!1;const _=new c$({Io:w=>{g?he(ir,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(h||(he(ir,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),he(ir,`RPC '${e}' stream ${i} sending:`,w),d.send(w))},To:()=>d.close()}),x=(w,y,T)=>{w.listen(y,E=>{try{T(E)}catch(N){setTimeout(()=>{throw N},0)}})};return x(d,dd.EventType.OPEN,()=>{g||(he(ir,`RPC '${e}' stream ${i} transport opened.`),_.yo())}),x(d,dd.EventType.CLOSE,()=>{g||(g=!0,he(ir,`RPC '${e}' stream ${i} transport closed`),_.So())}),x(d,dd.EventType.ERROR,w=>{g||(g=!0,hs(ir,`RPC '${e}' stream ${i} transport errored:`,w),_.So(new fe(ne.UNAVAILABLE,"The operation could not be completed")))}),x(d,dd.EventType.MESSAGE,w=>{var y;if(!g){const T=w.data[0];Ke(!!T);const E=T,N=E.error||((y=E[0])===null||y===void 0?void 0:y.error);if(N){he(ir,`RPC '${e}' stream ${i} received error:`,N);const F=N.status;let O=function(C){const k=wn[C];if(k!==void 0)return pb(k)}(F),S=N.message;O===void 0&&(O=ne.INTERNAL,S="Unknown error status: "+F+" with message "+N.message),g=!0,_.So(new fe(O,S)),d.close()}else he(ir,`RPC '${e}' stream ${i} received:`,T),_.bo(T)}}),x(a,IP.STAT_EVENT,w=>{w.stat===G_.PROXY?he(ir,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===G_.NOPROXY&&he(ir,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.wo()},0),_}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(){return typeof window<"u"?window:null}function N0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(t){return new vH(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&he("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new R1(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===ne.RESOURCE_EXHAUSTED?(vn(n.toString()),vn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new fe(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return he("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(he("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class f$ extends Xb{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=xH(this.serializer,e),r=function(s){if(!("targetChange"in s))return Qe.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Qe.min():o.readTime?_n(o.readTime):Qe.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Z_(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Fp(l)?{documents:Ib(s,l)}:{query:Sb(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=_b(s,o.resumeToken);const u=X_(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Qe.min())>0){a.readTime=qu(s,o.snapshotVersion.toTimestamp());const u=X_(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=TH(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Z_(this.serializer),n.removeTarget=e,this.a_(n)}}class h$ extends Xb{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ke(!!e.streamToken),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ke(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=wH(e.writeResults,e.commitTime),r=_n(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Z_(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Sf(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p$ extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new fe(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Q_(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new fe(ne.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Q_(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new fe(ne.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class m${constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(vn(n),this.D_=!1):he("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g${constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{oa(this)&&(he("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=Fe(l);u.L_.add(4),await _c(u),u.q_.set("Unknown"),u.L_.delete(4),await Zf(u)}(this))})}),this.q_=new m$(r,i)}}async function Zf(t){if(oa(t))for(const e of t.B_)await e(!0)}async function _c(t){for(const e of t.B_)await e(!1)}function Um(t,e){const n=Fe(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),P1(n)?N1(n):xc(n).r_()&&k1(n,e))}function Ju(t,e){const n=Fe(t),r=xc(n);n.N_.delete(e),r.r_()&&Qb(n,e),n.N_.size===0&&(r.r_()?r.o_():oa(n)&&n.q_.set("Unknown"))}function k1(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Qe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}xc(t).A_(e)}function Qb(t,e){t.Q_.xe(e),xc(t).R_(e)}function N1(t){t.Q_=new hH({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),xc(t).start(),t.q_.v_()}function P1(t){return oa(t)&&!xc(t).n_()&&t.N_.size>0}function oa(t){return Fe(t).L_.size===0}function Zb(t){t.Q_=void 0}async function v$(t){t.q_.set("Online")}async function _$(t){t.N_.forEach((e,n)=>{k1(t,e)})}async function y$(t,e){Zb(t),P1(t)?(t.q_.M_(e),N1(t)):t.q_.set("Unknown")}async function x$(t,e,n){if(t.q_.set("Online"),e instanceof vb&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){he("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Hp(t,r)}else if(e instanceof k0?t.Q_.Ke(e):e instanceof gb?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Qe.min()))try{const r=await $b(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=s.N_.get(u);c&&s.N_.set(u,c.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const c=s.N_.get(l);if(!c)return;s.N_.set(l,c.withResumeToken(fn.EMPTY_BYTE_STRING,c.snapshotVersion)),Qb(s,l);const d=new ks(c.target,l,u,c.sequenceNumber);k1(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){he("RemoteStore","Failed to raise snapshot:",r),await Hp(t,r)}}async function Hp(t,e,n){if(!ia(e))throw e;t.L_.add(1),await _c(t),t.q_.set("Offline"),n||(n=()=>$b(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{he("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Zf(t)})}function eD(t,e){return e().catch(n=>Hp(t,n,e))}async function yc(t){const e=Fe(t),n=Jo(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;w$(e);)try{const i=await s$(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,T$(e,i)}catch(i){await Hp(e,i)}tD(e)&&nD(e)}function w$(t){return oa(t)&&t.O_.length<10}function T$(t,e){t.O_.push(e);const n=Jo(t);n.r_()&&n.V_&&n.m_(e.mutations)}function tD(t){return oa(t)&&!Jo(t).n_()&&t.O_.length>0}function nD(t){Jo(t).start()}async function E$(t){Jo(t).p_()}async function I$(t){const e=Jo(t);for(const n of t.O_)e.m_(n.mutations)}async function S$(t,e,n){const r=t.O_.shift(),i=g1.from(r,e,n);await eD(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await yc(t)}async function A$(t,e){e&&Jo(t).V_&&await async function(r,i){if(function(o){return hb(o)&&o!==ne.ABORTED}(i.code)){const s=r.O_.shift();Jo(r).s_(),await eD(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await yc(r)}}(t,e),tD(t)&&nD(t)}async function US(t,e){const n=Fe(t);n.asyncQueue.verifyOperationInProgress(),he("RemoteStore","RemoteStore received new credentials");const r=oa(n);n.L_.add(3),await _c(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Zf(n)}async function sy(t,e){const n=Fe(t);e?(n.L_.delete(2),await Zf(n)):e||(n.L_.add(2),await _c(n),n.q_.set("Unknown"))}function xc(t){return t.K_||(t.K_=function(n,r,i){const s=Fe(n);return s.w_(),new f$(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:v$.bind(null,t),Ro:_$.bind(null,t),mo:y$.bind(null,t),d_:x$.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),P1(t)?N1(t):t.q_.set("Unknown")):(await t.K_.stop(),Zb(t))})),t.K_}function Jo(t){return t.U_||(t.U_=function(n,r,i){const s=Fe(n);return s.w_(),new h$(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:E$.bind(null,t),mo:A$.bind(null,t),f_:I$.bind(null,t),g_:S$.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await yc(t)):(await t.U_.stop(),t.O_.length>0&&(he("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Yn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new b1(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wc(t,e){if(vn("AsyncQueue",`${e}: ${t}`),ia(t))return new fe(ne.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e){this.comparator=e?(n,r)=>e(n,r)||De.comparator(n.key,r.key):(n,r)=>De.comparator(n.key,r.key),this.keyedMap=fd(),this.sortedSet=new Ut(this.comparator)}static emptySet(e){return new Eu(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Eu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Eu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(){this.W_=new Ut(De.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Be():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Yu{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Yu(e,n,Eu.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C${constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class R${constructor(){this.queries=zS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=Fe(n),s=i.queries;i.queries=zS(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new fe(ne.ABORTED,"Firestore shutting down"))}}function zS(){return new sa(t=>ZP(t),jf)}async function D1(t,e){const n=Fe(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new C$,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=wc(o,`Initialization of query '${zl(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&M1(n)}async function F1(t,e){const n=Fe(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function k$(t,e){const n=Fe(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&M1(n)}function N$(t,e,n){const r=Fe(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function M1(t){t.Y_.forEach(e=>{e.next()})}var oy,GS;(GS=oy||(oy={})).ea="default",GS.Cache="cache";class L1{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Yu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Yu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==oy.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P${constructor(e,n){this.aa=e,this.byteLength=n}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e){this.serializer=e}Es(e){return cs(this.serializer,e)}ds(e){return e.metadata.exists?Eb(this.serializer,e.document,!1):Ht.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return _n(e)}}class b${constructor(e,n,r){this.ca=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=rD(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++n;const r=gt.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ha(e){const n=new Map,r=new HS(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Es(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||ft()).add(s);n.set(o,a)}}return n}async complete(){const e=await o$(this.localStore,new HS(this.serializer),this.documents,this.ca.id),n=this.ha(this.documents);for(const r of this.queries)await a$(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function rD(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e){this.key=e}}class sD{constructor(e){this.key=e}}class oD{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ft(),this.mutatedKeys=ft(),this.Aa=tb(e),this.Ra=new Eu(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new BS,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,d)=>{const h=i.get(c),g=Kf(this.query,d)?d:null,_=!!h&&this.mutatedKeys.has(h.key),x=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let w=!1;h&&g?h.data.isEqual(g.data)?_!==x&&(r.track({type:3,doc:g}),w=!0):this.ga(h,g)||(r.track({type:2,doc:g}),w=!0,(l&&this.Aa(g,l)>0||u&&this.Aa(g,u)<0)&&(a=!0)):!h&&g?(r.track({type:0,doc:g}),w=!0):h&&!g&&(r.track({type:1,doc:h}),w=!0,(l||u)&&(a=!0)),w&&(g?(o=o.add(g),s=x?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((c,d)=>function(g,_){const x=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Be()}};return x(g)-x(_)}(c.type,d.type)||this.Aa(c.doc,d.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new Yu(this.query,e.Ra,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new BS,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ft(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new sD(r))}),this.da.forEach(r=>{e.has(r)||n.push(new iD(r))}),n}ba(e){this.Ta=e.Ts,this.da=ft();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Yu.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class D${constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class F${constructor(e){this.key=e,this.va=!1}}class M${constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new sa(a=>ZP(a),jf),this.Ma=new Map,this.xa=new Set,this.Oa=new Ut(De.comparator),this.Na=new Map,this.La=new E1,this.Ba={},this.ka=new Map,this.qa=il.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function L$(t,e,n=!0){const r=Bm(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await aD(r,e,n,!0),i}async function O$(t,e){const n=Bm(t);await aD(n,e,!0,!1)}async function aD(t,e,n,r){const i=await ju(t.localStore,Pr(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await O1(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Um(t.remoteStore,i),a}async function O1(t,e,n,r,i){t.Ka=(d,h,g)=>async function(x,w,y,T){let E=w.view.ma(y);E.ns&&(E=await Bp(x.localStore,w.query,!1).then(({documents:S})=>w.view.ma(S,E)));const N=T&&T.targetChanges.get(w.targetId),F=T&&T.targetMismatches.get(w.targetId)!=null,O=w.view.applyChanges(E,x.isPrimaryClient,N,F);return ay(x,w.targetId,O.wa),O.snapshot}(t,d,h,g);const s=await Bp(t.localStore,e,!0),o=new oD(e,s.Ts),a=o.ma(s.documents),l=Xf.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);ay(t,n,u.wa);const c=new D$(e,n,o);return t.Fa.set(e,c),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function V$(t,e,n){const r=Fe(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!jf(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ku(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Ju(r.remoteStore,i.targetId),Xu(r,i.targetId)}).catch(ra)):(Xu(r,i.targetId),await Ku(r.localStore,i.targetId,!0))}async function U$(t,e){const n=Fe(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ju(n.remoteStore,r.targetId))}async function B$(t,e,n){const r=z1(t);try{const i=await function(o,a){const l=Fe(o),u=tn.now(),c=a.reduce((g,_)=>g.add(_.key),ft());let d,h;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let _=Hr(),x=ft();return l.cs.getEntries(g,c).next(w=>{_=w,_.forEach((y,T)=>{T.isValidDocument()||(x=x.add(y))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,_)).next(w=>{d=w;const y=[];for(const T of a){const E=cH(T,d.get(T.key).overlayedDocument);E!=null&&y.push(new Xs(T.key,E,$P(E.value.mapValue),Zt.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,y,a)}).next(w=>{h=w;const y=w.applyToLocalDocumentSet(d,x);return l.documentOverlayCache.saveOverlays(g,w.batchId,y)})}).then(()=>({batchId:h.batchId,changes:rb(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new Ut(lt)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(r,i.batchId,n),await Qs(r,i.changes),await yc(r.remoteStore)}catch(i){const s=wc(i,"Failed to persist write");n.reject(s)}}async function lD(t,e){const n=Fe(t);try{const r=await i$(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Ke(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Ke(o.va):i.removedDocuments.size>0&&(Ke(o.va),o.va=!1))}),await Qs(n,r,e)}catch(r){await ra(r)}}function $S(t,e,n){const r=Fe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Fe(o);l.onlineState=a;let u=!1;l.queries.forEach((c,d)=>{for(const h of d.j_)h.Z_(a)&&(u=!0)}),u&&M1(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function z$(t,e,n){const r=Fe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ut(De.comparator);o=o.insert(s,Ht.newNoDocument(s,Qe.min()));const a=ft().add(s),l=new Yf(Qe.min(),new Map,new Ut(lt),o,a);await lD(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),B1(r)}else await Ku(r.localStore,e,!1).then(()=>Xu(r,e,n)).catch(ra)}async function G$(t,e){const n=Fe(t),r=e.batch.batchId;try{const i=await r$(n.localStore,e);U1(n,r,null),V1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Qs(n,i)}catch(i){await ra(i)}}async function H$(t,e,n){const r=Fe(t);try{const i=await function(o,a){const l=Fe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return l.mutationQueue.lookupMutationBatch(u,a).next(d=>(Ke(d!==null),c=d.keys(),l.mutationQueue.removeMutationBatch(u,d))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>l.localDocuments.getDocuments(u,c))})}(r.localStore,e);U1(r,e,n),V1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Qs(r,i)}catch(i){await ra(i)}}async function $$(t,e){const n=Fe(t);oa(n.remoteStore)||he("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=Fe(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(r===-1)return void e.resolve();const i=n.ka.get(r)||[];i.push(e),n.ka.set(r,i)}catch(r){const i=wc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function V1(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function U1(t,e,n){const r=Fe(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Xu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||uD(t,r)})}function uD(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Ju(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),B1(t))}function ay(t,e,n){for(const r of n)r instanceof iD?(t.La.addReference(r.key,e),W$(t,r)):r instanceof sD?(he("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||uD(t,r.key)):Be()}function W$(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(he("SyncEngine","New document in limbo: "+n),t.xa.add(r),B1(t))}function B1(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new De(gt.fromString(e)),r=t.qa.next();t.Na.set(r,new F$(n)),t.Oa=t.Oa.insert(n,r),Um(t.remoteStore,new ks(Pr(mc(n.path)),r,"TargetPurposeLimboResolution",zr.oe))}}async function Qs(t,e,n){const r=Fe(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(u=>{var c;if((u||n)&&r.isPrimaryClient){const d=u?!u.fromCache:(c=n==null?void 0:n.targetChanges.get(l.targetId))===null||c===void 0?void 0:c.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(u){i.push(u);const d=A1.Wi(l.targetId,u);s.push(d)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,u){const c=Fe(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>Z.forEach(u,h=>Z.forEach(h.$i,g=>c.persistence.referenceDelegate.addReference(d,h.targetId,g)).next(()=>Z.forEach(h.Ui,g=>c.persistence.referenceDelegate.removeReference(d,h.targetId,g)))))}catch(d){if(!ia(d))throw d;he("LocalStore","Failed to update sequence numbers: "+d)}for(const d of u){const h=d.targetId;if(!d.fromCache){const g=c.os.get(h),_=g.snapshotVersion,x=g.withLastLimboFreeSnapshotVersion(_);c.os=c.os.insert(h,x)}}}(r.localStore,s))}async function q$(t,e){const n=Fe(t);if(!n.currentUser.isEqual(e)){he("SyncEngine","User change. New user:",e.toKey());const r=await Hb(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new fe(ne.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Qs(n,r.hs)}}function j$(t,e){const n=Fe(t),r=n.Na.get(e);if(r&&r.va)return ft().add(r.key);{let i=ft();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}async function K$(t,e){const n=Fe(t),r=await Bp(n.localStore,e.query,!0),i=e.view.ba(r);return n.isPrimaryClient&&ay(n,e.targetId,i.wa),i}async function J$(t,e){const n=Fe(t);return jb(n.localStore,e).then(r=>Qs(n,r))}async function Y$(t,e,n,r){const i=Fe(t),s=await function(a,l){const u=Fe(a),c=Fe(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",d=>c.Mn(d,l).next(h=>h?u.localDocuments.getDocuments(d,h):Z.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await yc(i.remoteStore):n==="acknowledged"||n==="rejected"?(U1(i,e,r||null),V1(i,e),function(a,l){Fe(Fe(a).mutationQueue).On(l)}(i.localStore,e)):Be(),await Qs(i,s)):he("SyncEngine","Cannot apply mutation batch with id: "+e)}async function X$(t,e){const n=Fe(t);if(Bm(n),z1(n),e===!0&&n.Qa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await WS(n,r.toArray());n.Qa=!0,await sy(n.remoteStore,!0);for(const s of i)Um(n.remoteStore,s)}else if(e===!1&&n.Qa!==!1){const r=[];let i=Promise.resolve();n.Ma.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Xu(n,o),Ku(n.localStore,o,!0))),Ju(n.remoteStore,o)}),await i,await WS(n,r),function(o){const a=Fe(o);a.Na.forEach((l,u)=>{Ju(a.remoteStore,u)}),a.La.pr(),a.Na=new Map,a.Oa=new Ut(De.comparator)}(n),n.Qa=!1,await sy(n.remoteStore,!1)}}async function WS(t,e,n){const r=Fe(t),i=[],s=[];for(const o of e){let a;const l=r.Ma.get(o);if(l&&l.length!==0){a=await ju(r.localStore,Pr(l[0]));for(const u of l){const c=r.Fa.get(u),d=await K$(r,c);d.snapshot&&s.push(d.snapshot)}}else{const u=await qb(r.localStore,o);a=await ju(r.localStore,u),await O1(r,cD(u),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i}function cD(t){return QP(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Q$(t){return function(n){return Fe(Fe(n).persistence).Qi()}(Fe(t).localStore)}async function Z$(t,e,n,r){const i=Fe(t);if(i.Qa)return void he("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await jb(i.localStore,eb(s[0])),a=Yf.createSynthesizedRemoteEventForCurrentChange(e,n==="current",fn.EMPTY_BYTE_STRING);await Qs(i,o,a);break}case"rejected":await Ku(i.localStore,e,!0),Xu(i,e,r);break;default:Be()}}async function eW(t,e,n){const r=Bm(t);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){he("SyncEngine","Adding an already active target "+i);continue}const s=await qb(r.localStore,i),o=await ju(r.localStore,s);await O1(r,cD(s),o.targetId,!1,o.resumeToken),Um(r.remoteStore,o)}for(const i of n)r.Ma.has(i)&&await Ku(r.localStore,i,!1).then(()=>{Ju(r.remoteStore,i),Xu(r,i)}).catch(ra)}}function Bm(t){const e=Fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=lD.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=j$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=z$.bind(null,e),e.Ca.d_=k$.bind(null,e.eventManager),e.Ca.$a=N$.bind(null,e.eventManager),e}function z1(t){const e=Fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=G$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=H$.bind(null,e),e}function tW(t,e,n){const r=Fe(t);(async function(s,o,a){try{const l=await o.getMetadata();if(await function(g,_){const x=Fe(g),w=_n(_.createTime);return x.persistence.runTransaction("hasNewerBundle","readonly",y=>x.Gr.getBundleMetadata(y,_.id)).then(y=>!!y&&y.createTime.compareTo(w)>=0)}(s.localStore,l))return await o.close(),a._completeWith(function(g){return{taskState:"Success",documentsLoaded:g.totalDocuments,bytesLoaded:g.totalBytes,totalDocuments:g.totalDocuments,totalBytes:g.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(rD(l));const u=new b$(l,s.localStore,o.serializer);let c=await o.Ua();for(;c;){const h=await u.la(c);h&&a._updateProgress(h),c=await o.Ua()}const d=await u.complete();return await Qs(s,d.Ia,void 0),await function(g,_){const x=Fe(g);return x.persistence.runTransaction("Save bundle","readwrite",w=>x.Gr.saveBundleMetadata(w,_))}(s.localStore,l),a._completeWith(d.progress),Promise.resolve(d.Pa)}catch(l){return hs("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class Af{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qf(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return Gb(this.persistence,new zb,e.initialUser,this.serializer)}Ga(e){return new Bb(Vm.Zr,this.serializer)}Wa(e){return new Jb}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Af.provider={build:()=>new Af};class dD extends Af{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await z1(this.Ja.syncEngine),await yc(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return Gb(this.persistence,new zb,e.initialUser,this.serializer)}ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new UH(r,e.asyncQueue,n)}Ha(e,n){const r=new xG(n,this.persistence);return new yG(e.asyncQueue,r)}Ga(e){const n=S1(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Or.withCacheSize(this.cacheSizeBytes):Or.DEFAULT;return new I1(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,Yb(),N0(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new Jb}}class nW extends dD{constructor(e,n){super(e,n,!1),this.Ja=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Ja.syncEngine;this.sharedClientState instanceof Iv&&(this.sharedClientState.syncEngine={no:Y$.bind(null,n),ro:Z$.bind(null,n),io:eW.bind(null,n),Qi:Q$.bind(null,n),eo:J$.bind(null,n)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await X$(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const n=Yb();if(!Iv.D(n))throw new fe(ne.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=S1(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Iv(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Cf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>$S(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=q$.bind(null,this.syncEngine),await sy(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new R$}()}createDatastore(e){const n=Qf(e.databaseInfo.databaseId),r=function(s){return new d$(s)}(e.databaseInfo);return function(s,o,a,l){return new p$(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new g$(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>$S(this.syncEngine,n,0),function(){return VS.D()?new VS:new l$}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,c){const d=new M$(i,s,o,a,l,u);return c&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=Fe(i);he("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await _c(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Cf.provider={build:()=>new Cf};function qS(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):vn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rW{constructor(e,n){this.Xa=e,this.serializer=n,this.metadata=new Yn,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const n=this.eu.decode(e),r=Number(n);isNaN(r)&&this.ru(`length string (${n}) is not valid number`);const i=await this.iu(r);return new P$(JSON.parse(i),e.length+r)}su(){return this.buffer.findIndex(e=>e===123)}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const n=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iW{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new fe(ne.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,s){const o=Fe(i),a={documents:s.map(d=>If(o.serializer,d))},l=await o.Lo("BatchGetDocuments",o.serializer.databaseId,gt.emptyPath(),a,s.length),u=new Map;l.forEach(d=>{const h=yH(o.serializer,d);u.set(h.key.toString(),h)});const c=[];return s.forEach(d=>{const h=u.get(d.toString());Ke(!!h),c.push(h)}),c}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new vc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=De.fromPath(r);this.mutations.push(new p1(i,this.precondition(i)))}),await async function(r,i){const s=Fe(r),o={writes:i.map(a=>Sf(s.serializer,a))};await s.Mo("Commit",s.serializer.databaseId,gt.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Be();n=Qe.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new fe(ne.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Qe.min())?Zt.exists(!1):Zt.updateTime(n):Zt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Qe.min()))throw new fe(ne.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Zt.updateTime(n)}return Zt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sW{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new R1(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new iW(this.datastore),n=this.cu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const n=this.updateFunction(e);return!Wf(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!hb(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oW{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ln.UNAUTHENTICATED,this.clientId=RP.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{he("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(he("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Yn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=wc(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Av(t,e){t.asyncQueue.verifyOperationInProgress(),he("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Hb(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function jS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await G1(t);he("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>US(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>US(e.remoteStore,i)),t._onlineComponents=e}async function G1(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){he("FirestoreClient","Using user provided OfflineComponentProvider");try{await Av(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===ne.FAILED_PRECONDITION||i.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;hs("Error using user provided cache. Falling back to memory cache: "+n),await Av(t,new Af)}}else he("FirestoreClient","Using default OfflineComponentProvider"),await Av(t,new Af);return t._offlineComponents}async function Gm(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(he("FirestoreClient","Using user provided OnlineComponentProvider"),await jS(t,t._uninitializedComponentsProvider._online)):(he("FirestoreClient","Using default OnlineComponentProvider"),await jS(t,new Cf))),t._onlineComponents}function fD(t){return G1(t).then(e=>e.persistence)}function H1(t){return G1(t).then(e=>e.localStore)}function hD(t){return Gm(t).then(e=>e.remoteStore)}function $1(t){return Gm(t).then(e=>e.syncEngine)}function aW(t){return Gm(t).then(e=>e.datastore)}async function Qu(t){const e=await Gm(t),n=e.eventManager;return n.onListen=L$.bind(null,e.syncEngine),n.onUnlisten=V$.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=O$.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=U$.bind(null,e.syncEngine),n}function lW(t){return t.asyncQueue.enqueue(async()=>{const e=await fD(t),n=await hD(t);return e.setNetworkEnabled(!0),function(i){const s=Fe(i);return s.L_.delete(0),Zf(s)}(n)})}function uW(t){return t.asyncQueue.enqueue(async()=>{const e=await fD(t),n=await hD(t);return e.setNetworkEnabled(!1),async function(i){const s=Fe(i);s.L_.add(0),await _c(s),s.q_.set("Offline")}(n)})}function cW(t,e){const n=new Yn;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await function(u,c){const d=Fe(u);return d.persistence.runTransaction("read document","readonly",h=>d.localDocuments.getDocument(h,c))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new fe(ne.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=wc(a,`Failed to get document '${s} from cache`);o.reject(l)}}(await H1(t),e,n)),n.promise}function pD(t,e,n={}){const r=new Yn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new zm({next:h=>{c.Za(),o.enqueueAndForget(()=>F1(s,d));const g=h.docs.has(a);!g&&h.fromCache?u.reject(new fe(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&h.fromCache&&l&&l.source==="server"?u.reject(new fe(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),d=new L1(mc(a.path),c,{includeMetadataChanges:!0,_a:!0});return D1(s,d)}(await Qu(t),t.asyncQueue,e,n,r)),r.promise}function dW(t,e){const n=new Yn;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await Bp(i,s,!0),l=new oD(s,a.Ts),u=l.ma(a.documents),c=l.applyChanges(u,!1);o.resolve(c.snapshot)}catch(a){const l=wc(a,`Failed to execute query '${s} against cache`);o.reject(l)}}(await H1(t),e,n)),n.promise}function mD(t,e,n={}){const r=new Yn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new zm({next:h=>{c.Za(),o.enqueueAndForget(()=>F1(s,d)),h.fromCache&&l.source==="server"?u.reject(new fe(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),d=new L1(a,c,{includeMetadataChanges:!0,_a:!0});return D1(s,d)}(await Qu(t),t.asyncQueue,e,n,r)),r.promise}function fW(t,e){const n=new zm(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,s){Fe(i).Y_.add(s),s.next()}(await Qu(t),n)),()=>{n.Za(),t.asyncQueue.enqueueAndForget(async()=>function(i,s){Fe(i).Y_.delete(s)}(await Qu(t),n))}}function hW(t,e,n,r){const i=function(o,a){let l;return l=typeof o=="string"?mb().encode(o):o,function(c,d){return new rW(c,d)}(function(c,d){if(c instanceof Uint8Array)return qS(c,d);if(c instanceof ArrayBuffer)return qS(new Uint8Array(c),d);if(c instanceof ReadableStream)return c.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,Qf(e));t.asyncQueue.enqueueAndForget(async()=>{tW(await $1(t),i,r)})}function pW(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){const s=Fe(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(await H1(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gD(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(t,e,n){if(!n)throw new fe(ne.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function vD(t,e,n,r){if(e===!0&&r===!0)throw new fe(ne.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function JS(t){if(!De.isDocumentKey(t))throw new fe(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function YS(t){if(De.isDocumentKey(t))throw new fe(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Hm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Be()}function It(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new fe(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Hm(t);throw new fe(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function _D(t,e){if(e<=0)throw new fe(ne.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new fe(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new fe(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gD((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new fe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new fe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new fe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class eh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new XS({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new XS(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new lG;switch(r.type){case"firstParty":return new fG(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new fe(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=KS.get(n);r&&(he("ComponentProvider","Removing Datastore"),KS.delete(n),r.terminate())}(this),Promise.resolve()}}function mW(t,e,n,r={}){var i;const s=(t=It(t,eh))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&hs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Ln.MOCK_USER;else{a=R7(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new fe(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ln(u)}t._authCredentials=new uG(new CP(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let br=class yD{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new yD(this.firestore,e,this._query)}},on=class xD{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xD(this.firestore,e,this._key)}},Fo=class wD extends br{constructor(e,n,r){super(e,n,mc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new on(this.firestore,null,new De(e))}withConverter(e){return new wD(this.firestore,e,this._path)}};function TD(t,e,...n){if(t=it(t),W1("collection","path",e),t instanceof eh){const r=gt.fromString(e,...n);return YS(r),new Fo(t,null,r)}{if(!(t instanceof on||t instanceof Fo))throw new fe(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(gt.fromString(e,...n));return YS(r),new Fo(t.firestore,null,r)}}function gW(t,e){if(t=It(t,eh),W1("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new fe(ne.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new br(t,null,function(r){return new Ys(gt.emptyPath(),r)}(e))}function $p(t,e,...n){if(t=it(t),arguments.length===1&&(e=RP.newId()),W1("doc","path",e),t instanceof eh){const r=gt.fromString(e,...n);return JS(r),new on(t,null,new De(r))}{if(!(t instanceof on||t instanceof Fo))throw new fe(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(gt.fromString(e,...n));return JS(r),new on(t.firestore,t instanceof Fo?t.converter:null,new De(r))}}function ED(t,e){return t=it(t),e=it(e),(t instanceof on||t instanceof Fo)&&(e instanceof on||e instanceof Fo)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function ID(t,e){return t=it(t),e=it(e),t instanceof br&&e instanceof br&&t.firestore===e.firestore&&jf(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new R1(this,"async_queue_retry"),this.Vu=()=>{const r=N0();r&&he("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=N0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=N0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Yn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ia(e))throw e;he("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw vn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=b1.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Be()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function ly(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class vW{constructor(){this._progressObserver={},this._taskCompletionResolver=new Yn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _W=-1;let yn=class extends eh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new QS,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new QS(e),this._firestoreClient=void 0,await e}}};function vr(t){if(t._terminated)throw new fe(ne.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||SD(t),t._firestoreClient}function SD(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,c){return new GG(a,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,gD(c.experimentalLongPollingOptions),c.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new oW(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function yW(t,e){hs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return AD(t,Cf.provider,{build:r=>new dD(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function xW(t){hs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();AD(t,Cf.provider,{build:n=>new nW(n,e.cacheSizeBytes)})}function AD(t,e,n){if((t=It(t,yn))._firestoreClient||t._terminated)throw new fe(ne.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new fe(ne.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},SD(t)}function wW(t){if(t._initialized&&!t._terminated)throw new fe(ne.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Yn;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!us.D())return Promise.resolve();const i=r+"main";await us.delete(i)}(S1(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function TW(t){return function(n){const r=new Yn;return n.asyncQueue.enqueueAndForget(async()=>$$(await $1(n),r)),r.promise}(vr(t=It(t,yn)))}function EW(t){return lW(vr(t=It(t,yn)))}function IW(t){return uW(vr(t=It(t,yn)))}function SW(t,e){const n=vr(t=It(t,yn)),r=new vW;return hW(n,t._databaseId,e,r),r}function AW(t,e){return pW(vr(t=It(t,yn)),e).then(n=>n?new br(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ms(fn.fromBase64String(e))}catch(n){throw new fe(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ms(fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yo=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new fe(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vl=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new fe(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new fe(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return lt(this._lat,e._lat)||lt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CW=/^__.*__$/;class RW{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Xs(e,this.data,this.fieldMask,n,this.fieldTransforms):new gc(e,this.data,n,this.fieldTransforms)}}class CD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Xs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function RD(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Be()}}class Wm{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Wm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Wp(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(RD(this.Cu)&&CW.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class kW{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Qf(e)}Qu(e,n,r,i=!1){return new Wm({Cu:e,methodName:n,qu:r,path:Qt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _l(t){const e=t._freezeSettings(),n=Qf(t._databaseId);return new kW(t._databaseId,!!e.ignoreUndefinedProperties,n)}function qm(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Z1("Data must be an object, but it was:",o,r);const a=PD(r,o);let l,u;if(s.merge)l=new Gr(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const d of s.mergeFields){const h=uy(e,d,n);if(!o.contains(h))throw new fe(ne.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);DD(c,h)||c.push(h)}l=new Gr(c),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new RW(new jn(a),l,u)}class th extends vl{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof th}}function kD(t,e,n){return new Wm({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class j1 extends vl{_toFieldTransform(e){return new Jf(e.path,new $u)}isEqual(e){return e instanceof j1}}class K1 extends vl{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=kD(this,e,!0),r=this.Ku.map(s=>yl(s,n)),i=new el(r);return new Jf(e.path,i)}isEqual(e){return e instanceof K1&&pf(this.Ku,e.Ku)}}class J1 extends vl{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=kD(this,e,!0),r=this.Ku.map(s=>yl(s,n)),i=new tl(r);return new Jf(e.path,i)}isEqual(e){return e instanceof J1&&pf(this.Ku,e.Ku)}}class Y1 extends vl{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new Wu(e.serializer,ob(e.serializer,this.$u));return new Jf(e.path,n)}isEqual(e){return e instanceof Y1&&this.$u===e.$u}}function X1(t,e,n,r){const i=t.Qu(1,e,n);Z1("Data must be an object, but it was:",i,r);const s=[],o=jn.empty();gl(r,(l,u)=>{const c=ew(e,l,n);u=it(u);const d=i.Nu(c);if(u instanceof th)s.push(c);else{const h=yl(u,d);h!=null&&(s.push(c),o.set(c,h))}});const a=new Gr(s);return new CD(o,a,i.fieldTransforms)}function Q1(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[uy(e,r,n)],l=[i];if(s.length%2!=0)throw new fe(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(uy(e,s[h])),l.push(s[h+1]);const u=[],c=jn.empty();for(let h=a.length-1;h>=0;--h)if(!DD(u,a[h])){const g=a[h];let _=l[h];_=it(_);const x=o.Nu(g);if(_ instanceof th)u.push(g);else{const w=yl(_,x);w!=null&&(u.push(g),c.set(g,w))}}const d=new Gr(u);return new CD(c,d,o.fieldTransforms)}function ND(t,e,n,r=!1){return yl(n,t.Qu(r?4:3,e))}function yl(t,e){if(bD(t=it(t)))return Z1("Unsupported field value:",e,t),PD(t,e);if(t instanceof vl)return function(r,i){if(!RD(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=yl(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=it(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ob(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=tn.fromDate(r);return{timestampValue:qu(i.serializer,s)}}if(r instanceof tn){const s=new tn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:qu(i.serializer,s)}}if(r instanceof $m)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ms)return{bytesValue:_b(i.serializer,r._byteString)};if(r instanceof on){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:y1(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof q1)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return h1(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Hm(r)}`)}(t,e)}function PD(t,e){const n={};return BP(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gl(t,(r,i)=>{const s=yl(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function bD(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof tn||t instanceof $m||t instanceof ms||t instanceof on||t instanceof vl||t instanceof q1)}function Z1(t,e,n){if(!bD(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Hm(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function uy(t,e,n){if((e=it(e))instanceof Yo)return e._internalPath;if(typeof e=="string")return ew(t,e);throw Wp("Field path arguments must be of type string or ",t,!1,void 0,n)}const NW=new RegExp("[~\\*/\\[\\]]");function ew(t,e,n){if(e.search(NW)>=0)throw Wp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Yo(...e.split("."))._internalPath}catch{throw Wp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Wp(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new fe(ne.INVALID_ARGUMENT,a+t+l)}function DD(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new on(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new PW(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(jm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class PW extends Rf{data(){return super.data()}}function jm(t,e){return typeof e=="string"?ew(t,e):e instanceof Yo?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FD(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new fe(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tw{}class nh extends tw{}function fo(t,e,...n){let r=[];e instanceof tw&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof nw).length,a=s.filter(l=>l instanceof Km).length;if(o>1||o>0&&a>0)throw new fe(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Km extends nh{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Km(e,n,r)}_apply(e){const n=this._parse(e);return LD(e._query,n),new br(e.firestore,e.converter,Y_(e._query,n))}_parse(e){const n=_l(e.firestore);return function(s,o,a,l,u,c,d){let h;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new fe(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){eA(d,c);const g=[];for(const _ of d)g.push(ZS(l,s,_));h={arrayValue:{values:g}}}else h=ZS(l,s,d)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||eA(d,c),h=ND(a,o,d,c==="in"||c==="not-in");return vt.create(u,c,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function bW(t,e,n){const r=e,i=jm("where",t);return Km._create(i,r,n)}class nw extends tw{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new nw(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Pt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)LD(o,l),o=Y_(o,l)}(e._query,n),new br(e.firestore,e.converter,Y_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class rw extends nh{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new rw(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new fe(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new fe(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ef(s,o)}(e._query,this._field,this._direction);return new br(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Ys(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function DW(t,e="asc"){const n=e,r=jm("orderBy",t);return rw._create(r,n)}class Jm extends nh{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Jm(e,n,r)}_apply(e){return new br(e.firestore,e.converter,Lp(e._query,this._limit,this._limitType))}}function FW(t){return _D("limit",t),Jm._create("limit",t,"F")}function MW(t){return _D("limitToLast",t),Jm._create("limitToLast",t,"L")}class Ym extends nh{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Ym(e,n,r)}_apply(e){const n=MD(e,this.type,this._docOrFields,this._inclusive);return new br(e.firestore,e.converter,function(i,s){return new Ys(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function LW(...t){return Ym._create("startAt",t,!0)}function OW(...t){return Ym._create("startAfter",t,!1)}class Xm extends nh{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Xm(e,n,r)}_apply(e){const n=MD(e,this.type,this._docOrFields,this._inclusive);return new br(e.firestore,e.converter,function(i,s){return new Ys(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}}function VW(...t){return Xm._create("endBefore",t,!1)}function UW(...t){return Xm._create("endAt",t,!0)}function MD(t,e,n,r){if(n[0]=it(n[0]),n[0]instanceof Rf)return function(s,o,a,l,u){if(!l)throw new fe(ne.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const c=[];for(const d of Tu(s))if(d.field.isKeyField())c.push(Qa(o,l.key));else{const h=l.data.field(d.field);if(bm(h))throw new fe(ne.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const g=d.field.canonicalString();throw new fe(ne.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}c.push(h)}return new Ko(c,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=_l(t.firestore);return function(o,a,l,u,c,d){const h=o.explicitOrderBy;if(c.length>h.length)throw new fe(ne.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const g=[];for(let _=0;_<c.length;_++){const x=c[_];if(h[_].field.isKeyField()){if(typeof x!="string")throw new fe(ne.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof x}`);if(!d1(o)&&x.indexOf("/")!==-1)throw new fe(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${x}' contains a slash.`);const w=o.path.child(gt.fromString(x));if(!De.isDocumentKey(w))throw new fe(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${w}' is not because it contains an odd number of segments.`);const y=new De(w);g.push(Qa(a,y))}else{const w=ND(l,u,x);g.push(w)}}return new Ko(g,d)}(t._query,t.firestore._databaseId,i,e,n,r)}}function ZS(t,e,n){if(typeof(n=it(n))=="string"){if(n==="")throw new fe(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!d1(e)&&n.indexOf("/")!==-1)throw new fe(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(gt.fromString(n));if(!De.isDocumentKey(r))throw new fe(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Qa(t,new De(r))}if(n instanceof on)return Qa(t,n._key);throw new fe(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hm(n)}.`)}function eA(t,e){if(!Array.isArray(t)||t.length===0)throw new fe(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function LD(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new fe(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class iw{convertValue(e,n="none"){switch(Xa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Wo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Be()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return gl(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Yt(o.doubleValue));return new q1(s)}convertGeoPoint(e){return new $m(Yt(e.latitude),Yt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=u1(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(xf(e));default:return null}}convertTimestamp(e){const n=Ws(e);return new tn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=gt.fromString(e);Ke(kb(r));const i=new qo(r.get(1),r.get(3)),s=new De(r.popFirst(5));return i.isEqual(n)||vn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class BW extends iw{constructor(e){super(),this.firestore=e}convertBytes(e){return new ms(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new on(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let qs=class extends Rf{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ld(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(jm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Ld=class extends qs{data(e={}){return super.data(e)}},Xo=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Pa(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ld(this._firestore,this._userDataWriter,r.key,r,new Pa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new fe(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Ld(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Pa(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Ld(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Pa(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,c=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:zW(a.type),doc:l,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function zW(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Be()}}function OD(t,e){return t instanceof qs&&e instanceof qs?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Xo&&e instanceof Xo&&t._firestore===e._firestore&&ID(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GW(t){t=It(t,on);const e=It(t.firestore,yn);return pD(vr(e),t._key).then(n=>sw(e,t,n))}class xl extends iw{constructor(e){super(),this.firestore=e}convertBytes(e){return new ms(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new on(this.firestore,null,n)}}function HW(t){t=It(t,on);const e=It(t.firestore,yn),n=vr(e),r=new xl(e);return cW(n,t._key).then(i=>new qs(e,r,t._key,i,new Pa(i!==null&&i.hasLocalMutations,!0),t.converter))}function $W(t){t=It(t,on);const e=It(t.firestore,yn);return pD(vr(e),t._key,{source:"server"}).then(n=>sw(e,t,n))}function WW(t){t=It(t,br);const e=It(t.firestore,yn),n=vr(e),r=new xl(e);return FD(t._query),mD(n,t._query).then(i=>new Xo(e,r,t,i))}function qW(t){t=It(t,br);const e=It(t.firestore,yn),n=vr(e),r=new xl(e);return dW(n,t._query).then(i=>new Xo(e,r,t,i))}function jW(t){t=It(t,br);const e=It(t.firestore,yn),n=vr(e),r=new xl(e);return mD(n,t._query,{source:"server"}).then(i=>new Xo(e,r,t,i))}function tA(t,e,n){t=It(t,on);const r=It(t.firestore,yn),i=Qm(t.converter,e,n);return rh(r,[qm(_l(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Zt.none())])}function nA(t,e,n,...r){t=It(t,on);const i=It(t.firestore,yn),s=_l(i);let o;return o=typeof(e=it(e))=="string"||e instanceof Yo?Q1(s,"updateDoc",t._key,e,n,r):X1(s,"updateDoc",t._key,e),rh(i,[o.toMutation(t._key,Zt.exists(!0))])}function KW(t){return rh(It(t.firestore,yn),[new vc(t._key,Zt.none())])}function JW(t,e){const n=It(t.firestore,yn),r=$p(t),i=Qm(t.converter,e);return rh(n,[qm(_l(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Zt.exists(!1))]).then(()=>r)}function VD(t,...e){var n,r,i;t=it(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||ly(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(ly(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,u,c;if(t instanceof on)u=It(t.firestore,yn),c=mc(t._key.path),l={next:d=>{e[o]&&e[o](sw(u,t,d))},error:e[o+1],complete:e[o+2]};else{const d=It(t,br);u=It(d.firestore,yn),c=d._query;const h=new xl(u);l={next:g=>{e[o]&&e[o](new Xo(u,h,d,g))},error:e[o+1],complete:e[o+2]},FD(t._query)}return function(h,g,_,x){const w=new zm(x),y=new L1(g,w,_);return h.asyncQueue.enqueueAndForget(async()=>D1(await Qu(h),y)),()=>{w.Za(),h.asyncQueue.enqueueAndForget(async()=>F1(await Qu(h),y))}}(vr(u),c,a,l)}function YW(t,e){return fW(vr(t=It(t,yn)),ly(e)?e:{next:e})}function rh(t,e){return function(r,i){const s=new Yn;return r.asyncQueue.enqueueAndForget(async()=>B$(await $1(r),i,s)),s.promise}(vr(t),e)}function sw(t,e,n){const r=n.docs.get(e._key),i=new xl(t);return new qs(t,i,e._key,r,new Pa(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XW={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let QW=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=_l(e)}set(e,n,r){this._verifyNotCommitted();const i=yo(e,this._firestore),s=Qm(i.converter,n,r),o=qm(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Zt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=yo(e,this._firestore);let o;return o=typeof(n=it(n))=="string"||n instanceof Yo?Q1(this._dataReader,"WriteBatch.update",s._key,n,r,i):X1(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Zt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=yo(e,this._firestore);return this._mutations=this._mutations.concat(new vc(n._key,Zt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new fe(ne.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function yo(t,e){if((t=it(t)).firestore!==e)throw new fe(ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ZW=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=_l(n)}get(n){const r=yo(n,this._firestore),i=new BW(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return Be();const o=s[0];if(o.isFoundDocument())return new Rf(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new Rf(this._firestore,i,r._key,null,r.converter);throw Be()})}set(n,r,i){const s=yo(n,this._firestore),o=Qm(s.converter,r,i),a=qm(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=yo(n,this._firestore);let a;return a=typeof(r=it(r))=="string"||r instanceof Yo?Q1(this._dataReader,"Transaction.update",o._key,r,i,s):X1(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=yo(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=yo(e,this._firestore),r=new xl(this._firestore);return super.get(e).then(i=>new qs(this._firestore,r,n._key,i._document,new Pa(!1,!1),n.converter))}};function eq(t,e,n){t=It(t,yn);const r=Object.assign(Object.assign({},XW),n);return function(s){if(s.maxAttempts<1)throw new fe(ne.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new Yn;return s.asyncQueue.enqueueAndForget(async()=>{const u=await aW(s);new sW(s.asyncQueue,u,a,o,l).au()}),l.promise}(vr(t),i=>e(new ZW(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tq(){return new th("deleteField")}function nq(){return new j1("serverTimestamp")}function rq(...t){return new K1("arrayUnion",t)}function iq(...t){return new J1("arrayRemove",t)}function sq(t){return new Y1("increment",t)}(function(e,n=!0){(function(i){pc=i})(na),Ho(new fs("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new yn(new cG(r.getProvider("auth-internal")),new pG(r.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new fe(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qo(u.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Oi(WI,"4.7.3",e),Oi(WI,"4.7.3","esm2017")})();const oq="@firebase/firestore-compat",aq="0.3.38";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new fe("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(){if(typeof Uint8Array>"u")throw new fe("unimplemented","Uint8Arrays are not available in this environment.")}function iA(){if(!BG())throw new fe("unimplemented","Blobs are unavailable in Firestore in this environment.")}let UD=class cy{constructor(e){this._delegate=e}static fromBase64String(e){return iA(),new cy(ms.fromBase64String(e))}static fromUint8Array(e){return rA(),new cy(ms.fromUint8Array(e))}toBase64(){return iA(),this._delegate.toBase64()}toUint8Array(){return rA(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(t){return lq(t,["next","error","complete"])}function lq(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uq{enableIndexedDbPersistence(e,n){return yW(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return xW(e._delegate)}clearIndexedDbPersistence(e){return wW(e._delegate)}}class BD{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof qo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&hs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){mW(this._delegate,e,n,r)}enableNetwork(){return EW(this._delegate)}disableNetwork(){return IW(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,vD("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return TW(this._delegate)}onSnapshotsInSync(e){return YW(this._delegate,e)}get app(){if(!this._appCompat)throw new fe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Zu(this,TD(this._delegate,e))}catch(n){throw Er(n,"collection()","Firestore.collection()")}}doc(e){try{return new gi(this,$p(this._delegate,e))}catch(n){throw Er(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new wr(this,gW(this._delegate,e))}catch(n){throw Er(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return eq(this._delegate,n=>e(new zD(this,n)))}batch(){return vr(this._delegate),new GD(new QW(this._delegate,e=>rh(this._delegate,e)))}loadBundle(e){return SW(this._delegate,e)}namedQuery(e){return AW(this._delegate,e).then(n=>n?new wr(this,n):null)}}class Zm extends iw{constructor(e){super(),this.firestore=e}convertBytes(e){return new UD(new ms(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return gi.forKey(n,this.firestore,null)}}function cq(t){oG(t)}class zD{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Zm(e)}get(e){const n=ba(e);return this._delegate.get(n).then(r=>new kf(this._firestore,new qs(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=ba(e);return r?(ow("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=ba(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=ba(e);return this._delegate.delete(n),this}}class GD{constructor(e){this._delegate=e}set(e,n,r){const i=ba(e);return r?(ow("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=ba(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=ba(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class sl{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Ld(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Nf(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=sl.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new sl(e,new Zm(e),n),i.set(n,s)),s}}sl.INSTANCES=new WeakMap;class gi{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Zm(e)}static forPath(e,n,r){if(e.length%2!==0)throw new fe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new gi(n,new on(n._delegate,r,new De(e)))}static forKey(e,n,r){return new gi(n,new on(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Zu(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Zu(this.firestore,TD(this._delegate,e))}catch(n){throw Er(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=it(e),e instanceof on?ED(this._delegate,e):!1}set(e,n){n=ow("DocumentReference.set",n);try{return n?tA(this._delegate,e,n):tA(this._delegate,e)}catch(r){throw Er(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?nA(this._delegate,e):nA(this._delegate,e,n,...r)}catch(i){throw Er(i,"updateDoc()","DocumentReference.update()")}}delete(){return KW(this._delegate)}onSnapshot(...e){const n=HD(e),r=$D(e,i=>new kf(this.firestore,new qs(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return VD(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=HW(this._delegate):(e==null?void 0:e.source)==="server"?n=$W(this._delegate):n=GW(this._delegate),n.then(r=>new kf(this.firestore,new qs(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new gi(this.firestore,e?this._delegate.withConverter(sl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Er(t,e,n){return t.message=t.message.replace(e,n),t}function HD(t){for(const e of t)if(typeof e=="object"&&!dy(e))return e;return{}}function $D(t,e){var n,r;let i;return dy(t[0])?i=t[0]:dy(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class kf{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new gi(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return OD(this._delegate,e._delegate)}}class Nf extends kf{data(e){const n=this._delegate.data(e);return this._delegate._converter||aG(n!==void 0),n}}class wr{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Zm(e)}where(e,n,r){try{return new wr(this.firestore,fo(this._delegate,bW(e,n,r)))}catch(i){throw Er(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new wr(this.firestore,fo(this._delegate,DW(e,n)))}catch(r){throw Er(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new wr(this.firestore,fo(this._delegate,FW(e)))}catch(n){throw Er(n,"limit()","Query.limit()")}}limitToLast(e){try{return new wr(this.firestore,fo(this._delegate,MW(e)))}catch(n){throw Er(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new wr(this.firestore,fo(this._delegate,LW(...e)))}catch(n){throw Er(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new wr(this.firestore,fo(this._delegate,OW(...e)))}catch(n){throw Er(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new wr(this.firestore,fo(this._delegate,VW(...e)))}catch(n){throw Er(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new wr(this.firestore,fo(this._delegate,UW(...e)))}catch(n){throw Er(n,"endAt()","Query.endAt()")}}isEqual(e){return ID(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=qW(this._delegate):(e==null?void 0:e.source)==="server"?n=jW(this._delegate):n=WW(this._delegate),n.then(r=>new fy(this.firestore,new Xo(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=HD(e),r=$D(e,i=>new fy(this.firestore,new Xo(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return VD(this._delegate,n,r)}withConverter(e){return new wr(this.firestore,e?this._delegate.withConverter(sl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class dq{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Nf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class fy{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new wr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Nf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new dq(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Nf(this._firestore,r))})}isEqual(e){return OD(this._delegate,e._delegate)}}class Zu extends wr{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new gi(this.firestore,e):null}doc(e){try{return e===void 0?new gi(this.firestore,$p(this._delegate)):new gi(this.firestore,$p(this._delegate,e))}catch(n){throw Er(n,"doc()","CollectionReference.doc()")}}add(e){return JW(this._delegate,e).then(n=>new gi(this.firestore,n))}isEqual(e){return ED(this._delegate,e._delegate)}withConverter(e){return new Zu(this.firestore,e?this._delegate.withConverter(sl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function ba(t){return It(t,on)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(...e){this._delegate=new Yo(...e)}static documentId(){return new aw(Qt.keyField().canonicalString())}isEqual(e){return e=it(e),e instanceof Yo?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e){this._delegate=e}static serverTimestamp(){const e=nq();return e._methodName="FieldValue.serverTimestamp",new Ca(e)}static delete(){const e=tq();return e._methodName="FieldValue.delete",new Ca(e)}static arrayUnion(...e){const n=rq(...e);return n._methodName="FieldValue.arrayUnion",new Ca(n)}static arrayRemove(...e){const n=iq(...e);return n._methodName="FieldValue.arrayRemove",new Ca(n)}static increment(e){const n=sq(e);return n._methodName="FieldValue.increment",new Ca(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fq={Firestore:BD,GeoPoint:$m,Timestamp:tn,Blob:UD,Transaction:zD,WriteBatch:GD,DocumentReference:gi,DocumentSnapshot:kf,Query:wr,QueryDocumentSnapshot:Nf,QuerySnapshot:fy,CollectionReference:Zu,FieldPath:aw,FieldValue:Ca,setLogLevel:cq,CACHE_SIZE_UNLIMITED:_W};function hq(t,e){t.INTERNAL.registerComponent(new fs("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},fq)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pq(t){hq(t,(e,n)=>new BD(e,n,new uq)),t.registerVersion(oq,aq)}pq(Vi);function lw(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}const Qc={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},Vl={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mq(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function WD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gq=mq,vq=WD,qD=new ml("auth","Firebase",WD());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp=new Nm("@firebase/auth");function _q(t,...e){qp.logLevel<=ht.WARN&&qp.warn(`Auth (${na}): ${t}`,...e)}function P0(t,...e){qp.logLevel<=ht.ERROR&&qp.error(`Auth (${na}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(t,...e){throw cw(t,...e)}function bn(t,...e){return cw(t,...e)}function uw(t,e,n){const r=Object.assign(Object.assign({},vq()),{[e]:n});return new ml("auth","Firebase",r).create(e,{appName:t.name})}function Un(t){return uw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Tc(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Zn(t,"argument-error"),uw(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function cw(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return qD.create(t,...e)}function ye(t,e,...n){if(!t)throw cw(e,...n)}function os(t){const e="INTERNAL ASSERTION FAILED: "+t;throw P0(e),new Error(e)}function Gi(t,e){t||os(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function dw(){return sA()==="http:"||sA()==="https:"}function sA(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yq(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dw()||iP()||"connection"in navigator)?navigator.onLine:!0}function xq(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,n){this.shortDelay=e,this.longDelay=n,Gi(n>e,"Short delay should be less than long delay!"),this.isMobile=k7()||e1()}get(){return yq()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(t,e){Gi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;os("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;os("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;os("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wq={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tq=new ih(3e4,6e4);function pn(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function mn(t,e,n,r,i={}){return KD(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=hc(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},s);return P7()||(u.referrerPolicy="no-referrer"),jD.fetch()(JD(t,t.config.apiHost,n,a),u)})}async function KD(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},wq),e);try{const i=new Iq(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw md(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw md(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw md(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw md(t,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw uw(t,c,u);Zn(t,c)}}catch(i){if(i instanceof kr)throw i;Zn(t,"network-request-failed",{message:String(i)})}}async function Zs(t,e,n,r,i={}){const s=await mn(t,e,n,r,i);return"mfaPendingCredential"in s&&Zn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function JD(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?fw(t.config,i):`${t.config.apiScheme}://${i}`}function Eq(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Iq{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(bn(this.auth,"network-request-failed")),Tq.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function md(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=bn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(t){return t!==void 0&&t.getResponse!==void 0}function aA(t){return t!==void 0&&t.enterprise!==void 0}class Sq{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Eq(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aq(t){return(await mn(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function Cq(t,e){return mn(t,"GET","/v2/recaptchaConfig",pn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rq(t,e){return mn(t,"POST","/v1/accounts:delete",e)}async function kq(t,e){return mn(t,"POST","/v1/accounts:update",e)}async function YD(t,e){return mn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Od(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Nq(t,e=!1){const n=it(t),r=await n.getIdToken(e),i=eg(r);ye(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Od(Cv(i.auth_time)),issuedAtTime:Od(Cv(i.iat)),expirationTime:Od(Cv(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Cv(t){return Number(t)*1e3}function eg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return P0("JWT malformed, contained fewer than 3 sections"),null;try{const i=eP(n);return i?JSON.parse(i):(P0("Failed to decode base64 JWT payload"),null)}catch(i){return P0("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function lA(t){const e=eg(t);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function js(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof kr&&Pq(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Pq({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bq{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Od(this.lastLoginAt),this.creationTime=Od(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bf(t){var e;const n=t.auth,r=await t.getIdToken(),i=await js(t,YD(n,{idToken:r}));ye(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?XD(s.providerUserInfo):[],a=Fq(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new hy(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function Dq(t){const e=it(t);await bf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Fq(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function XD(t){return t.map(e=>{var{providerId:n}=e,r=lw(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mq(t,e){const n=await KD(t,{},async()=>{const r=hc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=JD(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",jD.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Lq(t,e){return mn(t,"POST","/v2/accounts:revokeToken",pn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):lA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const n=lA(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await Mq(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Iu;return r&&(ye(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ye(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ye(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Iu,this.toJSON())}_performRefresh(){return os("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ho(t,e){ye(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ns{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=lw(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bq(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new hy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await js(this,this.stsTokenManager.getToken(this.auth,e));return ye(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Nq(this,e)}reload(){return Dq(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ns(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await bf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(dn(this.auth.app))return Promise.reject(Un(this.auth));const e=await this.getIdToken();return await js(this,Rq(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,c;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,_=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(a=n.tenantId)!==null&&a!==void 0?a:void 0,w=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,y=(u=n.createdAt)!==null&&u!==void 0?u:void 0,T=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:E,emailVerified:N,isAnonymous:F,providerData:O,stsTokenManager:S}=n;ye(E&&S,e,"internal-error");const A=Iu.fromJSON(this.name,S);ye(typeof E=="string",e,"internal-error"),ho(d,e.name),ho(h,e.name),ye(typeof N=="boolean",e,"internal-error"),ye(typeof F=="boolean",e,"internal-error"),ho(g,e.name),ho(_,e.name),ho(x,e.name),ho(w,e.name),ho(y,e.name),ho(T,e.name);const C=new Ns({uid:E,auth:e,email:h,emailVerified:N,displayName:d,isAnonymous:F,photoURL:_,phoneNumber:g,tenantId:x,stsTokenManager:A,createdAt:y,lastLoginAt:T});return O&&Array.isArray(O)&&(C.providerData=O.map(k=>Object.assign({},k))),w&&(C._redirectEventId=w),C}static async _fromIdTokenResponse(e,n,r=!1){const i=new Iu;i.updateFromServerResponse(n);const s=new Ns({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await bf(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ye(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?XD(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Iu;a.updateFromIdToken(r);const l=new Ns({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new hy(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA=new Map;function ii(t){Gi(t instanceof Function,"Expected a class definition");let e=uA.get(t);return e?(Gi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,uA.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}QD.type="NONE";const ec=QD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ua(t,e,n){return`firebase:${t}:${e}:${n}`}class Su{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Ua(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ua("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ns._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Su(ii(ec),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||ii(ec);const o=Ua(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){const d=Ns._fromJSON(e,c);u!==s&&(a=d),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Su(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Su(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(n4(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ZD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(r4(e))return"Blackberry";if(i4(e))return"Webos";if(e4(e))return"Safari";if((e.includes("chrome/")||t4(e))&&!e.includes("edge/"))return"Chrome";if(sh(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function ZD(t=ln()){return/firefox\//i.test(t)}function e4(t=ln()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function t4(t=ln()){return/crios\//i.test(t)}function n4(t=ln()){return/iemobile/i.test(t)}function sh(t=ln()){return/android/i.test(t)}function r4(t=ln()){return/blackberry/i.test(t)}function i4(t=ln()){return/webos/i.test(t)}function oh(t=ln()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Oq(t=ln()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function Vq(t=ln()){var e;return oh(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Uq(){return sP()&&document.documentMode===10}function s4(t=ln()){return oh(t)||sh(t)||i4(t)||r4(t)||/windows phone/i.test(t)||n4(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o4(t,e=[]){let n;switch(t){case"Browser":n=cA(ln());break;case"Worker":n=`${cA(ln())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${na}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bq{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zq(t,e={}){return mn(t,"GET","/v2/passwordPolicy",pn(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gq=6;class Hq{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Gq,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $q{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dA(this),this.idTokenSubscription=new dA(this),this.beforeStateQueue=new Bq(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ii(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Su.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await YD(this,{idToken:e}),r=await Ns._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(dn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await bf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=xq()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(dn(this.app))return Promise.reject(Un(this));const n=e?it(e):null;return n&&ye(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return dn(this.app)?Promise.reject(Un(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return dn(this.app)?Promise.reject(Un(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ii(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await zq(this),n=new Hq(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ml("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Lq(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ii(e)||this._popupRedirectResolver;ye(n,this,"argument-error"),this.redirectPersistenceManager=await Su.create(this,[ii(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=o4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&_q(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function hn(t){return it(t)}class dA{constructor(e){this.auth=e,this.observer=null,this.addObserver=aP(n=>this.observer=n)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ah={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Wq(t){ah=t}function hw(t){return ah.loadJS(t)}function qq(){return ah.recaptchaV2Script}function jq(){return ah.recaptchaEnterpriseScript}function Kq(){return ah.gapiScript}function a4(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Jq="recaptcha-enterprise",Yq="NO_RECAPTCHA";class Xq{constructor(e){this.type=Jq,this.auth=hn(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{Cq(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new Sq(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;aA(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(Yq)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&aA(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=jq();l.length!==0&&(l+=a),hw(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function fA(t,e,n,r=!1){const i=new Xq(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Df(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await fA(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await fA(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}function Qq(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ii);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Zq(t,e,n){const r=hn(t);ye(r._canInitEmulator,r,"emulator-config-failed"),ye(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=l4(e),{host:o,port:a}=ej(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||tj()}function l4(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ej(t){const e=l4(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:hA(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:hA(o)}}}function hA(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function tj(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return os("not implemented")}_getIdTokenResponse(e){return os("not implemented")}_linkToIdToken(e,n){return os("not implemented")}_getReauthenticationResolver(e){return os("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u4(t,e){return mn(t,"POST","/v1/accounts:resetPassword",pn(t,e))}async function nj(t,e){return mn(t,"POST","/v1/accounts:update",e)}async function rj(t,e){return mn(t,"POST","/v1/accounts:signUp",e)}async function ij(t,e){return mn(t,"POST","/v1/accounts:update",pn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sj(t,e){return Zs(t,"POST","/v1/accounts:signInWithPassword",pn(t,e))}async function tg(t,e){return mn(t,"POST","/v1/accounts:sendOobCode",pn(t,e))}async function oj(t,e){return tg(t,e)}async function aj(t,e){return tg(t,e)}async function lj(t,e){return tg(t,e)}async function uj(t,e){return tg(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cj(t,e){return Zs(t,"POST","/v1/accounts:signInWithEmailLink",pn(t,e))}async function dj(t,e){return Zs(t,"POST","/v1/accounts:signInWithEmailLink",pn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff extends Ec{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Ff(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ff(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Df(e,n,"signInWithPassword",sj);case"emailLink":return cj(e,{email:this._email,oobCode:this._password});default:Zn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Df(e,r,"signUpPassword",rj);case"emailLink":return dj(e,{idToken:n,email:this._email,oobCode:this._password});default:Zn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Os(t,e){return Zs(t,"POST","/v1/accounts:signInWithIdp",pn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fj="http://localhost";class gs extends Ec{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new gs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Zn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=lw(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new gs(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Os(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Os(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Os(e,n)}buildRequest(){const e={requestUri:fj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=hc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hj(t,e){return mn(t,"POST","/v1/accounts:sendVerificationCode",pn(t,e))}async function pj(t,e){return Zs(t,"POST","/v1/accounts:signInWithPhoneNumber",pn(t,e))}async function mj(t,e){const n=await Zs(t,"POST","/v1/accounts:signInWithPhoneNumber",pn(t,e));if(n.temporaryProof)throw md(t,"account-exists-with-different-credential",n);return n}const gj={USER_NOT_FOUND:"user-not-found"};async function vj(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Zs(t,"POST","/v1/accounts:signInWithPhoneNumber",pn(t,n),gj)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba extends Ec{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Ba({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Ba({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return pj(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return mj(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return vj(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new Ba({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _j(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function yj(t){const e=iu(cd(t)).link,n=e?iu(cd(e)).deep_link_id:null,r=iu(cd(t)).deep_link_id;return(r?iu(cd(r)).link:null)||r||n||e||t}class ng{constructor(e){var n,r,i,s,o,a;const l=iu(cd(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,c=(r=l.oobCode)!==null&&r!==void 0?r:null,d=_j((i=l.mode)!==null&&i!==void 0?i:null);ye(u&&c&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=c,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=yj(e);try{return new ng(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(){this.providerId=aa.PROVIDER_ID}static credential(e,n){return Ff._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=ng.parseLink(n);return ye(r,"argument-error"),Ff._fromEmailAndCode(e,r.code,r.tenantId)}}aa.PROVIDER_ID="password";aa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";aa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic extends eo{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Au extends Ic{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return ye("providerId"in n&&"signInMethod"in n,"argument-error"),gs._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return ye(e.idToken||e.accessToken,"argument-error"),gs._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Au.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Au.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new Au(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends Ic{constructor(){super("facebook.com")}static credential(e){return gs._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zi.credentialFromTaggedObject(e)}static credentialFromError(e){return Zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zi.credential(e.oauthAccessToken)}catch{return null}}}Zi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends Ic{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return gs._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return es.credential(n,r)}catch{return null}}}es.GOOGLE_SIGN_IN_METHOD="google.com";es.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends Ic{constructor(){super("github.com")}static credential(e){return gs._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ts.credential(e.oauthAccessToken)}catch{return null}}}ts.GITHUB_SIGN_IN_METHOD="github.com";ts.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xj="http://localhost";class tc extends Ec{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Os(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Os(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Os(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new tc(r,s)}static _create(e,n){return new tc(e,n)}buildRequest(){return{requestUri:xj,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj="saml.";class jp extends eo{constructor(e){ye(e.startsWith(wj),"argument-error"),super(e)}static credentialFromResult(e){return jp.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return jp.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=tc.fromJSON(e);return ye(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return tc._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends Ic{constructor(){super("twitter.com")}static credential(e,n){return gs._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ns.credential(n,r)}catch{return null}}}ns.TWITTER_SIGN_IN_METHOD="twitter.com";ns.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c4(t,e){return Zs(t,"POST","/v1/accounts:signUp",pn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Ns._fromIdTokenResponse(e,r,i),o=pA(r);return new Ei({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=pA(r);return new Ei({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function pA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tj(t){var e;if(dn(t.app))return Promise.reject(Un(t));const n=hn(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Ei({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await c4(n,{returnSecureToken:!0}),i=await Ei._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp extends kr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Kp.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Kp(e,n,r,i)}}function d4(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Kp._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f4(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ej(t,e){const n=it(t);await rg(!0,n,e);const{providerUserInfo:r}=await kq(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=f4(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function pw(t,e,n=!1){const r=await js(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ei._forOperation(t,"link",r)}async function rg(t,e,n){await bf(e);const r=f4(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";ye(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h4(t,e,n=!1){const{auth:r}=t;if(dn(r.app))return Promise.reject(Un(r));const i="reauthenticate";try{const s=await js(t,d4(r,i,e,t),n);ye(s.idToken,r,"internal-error");const o=eg(s.idToken);ye(o,r,"internal-error");const{sub:a}=o;return ye(t.uid===a,r,"user-mismatch"),Ei._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Zn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p4(t,e,n=!1){if(dn(t.app))return Promise.reject(Un(t));const r="signIn",i=await d4(t,r,e),s=await Ei._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function ig(t,e){return p4(hn(t),e)}async function m4(t,e){const n=it(t);return await rg(!1,n,e.providerId),pw(n,e)}async function g4(t,e){return h4(it(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ij(t,e){return Zs(t,"POST","/v1/accounts:signInWithCustomToken",pn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sj(t,e){if(dn(t.app))return Promise.reject(Un(t));const n=hn(t),r=await Ij(n,{token:e,returnSecureToken:!0}),i=await Ei._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?mw._fromServerResponse(e,n):"totpInfo"in n?gw._fromServerResponse(e,n):Zn(e,"internal-error")}}class mw extends lh{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new mw(n)}}class gw extends lh{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new gw(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(t,e,n){var r;ye(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),ye(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ye(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(ye(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vw(t){const e=hn(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Aj(t,e,n){const r=hn(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&sg(r,i,n),await Df(r,i,"getOobCode",aj)}async function Cj(t,e,n){await u4(it(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&vw(t),r})}async function Rj(t,e){await ij(it(t),{oobCode:e})}async function v4(t,e){const n=it(t),r=await u4(n,{oobCode:e}),i=r.requestType;switch(ye(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ye(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ye(r.mfaInfo,n,"internal-error");default:ye(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=lh._fromServerResponse(hn(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function kj(t,e){const{data:n}=await v4(it(t),e);return n.email}async function Nj(t,e,n){if(dn(t.app))return Promise.reject(Un(t));const r=hn(t),o=await Df(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",c4).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&vw(t),l}),a=await Ei._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function Pj(t,e,n){return dn(t.app)?Promise.reject(Un(t)):ig(it(t),aa.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&vw(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bj(t,e,n){const r=hn(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(o,a){ye(a.handleCodeInApp,r,"argument-error"),a&&sg(r,o,a)}s(i,n),await Df(r,i,"getOobCode",lj)}function Dj(t,e){const n=ng.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function Fj(t,e,n){if(dn(t.app))return Promise.reject(Un(t));const r=it(t),i=aa.credentialWithLink(e,n||Pf());return ye(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),ig(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mj(t,e){return mn(t,"POST","/v1/accounts:createAuthUri",pn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lj(t,e){const n=dw()?Pf():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await Mj(it(t),r);return i||[]}async function Oj(t,e){const n=it(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&sg(n.auth,i,e);const{email:s}=await oj(n.auth,i);s!==t.email&&await t.reload()}async function Vj(t,e,n){const r=it(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&sg(r.auth,s,n);const{email:o}=await uj(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uj(t,e){return mn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bj(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=it(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await js(r,Uj(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function zj(t,e){const n=it(t);return dn(n.auth.app)?Promise.reject(Un(n.auth)):_4(n,e,null)}function Gj(t,e){return _4(it(t),null,e)}async function _4(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await js(t,nj(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hj(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const o=(n=(e=eg(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new Cu(s,a)}}if(!r)return null;switch(r){case"facebook.com":return new $j(s,i);case"github.com":return new Wj(s,i);case"google.com":return new qj(s,i);case"twitter.com":return new jj(s,i,t.screenName||null);case"custom":case"anonymous":return new Cu(s,null);default:return new Cu(s,r,i)}}class Cu{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class y4 extends Cu{constructor(e,n,r,i){super(e,n,r),this.username=i}}class $j extends Cu{constructor(e,n){super(e,"facebook.com",n)}}class Wj extends y4{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class qj extends Cu{constructor(e,n){super(e,"google.com",n)}}class jj extends y4{constructor(e,n,r){super(e,"twitter.com",n,r)}}function Kj(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:Hj(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new Da("enroll",e,n)}static _fromMfaPendingCredential(e){return new Da("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return Da._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return Da._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=hn(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>lh._fromServerResponse(r,a));ye(i.mfaPendingCredential,r,"internal-error");const o=Da._fromMfaPendingCredential(i.mfaPendingCredential);return new _w(o,s,async a=>{const l=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const u=Object.assign(Object.assign({},i),{idToken:l.idToken,refreshToken:l.refreshToken});switch(n.operationType){case"signIn":const c=await Ei._fromIdTokenResponse(r,n.operationType,u);return await r._updateCurrentUser(c.user),c;case"reauthenticate":return ye(n.user,r,"internal-error"),Ei._forOperation(n.user,n.operationType,u);default:Zn(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function Jj(t,e){var n;const r=it(t),i=e;return ye(e.customData.operationType,r,"argument-error"),ye((n=i.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),_w._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yj(t,e){return mn(t,"POST","/v2/accounts/mfaEnrollment:start",pn(t,e))}function Xj(t,e){return mn(t,"POST","/v2/accounts/mfaEnrollment:finalize",pn(t,e))}function Qj(t,e){return mn(t,"POST","/v2/accounts/mfaEnrollment:withdraw",pn(t,e))}class yw{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>lh._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new yw(e)}async getSession(){return Da._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,i=await this.getSession(),s=await js(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await js(this.user,Qj(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const Rv=new WeakMap;function Zj(t){const e=it(t);return Rv.has(e)||Rv.set(e,yw._fromUser(e)),Rv.get(e)}const Jp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Jp,"1"),this.storage.removeItem(Jp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eK=1e3,tK=10;class w4 extends x4{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=s4(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);Uq()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,tK):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},eK)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}w4.type="LOCAL";const xw=w4;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4 extends x4{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}T4.type="SESSION";const ol=T4;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nK(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new og(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await nK(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}og.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uh(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rK{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=uh("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const h=d;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(c),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(){return window}function iK(t){En().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ww(){return typeof En().WorkerGlobalScope<"u"&&typeof En().importScripts=="function"}async function sK(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function oK(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function aK(){return ww()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E4="firebaseLocalStorageDb",lK=1,Yp="firebaseLocalStorage",I4="fbase_key";class ch{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ag(t,e){return t.transaction([Yp],e?"readwrite":"readonly").objectStore(Yp)}function uK(){const t=indexedDB.deleteDatabase(E4);return new ch(t).toPromise()}function py(){const t=indexedDB.open(E4,lK);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Yp,{keyPath:I4})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Yp)?e(r):(r.close(),await uK(),e(await py()))})})}async function mA(t,e,n){const r=ag(t,!0).put({[I4]:e,value:n});return new ch(r).toPromise()}async function cK(t,e){const n=ag(t,!1).get(e),r=await new ch(n).toPromise();return r===void 0?null:r.value}function gA(t,e){const n=ag(t,!0).delete(e);return new ch(n).toPromise()}const dK=800,fK=3;class S4{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await py(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>fK)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ww()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=og._getInstance(aK()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await sK(),!this.activeServiceWorker)return;this.sender=new rK(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||oK()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await py();return await mA(e,Jp,"1"),await gA(e,Jp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>mA(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>cK(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>gA(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=ag(i,!1).getAll();return new ch(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dK)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}S4.type="LOCAL";const Mf=S4;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hK(t,e){return mn(t,"POST","/v2/accounts/mfaSignIn:start",pn(t,e))}function pK(t,e){return mn(t,"POST","/v2/accounts/mfaSignIn:finalize",pn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mK=500,gK=6e4,r0=1e12;class vK{constructor(e){this.auth=e,this.counter=r0,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new _K(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||r0;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||r0;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||r0;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class _K{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;ye(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=yK(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},gK)},mK))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function yK(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv=a4("rcb"),xK=new ih(3e4,6e4);class wK{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=En().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return ye(TK(n),e,"argument-error"),this.shouldResolveImmediately(n)&&oA(En().grecaptcha)?Promise.resolve(En().grecaptcha):new Promise((r,i)=>{const s=En().setTimeout(()=>{i(bn(e,"network-request-failed"))},xK.get());En()[kv]=()=>{En().clearTimeout(s),delete En()[kv];const a=En().grecaptcha;if(!a||!oA(a)){i(bn(e,"internal-error"));return}const l=a.render;a.render=(u,c)=>{const d=l(u,c);return this.counter++,d},this.hostLanguage=n,r(a)};const o=`${qq()}?${hc({onload:kv,render:"explicit",hl:n})}`;hw(o).catch(()=>{clearTimeout(s),i(bn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=En().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function TK(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class EK{async load(e){return new vK(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4="recaptcha",IK={theme:"light",type:"image"};let SK=class{constructor(e,n,r=Object.assign({},IK)){this.parameters=r,this.type=A4,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=hn(e),this.isInvisible=this.parameters.size==="invisible",ye(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;ye(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new EK:new wK,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){ye(!this.parameters.sitekey,this.auth,"argument-error"),ye(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ye(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=En()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){ye(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ye(dw()&&!ww(),this.auth,"internal-error"),await AK(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await Aq(this.auth);ye(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ye(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function AK(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Ba._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function CK(t,e,n){if(dn(t.app))return Promise.reject(Un(t));const r=hn(t),i=await lg(r,e,it(n));return new Tw(i,s=>ig(r,s))}async function RK(t,e,n){const r=it(t);await rg(!1,r,"phone");const i=await lg(r.auth,e,it(n));return new Tw(i,s=>m4(r,s))}async function kK(t,e,n){const r=it(t);if(dn(r.auth.app))return Promise.reject(Un(r.auth));const i=await lg(r.auth,e,it(n));return new Tw(i,s=>g4(r,s))}async function lg(t,e,n){var r;const i=await n.verify();try{ye(typeof i=="string",t,"argument-error"),ye(n.type===A4,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s)return ye(o.type==="enroll",t,"internal-error"),(await Yj(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{ye(o.type==="signin",t,"internal-error");const a=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return ye(a,t,"missing-multi-factor-info"),(await hK(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await hj(t,{phoneNumber:s.phoneNumber,recaptchaToken:i});return o}}finally{n._reset()}}async function NK(t,e){const n=it(t);if(dn(n.auth.app))return Promise.reject(Un(n.auth));await pw(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let al=class b0{constructor(e){this.providerId=b0.PROVIDER_ID,this.auth=hn(e)}verifyPhoneNumber(e,n){return lg(this.auth,e,it(n))}static credential(e,n){return Ba._fromVerification(e,n)}static credentialFromResult(e){const n=e;return b0.credentialFromTaggedObject(n)}static credentialFromError(e){return b0.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Ba._fromTokenResponse(n,r):null}};al.PROVIDER_ID="phone";al.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wl(t,e){return e?ii(e):(ye(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew extends Ec{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Os(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Os(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Os(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function PK(t){return p4(t.auth,new Ew(t),t.bypassAuthState)}function bK(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),h4(n,new Ew(t),t.bypassAuthState)}async function DK(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),pw(n,new Ew(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return PK;case"linkViaPopup":case"linkViaRedirect":return DK;case"reauthViaPopup":case"reauthViaRedirect":return bK;default:Zn(this.auth,"internal-error")}}resolve(e){Gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FK=new ih(2e3,1e4);async function MK(t,e,n){if(dn(t.app))return Promise.reject(bn(t,"operation-not-supported-in-this-environment"));const r=hn(t);Tc(t,e,eo);const i=wl(r,n);return new Ps(r,"signInViaPopup",e,i).executeNotNull()}async function LK(t,e,n){const r=it(t);if(dn(r.auth.app))return Promise.reject(bn(r.auth,"operation-not-supported-in-this-environment"));Tc(r.auth,e,eo);const i=wl(r.auth,n);return new Ps(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function OK(t,e,n){const r=it(t);Tc(r.auth,e,eo);const i=wl(r.auth,n);return new Ps(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Ps extends C4{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ps.currentPopupAction&&Ps.currentPopupAction.cancel(),Ps.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){Gi(this.filter.length===1,"Popup operations only handle one event");const e=uh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(bn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(bn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ps.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(bn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,FK.get())};e()}}Ps.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VK="pendingRedirect",Vd=new Map;class UK extends C4{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Vd.get(this.auth._key());if(!e){try{const r=await BK(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Vd.set(this.auth._key(),e)}return this.bypassAuthState||Vd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function BK(t,e){const n=k4(e),r=R4(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function Iw(t,e){return R4(t)._set(k4(e),"true")}function zK(){Vd.clear()}function Sw(t,e){Vd.set(t._key(),e)}function R4(t){return ii(t._redirectPersistence)}function k4(t){return Ua(VK,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GK(t,e,n){return HK(t,e,n)}async function HK(t,e,n){if(dn(t.app))return Promise.reject(Un(t));const r=hn(t);Tc(t,e,eo),await r._initializationPromise;const i=wl(r,n);return await Iw(i,r),i._openRedirect(r,e,"signInViaRedirect")}function $K(t,e,n){return WK(t,e,n)}async function WK(t,e,n){const r=it(t);if(Tc(r.auth,e,eo),dn(r.auth.app))return Promise.reject(Un(r.auth));await r.auth._initializationPromise;const i=wl(r.auth,n);await Iw(i,r.auth);const s=await N4(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function qK(t,e,n){return jK(t,e,n)}async function jK(t,e,n){const r=it(t);Tc(r.auth,e,eo),await r.auth._initializationPromise;const i=wl(r.auth,n);await rg(!1,r,e.providerId),await Iw(i,r.auth);const s=await N4(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function KK(t,e){return await hn(t)._initializationPromise,ug(t,e,!1)}async function ug(t,e,n=!1){if(dn(t.app))return Promise.reject(Un(t));const r=hn(t),i=wl(r,e),o=await new UK(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function N4(t){const e=uh(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JK=10*60*1e3;class P4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!YK(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!b4(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(bn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=JK&&this.cachedEventUids.clear(),this.cachedEventUids.has(vA(e))}saveEventToCache(e){this.cachedEventUids.add(vA(e)),this.lastProcessedEventTime=Date.now()}}function vA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function b4({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function YK(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return b4(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D4(t,e={}){return mn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XK=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,QK=/^https?/;async function ZK(t){if(t.config.emulator)return;const{authorizedDomains:e}=await D4(t);for(const n of e)try{if(eJ(n))return}catch{}Zn(t,"unauthorized-domain")}function eJ(t){const e=Pf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!QK.test(n))return!1;if(XK.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tJ=new ih(3e4,6e4);function _A(){const t=En().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function nJ(t){return new Promise((e,n)=>{var r,i,s;function o(){_A(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_A(),n(bn(t,"network-request-failed"))},timeout:tJ.get()})}if(!((i=(r=En().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=En().gapi)===null||s===void 0)&&s.load)o();else{const a=a4("iframefcb");return En()[a]=()=>{gapi.load?o():n(bn(t,"network-request-failed"))},hw(`${Kq()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw D0=null,e})}let D0=null;function rJ(t){return D0=D0||nJ(t),D0}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iJ=new ih(5e3,15e3),sJ="__/auth/iframe",oJ="emulator/auth/iframe",aJ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lJ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uJ(t){const e=t.config;ye(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?fw(e,oJ):`https://${t.config.authDomain}/${sJ}`,r={apiKey:e.apiKey,appName:t.name,v:na},i=lJ.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${hc(r).slice(1)}`}async function cJ(t){const e=await rJ(t),n=En().gapi;return ye(n,t,"internal-error"),e.open({where:document.body,url:uJ(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aJ,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=bn(t,"network-request-failed"),a=En().setTimeout(()=>{s(o)},iJ.get());function l(){En().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dJ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fJ=500,hJ=600,pJ="_blank",mJ="http://localhost";class yA{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gJ(t,e,n,r=fJ,i=hJ){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},dJ),{width:r.toString(),height:i.toString(),top:s,left:o}),u=ln().toLowerCase();n&&(a=t4(u)?pJ:n),ZD(u)&&(e=e||mJ,l.scrollbars="yes");const c=Object.entries(l).reduce((h,[g,_])=>`${h}${g}=${_},`,"");if(Vq(u)&&a!=="_self")return vJ(e||"",a),new yA(null);const d=window.open(e||"",a,c);ye(d,t,"popup-blocked");try{d.focus()}catch{}return new yA(d)}function vJ(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _J="__/auth/handler",yJ="emulator/auth/handler",xJ=encodeURIComponent("fac");async function my(t,e,n,r,i,s){ye(t.config.authDomain,t,"auth-domain-config-required"),ye(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:na,eventId:i};if(e instanceof eo){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",L7(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,d]of Object.entries(s||{}))o[c]=d}if(e instanceof Ic){const c=e.getScopes().filter(d=>d!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const l=await t._getAppCheckToken(),u=l?`#${xJ}=${encodeURIComponent(l)}`:"";return`${wJ(t)}?${hc(a).slice(1)}${u}`}function wJ({config:t}){return t.emulator?fw(t,yJ):`https://${t.authDomain}/${_J}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv="webStorageSupport";class TJ{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ol,this._completeRedirectFn=ug,this._overrideRedirectResult=Sw}async _openPopup(e,n,r,i){var s;Gi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await my(e,n,r,Pf(),i);return gJ(e,o,uh())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await my(e,n,r,Pf(),i);return iK(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Gi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await cJ(e),r=new P4(e);return n.register("authEvent",i=>(ye(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Nv,{type:Nv},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Nv];o!==void 0&&n(!!o),Zn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ZK(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return s4()||e4()||oh()}}const EJ=TJ;class IJ{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return os("unexpected MultiFactorSessionType")}}}class Aw extends IJ{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Aw(e)}_finalizeEnroll(e,n,r){return Xj(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return pK(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class F4{constructor(){}static assertion(e){return Aw._fromCredential(e)}}F4.FACTOR_ID="phone";var xA="@firebase/auth",wA="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SJ{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AJ(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function CJ(t){Ho(new fs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ye(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:o4(t)},u=new $q(r,i,s,l);return Qq(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ho(new fs("auth-internal",e=>{const n=hn(e.getProvider("auth").getImmediate());return(r=>new SJ(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Oi(xA,wA,AJ(t)),Oi(xA,wA,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RJ=5*60;A7("authIdTokenMaxAge");function kJ(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Wq({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=bn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",kJ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});CJ("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NJ=2e3;async function PJ(t,e,n){var r;const{BuildInfo:i}=ll();Gi(e.sessionId,"AuthEvent did not contain a session ID");const s=await LJ(e.sessionId),o={};return oh()?o.ibi=i.packageName:sh()?o.apn=i.packageName:Zn(t,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,my(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,o)}async function bJ(t){const{BuildInfo:e}=ll(),n={};oh()?n.iosBundleId=e.packageName:sh()?n.androidPackageName=e.packageName:Zn(t,"operation-not-supported-in-this-environment"),await D4(t,n)}function DJ(t){const{cordova:e}=ll();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,Oq()?"_blank":"_system","location=yes"),n(i)})})}async function FJ(t,e,n){const{cordova:r}=ll();let i=()=>{};try{await new Promise((s,o)=>{let a=null;function l(){var d;s();const h=(d=r.plugins.browsertab)===null||d===void 0?void 0:d.close;typeof h=="function"&&h(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function u(){a||(a=window.setTimeout(()=>{o(bn(t,"redirect-cancelled-by-user"))},NJ))}function c(){(document==null?void 0:document.visibilityState)==="visible"&&u()}e.addPassiveListener(l),document.addEventListener("resume",u,!1),sh()&&document.addEventListener("visibilitychange",c,!1),i=()=>{e.removePassiveListener(l),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",c,!1),a&&window.clearTimeout(a)}})}finally{i()}}function MJ(t){var e,n,r,i,s,o,a,l,u,c;const d=ll();ye(typeof((e=d==null?void 0:d.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ye(typeof((n=d==null?void 0:d.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ye(typeof((s=(i=(r=d==null?void 0:d.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ye(typeof((l=(a=(o=d==null?void 0:d.cordova)===null||o===void 0?void 0:o.plugins)===null||a===void 0?void 0:a.browsertab)===null||l===void 0?void 0:l.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ye(typeof((c=(u=d==null?void 0:d.cordova)===null||u===void 0?void 0:u.InAppBrowser)===null||c===void 0?void 0:c.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function LJ(t){const e=OJ(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function OJ(t){if(Gi(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VJ=20;class UJ extends P4{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function BJ(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:HJ(),postBody:null,tenantId:t.tenantId,error:bn(t,"no-auth-event")}}function zJ(t,e){return gy()._set(vy(t),e)}async function TA(t){const e=await gy()._get(vy(t));return e&&await gy()._remove(vy(t)),e}function GJ(t,e){var n,r;const i=WJ(e);if(i.includes("/__/auth/callback")){const s=F0(i),o=s.firebaseError?$J(decodeURIComponent(s.firebaseError)):null,a=(r=(n=o==null?void 0:o.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],l=a?bn(a):null;return l?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:i,postBody:null}}return null}function HJ(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<VJ;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function gy(){return ii(xw)}function vy(t){return Ua("authEvent",t.config.apiKey,t.name)}function $J(t){try{return JSON.parse(t)}catch{return null}}function WJ(t){const e=F0(t),n=e.link?decodeURIComponent(e.link):void 0,r=F0(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return F0(i).link||i||r||n||t}function F0(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return iu(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qJ=500;class jJ{constructor(){this._redirectPersistence=ol,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ug,this._overrideRedirectResult=Sw}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new UJ(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){Zn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){MJ(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),zK(),await this._originValidation(e);const o=BJ(e,r,i);await zJ(e,o);const a=await PJ(e,o,n),l=await DJ(a);return FJ(e,s,l)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=bJ(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=ll(),o=setTimeout(async()=>{await TA(e),n.onEvent(EA())},qJ),a=async c=>{clearTimeout(o);const d=await TA(e);let h=null;d&&(c!=null&&c.url)&&(h=GJ(d,c.url)),n.onEvent(h||EA())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,a);const l=i,u=`${s.packageName.toLowerCase()}://`;ll().handleOpenURL=async c=>{if(c.toLowerCase().startsWith(u)&&a({url:c}),typeof l=="function")try{l(c)}catch(d){console.error(d)}}}}const KJ=jJ;function EA(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:bn("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JJ(t,e){hn(t)._logFramework(e)}var YJ="@firebase/auth-compat",XJ="0.5.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QJ=1e3;function Ud(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function ZJ(){return Ud()==="http:"||Ud()==="https:"}function M4(t=ln()){return!!((Ud()==="file:"||Ud()==="ionic:"||Ud()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function eY(){return e1()||Zx()}function tY(){return sP()&&(document==null?void 0:document.documentMode)===11}function nY(t=ln()){return/Edge\/\d+/.test(t)}function rY(t=ln()){return tY()||nY(t)}function L4(){try{const t=self.localStorage,e=uh();if(t)return t.setItem(e,"1"),t.removeItem(e),rY()?hf():!0}catch{return Cw()&&hf()}return!1}function Cw(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Pv(){return(ZJ()||iP()||M4())&&!eY()&&L4()&&!Cw()}function O4(){return M4()&&typeof document<"u"}async function iY(){return O4()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},QJ);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function sY(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ti={LOCAL:"local",NONE:"none",SESSION:"session"},Zc=ye,V4="persistence";function oY(t,e){if(Zc(Object.values(ti).includes(e),t,"invalid-persistence-type"),e1()){Zc(e!==ti.SESSION,t,"unsupported-persistence-type");return}if(Zx()){Zc(e===ti.NONE,t,"unsupported-persistence-type");return}if(Cw()){Zc(e===ti.NONE||e===ti.LOCAL&&hf(),t,"unsupported-persistence-type");return}Zc(e===ti.NONE||L4(),t,"unsupported-persistence-type")}async function _y(t){await t._initializationPromise;const e=U4(),n=Ua(V4,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function aY(t,e){const n=U4();if(!n)return[];const r=Ua(V4,t,e);switch(n.getItem(r)){case ti.NONE:return[ec];case ti.LOCAL:return[Mf,ol];case ti.SESSION:return[ol];default:return[]}}function U4(){var t;try{return((t=sY())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lY=ye;class Io{constructor(){this.browserResolver=ii(EJ),this.cordovaResolver=ii(KJ),this.underlyingResolver=null,this._redirectPersistence=ol,this._completeRedirectFn=ug,this._overrideRedirectResult=Sw}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return O4()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return lY(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await iY();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B4(t){return t.unwrap()}function uY(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cY(t){return z4(t)}function dY(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new fY(t,Jj(t,e))}else if(r){const i=z4(e),s=e;i&&(s.credential=i,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}function z4(t){const{_tokenResponse:e}=t instanceof kr?t.customData:t;if(!e)return null;if(!(t instanceof kr)&&"temporaryProof"in e&&"phoneNumber"in e)return al.credentialFromResult(t);const n=e.providerId;if(!n||n===Qc.PASSWORD)return null;let r;switch(n){case Qc.GOOGLE:r=es;break;case Qc.FACEBOOK:r=Zi;break;case Qc.GITHUB:r=ts;break;case Qc.TWITTER:r=ns;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:l}=e;return!s&&!o&&!i&&!a?null:a?n.startsWith("saml.")?tc._create(n,a):gs._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:i,accessToken:s}):new Au(n).credential({idToken:i,accessToken:s,rawNonce:l})}return t instanceof kr?r.credentialFromError(t):r.credentialFromResult(t)}function Vr(t,e){return e.catch(n=>{throw n instanceof kr&&dY(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:cY(n),additionalUserInfo:Kj(n),user:bs.getOrCreate(i)}})}async function yy(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>Vr(t,n.confirm(r))}}class fY{constructor(e,n){this.resolver=n,this.auth=uY(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Vr(B4(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e){this._delegate=e,this.multiFactor=Zj(e)}static getOrCreate(e){return bs.USER_MAP.has(e)||bs.USER_MAP.set(e,new bs(e)),bs.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Vr(this.auth,m4(this._delegate,e))}async linkWithPhoneNumber(e,n){return yy(this.auth,RK(this._delegate,e,n))}async linkWithPopup(e){return Vr(this.auth,OK(this._delegate,e,Io))}async linkWithRedirect(e){return await _y(hn(this.auth)),qK(this._delegate,e,Io)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Vr(this.auth,g4(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return yy(this.auth,kK(this._delegate,e,n))}reauthenticateWithPopup(e){return Vr(this.auth,LK(this._delegate,e,Io))}async reauthenticateWithRedirect(e){return await _y(hn(this.auth)),$K(this._delegate,e,Io)}sendEmailVerification(e){return Oj(this._delegate,e)}async unlink(e){return await Ej(this._delegate,e),this}updateEmail(e){return zj(this._delegate,e)}updatePassword(e){return Gj(this._delegate,e)}updatePhoneNumber(e){return NK(this._delegate,e)}updateProfile(e){return Bj(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return Vj(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}bs.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ed=ye;class xy{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;ed(r,"invalid-api-key",{appName:e.name}),ed(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?Io:void 0;this._delegate=n.initialize({options:{persistence:hY(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(gq),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?bs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){Zq(this._delegate,e,n)}applyActionCode(e){return Rj(this._delegate,e)}checkActionCode(e){return v4(this._delegate,e)}confirmPasswordReset(e,n){return Cj(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return Vr(this._delegate,Nj(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return Lj(this._delegate,e)}isSignInWithEmailLink(e){return Dj(this._delegate,e)}async getRedirectResult(){ed(Pv(),this._delegate,"operation-not-supported-in-this-environment");const e=await KK(this._delegate,Io);return e?Vr(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){JJ(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:s,complete:o}=IA(e,n,r);return this._delegate.onAuthStateChanged(i,s,o)}onIdTokenChanged(e,n,r){const{next:i,error:s,complete:o}=IA(e,n,r);return this._delegate.onIdTokenChanged(i,s,o)}sendSignInLinkToEmail(e,n){return bj(this._delegate,e,n)}sendPasswordResetEmail(e,n){return Aj(this._delegate,e,n||void 0)}async setPersistence(e){oY(this._delegate,e);let n;switch(e){case ti.SESSION:n=ol;break;case ti.LOCAL:n=await ii(Mf)._isAvailable()?Mf:xw;break;case ti.NONE:n=ec;break;default:return Zn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Vr(this._delegate,Tj(this._delegate))}signInWithCredential(e){return Vr(this._delegate,ig(this._delegate,e))}signInWithCustomToken(e){return Vr(this._delegate,Sj(this._delegate,e))}signInWithEmailAndPassword(e,n){return Vr(this._delegate,Pj(this._delegate,e,n))}signInWithEmailLink(e,n){return Vr(this._delegate,Fj(this._delegate,e,n))}signInWithPhoneNumber(e,n){return yy(this._delegate,CK(this._delegate,e,n))}async signInWithPopup(e){return ed(Pv(),this._delegate,"operation-not-supported-in-this-environment"),Vr(this._delegate,MK(this._delegate,e,Io))}async signInWithRedirect(e){return ed(Pv(),this._delegate,"operation-not-supported-in-this-environment"),await _y(this._delegate),GK(this._delegate,e,Io)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return kj(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}xy.Persistence=ti;function IA(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:o=>i(o&&bs.getOrCreate(o)),error:e,complete:n}}function hY(t,e){const n=aY(t,e);if(typeof self<"u"&&!n.includes(Mf)&&n.push(Mf),typeof window<"u")for(const r of[xw,ol])n.includes(r)||n.push(r);return n.includes(ec)||n.push(ec),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(){this.providerId="phone",this._delegate=new al(B4(Vi.auth()))}static credential(e,n){return al.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}Rw.PHONE_SIGN_IN_METHOD=al.PHONE_SIGN_IN_METHOD;Rw.PROVIDER_ID=al.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pY=ye;class mY{constructor(e,n,r=Vi.app()){var i;pY((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new SK(r.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gY="auth-compat";function vY(t){t.INTERNAL.registerComponent(new fs(gY,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new xy(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Vl.EMAIL_SIGNIN,PASSWORD_RESET:Vl.PASSWORD_RESET,RECOVER_EMAIL:Vl.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Vl.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Vl.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Vl.VERIFY_EMAIL}},EmailAuthProvider:aa,FacebookAuthProvider:Zi,GithubAuthProvider:ts,GoogleAuthProvider:es,OAuthProvider:Au,SAMLAuthProvider:jp,PhoneAuthProvider:Rw,PhoneMultiFactorGenerator:F4,RecaptchaVerifier:mY,TwitterAuthProvider:ns,Auth:xy,AuthCredential:Ec,Error:kr}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(YJ,XJ)}vY(Vi);const _Y={apiKey:"AIzaSyAYcJxQflWNyk7_8JpYYYDEk1WJ8OZeJnw",authDomain:"smeny-5be44.firebaseapp.com",projectId:"smeny-5be44",storageBucket:"smeny-5be44.firebasestorage.app",messagingSenderId:"784512255996",appId:"1:784512255996:web:ad1f66ecf7f5aab36a9479",measurementId:"G-8F4MFFDMQM"},G4=Vi.apps.length?Vi.app():Vi.initializeApp(_Y),pr=G4.firestore(),cg=G4.auth(),yY=new Vi.auth.GoogleAuthProvider,nc=t=>{if(t===void 0)return;if(t===null)return null;if(typeof t!="object"||t instanceof Date||typeof(t==null?void 0:t.toMillis)=="function")return t;if(Array.isArray(t))return t.map(n=>nc(n)).filter(n=>n!==void 0);const e={};for(const[n,r]of Object.entries(t)){const i=nc(r);i!==void 0&&(e[n]=i)}return e},xY=async()=>{var t;try{const e=await cg.signInWithPopup(yY);if((t=e.user)!=null&&t.email){const n=e.user.email.toLowerCase();await pr.collection("users").doc(n).set({email:n,lastLogin:Vi.firestore.FieldValue.serverTimestamp(),displayName:e.user.displayName||"Neznm"},{merge:!0})}}catch(e){console.error("Login failed",e)}},wY=async()=>{await cg.signOut()},TY=async(t,e)=>{await pr.collection("employee_configs").doc(t).set(nc(e),{merge:!0})},EY=async()=>{const t=await pr.collection("employee_configs").get(),e={};return t.forEach(n=>{e[n.id]=n.data()}),e},IY=t=>pr.collection("custom_shift_definitions").onSnapshot(e=>{const n=[];e.forEach(r=>n.push(r.data())),t(n)}),SY=async t=>{await pr.collection("custom_shift_definitions").doc(t.code).set(nc(t),{merge:!0})},AY=async t=>{await pr.collection("custom_shift_definitions").doc(t).delete()},rc=async(t,e="unspecified")=>{var r;const n=(t==null?void 0:t.message)||String(t);try{await pr.collection("bug_reports").add({message:n,context:e,timestamp:Vi.firestore.FieldValue.serverTimestamp(),userEmail:((r=cg.currentUser)==null?void 0:r.email)||"anonymous"})}catch{}},CY=(t,e,n,r)=>{const i=t+"-01",s=t+"-31";return pr.collection("shifts").where("date",">=",i).where("date","<=",s).onSnapshot({next:a=>{const l=[];a.forEach(u=>{const c=u.data();!!c.isAudit===e&&l.push(c)}),n(l)},error:a=>{rc(a,`Firestore Shifts [${t}, audit=${e}]`),r(a)}})},bv=async t=>{const e=t.id??(t.employeeId&&t.date?`${t.employeeId}-${t.date}`:void 0);if(!e){const s=new Error("saveShiftToDb: Missing shift.id (and cannot derive from employeeId/date)");throw await rc(s,"Save Shift"),s}const n={...t,id:e,availability:t.availability??"",confirmedType:t.confirmedType??"",startTime:t.startTime??"",endTime:t.endTime??"",breakDuration:t.breakDuration??0,note:t.note??"",isWeekend:!!t.isWeekend,isOffered:!!t.isOffered,isAudit:!!t.isAudit,history:t.history??[]},r=nc(n),i=JSON.parse(JSON.stringify(r===void 0?{}:r));try{await pr.collection("shifts").doc(e).set(i,{merge:!0})}catch(s){throw await rc(s,"Save Shift"),s}},RY=t=>pr.collection("tasks").orderBy("createdAt","desc").onSnapshot(e=>{const n=[];e.forEach(r=>n.push({id:r.id,...r.data()})),t(n)}),kY=async t=>{const e=t.id||pr.collection("tasks").doc().id;await pr.collection("tasks").doc(e).set(nc({...t,id:e,createdAt:t.createdAt||new Date().toISOString()}),{merge:!0})},NY=async t=>{await pr.collection("tasks").doc(t).delete()},PY=()=>v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:v.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center border border-slate-100",children:[v.jsx("div",{className:"mb-6 flex justify-center",children:v.jsx("div",{className:"p-4 bg-primary/10 rounded-full text-primary",children:v.jsx(qN,{size:48})})}),v.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Smny Kratochvle"}),v.jsx("p",{className:"text-slate-500 mb-8",children:"Pihlaste se pro pstup k plnovn."}),v.jsxs("button",{onClick:xY,className:"w-full py-3 px-4 bg-primary hover:bg-primaryHover text-white font-semibold rounded-lg transition-all shadow-md hover:shadow-lg flex items-center justify-center gap-3",children:[v.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[v.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),v.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),v.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.84z"}),v.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Pihlsit se pes Google"]})]})}),bY=({shifts:t,employees:e,date:n})=>{const r=t.map((l,u)=>({shift:l,employee:e[u]})).filter(l=>l.shift&&l.shift.startTime&&l.shift.endTime&&l.shift.confirmedType),i=n?a7(t,n):!0,s=6,o=20,a=Array.from({length:o-s+1},(l,u)=>s+u);return r.length===0?v.jsxs("div",{className:"flex items-center gap-2 w-full h-full",children:[v.jsx("div",{className:"h-full flex-1 bg-gray-50 rounded border border-gray-100 flex items-center justify-center text-xs text-gray-300",children:"dn smny"}),n&&n.getDay()!==0&&n.getDay()!==6&&v.jsx("div",{className:"text-red-500 animate-pulse",title:"Prodejna nepokryta",children:v.jsx(ff,{size:18})})]}):v.jsxs("div",{className:"flex items-center gap-2 w-full h-full relative",children:[v.jsxs("div",{className:"relative flex-1 h-full select-none group min-h-[40px]",children:[v.jsx("div",{className:"absolute inset-0 flex border-b border-gray-200",children:a.map((l,u)=>v.jsx("div",{className:"flex-1 border-l border-gray-100 relative group-hover:border-gray-300 transition-colors first:border-l-0",children:l%2===0||l===s?v.jsx("span",{className:"absolute -top-3 left-0 text-[9px] text-gray-400 font-mono transform -translate-x-1/2 z-10 bg-white/80 px-0.5 rounded",children:l}):null},l))}),v.jsx("div",{className:"absolute inset-0 top-1 bottom-1",children:r.map((l,u)=>{if(!l.shift)return null;const{left:c,width:d}=o7(l.shift.startTime,l.shift.endTime,s,o),h=t7[l.shift.confirmedType]||"bg-gray-500",g=u%3*6+2,_=10+u;return v.jsx("div",{className:`absolute h-2.5 rounded-sm opacity-90 hover:opacity-100 hover:z-20 transition-all cursor-help border border-white/50 ${h}`,style:{left:`${c}%`,width:`${d}%`,top:`${g}px`,zIndex:_},title:`${l.employee.name} (${l.shift.confirmedType}): ${l.shift.startTime} - ${l.shift.endTime}`},l.shift.id)})})]}),!i&&v.jsx("div",{className:"text-red-500 animate-pulse flex-shrink-0",title:"Pozor: Prodejna nen pln pokryta dle otevrac doby!",children:v.jsx(ff,{size:20})})]})};var DY={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let FY,MY;function LY(){return{geminiUrl:FY,vertexUrl:MY}}function OY(t,e,n,r){var i,s;if(!(t!=null&&t.baseUrl)){const o=LY();return e?(i=o.vertexUrl)!==null&&i!==void 0?i:n:(s=o.geminiUrl)!==null&&s!==void 0?s:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class to{}function Oe(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const s=e[i];return s!=null?String(s):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function m(t,e,n){for(let s=0;s<e.length-1;s++){const o=e[s];if(o.endsWith("[]")){const a=o.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[a])){const l=t[a];if(Array.isArray(n))for(let u=0;u<l.length;u++){const c=l[u];m(c,e.slice(s+1),n[u])}else for(const u of l)m(u,e.slice(s+1),n)}return}else if(o.endsWith("[0]")){const a=o.slice(0,-3);a in t||(t[a]=[{}]);const l=t[a];m(l[0],e.slice(s+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function f(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const i=e[r];if(i.endsWith("[]")){const s=i.slice(0,-2);if(s in t){const o=t[s];return Array.isArray(o)?o.map(a=>f(a,e.slice(r+1),n)):n}else return n}else t=t[i]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function VY(t,e){for(const[n,r]of Object.entries(e)){const i=n.split("."),s=r.split("."),o=new Set;let a=-1;for(let l=0;l<i.length;l++)if(i[l]==="*"){a=l;break}if(a!==-1&&s.length>a)for(let l=a;l<s.length;l++){const u=s[l];u!=="*"&&!u.endsWith("[]")&&!u.endsWith("[0]")&&o.add(u)}wy(t,i,s,0,o)}}function wy(t,e,n,r,i){if(r>=e.length||typeof t!="object"||t===null)return;const s=e[r];if(s.endsWith("[]")){const o=s.slice(0,-2),a=t;if(o in a&&Array.isArray(a[o]))for(const l of a[o])wy(l,e,n,r+1,i)}else if(s==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const o=t,a=Object.keys(o).filter(u=>!u.startsWith("_")&&!i.has(u)),l={};for(const u of a)l[u]=o[u];for(const[u,c]of Object.entries(l)){const d=[];for(const h of n.slice(r))h==="*"?d.push(u):d.push(h);m(o,d,c)}for(const u of a)delete o[u]}}else{const o=t;s in o&&wy(o[s],e,n,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kw(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UY(t){const e={},n=f(t,["operationName"]);n!=null&&m(e,["operationName"],n);const r=f(t,["resourceName"]);return r!=null&&m(e,["_url","resourceName"],r),e}function BY(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const r=f(t,["metadata"]);r!=null&&m(e,["metadata"],r);const i=f(t,["done"]);i!=null&&m(e,["done"],i);const s=f(t,["error"]);s!=null&&m(e,["error"],s);const o=f(t,["response","generateVideoResponse"]);return o!=null&&m(e,["response"],GY(o)),e}function zY(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const r=f(t,["metadata"]);r!=null&&m(e,["metadata"],r);const i=f(t,["done"]);i!=null&&m(e,["done"],i);const s=f(t,["error"]);s!=null&&m(e,["error"],s);const o=f(t,["response"]);return o!=null&&m(e,["response"],HY(o)),e}function GY(t){const e={},n=f(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>$Y(o))),m(e,["generatedVideos"],s)}const r=f(t,["raiMediaFilteredCount"]);r!=null&&m(e,["raiMediaFilteredCount"],r);const i=f(t,["raiMediaFilteredReasons"]);return i!=null&&m(e,["raiMediaFilteredReasons"],i),e}function HY(t){const e={},n=f(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>WY(o))),m(e,["generatedVideos"],s)}const r=f(t,["raiMediaFilteredCount"]);r!=null&&m(e,["raiMediaFilteredCount"],r);const i=f(t,["raiMediaFilteredReasons"]);return i!=null&&m(e,["raiMediaFilteredReasons"],i),e}function $Y(t){const e={},n=f(t,["video"]);return n!=null&&m(e,["video"],XY(n)),e}function WY(t){const e={},n=f(t,["_self"]);return n!=null&&m(e,["video"],QY(n)),e}function qY(t){const e={},n=f(t,["operationName"]);return n!=null&&m(e,["_url","operationName"],n),e}function jY(t){const e={},n=f(t,["operationName"]);return n!=null&&m(e,["_url","operationName"],n),e}function KY(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const r=f(t,["metadata"]);r!=null&&m(e,["metadata"],r);const i=f(t,["done"]);i!=null&&m(e,["done"],i);const s=f(t,["error"]);s!=null&&m(e,["error"],s);const o=f(t,["response"]);return o!=null&&m(e,["response"],JY(o)),e}function JY(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["parent"]);r!=null&&m(e,["parent"],r);const i=f(t,["documentName"]);return i!=null&&m(e,["documentName"],i),e}function H4(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const r=f(t,["metadata"]);r!=null&&m(e,["metadata"],r);const i=f(t,["done"]);i!=null&&m(e,["done"],i);const s=f(t,["error"]);s!=null&&m(e,["error"],s);const o=f(t,["response"]);return o!=null&&m(e,["response"],YY(o)),e}function YY(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["parent"]);r!=null&&m(e,["parent"],r);const i=f(t,["documentName"]);return i!=null&&m(e,["documentName"],i),e}function XY(t){const e={},n=f(t,["uri"]);n!=null&&m(e,["uri"],n);const r=f(t,["encodedVideo"]);r!=null&&m(e,["videoBytes"],kw(r));const i=f(t,["encoding"]);return i!=null&&m(e,["mimeType"],i),e}function QY(t){const e={},n=f(t,["gcsUri"]);n!=null&&m(e,["uri"],n);const r=f(t,["bytesBase64Encoded"]);r!=null&&m(e,["videoBytes"],kw(r));const i=f(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var SA;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(SA||(SA={}));var AA;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(AA||(AA={}));var CA;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(CA||(CA={}));var Sr;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Sr||(Sr={}));var RA;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(RA||(RA={}));var kA;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(kA||(kA={}));var NA;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(NA||(NA={}));var PA;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(PA||(PA={}));var bA;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(bA||(bA={}));var DA;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(DA||(DA={}));var FA;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(FA||(FA={}));var MA;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(MA||(MA={}));var LA;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(LA||(LA={}));var OA;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(OA||(OA={}));var VA;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(VA||(VA={}));var UA;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(UA||(UA={}));var BA;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(BA||(BA={}));var zA;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(zA||(zA={}));var GA;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(GA||(GA={}));var Xp;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Xp||(Xp={}));var HA;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(HA||(HA={}));var $A;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})($A||($A={}));var WA;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(WA||(WA={}));var Ty;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Ty||(Ty={}));var qA;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(qA||(qA={}));var jA;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(jA||(jA={}));var KA;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(KA||(KA={}));var JA;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(JA||(JA={}));var YA;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(YA||(YA={}));var XA;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(XA||(XA={}));var QA;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(QA||(QA={}));var ZA;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(ZA||(ZA={}));var e2;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(e2||(e2={}));var t2;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(t2||(t2={}));var n2;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(n2||(n2={}));var r2;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(r2||(r2={}));var i2;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(i2||(i2={}));var s2;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(s2||(s2={}));var o2;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(o2||(o2={}));var a2;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(a2||(a2={}));var l2;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(l2||(l2={}));var u2;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(u2||(u2={}));var c2;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(c2||(c2={}));var d2;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(d2||(d2={}));var f2;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(f2||(f2={}));var h2;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(h2||(h2={}));var p2;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(p2||(p2={}));var m2;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(m2||(m2={}));var g2;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(g2||(g2={}));var v2;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(v2||(v2={}));var _2;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(_2||(_2={}));var y2;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(y2||(y2={}));var x2;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(x2||(x2={}));var w2;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(w2||(w2={}));var T2;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(T2||(T2={}));var su;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(su||(su={}));class Ey{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class td{get text(){var e,n,r,i,s,o,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",c=!1;const d=[];for(const h of(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[g,_]of Object.entries(h))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(_!==null||_!==void 0)&&d.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;c=!0,u+=h.text}}return d.length>0&&console.warn(`there are non-text parts ${d} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),c?u:void 0}get data(){var e,n,r,i,s,o,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const c=[];for(const d of(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[h,g]of Object.entries(d))h!=="inlineData"&&(g!==null||g!==void 0)&&c.push(h);d.inlineData&&typeof d.inlineData.data=="string"&&(u+=atob(d.inlineData.data))}return c.length>0&&console.warn(`there are non-data parts ${c} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,n,r,i,s,o,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(c=>c.functionCall).map(c=>c.functionCall).filter(c=>c!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var e,n,r,i,s,o,a,l,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const c=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(d=>d.executableCode).map(d=>d.executableCode).filter(d=>d!==void 0);if((c==null?void 0:c.length)!==0)return(u=c==null?void 0:c[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,n,r,i,s,o,a,l,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const c=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(d=>d.codeExecutionResult).map(d=>d.codeExecutionResult).filter(d=>d!==void 0);if((c==null?void 0:c.length)!==0)return(u=c==null?void 0:c[0])===null||u===void 0?void 0:u.output}}class E2{}class I2{}class ZY{}class eX{}class tX{}class nX{}class S2{}class A2{}class C2{}class rX{}class Qp{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Qp;let i;const s=e;return n?i=zY(s):i=BY(s),Object.assign(r,i),r}}class R2{}class k2{}class N2{}class P2{}class iX{}class sX{}class oX{}class Nw{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Nw,s=KY(e);return Object.assign(r,s),r}}class aX{}class lX{}class uX{}class b2{}class cX{get text(){var e,n,r;let i="",s=!1;const o=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,u]of Object.entries(a))l!=="text"&&l!=="thought"&&u!==null&&o.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;s=!0,i+=a.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?i:void 0}get data(){var e,n,r;let i="";const s=[];for(const o of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[a,l]of Object.entries(o))a!=="inlineData"&&l!==null&&s.push(a);o.inlineData&&typeof o.inlineData.data=="string"&&(i+=atob(o.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class dX{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Pw{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Pw,s=H4(e);return Object.assign(r,s),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function St(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function $4(t,e){const n=St(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function W4(t){return Array.isArray(t)?t.map(e=>Zp(e)):[Zp(t)]}function Zp(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function q4(t){const e=Zp(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function j4(t){const e=Zp(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function D2(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function K4(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>D2(e)):[D2(t)]}function Iy(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function F2(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function M2(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function dr(t){if(t==null)throw new Error("ContentUnion is required");return Iy(t)?t:{role:"user",parts:K4(t)}}function bw(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=dr(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=dr(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>dr(n)):[dr(e)]}function xi(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(F2(t)||M2(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[dr(t)]}const e=[],n=[],r=Iy(t[0]);for(const i of t){const s=Iy(i);if(s!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(i);else{if(F2(i)||M2(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:K4(n)}),e}function fX(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(Sr).includes(n[0].toUpperCase())?n[0].toUpperCase():Sr.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(Sr).includes(r.toUpperCase())?r.toUpperCase():Sr.TYPE_UNSPECIFIED})}}function Ru(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&fX(t.type,e);for(const[o,a]of Object.entries(t))if(a!=null)if(o=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(Sr).includes(a.toUpperCase())?a.toUpperCase():Sr.TYPE_UNSPECIFIED}else if(n.includes(o))e[o]=Ru(a);else if(r.includes(o)){const l=[];for(const u of a){if(u.type=="null"){e.nullable=!0;continue}l.push(Ru(u))}e[o]=l}else if(i.includes(o)){const l={};for(const[u,c]of Object.entries(a))l[u]=Ru(c);e[o]=l}else{if(o==="additionalProperties")continue;e[o]=a}return e}function Dw(t){return Ru(t)}function Fw(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Mw(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Sc(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ru(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ru(e.response));return t}function Ac(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function hX(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function no(t,e){if(typeof e!="string")throw new Error("name must be a string");return hX(t,e,"cachedContents")}function J4(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function la(t){return kw(t)}function pX(t){return t!=null&&typeof t=="object"&&"name"in t}function mX(t){return t!=null&&typeof t=="object"&&"video"in t}function gX(t){return t!=null&&typeof t=="object"&&"uri"in t}function Y4(t){var e;let n;if(pX(t)&&(n=t.name),!(gX(t)&&(n=t.uri,n===void 0))&&!(mX(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function X4(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Q4(t){for(const e of["models","tunedModels","publisherModels"])if(vX(t,e))return t[e];return[]}function vX(t,e){return t!==null&&typeof t=="object"&&e in t}function _X(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function yX(t,e={}){const n=[],r=new Set;for(const i of t){const s=i.name;if(r.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);r.add(s);const o=_X(i,e);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}function Z4(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function xX(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function eF(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let s=!1;for(const o of i){if(typeof o!="object"||o===null)continue;const l=o.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){s=!0;break}}return s&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Cc(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function tF(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wX(t){const e={},n=f(t,["responsesFile"]);n!=null&&m(e,["fileName"],n);const r=f(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>tQ(o))),m(e,["inlinedResponses"],s)}const i=f(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),m(e,["inlinedEmbedContentResponses"],s)}return e}function TX(t){const e={},n=f(t,["predictionsFormat"]);n!=null&&m(e,["format"],n);const r=f(t,["gcsDestination","outputUriPrefix"]);r!=null&&m(e,["gcsUri"],r);const i=f(t,["bigqueryDestination","outputUri"]);return i!=null&&m(e,["bigqueryUri"],i),e}function EX(t){const e={},n=f(t,["format"]);n!=null&&m(e,["predictionsFormat"],n);const r=f(t,["gcsUri"]);r!=null&&m(e,["gcsDestination","outputUriPrefix"],r);const i=f(t,["bigqueryUri"]);if(i!=null&&m(e,["bigqueryDestination","outputUri"],i),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function M0(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const r=f(t,["metadata","displayName"]);r!=null&&m(e,["displayName"],r);const i=f(t,["metadata","state"]);i!=null&&m(e,["state"],tF(i));const s=f(t,["metadata","createTime"]);s!=null&&m(e,["createTime"],s);const o=f(t,["metadata","endTime"]);o!=null&&m(e,["endTime"],o);const a=f(t,["metadata","updateTime"]);a!=null&&m(e,["updateTime"],a);const l=f(t,["metadata","model"]);l!=null&&m(e,["model"],l);const u=f(t,["metadata","output"]);return u!=null&&m(e,["dest"],wX(eF(u))),e}function Sy(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const r=f(t,["displayName"]);r!=null&&m(e,["displayName"],r);const i=f(t,["state"]);i!=null&&m(e,["state"],tF(i));const s=f(t,["error"]);s!=null&&m(e,["error"],s);const o=f(t,["createTime"]);o!=null&&m(e,["createTime"],o);const a=f(t,["startTime"]);a!=null&&m(e,["startTime"],a);const l=f(t,["endTime"]);l!=null&&m(e,["endTime"],l);const u=f(t,["updateTime"]);u!=null&&m(e,["updateTime"],u);const c=f(t,["model"]);c!=null&&m(e,["model"],c);const d=f(t,["inputConfig"]);d!=null&&m(e,["src"],IX(d));const h=f(t,["outputConfig"]);h!=null&&m(e,["dest"],TX(eF(h)));const g=f(t,["completionStats"]);return g!=null&&m(e,["completionStats"],g),e}function IX(t){const e={},n=f(t,["instancesFormat"]);n!=null&&m(e,["format"],n);const r=f(t,["gcsSource","uris"]);r!=null&&m(e,["gcsUri"],r);const i=f(t,["bigquerySource","inputUri"]);return i!=null&&m(e,["bigqueryUri"],i),e}function SX(t,e){const n={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=f(e,["fileName"]);r!=null&&m(n,["fileName"],r);const i=f(e,["inlinedRequests"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>eQ(t,o))),m(n,["requests","requests"],s)}return n}function AX(t){const e={},n=f(t,["format"]);n!=null&&m(e,["instancesFormat"],n);const r=f(t,["gcsUri"]);r!=null&&m(e,["gcsSource","uris"],r);const i=f(t,["bigqueryUri"]);if(i!=null&&m(e,["bigquerySource","inputUri"],i),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function CX(t){const e={},n=f(t,["data"]);if(n!=null&&m(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function RX(t,e){const n={},r=f(e,["name"]);return r!=null&&m(n,["_url","name"],Cc(t,r)),n}function kX(t,e){const n={},r=f(e,["name"]);return r!=null&&m(n,["_url","name"],Cc(t,r)),n}function NX(t){const e={},n=f(t,["content"]);n!=null&&m(e,["content"],n);const r=f(t,["citationMetadata"]);r!=null&&m(e,["citationMetadata"],PX(r));const i=f(t,["tokenCount"]);i!=null&&m(e,["tokenCount"],i);const s=f(t,["finishReason"]);s!=null&&m(e,["finishReason"],s);const o=f(t,["avgLogprobs"]);o!=null&&m(e,["avgLogprobs"],o);const a=f(t,["groundingMetadata"]);a!=null&&m(e,["groundingMetadata"],a);const l=f(t,["index"]);l!=null&&m(e,["index"],l);const u=f(t,["logprobsResult"]);u!=null&&m(e,["logprobsResult"],u);const c=f(t,["safetyRatings"]);if(c!=null){let h=c;Array.isArray(h)&&(h=h.map(g=>g)),m(e,["safetyRatings"],h)}const d=f(t,["urlContextMetadata"]);return d!=null&&m(e,["urlContextMetadata"],d),e}function PX(t){const e={},n=f(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),m(e,["citations"],r)}return e}function nF(t){const e={},n=f(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>lQ(s))),m(e,["parts"],i)}const r=f(t,["role"]);return r!=null&&m(e,["role"],r),e}function bX(t,e){const n={},r=f(t,["displayName"]);if(e!==void 0&&r!=null&&m(e,["batch","displayName"],r),f(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function DX(t,e){const n={},r=f(t,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const i=f(t,["dest"]);return e!==void 0&&i!=null&&m(e,["outputConfig"],EX(xX(i))),n}function L2(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["_url","model"],St(t,r));const i=f(e,["src"]);i!=null&&m(n,["batch","inputConfig"],SX(t,Z4(t,i)));const s=f(e,["config"]);return s!=null&&bX(s,n),n}function FX(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["model"],St(t,r));const i=f(e,["src"]);i!=null&&m(n,["inputConfig"],AX(Z4(t,i)));const s=f(e,["config"]);return s!=null&&DX(s,n),n}function MX(t,e){const n={},r=f(t,["displayName"]);return e!==void 0&&r!=null&&m(e,["batch","displayName"],r),n}function LX(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["_url","model"],St(t,r));const i=f(e,["src"]);i!=null&&m(n,["batch","inputConfig"],HX(t,i));const s=f(e,["config"]);return s!=null&&MX(s,n),n}function OX(t,e){const n={},r=f(e,["name"]);return r!=null&&m(n,["_url","name"],Cc(t,r)),n}function VX(t,e){const n={},r=f(e,["name"]);return r!=null&&m(n,["_url","name"],Cc(t,r)),n}function UX(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["name"]);r!=null&&m(e,["name"],r);const i=f(t,["done"]);i!=null&&m(e,["done"],i);const s=f(t,["error"]);return s!=null&&m(e,["error"],s),e}function BX(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["name"]);r!=null&&m(e,["name"],r);const i=f(t,["done"]);i!=null&&m(e,["done"],i);const s=f(t,["error"]);return s!=null&&m(e,["error"],s),e}function zX(t,e){const n={},r=f(e,["contents"]);if(r!=null){let s=bw(t,r);Array.isArray(s)&&(s=s.map(o=>o)),m(n,["requests[]","request","content"],s)}const i=f(e,["config"]);return i!=null&&(m(n,["_self"],GX(i,n)),VY(n,{"requests[].*":"requests[].request.*"})),n}function GX(t,e){const n={},r=f(t,["taskType"]);e!==void 0&&r!=null&&m(e,["requests[]","taskType"],r);const i=f(t,["title"]);e!==void 0&&i!=null&&m(e,["requests[]","title"],i);const s=f(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&m(e,["requests[]","outputDimensionality"],s),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function HX(t,e){const n={},r=f(e,["fileName"]);r!=null&&m(n,["file_name"],r);const i=f(e,["inlinedRequests"]);return i!=null&&m(n,["requests"],zX(t,i)),n}function $X(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function WX(t){const e={},n=f(t,["id"]);n!=null&&m(e,["id"],n);const r=f(t,["args"]);r!=null&&m(e,["args"],r);const i=f(t,["name"]);if(i!=null&&m(e,["name"],i),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function qX(t){const e={},n=f(t,["mode"]);n!=null&&m(e,["mode"],n);const r=f(t,["allowedFunctionNames"]);if(r!=null&&m(e,["allowedFunctionNames"],r),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function jX(t,e,n){const r={},i=f(e,["systemInstruction"]);n!==void 0&&i!=null&&m(n,["systemInstruction"],nF(dr(i)));const s=f(e,["temperature"]);s!=null&&m(r,["temperature"],s);const o=f(e,["topP"]);o!=null&&m(r,["topP"],o);const a=f(e,["topK"]);a!=null&&m(r,["topK"],a);const l=f(e,["candidateCount"]);l!=null&&m(r,["candidateCount"],l);const u=f(e,["maxOutputTokens"]);u!=null&&m(r,["maxOutputTokens"],u);const c=f(e,["stopSequences"]);c!=null&&m(r,["stopSequences"],c);const d=f(e,["responseLogprobs"]);d!=null&&m(r,["responseLogprobs"],d);const h=f(e,["logprobs"]);h!=null&&m(r,["logprobs"],h);const g=f(e,["presencePenalty"]);g!=null&&m(r,["presencePenalty"],g);const _=f(e,["frequencyPenalty"]);_!=null&&m(r,["frequencyPenalty"],_);const x=f(e,["seed"]);x!=null&&m(r,["seed"],x);const w=f(e,["responseMimeType"]);w!=null&&m(r,["responseMimeType"],w);const y=f(e,["responseSchema"]);y!=null&&m(r,["responseSchema"],Dw(y));const T=f(e,["responseJsonSchema"]);if(T!=null&&m(r,["responseJsonSchema"],T),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const E=f(e,["safetySettings"]);if(n!==void 0&&E!=null){let D=E;Array.isArray(D)&&(D=D.map(oe=>uQ(oe))),m(n,["safetySettings"],D)}const N=f(e,["tools"]);if(n!==void 0&&N!=null){let D=Ac(N);Array.isArray(D)&&(D=D.map(oe=>dQ(Sc(oe)))),m(n,["tools"],D)}const F=f(e,["toolConfig"]);if(n!==void 0&&F!=null&&m(n,["toolConfig"],cQ(F)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const O=f(e,["cachedContent"]);n!==void 0&&O!=null&&m(n,["cachedContent"],no(t,O));const S=f(e,["responseModalities"]);S!=null&&m(r,["responseModalities"],S);const A=f(e,["mediaResolution"]);A!=null&&m(r,["mediaResolution"],A);const C=f(e,["speechConfig"]);if(C!=null&&m(r,["speechConfig"],Fw(C)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const k=f(e,["thinkingConfig"]);k!=null&&m(r,["thinkingConfig"],k);const P=f(e,["imageConfig"]);P!=null&&m(r,["imageConfig"],ZX(P));const V=f(e,["enableEnhancedCivicAnswers"]);return V!=null&&m(r,["enableEnhancedCivicAnswers"],V),r}function KX(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>NX(u))),m(e,["candidates"],l)}const i=f(t,["modelVersion"]);i!=null&&m(e,["modelVersion"],i);const s=f(t,["promptFeedback"]);s!=null&&m(e,["promptFeedback"],s);const o=f(t,["responseId"]);o!=null&&m(e,["responseId"],o);const a=f(t,["usageMetadata"]);return a!=null&&m(e,["usageMetadata"],a),e}function JX(t,e){const n={},r=f(e,["name"]);return r!=null&&m(n,["_url","name"],Cc(t,r)),n}function YX(t,e){const n={},r=f(e,["name"]);return r!=null&&m(n,["_url","name"],Cc(t,r)),n}function XX(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&m(e,["enableWidget"],n),e}function QX(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],n),e}function ZX(t){const e={},n=f(t,["aspectRatio"]);n!=null&&m(e,["aspectRatio"],n);const r=f(t,["imageSize"]);if(r!=null&&m(e,["imageSize"],r),f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function eQ(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["request","model"],St(t,r));const i=f(e,["contents"]);if(i!=null){let a=xi(i);Array.isArray(a)&&(a=a.map(l=>nF(l))),m(n,["request","contents"],a)}const s=f(e,["metadata"]);s!=null&&m(n,["metadata"],s);const o=f(e,["config"]);return o!=null&&m(n,["request","generationConfig"],jX(t,o,f(n,["request"],{}))),n}function tQ(t){const e={},n=f(t,["response"]);n!=null&&m(e,["response"],KX(n));const r=f(t,["error"]);return r!=null&&m(e,["error"],r),e}function nQ(t,e){const n={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=f(t,["pageToken"]);if(e!==void 0&&i!=null&&m(e,["_query","pageToken"],i),f(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function rQ(t,e){const n={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=f(t,["pageToken"]);e!==void 0&&i!=null&&m(e,["_query","pageToken"],i);const s=f(t,["filter"]);return e!==void 0&&s!=null&&m(e,["_query","filter"],s),n}function iQ(t){const e={},n=f(t,["config"]);return n!=null&&nQ(n,e),e}function sQ(t){const e={},n=f(t,["config"]);return n!=null&&rQ(n,e),e}function oQ(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=f(t,["operations"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>M0(o))),m(e,["batchJobs"],s)}return e}function aQ(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=f(t,["batchPredictionJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Sy(o))),m(e,["batchJobs"],s)}return e}function lQ(t){const e={},n=f(t,["mediaResolution"]);n!=null&&m(e,["mediaResolution"],n);const r=f(t,["codeExecutionResult"]);r!=null&&m(e,["codeExecutionResult"],r);const i=f(t,["executableCode"]);i!=null&&m(e,["executableCode"],i);const s=f(t,["fileData"]);s!=null&&m(e,["fileData"],$X(s));const o=f(t,["functionCall"]);o!=null&&m(e,["functionCall"],WX(o));const a=f(t,["functionResponse"]);a!=null&&m(e,["functionResponse"],a);const l=f(t,["inlineData"]);l!=null&&m(e,["inlineData"],CX(l));const u=f(t,["text"]);u!=null&&m(e,["text"],u);const c=f(t,["thought"]);c!=null&&m(e,["thought"],c);const d=f(t,["thoughtSignature"]);d!=null&&m(e,["thoughtSignature"],d);const h=f(t,["videoMetadata"]);return h!=null&&m(e,["videoMetadata"],h),e}function uQ(t){const e={},n=f(t,["category"]);if(n!=null&&m(e,["category"],n),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=f(t,["threshold"]);return r!=null&&m(e,["threshold"],r),e}function cQ(t){const e={},n=f(t,["functionCallingConfig"]);n!=null&&m(e,["functionCallingConfig"],qX(n));const r=f(t,["retrievalConfig"]);return r!=null&&m(e,["retrievalConfig"],r),e}function dQ(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>d)),m(e,["functionDeclarations"],c)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=f(t,["googleSearchRetrieval"]);r!=null&&m(e,["googleSearchRetrieval"],r);const i=f(t,["computerUse"]);i!=null&&m(e,["computerUse"],i);const s=f(t,["fileSearch"]);s!=null&&m(e,["fileSearch"],s);const o=f(t,["codeExecution"]);if(o!=null&&m(e,["codeExecution"],o),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(t,["googleMaps"]);a!=null&&m(e,["googleMaps"],XX(a));const l=f(t,["googleSearch"]);l!=null&&m(e,["googleSearch"],QX(l));const u=f(t,["urlContext"]);return u!=null&&m(e,["urlContext"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ks;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Ks||(Ks={}));class Tl{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,s;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!r||Object.keys(r).length===0?o={config:{}}:typeof r=="object"?o=Object.assign({},r):o=r,o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(s=(i=o.config)===null||i===void 0?void 0:i.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fQ extends to{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Tl(Ks.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=L2(this.apiClient,e),r=n._url,i=Oe("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,l=a.requests,u=[];for(const c of l){const d=Object.assign({},c);if(d.systemInstruction){const h=d.systemInstruction;delete d.systemInstruction;const g=d.request;g.systemInstruction=h,d.request=g}u.push(d)}return a.requests=u,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const s=this.getGcsUri(e),o=this.getBigqueryUri(e);if(s)s.endsWith(".jsonl")?r.dest=`${s.slice(0,-6)}/dest`:r.dest=`${s}_dest_${i}`;else if(o)r.dest=`${o}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=FX(this.apiClient,e);return a=Oe("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>Sy(c))}else{const u=L2(this.apiClient,e);return a=Oe("{model}:batchGenerateContent",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),o.then(c=>M0(c))}}async createEmbeddingsInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=LX(this.apiClient,e);return s=Oe("{model}:asyncBatchEmbedContent",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>M0(l))}}async get(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=YX(this.apiClient,e);return a=Oe("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>Sy(c))}else{const u=JX(this.apiClient,e);return a=Oe("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),o.then(c=>M0(c))}}async cancel(e){var n,r,i,s;let o="",a={};if(this.apiClient.isVertexAI()){const l=kX(this.apiClient,e);o=Oe("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=RX(this.apiClient,e);o=Oe("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=sQ(e);return a=Oe("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),o.then(c=>{const d=aQ(c),h=new b2;return Object.assign(h,d),h})}else{const u=iQ(e);return a=Oe("batches",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),o.then(c=>{const d=oQ(c),h=new b2;return Object.assign(h,d),h})}}async delete(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=VX(this.apiClient,e);return a=Oe("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),o.then(c=>BX(c))}else{const u=OX(this.apiClient,e);return a=Oe("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),o.then(c=>UX(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hQ(t){const e={},n=f(t,["data"]);if(n!=null&&m(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function O2(t){const e={},n=f(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>LQ(s))),m(e,["parts"],i)}const r=f(t,["role"]);return r!=null&&m(e,["role"],r),e}function pQ(t,e){const n={},r=f(t,["ttl"]);e!==void 0&&r!=null&&m(e,["ttl"],r);const i=f(t,["expireTime"]);e!==void 0&&i!=null&&m(e,["expireTime"],i);const s=f(t,["displayName"]);e!==void 0&&s!=null&&m(e,["displayName"],s);const o=f(t,["contents"]);if(e!==void 0&&o!=null){let c=xi(o);Array.isArray(c)&&(c=c.map(d=>O2(d))),m(e,["contents"],c)}const a=f(t,["systemInstruction"]);e!==void 0&&a!=null&&m(e,["systemInstruction"],O2(dr(a)));const l=f(t,["tools"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>VQ(d))),m(e,["tools"],c)}const u=f(t,["toolConfig"]);if(e!==void 0&&u!=null&&m(e,["toolConfig"],OQ(u)),f(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function mQ(t,e){const n={},r=f(t,["ttl"]);e!==void 0&&r!=null&&m(e,["ttl"],r);const i=f(t,["expireTime"]);e!==void 0&&i!=null&&m(e,["expireTime"],i);const s=f(t,["displayName"]);e!==void 0&&s!=null&&m(e,["displayName"],s);const o=f(t,["contents"]);if(e!==void 0&&o!=null){let d=xi(o);Array.isArray(d)&&(d=d.map(h=>h)),m(e,["contents"],d)}const a=f(t,["systemInstruction"]);e!==void 0&&a!=null&&m(e,["systemInstruction"],dr(a));const l=f(t,["tools"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(h=>UQ(h))),m(e,["tools"],d)}const u=f(t,["toolConfig"]);e!==void 0&&u!=null&&m(e,["toolConfig"],u);const c=f(t,["kmsKeyName"]);return e!==void 0&&c!=null&&m(e,["encryption_spec","kmsKeyName"],c),n}function gQ(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["model"],$4(t,r));const i=f(e,["config"]);return i!=null&&pQ(i,n),n}function vQ(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["model"],$4(t,r));const i=f(e,["config"]);return i!=null&&mQ(i,n),n}function _Q(t,e){const n={},r=f(e,["name"]);return r!=null&&m(n,["_url","name"],no(t,r)),n}function yQ(t,e){const n={},r=f(e,["name"]);return r!=null&&m(n,["_url","name"],no(t,r)),n}function xQ(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function wQ(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function TQ(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function EQ(t){const e={},n=f(t,["id"]);n!=null&&m(e,["id"],n);const r=f(t,["args"]);r!=null&&m(e,["args"],r);const i=f(t,["name"]);if(i!=null&&m(e,["name"],i),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function IQ(t){const e={},n=f(t,["mode"]);n!=null&&m(e,["mode"],n);const r=f(t,["allowedFunctionNames"]);if(r!=null&&m(e,["allowedFunctionNames"],r),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function SQ(t){const e={};if(f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=f(t,["description"]);n!=null&&m(e,["description"],n);const r=f(t,["name"]);r!=null&&m(e,["name"],r);const i=f(t,["parameters"]);i!=null&&m(e,["parameters"],i);const s=f(t,["parametersJsonSchema"]);s!=null&&m(e,["parametersJsonSchema"],s);const o=f(t,["response"]);o!=null&&m(e,["response"],o);const a=f(t,["responseJsonSchema"]);return a!=null&&m(e,["responseJsonSchema"],a),e}function AQ(t,e){const n={},r=f(e,["name"]);return r!=null&&m(n,["_url","name"],no(t,r)),n}function CQ(t,e){const n={},r=f(e,["name"]);return r!=null&&m(n,["_url","name"],no(t,r)),n}function RQ(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&m(e,["enableWidget"],n),e}function kQ(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],n),e}function NQ(t,e){const n={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=f(t,["pageToken"]);return e!==void 0&&i!=null&&m(e,["_query","pageToken"],i),n}function PQ(t,e){const n={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=f(t,["pageToken"]);return e!==void 0&&i!=null&&m(e,["_query","pageToken"],i),n}function bQ(t){const e={},n=f(t,["config"]);return n!=null&&NQ(n,e),e}function DQ(t){const e={},n=f(t,["config"]);return n!=null&&PQ(n,e),e}function FQ(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=f(t,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),m(e,["cachedContents"],s)}return e}function MQ(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=f(t,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),m(e,["cachedContents"],s)}return e}function LQ(t){const e={},n=f(t,["mediaResolution"]);n!=null&&m(e,["mediaResolution"],n);const r=f(t,["codeExecutionResult"]);r!=null&&m(e,["codeExecutionResult"],r);const i=f(t,["executableCode"]);i!=null&&m(e,["executableCode"],i);const s=f(t,["fileData"]);s!=null&&m(e,["fileData"],TQ(s));const o=f(t,["functionCall"]);o!=null&&m(e,["functionCall"],EQ(o));const a=f(t,["functionResponse"]);a!=null&&m(e,["functionResponse"],a);const l=f(t,["inlineData"]);l!=null&&m(e,["inlineData"],hQ(l));const u=f(t,["text"]);u!=null&&m(e,["text"],u);const c=f(t,["thought"]);c!=null&&m(e,["thought"],c);const d=f(t,["thoughtSignature"]);d!=null&&m(e,["thoughtSignature"],d);const h=f(t,["videoMetadata"]);return h!=null&&m(e,["videoMetadata"],h),e}function OQ(t){const e={},n=f(t,["functionCallingConfig"]);n!=null&&m(e,["functionCallingConfig"],IQ(n));const r=f(t,["retrievalConfig"]);return r!=null&&m(e,["retrievalConfig"],r),e}function VQ(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>d)),m(e,["functionDeclarations"],c)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=f(t,["googleSearchRetrieval"]);r!=null&&m(e,["googleSearchRetrieval"],r);const i=f(t,["computerUse"]);i!=null&&m(e,["computerUse"],i);const s=f(t,["fileSearch"]);s!=null&&m(e,["fileSearch"],s);const o=f(t,["codeExecution"]);if(o!=null&&m(e,["codeExecution"],o),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(t,["googleMaps"]);a!=null&&m(e,["googleMaps"],RQ(a));const l=f(t,["googleSearch"]);l!=null&&m(e,["googleSearch"],kQ(l));const u=f(t,["urlContext"]);return u!=null&&m(e,["urlContext"],u),e}function UQ(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(h=>SQ(h))),m(e,["functionDeclarations"],d)}const r=f(t,["retrieval"]);r!=null&&m(e,["retrieval"],r);const i=f(t,["googleSearchRetrieval"]);i!=null&&m(e,["googleSearchRetrieval"],i);const s=f(t,["computerUse"]);if(s!=null&&m(e,["computerUse"],s),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=f(t,["codeExecution"]);o!=null&&m(e,["codeExecution"],o);const a=f(t,["enterpriseWebSearch"]);a!=null&&m(e,["enterpriseWebSearch"],a);const l=f(t,["googleMaps"]);l!=null&&m(e,["googleMaps"],l);const u=f(t,["googleSearch"]);u!=null&&m(e,["googleSearch"],u);const c=f(t,["urlContext"]);return c!=null&&m(e,["urlContext"],c),e}function BQ(t,e){const n={},r=f(t,["ttl"]);e!==void 0&&r!=null&&m(e,["ttl"],r);const i=f(t,["expireTime"]);return e!==void 0&&i!=null&&m(e,["expireTime"],i),n}function zQ(t,e){const n={},r=f(t,["ttl"]);e!==void 0&&r!=null&&m(e,["ttl"],r);const i=f(t,["expireTime"]);return e!==void 0&&i!=null&&m(e,["expireTime"],i),n}function GQ(t,e){const n={},r=f(e,["name"]);r!=null&&m(n,["_url","name"],no(t,r));const i=f(e,["config"]);return i!=null&&BQ(i,n),n}function HQ(t,e){const n={},r=f(e,["name"]);r!=null&&m(n,["_url","name"],no(t,r));const i=f(e,["config"]);return i!=null&&zQ(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $Q extends to{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Tl(Ks.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=vQ(this.apiClient,e);return a=Oe("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>c)}else{const u=gQ(this.apiClient,e);return a=Oe("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async get(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=CQ(this.apiClient,e);return a=Oe("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>c)}else{const u=AQ(this.apiClient,e);return a=Oe("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async delete(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=yQ(this.apiClient,e);return a=Oe("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),o.then(c=>{const d=wQ(c),h=new N2;return Object.assign(h,d),h})}else{const u=_Q(this.apiClient,e);return a=Oe("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),o.then(c=>{const d=xQ(c),h=new N2;return Object.assign(h,d),h})}}async update(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=HQ(this.apiClient,e);return a=Oe("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>c)}else{const u=GQ(this.apiClient,e);return a=Oe("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=DQ(e);return a=Oe("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),o.then(c=>{const d=MQ(c),h=new P2;return Object.assign(h,d),h})}else{const u=bQ(e);return a=Oe("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),o.then(c=>{const d=FQ(c),h=new P2;return Object.assign(h,d),h})}}}function em(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function V2(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function at(t){return this instanceof at?(this.v=t,this):new at(t)}function Ui(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(g){return function(_){return Promise.resolve(_).then(g,d)}}function a(g,_){r[g]&&(i[g]=function(x){return new Promise(function(w,y){s.push([g,x,w,y])>1||l(g,x)})},_&&(i[g]=_(i[g])))}function l(g,_){try{u(r[g](_))}catch(x){h(s[0][3],x)}}function u(g){g.value instanceof at?Promise.resolve(g.value.v).then(c,d):h(s[0][2],g)}function c(g){l("next",g)}function d(g){l("throw",g)}function h(g,_){g(_),s.shift(),s.length&&l(s[0][0],s[0][1])}}function Bi(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof V2=="function"?V2(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(u){s({value:u,done:a})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WQ(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:rF(n)}function rF(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function qQ(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function U2(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let s=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),s&&!rF(t[r])&&(s=!1),r++;s?e.push(...i):e.pop()}return e}class jQ{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new KQ(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class KQ{constructor(e,n,r,i={},s=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=s,this.sendPromise=Promise.resolve(),qQ(s)}async sendMessage(e){var n;await this.sendPromise;const r=dr(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,o,a;const l=await i,u=(o=(s=l.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content,c=l.automaticFunctionCallingHistory,d=this.getHistory(!0).length;let h=[];c!=null&&(h=(a=c.slice(d))!==null&&a!==void 0?a:[]);const g=u?[u]:[];this.recordHistory(r,g,h)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=dr(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const s=await i;return this.processStreamResponse(s,r)}getHistory(e=!1){const n=e?U2(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return Ui(this,arguments,function*(){var i,s,o,a,l,u;const c=[];try{for(var d=!0,h=Bi(e),g;g=yield at(h.next()),i=g.done,!i;d=!0){a=g.value,d=!1;const _=a;if(WQ(_)){const x=(u=(l=_.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content;x!==void 0&&c.push(x)}yield yield at(_)}}catch(_){s={error:_}}finally{try{!d&&!i&&(o=h.return)&&(yield at(o.call(h)))}finally{if(s)throw s.error}}this.recordHistory(n,c)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(s=>s.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...U2(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dg extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,dg.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JQ(t){const e={},n=f(t,["file"]);return n!=null&&m(e,["file"],n),e}function YQ(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function XQ(t){const e={},n=f(t,["name"]);return n!=null&&m(e,["_url","file"],Y4(n)),e}function QQ(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function ZQ(t){const e={},n=f(t,["name"]);return n!=null&&m(e,["_url","file"],Y4(n)),e}function eZ(t,e){const n={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=f(t,["pageToken"]);return e!==void 0&&i!=null&&m(e,["_query","pageToken"],i),n}function tZ(t){const e={},n=f(t,["config"]);return n!=null&&eZ(n,e),e}function nZ(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=f(t,["files"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),m(e,["files"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rZ extends to{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Tl(Ks.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=tZ(e);return s=Oe("files",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),i.then(l=>{const u=nZ(l),c=new aX;return Object.assign(c,u),c})}}async createInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=JQ(e);return s=Oe("upload/v1beta/files",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=YQ(l),c=new lX;return Object.assign(c,u),c})}}async get(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=ZQ(e);return s=Oe("files/{file}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=XQ(e);return s=Oe("files/{file}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),i.then(l=>{const u=QQ(l),c=new uX;return Object.assign(c,u),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function L0(t){const e={},n=f(t,["data"]);if(n!=null&&m(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function iZ(t){const e={},n=f(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>xZ(s))),m(e,["parts"],i)}const r=f(t,["role"]);return r!=null&&m(e,["role"],r),e}function sZ(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function oZ(t){const e={},n=f(t,["id"]);n!=null&&m(e,["id"],n);const r=f(t,["args"]);r!=null&&m(e,["args"],r);const i=f(t,["name"]);if(i!=null&&m(e,["name"],i),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function aZ(t){const e={};if(f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=f(t,["description"]);n!=null&&m(e,["description"],n);const r=f(t,["name"]);r!=null&&m(e,["name"],r);const i=f(t,["parameters"]);i!=null&&m(e,["parameters"],i);const s=f(t,["parametersJsonSchema"]);s!=null&&m(e,["parametersJsonSchema"],s);const o=f(t,["response"]);o!=null&&m(e,["response"],o);const a=f(t,["responseJsonSchema"]);return a!=null&&m(e,["responseJsonSchema"],a),e}function lZ(t){const e={},n=f(t,["modelSelectionConfig"]);n!=null&&m(e,["modelConfig"],n);const r=f(t,["responseJsonSchema"]);r!=null&&m(e,["responseJsonSchema"],r);const i=f(t,["audioTimestamp"]);i!=null&&m(e,["audioTimestamp"],i);const s=f(t,["candidateCount"]);s!=null&&m(e,["candidateCount"],s);const o=f(t,["enableAffectiveDialog"]);o!=null&&m(e,["enableAffectiveDialog"],o);const a=f(t,["frequencyPenalty"]);a!=null&&m(e,["frequencyPenalty"],a);const l=f(t,["logprobs"]);l!=null&&m(e,["logprobs"],l);const u=f(t,["maxOutputTokens"]);u!=null&&m(e,["maxOutputTokens"],u);const c=f(t,["mediaResolution"]);c!=null&&m(e,["mediaResolution"],c);const d=f(t,["presencePenalty"]);d!=null&&m(e,["presencePenalty"],d);const h=f(t,["responseLogprobs"]);h!=null&&m(e,["responseLogprobs"],h);const g=f(t,["responseMimeType"]);g!=null&&m(e,["responseMimeType"],g);const _=f(t,["responseModalities"]);_!=null&&m(e,["responseModalities"],_);const x=f(t,["responseSchema"]);x!=null&&m(e,["responseSchema"],x);const w=f(t,["routingConfig"]);w!=null&&m(e,["routingConfig"],w);const y=f(t,["seed"]);y!=null&&m(e,["seed"],y);const T=f(t,["speechConfig"]);T!=null&&m(e,["speechConfig"],T);const E=f(t,["stopSequences"]);E!=null&&m(e,["stopSequences"],E);const N=f(t,["temperature"]);N!=null&&m(e,["temperature"],N);const F=f(t,["thinkingConfig"]);F!=null&&m(e,["thinkingConfig"],F);const O=f(t,["topK"]);O!=null&&m(e,["topK"],O);const S=f(t,["topP"]);if(S!=null&&m(e,["topP"],S),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function uZ(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&m(e,["enableWidget"],n),e}function cZ(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],n),e}function dZ(t,e){const n={},r=f(t,["generationConfig"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig"],r);const i=f(t,["responseModalities"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig","responseModalities"],i);const s=f(t,["temperature"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","temperature"],s);const o=f(t,["topP"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","topP"],o);const a=f(t,["topK"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","topK"],a);const l=f(t,["maxOutputTokens"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","maxOutputTokens"],l);const u=f(t,["mediaResolution"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","mediaResolution"],u);const c=f(t,["seed"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","seed"],c);const d=f(t,["speechConfig"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","speechConfig"],Mw(d));const h=f(t,["thinkingConfig"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","thinkingConfig"],h);const g=f(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],g);const _=f(t,["systemInstruction"]);e!==void 0&&_!=null&&m(e,["setup","systemInstruction"],iZ(dr(_)));const x=f(t,["tools"]);if(e!==void 0&&x!=null){let O=Ac(x);Array.isArray(O)&&(O=O.map(S=>TZ(Sc(S)))),m(e,["setup","tools"],O)}const w=f(t,["sessionResumption"]);e!==void 0&&w!=null&&m(e,["setup","sessionResumption"],wZ(w));const y=f(t,["inputAudioTranscription"]);e!==void 0&&y!=null&&m(e,["setup","inputAudioTranscription"],y);const T=f(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&m(e,["setup","outputAudioTranscription"],T);const E=f(t,["realtimeInputConfig"]);e!==void 0&&E!=null&&m(e,["setup","realtimeInputConfig"],E);const N=f(t,["contextWindowCompression"]);e!==void 0&&N!=null&&m(e,["setup","contextWindowCompression"],N);const F=f(t,["proactivity"]);if(e!==void 0&&F!=null&&m(e,["setup","proactivity"],F),f(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function fZ(t,e){const n={},r=f(t,["generationConfig"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig"],lZ(r));const i=f(t,["responseModalities"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig","responseModalities"],i);const s=f(t,["temperature"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","temperature"],s);const o=f(t,["topP"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","topP"],o);const a=f(t,["topK"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","topK"],a);const l=f(t,["maxOutputTokens"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","maxOutputTokens"],l);const u=f(t,["mediaResolution"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","mediaResolution"],u);const c=f(t,["seed"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","seed"],c);const d=f(t,["speechConfig"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","speechConfig"],Mw(d));const h=f(t,["thinkingConfig"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","thinkingConfig"],h);const g=f(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],g);const _=f(t,["systemInstruction"]);e!==void 0&&_!=null&&m(e,["setup","systemInstruction"],dr(_));const x=f(t,["tools"]);if(e!==void 0&&x!=null){let S=Ac(x);Array.isArray(S)&&(S=S.map(A=>EZ(Sc(A)))),m(e,["setup","tools"],S)}const w=f(t,["sessionResumption"]);e!==void 0&&w!=null&&m(e,["setup","sessionResumption"],w);const y=f(t,["inputAudioTranscription"]);e!==void 0&&y!=null&&m(e,["setup","inputAudioTranscription"],y);const T=f(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&m(e,["setup","outputAudioTranscription"],T);const E=f(t,["realtimeInputConfig"]);e!==void 0&&E!=null&&m(e,["setup","realtimeInputConfig"],E);const N=f(t,["contextWindowCompression"]);e!==void 0&&N!=null&&m(e,["setup","contextWindowCompression"],N);const F=f(t,["proactivity"]);e!==void 0&&F!=null&&m(e,["setup","proactivity"],F);const O=f(t,["explicitVadSignal"]);return e!==void 0&&O!=null&&m(e,["setup","explicitVadSignal"],O),n}function hZ(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["setup","model"],St(t,r));const i=f(e,["config"]);return i!=null&&m(n,["config"],dZ(i,n)),n}function pZ(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["setup","model"],St(t,r));const i=f(e,["config"]);return i!=null&&m(n,["config"],fZ(i,n)),n}function mZ(t){const e={},n=f(t,["musicGenerationConfig"]);return n!=null&&m(e,["musicGenerationConfig"],n),e}function gZ(t){const e={},n=f(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),m(e,["weightedPrompts"],r)}return e}function vZ(t){const e={},n=f(t,["media"]);if(n!=null){let u=W4(n);Array.isArray(u)&&(u=u.map(c=>L0(c))),m(e,["mediaChunks"],u)}const r=f(t,["audio"]);r!=null&&m(e,["audio"],L0(j4(r)));const i=f(t,["audioStreamEnd"]);i!=null&&m(e,["audioStreamEnd"],i);const s=f(t,["video"]);s!=null&&m(e,["video"],L0(q4(s)));const o=f(t,["text"]);o!=null&&m(e,["text"],o);const a=f(t,["activityStart"]);a!=null&&m(e,["activityStart"],a);const l=f(t,["activityEnd"]);return l!=null&&m(e,["activityEnd"],l),e}function _Z(t){const e={},n=f(t,["media"]);if(n!=null){let u=W4(n);Array.isArray(u)&&(u=u.map(c=>c)),m(e,["mediaChunks"],u)}const r=f(t,["audio"]);r!=null&&m(e,["audio"],j4(r));const i=f(t,["audioStreamEnd"]);i!=null&&m(e,["audioStreamEnd"],i);const s=f(t,["video"]);s!=null&&m(e,["video"],q4(s));const o=f(t,["text"]);o!=null&&m(e,["text"],o);const a=f(t,["activityStart"]);a!=null&&m(e,["activityStart"],a);const l=f(t,["activityEnd"]);return l!=null&&m(e,["activityEnd"],l),e}function yZ(t){const e={},n=f(t,["setupComplete"]);n!=null&&m(e,["setupComplete"],n);const r=f(t,["serverContent"]);r!=null&&m(e,["serverContent"],r);const i=f(t,["toolCall"]);i!=null&&m(e,["toolCall"],i);const s=f(t,["toolCallCancellation"]);s!=null&&m(e,["toolCallCancellation"],s);const o=f(t,["usageMetadata"]);o!=null&&m(e,["usageMetadata"],IZ(o));const a=f(t,["goAway"]);a!=null&&m(e,["goAway"],a);const l=f(t,["sessionResumptionUpdate"]);l!=null&&m(e,["sessionResumptionUpdate"],l);const u=f(t,["voiceActivityDetectionSignal"]);return u!=null&&m(e,["voiceActivityDetectionSignal"],u),e}function xZ(t){const e={},n=f(t,["mediaResolution"]);n!=null&&m(e,["mediaResolution"],n);const r=f(t,["codeExecutionResult"]);r!=null&&m(e,["codeExecutionResult"],r);const i=f(t,["executableCode"]);i!=null&&m(e,["executableCode"],i);const s=f(t,["fileData"]);s!=null&&m(e,["fileData"],sZ(s));const o=f(t,["functionCall"]);o!=null&&m(e,["functionCall"],oZ(o));const a=f(t,["functionResponse"]);a!=null&&m(e,["functionResponse"],a);const l=f(t,["inlineData"]);l!=null&&m(e,["inlineData"],L0(l));const u=f(t,["text"]);u!=null&&m(e,["text"],u);const c=f(t,["thought"]);c!=null&&m(e,["thought"],c);const d=f(t,["thoughtSignature"]);d!=null&&m(e,["thoughtSignature"],d);const h=f(t,["videoMetadata"]);return h!=null&&m(e,["videoMetadata"],h),e}function wZ(t){const e={},n=f(t,["handle"]);if(n!=null&&m(e,["handle"],n),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function TZ(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>d)),m(e,["functionDeclarations"],c)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=f(t,["googleSearchRetrieval"]);r!=null&&m(e,["googleSearchRetrieval"],r);const i=f(t,["computerUse"]);i!=null&&m(e,["computerUse"],i);const s=f(t,["fileSearch"]);s!=null&&m(e,["fileSearch"],s);const o=f(t,["codeExecution"]);if(o!=null&&m(e,["codeExecution"],o),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(t,["googleMaps"]);a!=null&&m(e,["googleMaps"],uZ(a));const l=f(t,["googleSearch"]);l!=null&&m(e,["googleSearch"],cZ(l));const u=f(t,["urlContext"]);return u!=null&&m(e,["urlContext"],u),e}function EZ(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(h=>aZ(h))),m(e,["functionDeclarations"],d)}const r=f(t,["retrieval"]);r!=null&&m(e,["retrieval"],r);const i=f(t,["googleSearchRetrieval"]);i!=null&&m(e,["googleSearchRetrieval"],i);const s=f(t,["computerUse"]);if(s!=null&&m(e,["computerUse"],s),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=f(t,["codeExecution"]);o!=null&&m(e,["codeExecution"],o);const a=f(t,["enterpriseWebSearch"]);a!=null&&m(e,["enterpriseWebSearch"],a);const l=f(t,["googleMaps"]);l!=null&&m(e,["googleMaps"],l);const u=f(t,["googleSearch"]);u!=null&&m(e,["googleSearch"],u);const c=f(t,["urlContext"]);return c!=null&&m(e,["urlContext"],c),e}function IZ(t){const e={},n=f(t,["promptTokenCount"]);n!=null&&m(e,["promptTokenCount"],n);const r=f(t,["cachedContentTokenCount"]);r!=null&&m(e,["cachedContentTokenCount"],r);const i=f(t,["candidatesTokenCount"]);i!=null&&m(e,["responseTokenCount"],i);const s=f(t,["toolUsePromptTokenCount"]);s!=null&&m(e,["toolUsePromptTokenCount"],s);const o=f(t,["thoughtsTokenCount"]);o!=null&&m(e,["thoughtsTokenCount"],o);const a=f(t,["totalTokenCount"]);a!=null&&m(e,["totalTokenCount"],a);const l=f(t,["promptTokensDetails"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(_=>_)),m(e,["promptTokensDetails"],g)}const u=f(t,["cacheTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(_=>_)),m(e,["cacheTokensDetails"],g)}const c=f(t,["candidatesTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(_=>_)),m(e,["responseTokensDetails"],g)}const d=f(t,["toolUsePromptTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(_=>_)),m(e,["toolUsePromptTokensDetails"],g)}const h=f(t,["trafficType"]);return h!=null&&m(e,["trafficType"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SZ(t){const e={},n=f(t,["data"]);if(n!=null&&m(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function AZ(t){const e={},n=f(t,["content"]);n!=null&&m(e,["content"],n);const r=f(t,["citationMetadata"]);r!=null&&m(e,["citationMetadata"],CZ(r));const i=f(t,["tokenCount"]);i!=null&&m(e,["tokenCount"],i);const s=f(t,["finishReason"]);s!=null&&m(e,["finishReason"],s);const o=f(t,["avgLogprobs"]);o!=null&&m(e,["avgLogprobs"],o);const a=f(t,["groundingMetadata"]);a!=null&&m(e,["groundingMetadata"],a);const l=f(t,["index"]);l!=null&&m(e,["index"],l);const u=f(t,["logprobsResult"]);u!=null&&m(e,["logprobsResult"],u);const c=f(t,["safetyRatings"]);if(c!=null){let h=c;Array.isArray(h)&&(h=h.map(g=>g)),m(e,["safetyRatings"],h)}const d=f(t,["urlContextMetadata"]);return d!=null&&m(e,["urlContextMetadata"],d),e}function CZ(t){const e={},n=f(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),m(e,["citations"],r)}return e}function RZ(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["_url","model"],St(t,r));const i=f(e,["contents"]);if(i!=null){let s=xi(i);Array.isArray(s)&&(s=s.map(o=>o)),m(n,["contents"],s)}return n}function kZ(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),m(e,["tokensInfo"],i)}return e}function NZ(t){const e={},n=f(t,["values"]);n!=null&&m(e,["values"],n);const r=f(t,["statistics"]);return r!=null&&m(e,["statistics"],PZ(r)),e}function PZ(t){const e={},n=f(t,["truncated"]);n!=null&&m(e,["truncated"],n);const r=f(t,["token_count"]);return r!=null&&m(e,["tokenCount"],r),e}function fg(t){const e={},n=f(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Bee(s))),m(e,["parts"],i)}const r=f(t,["role"]);return r!=null&&m(e,["role"],r),e}function bZ(t){const e={},n=f(t,["controlType"]);n!=null&&m(e,["controlType"],n);const r=f(t,["enableControlImageComputation"]);return r!=null&&m(e,["computeControl"],r),e}function DZ(t){const e={};if(f(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function FZ(t,e){const n={},r=f(t,["systemInstruction"]);e!==void 0&&r!=null&&m(e,["systemInstruction"],dr(r));const i=f(t,["tools"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>aF(a))),m(e,["tools"],o)}const s=f(t,["generationConfig"]);return e!==void 0&&s!=null&&m(e,["generationConfig"],See(s)),n}function MZ(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["_url","model"],St(t,r));const i=f(e,["contents"]);if(i!=null){let o=xi(i);Array.isArray(o)&&(o=o.map(a=>fg(a))),m(n,["contents"],o)}const s=f(e,["config"]);return s!=null&&DZ(s),n}function LZ(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["_url","model"],St(t,r));const i=f(e,["contents"]);if(i!=null){let o=xi(i);Array.isArray(o)&&(o=o.map(a=>a)),m(n,["contents"],o)}const s=f(e,["config"]);return s!=null&&FZ(s,n),n}function OZ(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["totalTokens"]);r!=null&&m(e,["totalTokens"],r);const i=f(t,["cachedContentTokenCount"]);return i!=null&&m(e,["cachedContentTokenCount"],i),e}function VZ(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["totalTokens"]);return r!=null&&m(e,["totalTokens"],r),e}function UZ(t,e){const n={},r=f(e,["model"]);return r!=null&&m(n,["_url","name"],St(t,r)),n}function BZ(t,e){const n={},r=f(e,["model"]);return r!=null&&m(n,["_url","name"],St(t,r)),n}function zZ(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function GZ(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function HZ(t,e){const n={},r=f(t,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const i=f(t,["negativePrompt"]);e!==void 0&&i!=null&&m(e,["parameters","negativePrompt"],i);const s=f(t,["numberOfImages"]);e!==void 0&&s!=null&&m(e,["parameters","sampleCount"],s);const o=f(t,["aspectRatio"]);e!==void 0&&o!=null&&m(e,["parameters","aspectRatio"],o);const a=f(t,["guidanceScale"]);e!==void 0&&a!=null&&m(e,["parameters","guidanceScale"],a);const l=f(t,["seed"]);e!==void 0&&l!=null&&m(e,["parameters","seed"],l);const u=f(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&m(e,["parameters","safetySetting"],u);const c=f(t,["personGeneration"]);e!==void 0&&c!=null&&m(e,["parameters","personGeneration"],c);const d=f(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&m(e,["parameters","includeSafetyAttributes"],d);const h=f(t,["includeRaiReason"]);e!==void 0&&h!=null&&m(e,["parameters","includeRaiReason"],h);const g=f(t,["language"]);e!==void 0&&g!=null&&m(e,["parameters","language"],g);const _=f(t,["outputMimeType"]);e!==void 0&&_!=null&&m(e,["parameters","outputOptions","mimeType"],_);const x=f(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&m(e,["parameters","outputOptions","compressionQuality"],x);const w=f(t,["addWatermark"]);e!==void 0&&w!=null&&m(e,["parameters","addWatermark"],w);const y=f(t,["labels"]);e!==void 0&&y!=null&&m(e,["labels"],y);const T=f(t,["editMode"]);e!==void 0&&T!=null&&m(e,["parameters","editMode"],T);const E=f(t,["baseSteps"]);return e!==void 0&&E!=null&&m(e,["parameters","editConfig","baseSteps"],E),n}function $Z(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["_url","model"],St(t,r));const i=f(e,["prompt"]);i!=null&&m(n,["instances[0]","prompt"],i);const s=f(e,["referenceImages"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>qee(l))),m(n,["instances[0]","referenceImages"],a)}const o=f(e,["config"]);return o!=null&&HZ(o,n),n}function WZ(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>hg(s))),m(e,["generatedImages"],i)}return e}function qZ(t,e){const n={},r=f(t,["taskType"]);e!==void 0&&r!=null&&m(e,["requests[]","taskType"],r);const i=f(t,["title"]);e!==void 0&&i!=null&&m(e,["requests[]","title"],i);const s=f(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&m(e,["requests[]","outputDimensionality"],s),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function jZ(t,e){const n={},r=f(t,["taskType"]);e!==void 0&&r!=null&&m(e,["instances[]","task_type"],r);const i=f(t,["title"]);e!==void 0&&i!=null&&m(e,["instances[]","title"],i);const s=f(t,["outputDimensionality"]);e!==void 0&&s!=null&&m(e,["parameters","outputDimensionality"],s);const o=f(t,["mimeType"]);e!==void 0&&o!=null&&m(e,["instances[]","mimeType"],o);const a=f(t,["autoTruncate"]);return e!==void 0&&a!=null&&m(e,["parameters","autoTruncate"],a),n}function KZ(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["_url","model"],St(t,r));const i=f(e,["contents"]);if(i!=null){let a=bw(t,i);Array.isArray(a)&&(a=a.map(l=>l)),m(n,["requests[]","content"],a)}const s=f(e,["config"]);s!=null&&qZ(s,n);const o=f(e,["model"]);return o!==void 0&&m(n,["requests[]","model"],St(t,o)),n}function JZ(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["_url","model"],St(t,r));const i=f(e,["contents"]);if(i!=null){let o=bw(t,i);Array.isArray(o)&&(o=o.map(a=>a)),m(n,["instances[]","content"],o)}const s=f(e,["config"]);return s!=null&&jZ(s,n),n}function YZ(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),m(e,["embeddings"],s)}const i=f(t,["metadata"]);return i!=null&&m(e,["metadata"],i),e}function XZ(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["predictions[]","embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>NZ(o))),m(e,["embeddings"],s)}const i=f(t,["metadata"]);return i!=null&&m(e,["metadata"],i),e}function QZ(t){const e={},n=f(t,["endpoint"]);n!=null&&m(e,["name"],n);const r=f(t,["deployedModelId"]);return r!=null&&m(e,["deployedModelId"],r),e}function ZZ(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function eee(t){const e={},n=f(t,["id"]);n!=null&&m(e,["id"],n);const r=f(t,["args"]);r!=null&&m(e,["args"],r);const i=f(t,["name"]);if(i!=null&&m(e,["name"],i),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function tee(t){const e={},n=f(t,["mode"]);n!=null&&m(e,["mode"],n);const r=f(t,["allowedFunctionNames"]);if(r!=null&&m(e,["allowedFunctionNames"],r),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function nee(t){const e={};if(f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=f(t,["description"]);n!=null&&m(e,["description"],n);const r=f(t,["name"]);r!=null&&m(e,["name"],r);const i=f(t,["parameters"]);i!=null&&m(e,["parameters"],i);const s=f(t,["parametersJsonSchema"]);s!=null&&m(e,["parametersJsonSchema"],s);const o=f(t,["response"]);o!=null&&m(e,["response"],o);const a=f(t,["responseJsonSchema"]);return a!=null&&m(e,["responseJsonSchema"],a),e}function ree(t,e,n){const r={},i=f(e,["systemInstruction"]);n!==void 0&&i!=null&&m(n,["systemInstruction"],fg(dr(i)));const s=f(e,["temperature"]);s!=null&&m(r,["temperature"],s);const o=f(e,["topP"]);o!=null&&m(r,["topP"],o);const a=f(e,["topK"]);a!=null&&m(r,["topK"],a);const l=f(e,["candidateCount"]);l!=null&&m(r,["candidateCount"],l);const u=f(e,["maxOutputTokens"]);u!=null&&m(r,["maxOutputTokens"],u);const c=f(e,["stopSequences"]);c!=null&&m(r,["stopSequences"],c);const d=f(e,["responseLogprobs"]);d!=null&&m(r,["responseLogprobs"],d);const h=f(e,["logprobs"]);h!=null&&m(r,["logprobs"],h);const g=f(e,["presencePenalty"]);g!=null&&m(r,["presencePenalty"],g);const _=f(e,["frequencyPenalty"]);_!=null&&m(r,["frequencyPenalty"],_);const x=f(e,["seed"]);x!=null&&m(r,["seed"],x);const w=f(e,["responseMimeType"]);w!=null&&m(r,["responseMimeType"],w);const y=f(e,["responseSchema"]);y!=null&&m(r,["responseSchema"],Dw(y));const T=f(e,["responseJsonSchema"]);if(T!=null&&m(r,["responseJsonSchema"],T),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const E=f(e,["safetySettings"]);if(n!==void 0&&E!=null){let D=E;Array.isArray(D)&&(D=D.map(oe=>jee(oe))),m(n,["safetySettings"],D)}const N=f(e,["tools"]);if(n!==void 0&&N!=null){let D=Ac(N);Array.isArray(D)&&(D=D.map(oe=>ete(Sc(oe)))),m(n,["tools"],D)}const F=f(e,["toolConfig"]);if(n!==void 0&&F!=null&&m(n,["toolConfig"],Zee(F)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const O=f(e,["cachedContent"]);n!==void 0&&O!=null&&m(n,["cachedContent"],no(t,O));const S=f(e,["responseModalities"]);S!=null&&m(r,["responseModalities"],S);const A=f(e,["mediaResolution"]);A!=null&&m(r,["mediaResolution"],A);const C=f(e,["speechConfig"]);if(C!=null&&m(r,["speechConfig"],Fw(C)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const k=f(e,["thinkingConfig"]);k!=null&&m(r,["thinkingConfig"],k);const P=f(e,["imageConfig"]);P!=null&&m(r,["imageConfig"],Nee(P));const V=f(e,["enableEnhancedCivicAnswers"]);return V!=null&&m(r,["enableEnhancedCivicAnswers"],V),r}function iee(t,e,n){const r={},i=f(e,["systemInstruction"]);n!==void 0&&i!=null&&m(n,["systemInstruction"],dr(i));const s=f(e,["temperature"]);s!=null&&m(r,["temperature"],s);const o=f(e,["topP"]);o!=null&&m(r,["topP"],o);const a=f(e,["topK"]);a!=null&&m(r,["topK"],a);const l=f(e,["candidateCount"]);l!=null&&m(r,["candidateCount"],l);const u=f(e,["maxOutputTokens"]);u!=null&&m(r,["maxOutputTokens"],u);const c=f(e,["stopSequences"]);c!=null&&m(r,["stopSequences"],c);const d=f(e,["responseLogprobs"]);d!=null&&m(r,["responseLogprobs"],d);const h=f(e,["logprobs"]);h!=null&&m(r,["logprobs"],h);const g=f(e,["presencePenalty"]);g!=null&&m(r,["presencePenalty"],g);const _=f(e,["frequencyPenalty"]);_!=null&&m(r,["frequencyPenalty"],_);const x=f(e,["seed"]);x!=null&&m(r,["seed"],x);const w=f(e,["responseMimeType"]);w!=null&&m(r,["responseMimeType"],w);const y=f(e,["responseSchema"]);y!=null&&m(r,["responseSchema"],Dw(y));const T=f(e,["responseJsonSchema"]);T!=null&&m(r,["responseJsonSchema"],T);const E=f(e,["routingConfig"]);E!=null&&m(r,["routingConfig"],E);const N=f(e,["modelSelectionConfig"]);N!=null&&m(r,["modelConfig"],N);const F=f(e,["safetySettings"]);if(n!==void 0&&F!=null){let Je=F;Array.isArray(Je)&&(Je=Je.map(Le=>Le)),m(n,["safetySettings"],Je)}const O=f(e,["tools"]);if(n!==void 0&&O!=null){let Je=Ac(O);Array.isArray(Je)&&(Je=Je.map(Le=>aF(Sc(Le)))),m(n,["tools"],Je)}const S=f(e,["toolConfig"]);n!==void 0&&S!=null&&m(n,["toolConfig"],S);const A=f(e,["labels"]);n!==void 0&&A!=null&&m(n,["labels"],A);const C=f(e,["cachedContent"]);n!==void 0&&C!=null&&m(n,["cachedContent"],no(t,C));const k=f(e,["responseModalities"]);k!=null&&m(r,["responseModalities"],k);const P=f(e,["mediaResolution"]);P!=null&&m(r,["mediaResolution"],P);const V=f(e,["speechConfig"]);V!=null&&m(r,["speechConfig"],Fw(V));const D=f(e,["audioTimestamp"]);D!=null&&m(r,["audioTimestamp"],D);const oe=f(e,["thinkingConfig"]);oe!=null&&m(r,["thinkingConfig"],oe);const Re=f(e,["imageConfig"]);if(Re!=null&&m(r,["imageConfig"],Pee(Re)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function B2(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["_url","model"],St(t,r));const i=f(e,["contents"]);if(i!=null){let o=xi(i);Array.isArray(o)&&(o=o.map(a=>fg(a))),m(n,["contents"],o)}const s=f(e,["config"]);return s!=null&&m(n,["generationConfig"],ree(t,s,n)),n}function z2(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["_url","model"],St(t,r));const i=f(e,["contents"]);if(i!=null){let o=xi(i);Array.isArray(o)&&(o=o.map(a=>a)),m(n,["contents"],o)}const s=f(e,["config"]);return s!=null&&m(n,["generationConfig"],iee(t,s,n)),n}function G2(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>AZ(u))),m(e,["candidates"],l)}const i=f(t,["modelVersion"]);i!=null&&m(e,["modelVersion"],i);const s=f(t,["promptFeedback"]);s!=null&&m(e,["promptFeedback"],s);const o=f(t,["responseId"]);o!=null&&m(e,["responseId"],o);const a=f(t,["usageMetadata"]);return a!=null&&m(e,["usageMetadata"],a),e}function H2(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(c=>c)),m(e,["candidates"],u)}const i=f(t,["createTime"]);i!=null&&m(e,["createTime"],i);const s=f(t,["modelVersion"]);s!=null&&m(e,["modelVersion"],s);const o=f(t,["promptFeedback"]);o!=null&&m(e,["promptFeedback"],o);const a=f(t,["responseId"]);a!=null&&m(e,["responseId"],a);const l=f(t,["usageMetadata"]);return l!=null&&m(e,["usageMetadata"],l),e}function see(t,e){const n={};if(f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=f(t,["numberOfImages"]);e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r);const i=f(t,["aspectRatio"]);e!==void 0&&i!=null&&m(e,["parameters","aspectRatio"],i);const s=f(t,["guidanceScale"]);if(e!==void 0&&s!=null&&m(e,["parameters","guidanceScale"],s),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=f(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&m(e,["parameters","safetySetting"],o);const a=f(t,["personGeneration"]);e!==void 0&&a!=null&&m(e,["parameters","personGeneration"],a);const l=f(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&m(e,["parameters","includeSafetyAttributes"],l);const u=f(t,["includeRaiReason"]);e!==void 0&&u!=null&&m(e,["parameters","includeRaiReason"],u);const c=f(t,["language"]);e!==void 0&&c!=null&&m(e,["parameters","language"],c);const d=f(t,["outputMimeType"]);e!==void 0&&d!=null&&m(e,["parameters","outputOptions","mimeType"],d);const h=f(t,["outputCompressionQuality"]);if(e!==void 0&&h!=null&&m(e,["parameters","outputOptions","compressionQuality"],h),f(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=f(t,["imageSize"]);if(e!==void 0&&g!=null&&m(e,["parameters","sampleImageSize"],g),f(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function oee(t,e){const n={},r=f(t,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const i=f(t,["negativePrompt"]);e!==void 0&&i!=null&&m(e,["parameters","negativePrompt"],i);const s=f(t,["numberOfImages"]);e!==void 0&&s!=null&&m(e,["parameters","sampleCount"],s);const o=f(t,["aspectRatio"]);e!==void 0&&o!=null&&m(e,["parameters","aspectRatio"],o);const a=f(t,["guidanceScale"]);e!==void 0&&a!=null&&m(e,["parameters","guidanceScale"],a);const l=f(t,["seed"]);e!==void 0&&l!=null&&m(e,["parameters","seed"],l);const u=f(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&m(e,["parameters","safetySetting"],u);const c=f(t,["personGeneration"]);e!==void 0&&c!=null&&m(e,["parameters","personGeneration"],c);const d=f(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&m(e,["parameters","includeSafetyAttributes"],d);const h=f(t,["includeRaiReason"]);e!==void 0&&h!=null&&m(e,["parameters","includeRaiReason"],h);const g=f(t,["language"]);e!==void 0&&g!=null&&m(e,["parameters","language"],g);const _=f(t,["outputMimeType"]);e!==void 0&&_!=null&&m(e,["parameters","outputOptions","mimeType"],_);const x=f(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&m(e,["parameters","outputOptions","compressionQuality"],x);const w=f(t,["addWatermark"]);e!==void 0&&w!=null&&m(e,["parameters","addWatermark"],w);const y=f(t,["labels"]);e!==void 0&&y!=null&&m(e,["labels"],y);const T=f(t,["imageSize"]);e!==void 0&&T!=null&&m(e,["parameters","sampleImageSize"],T);const E=f(t,["enhancePrompt"]);return e!==void 0&&E!=null&&m(e,["parameters","enhancePrompt"],E),n}function aee(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["_url","model"],St(t,r));const i=f(e,["prompt"]);i!=null&&m(n,["instances[0]","prompt"],i);const s=f(e,["config"]);return s!=null&&see(s,n),n}function lee(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["_url","model"],St(t,r));const i=f(e,["prompt"]);i!=null&&m(n,["instances[0]","prompt"],i);const s=f(e,["config"]);return s!=null&&oee(s,n),n}function uee(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>wee(o))),m(e,["generatedImages"],s)}const i=f(t,["positivePromptSafetyAttributes"]);return i!=null&&m(e,["positivePromptSafetyAttributes"],sF(i)),e}function cee(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>hg(o))),m(e,["generatedImages"],s)}const i=f(t,["positivePromptSafetyAttributes"]);return i!=null&&m(e,["positivePromptSafetyAttributes"],oF(i)),e}function dee(t,e){const n={},r=f(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r),f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=f(t,["durationSeconds"]);if(e!==void 0&&i!=null&&m(e,["parameters","durationSeconds"],i),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=f(t,["aspectRatio"]);e!==void 0&&s!=null&&m(e,["parameters","aspectRatio"],s);const o=f(t,["resolution"]);e!==void 0&&o!=null&&m(e,["parameters","resolution"],o);const a=f(t,["personGeneration"]);if(e!==void 0&&a!=null&&m(e,["parameters","personGeneration"],a),f(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=f(t,["negativePrompt"]);e!==void 0&&l!=null&&m(e,["parameters","negativePrompt"],l);const u=f(t,["enhancePrompt"]);if(e!==void 0&&u!=null&&m(e,["parameters","enhancePrompt"],u),f(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const c=f(t,["lastFrame"]);e!==void 0&&c!=null&&m(e,["instances[0]","lastFrame"],pg(c));const d=f(t,["referenceImages"]);if(e!==void 0&&d!=null){let h=d;Array.isArray(h)&&(h=h.map(g=>hte(g))),m(e,["instances[0]","referenceImages"],h)}if(f(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function fee(t,e){const n={},r=f(t,["numberOfVideos"]);e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r);const i=f(t,["outputGcsUri"]);e!==void 0&&i!=null&&m(e,["parameters","storageUri"],i);const s=f(t,["fps"]);e!==void 0&&s!=null&&m(e,["parameters","fps"],s);const o=f(t,["durationSeconds"]);e!==void 0&&o!=null&&m(e,["parameters","durationSeconds"],o);const a=f(t,["seed"]);e!==void 0&&a!=null&&m(e,["parameters","seed"],a);const l=f(t,["aspectRatio"]);e!==void 0&&l!=null&&m(e,["parameters","aspectRatio"],l);const u=f(t,["resolution"]);e!==void 0&&u!=null&&m(e,["parameters","resolution"],u);const c=f(t,["personGeneration"]);e!==void 0&&c!=null&&m(e,["parameters","personGeneration"],c);const d=f(t,["pubsubTopic"]);e!==void 0&&d!=null&&m(e,["parameters","pubsubTopic"],d);const h=f(t,["negativePrompt"]);e!==void 0&&h!=null&&m(e,["parameters","negativePrompt"],h);const g=f(t,["enhancePrompt"]);e!==void 0&&g!=null&&m(e,["parameters","enhancePrompt"],g);const _=f(t,["generateAudio"]);e!==void 0&&_!=null&&m(e,["parameters","generateAudio"],_);const x=f(t,["lastFrame"]);e!==void 0&&x!=null&&m(e,["instances[0]","lastFrame"],Hi(x));const w=f(t,["referenceImages"]);if(e!==void 0&&w!=null){let E=w;Array.isArray(E)&&(E=E.map(N=>pte(N))),m(e,["instances[0]","referenceImages"],E)}const y=f(t,["mask"]);e!==void 0&&y!=null&&m(e,["instances[0]","mask"],fte(y));const T=f(t,["compressionQuality"]);return e!==void 0&&T!=null&&m(e,["parameters","compressionQuality"],T),n}function hee(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const r=f(t,["metadata"]);r!=null&&m(e,["metadata"],r);const i=f(t,["done"]);i!=null&&m(e,["done"],i);const s=f(t,["error"]);s!=null&&m(e,["error"],s);const o=f(t,["response","generateVideoResponse"]);return o!=null&&m(e,["response"],vee(o)),e}function pee(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const r=f(t,["metadata"]);r!=null&&m(e,["metadata"],r);const i=f(t,["done"]);i!=null&&m(e,["done"],i);const s=f(t,["error"]);s!=null&&m(e,["error"],s);const o=f(t,["response"]);return o!=null&&m(e,["response"],_ee(o)),e}function mee(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["_url","model"],St(t,r));const i=f(e,["prompt"]);i!=null&&m(n,["instances[0]","prompt"],i);const s=f(e,["image"]);s!=null&&m(n,["instances[0]","image"],pg(s));const o=f(e,["video"]);o!=null&&m(n,["instances[0]","video"],lF(o));const a=f(e,["source"]);a!=null&&yee(a,n);const l=f(e,["config"]);return l!=null&&dee(l,n),n}function gee(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["_url","model"],St(t,r));const i=f(e,["prompt"]);i!=null&&m(n,["instances[0]","prompt"],i);const s=f(e,["image"]);s!=null&&m(n,["instances[0]","image"],Hi(s));const o=f(e,["video"]);o!=null&&m(n,["instances[0]","video"],uF(o));const a=f(e,["source"]);a!=null&&xee(a,n);const l=f(e,["config"]);return l!=null&&fee(l,n),n}function vee(t){const e={},n=f(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>Eee(o))),m(e,["generatedVideos"],s)}const r=f(t,["raiMediaFilteredCount"]);r!=null&&m(e,["raiMediaFilteredCount"],r);const i=f(t,["raiMediaFilteredReasons"]);return i!=null&&m(e,["raiMediaFilteredReasons"],i),e}function _ee(t){const e={},n=f(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>Iee(o))),m(e,["generatedVideos"],s)}const r=f(t,["raiMediaFilteredCount"]);r!=null&&m(e,["raiMediaFilteredCount"],r);const i=f(t,["raiMediaFilteredReasons"]);return i!=null&&m(e,["raiMediaFilteredReasons"],i),e}function yee(t,e){const n={},r=f(t,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const i=f(t,["image"]);e!==void 0&&i!=null&&m(e,["instances[0]","image"],pg(i));const s=f(t,["video"]);return e!==void 0&&s!=null&&m(e,["instances[0]","video"],lF(s)),n}function xee(t,e){const n={},r=f(t,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const i=f(t,["image"]);e!==void 0&&i!=null&&m(e,["instances[0]","image"],Hi(i));const s=f(t,["video"]);return e!==void 0&&s!=null&&m(e,["instances[0]","video"],uF(s)),n}function wee(t){const e={},n=f(t,["_self"]);n!=null&&m(e,["image"],bee(n));const r=f(t,["raiFilteredReason"]);r!=null&&m(e,["raiFilteredReason"],r);const i=f(t,["_self"]);return i!=null&&m(e,["safetyAttributes"],sF(i)),e}function hg(t){const e={},n=f(t,["_self"]);n!=null&&m(e,["image"],iF(n));const r=f(t,["raiFilteredReason"]);r!=null&&m(e,["raiFilteredReason"],r);const i=f(t,["_self"]);i!=null&&m(e,["safetyAttributes"],oF(i));const s=f(t,["prompt"]);return s!=null&&m(e,["enhancedPrompt"],s),e}function Tee(t){const e={},n=f(t,["_self"]);n!=null&&m(e,["mask"],iF(n));const r=f(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),m(e,["labels"],i)}return e}function Eee(t){const e={},n=f(t,["video"]);return n!=null&&m(e,["video"],cte(n)),e}function Iee(t){const e={},n=f(t,["_self"]);return n!=null&&m(e,["video"],dte(n)),e}function See(t){const e={},n=f(t,["modelSelectionConfig"]);n!=null&&m(e,["modelConfig"],n);const r=f(t,["responseJsonSchema"]);r!=null&&m(e,["responseJsonSchema"],r);const i=f(t,["audioTimestamp"]);i!=null&&m(e,["audioTimestamp"],i);const s=f(t,["candidateCount"]);s!=null&&m(e,["candidateCount"],s);const o=f(t,["enableAffectiveDialog"]);o!=null&&m(e,["enableAffectiveDialog"],o);const a=f(t,["frequencyPenalty"]);a!=null&&m(e,["frequencyPenalty"],a);const l=f(t,["logprobs"]);l!=null&&m(e,["logprobs"],l);const u=f(t,["maxOutputTokens"]);u!=null&&m(e,["maxOutputTokens"],u);const c=f(t,["mediaResolution"]);c!=null&&m(e,["mediaResolution"],c);const d=f(t,["presencePenalty"]);d!=null&&m(e,["presencePenalty"],d);const h=f(t,["responseLogprobs"]);h!=null&&m(e,["responseLogprobs"],h);const g=f(t,["responseMimeType"]);g!=null&&m(e,["responseMimeType"],g);const _=f(t,["responseModalities"]);_!=null&&m(e,["responseModalities"],_);const x=f(t,["responseSchema"]);x!=null&&m(e,["responseSchema"],x);const w=f(t,["routingConfig"]);w!=null&&m(e,["routingConfig"],w);const y=f(t,["seed"]);y!=null&&m(e,["seed"],y);const T=f(t,["speechConfig"]);T!=null&&m(e,["speechConfig"],T);const E=f(t,["stopSequences"]);E!=null&&m(e,["stopSequences"],E);const N=f(t,["temperature"]);N!=null&&m(e,["temperature"],N);const F=f(t,["thinkingConfig"]);F!=null&&m(e,["thinkingConfig"],F);const O=f(t,["topK"]);O!=null&&m(e,["topK"],O);const S=f(t,["topP"]);if(S!=null&&m(e,["topP"],S),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Aee(t,e){const n={},r=f(e,["model"]);return r!=null&&m(n,["_url","name"],St(t,r)),n}function Cee(t,e){const n={},r=f(e,["model"]);return r!=null&&m(n,["_url","name"],St(t,r)),n}function Ree(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&m(e,["enableWidget"],n),e}function kee(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],n),e}function Nee(t){const e={},n=f(t,["aspectRatio"]);n!=null&&m(e,["aspectRatio"],n);const r=f(t,["imageSize"]);if(r!=null&&m(e,["imageSize"],r),f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Pee(t){const e={},n=f(t,["aspectRatio"]);n!=null&&m(e,["aspectRatio"],n);const r=f(t,["imageSize"]);r!=null&&m(e,["imageSize"],r);const i=f(t,["outputMimeType"]);i!=null&&m(e,["imageOutputOptions","mimeType"],i);const s=f(t,["outputCompressionQuality"]);return s!=null&&m(e,["imageOutputOptions","compressionQuality"],s),e}function bee(t){const e={},n=f(t,["bytesBase64Encoded"]);n!=null&&m(e,["imageBytes"],la(n));const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function iF(t){const e={},n=f(t,["gcsUri"]);n!=null&&m(e,["gcsUri"],n);const r=f(t,["bytesBase64Encoded"]);r!=null&&m(e,["imageBytes"],la(r));const i=f(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function pg(t){const e={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=f(t,["imageBytes"]);n!=null&&m(e,["bytesBase64Encoded"],la(n));const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function Hi(t){const e={},n=f(t,["gcsUri"]);n!=null&&m(e,["gcsUri"],n);const r=f(t,["imageBytes"]);r!=null&&m(e,["bytesBase64Encoded"],la(r));const i=f(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function Dee(t,e,n){const r={},i=f(e,["pageSize"]);n!==void 0&&i!=null&&m(n,["_query","pageSize"],i);const s=f(e,["pageToken"]);n!==void 0&&s!=null&&m(n,["_query","pageToken"],s);const o=f(e,["filter"]);n!==void 0&&o!=null&&m(n,["_query","filter"],o);const a=f(e,["queryBase"]);return n!==void 0&&a!=null&&m(n,["_url","models_url"],X4(t,a)),r}function Fee(t,e,n){const r={},i=f(e,["pageSize"]);n!==void 0&&i!=null&&m(n,["_query","pageSize"],i);const s=f(e,["pageToken"]);n!==void 0&&s!=null&&m(n,["_query","pageToken"],s);const o=f(e,["filter"]);n!==void 0&&o!=null&&m(n,["_query","filter"],o);const a=f(e,["queryBase"]);return n!==void 0&&a!=null&&m(n,["_url","models_url"],X4(t,a)),r}function Mee(t,e){const n={},r=f(e,["config"]);return r!=null&&Dee(t,r,n),n}function Lee(t,e){const n={},r=f(e,["config"]);return r!=null&&Fee(t,r,n),n}function Oee(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=f(t,["_self"]);if(i!=null){let s=Q4(i);Array.isArray(s)&&(s=s.map(o=>Ay(o))),m(e,["models"],s)}return e}function Vee(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=f(t,["_self"]);if(i!=null){let s=Q4(i);Array.isArray(s)&&(s=s.map(o=>Cy(o))),m(e,["models"],s)}return e}function Uee(t){const e={},n=f(t,["maskMode"]);n!=null&&m(e,["maskMode"],n);const r=f(t,["segmentationClasses"]);r!=null&&m(e,["maskClasses"],r);const i=f(t,["maskDilation"]);return i!=null&&m(e,["dilation"],i),e}function Ay(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const r=f(t,["displayName"]);r!=null&&m(e,["displayName"],r);const i=f(t,["description"]);i!=null&&m(e,["description"],i);const s=f(t,["version"]);s!=null&&m(e,["version"],s);const o=f(t,["_self"]);o!=null&&m(e,["tunedModelInfo"],tte(o));const a=f(t,["inputTokenLimit"]);a!=null&&m(e,["inputTokenLimit"],a);const l=f(t,["outputTokenLimit"]);l!=null&&m(e,["outputTokenLimit"],l);const u=f(t,["supportedGenerationMethods"]);u!=null&&m(e,["supportedActions"],u);const c=f(t,["temperature"]);c!=null&&m(e,["temperature"],c);const d=f(t,["maxTemperature"]);d!=null&&m(e,["maxTemperature"],d);const h=f(t,["topP"]);h!=null&&m(e,["topP"],h);const g=f(t,["topK"]);g!=null&&m(e,["topK"],g);const _=f(t,["thinking"]);return _!=null&&m(e,["thinking"],_),e}function Cy(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const r=f(t,["displayName"]);r!=null&&m(e,["displayName"],r);const i=f(t,["description"]);i!=null&&m(e,["description"],i);const s=f(t,["versionId"]);s!=null&&m(e,["version"],s);const o=f(t,["deployedModels"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(h=>QZ(h))),m(e,["endpoints"],d)}const a=f(t,["labels"]);a!=null&&m(e,["labels"],a);const l=f(t,["_self"]);l!=null&&m(e,["tunedModelInfo"],nte(l));const u=f(t,["defaultCheckpointId"]);u!=null&&m(e,["defaultCheckpointId"],u);const c=f(t,["checkpoints"]);if(c!=null){let d=c;Array.isArray(d)&&(d=d.map(h=>h)),m(e,["checkpoints"],d)}return e}function Bee(t){const e={},n=f(t,["mediaResolution"]);n!=null&&m(e,["mediaResolution"],n);const r=f(t,["codeExecutionResult"]);r!=null&&m(e,["codeExecutionResult"],r);const i=f(t,["executableCode"]);i!=null&&m(e,["executableCode"],i);const s=f(t,["fileData"]);s!=null&&m(e,["fileData"],ZZ(s));const o=f(t,["functionCall"]);o!=null&&m(e,["functionCall"],eee(o));const a=f(t,["functionResponse"]);a!=null&&m(e,["functionResponse"],a);const l=f(t,["inlineData"]);l!=null&&m(e,["inlineData"],SZ(l));const u=f(t,["text"]);u!=null&&m(e,["text"],u);const c=f(t,["thought"]);c!=null&&m(e,["thought"],c);const d=f(t,["thoughtSignature"]);d!=null&&m(e,["thoughtSignature"],d);const h=f(t,["videoMetadata"]);return h!=null&&m(e,["videoMetadata"],h),e}function zee(t){const e={},n=f(t,["productImage"]);return n!=null&&m(e,["image"],Hi(n)),e}function Gee(t,e){const n={},r=f(t,["numberOfImages"]);e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r);const i=f(t,["baseSteps"]);e!==void 0&&i!=null&&m(e,["parameters","baseSteps"],i);const s=f(t,["outputGcsUri"]);e!==void 0&&s!=null&&m(e,["parameters","storageUri"],s);const o=f(t,["seed"]);e!==void 0&&o!=null&&m(e,["parameters","seed"],o);const a=f(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&m(e,["parameters","safetySetting"],a);const l=f(t,["personGeneration"]);e!==void 0&&l!=null&&m(e,["parameters","personGeneration"],l);const u=f(t,["addWatermark"]);e!==void 0&&u!=null&&m(e,["parameters","addWatermark"],u);const c=f(t,["outputMimeType"]);e!==void 0&&c!=null&&m(e,["parameters","outputOptions","mimeType"],c);const d=f(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&m(e,["parameters","outputOptions","compressionQuality"],d);const h=f(t,["enhancePrompt"]);e!==void 0&&h!=null&&m(e,["parameters","enhancePrompt"],h);const g=f(t,["labels"]);return e!==void 0&&g!=null&&m(e,["labels"],g),n}function Hee(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["_url","model"],St(t,r));const i=f(e,["source"]);i!=null&&Wee(i,n);const s=f(e,["config"]);return s!=null&&Gee(s,n),n}function $ee(t){const e={},n=f(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>hg(i))),m(e,["generatedImages"],r)}return e}function Wee(t,e){const n={},r=f(t,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const i=f(t,["personImage"]);e!==void 0&&i!=null&&m(e,["instances[0]","personImage","image"],Hi(i));const s=f(t,["productImages"]);if(e!==void 0&&s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>zee(a))),m(e,["instances[0]","productImages"],o)}return n}function qee(t){const e={},n=f(t,["referenceImage"]);n!=null&&m(e,["referenceImage"],Hi(n));const r=f(t,["referenceId"]);r!=null&&m(e,["referenceId"],r);const i=f(t,["referenceType"]);i!=null&&m(e,["referenceType"],i);const s=f(t,["maskImageConfig"]);s!=null&&m(e,["maskImageConfig"],Uee(s));const o=f(t,["controlImageConfig"]);o!=null&&m(e,["controlImageConfig"],bZ(o));const a=f(t,["styleImageConfig"]);a!=null&&m(e,["styleImageConfig"],a);const l=f(t,["subjectImageConfig"]);return l!=null&&m(e,["subjectImageConfig"],l),e}function sF(t){const e={},n=f(t,["safetyAttributes","categories"]);n!=null&&m(e,["categories"],n);const r=f(t,["safetyAttributes","scores"]);r!=null&&m(e,["scores"],r);const i=f(t,["contentType"]);return i!=null&&m(e,["contentType"],i),e}function oF(t){const e={},n=f(t,["safetyAttributes","categories"]);n!=null&&m(e,["categories"],n);const r=f(t,["safetyAttributes","scores"]);r!=null&&m(e,["scores"],r);const i=f(t,["contentType"]);return i!=null&&m(e,["contentType"],i),e}function jee(t){const e={},n=f(t,["category"]);if(n!=null&&m(e,["category"],n),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=f(t,["threshold"]);return r!=null&&m(e,["threshold"],r),e}function Kee(t){const e={},n=f(t,["image"]);return n!=null&&m(e,["image"],Hi(n)),e}function Jee(t,e){const n={},r=f(t,["mode"]);e!==void 0&&r!=null&&m(e,["parameters","mode"],r);const i=f(t,["maxPredictions"]);e!==void 0&&i!=null&&m(e,["parameters","maxPredictions"],i);const s=f(t,["confidenceThreshold"]);e!==void 0&&s!=null&&m(e,["parameters","confidenceThreshold"],s);const o=f(t,["maskDilation"]);e!==void 0&&o!=null&&m(e,["parameters","maskDilation"],o);const a=f(t,["binaryColorThreshold"]);e!==void 0&&a!=null&&m(e,["parameters","binaryColorThreshold"],a);const l=f(t,["labels"]);return e!==void 0&&l!=null&&m(e,["labels"],l),n}function Yee(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["_url","model"],St(t,r));const i=f(e,["source"]);i!=null&&Qee(i,n);const s=f(e,["config"]);return s!=null&&Jee(s,n),n}function Xee(t){const e={},n=f(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Tee(i))),m(e,["generatedMasks"],r)}return e}function Qee(t,e){const n={},r=f(t,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const i=f(t,["image"]);e!==void 0&&i!=null&&m(e,["instances[0]","image"],Hi(i));const s=f(t,["scribbleImage"]);return e!==void 0&&s!=null&&m(e,["instances[0]","scribble"],Kee(s)),n}function Zee(t){const e={},n=f(t,["functionCallingConfig"]);n!=null&&m(e,["functionCallingConfig"],tee(n));const r=f(t,["retrievalConfig"]);return r!=null&&m(e,["retrievalConfig"],r),e}function ete(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>d)),m(e,["functionDeclarations"],c)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=f(t,["googleSearchRetrieval"]);r!=null&&m(e,["googleSearchRetrieval"],r);const i=f(t,["computerUse"]);i!=null&&m(e,["computerUse"],i);const s=f(t,["fileSearch"]);s!=null&&m(e,["fileSearch"],s);const o=f(t,["codeExecution"]);if(o!=null&&m(e,["codeExecution"],o),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(t,["googleMaps"]);a!=null&&m(e,["googleMaps"],Ree(a));const l=f(t,["googleSearch"]);l!=null&&m(e,["googleSearch"],kee(l));const u=f(t,["urlContext"]);return u!=null&&m(e,["urlContext"],u),e}function aF(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(h=>nee(h))),m(e,["functionDeclarations"],d)}const r=f(t,["retrieval"]);r!=null&&m(e,["retrieval"],r);const i=f(t,["googleSearchRetrieval"]);i!=null&&m(e,["googleSearchRetrieval"],i);const s=f(t,["computerUse"]);if(s!=null&&m(e,["computerUse"],s),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=f(t,["codeExecution"]);o!=null&&m(e,["codeExecution"],o);const a=f(t,["enterpriseWebSearch"]);a!=null&&m(e,["enterpriseWebSearch"],a);const l=f(t,["googleMaps"]);l!=null&&m(e,["googleMaps"],l);const u=f(t,["googleSearch"]);u!=null&&m(e,["googleSearch"],u);const c=f(t,["urlContext"]);return c!=null&&m(e,["urlContext"],c),e}function tte(t){const e={},n=f(t,["baseModel"]);n!=null&&m(e,["baseModel"],n);const r=f(t,["createTime"]);r!=null&&m(e,["createTime"],r);const i=f(t,["updateTime"]);return i!=null&&m(e,["updateTime"],i),e}function nte(t){const e={},n=f(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&m(e,["baseModel"],n);const r=f(t,["createTime"]);r!=null&&m(e,["createTime"],r);const i=f(t,["updateTime"]);return i!=null&&m(e,["updateTime"],i),e}function rte(t,e){const n={},r=f(t,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const i=f(t,["description"]);e!==void 0&&i!=null&&m(e,["description"],i);const s=f(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&m(e,["defaultCheckpointId"],s),n}function ite(t,e){const n={},r=f(t,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const i=f(t,["description"]);e!==void 0&&i!=null&&m(e,["description"],i);const s=f(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&m(e,["defaultCheckpointId"],s),n}function ste(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["_url","name"],St(t,r));const i=f(e,["config"]);return i!=null&&rte(i,n),n}function ote(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["_url","model"],St(t,r));const i=f(e,["config"]);return i!=null&&ite(i,n),n}function ate(t,e){const n={},r=f(t,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const i=f(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&m(e,["parameters","safetySetting"],i);const s=f(t,["personGeneration"]);e!==void 0&&s!=null&&m(e,["parameters","personGeneration"],s);const o=f(t,["includeRaiReason"]);e!==void 0&&o!=null&&m(e,["parameters","includeRaiReason"],o);const a=f(t,["outputMimeType"]);e!==void 0&&a!=null&&m(e,["parameters","outputOptions","mimeType"],a);const l=f(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&m(e,["parameters","outputOptions","compressionQuality"],l);const u=f(t,["enhanceInputImage"]);e!==void 0&&u!=null&&m(e,["parameters","upscaleConfig","enhanceInputImage"],u);const c=f(t,["imagePreservationFactor"]);e!==void 0&&c!=null&&m(e,["parameters","upscaleConfig","imagePreservationFactor"],c);const d=f(t,["labels"]);e!==void 0&&d!=null&&m(e,["labels"],d);const h=f(t,["numberOfImages"]);e!==void 0&&h!=null&&m(e,["parameters","sampleCount"],h);const g=f(t,["mode"]);return e!==void 0&&g!=null&&m(e,["parameters","mode"],g),n}function lte(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["_url","model"],St(t,r));const i=f(e,["image"]);i!=null&&m(n,["instances[0]","image"],Hi(i));const s=f(e,["upscaleFactor"]);s!=null&&m(n,["parameters","upscaleConfig","upscaleFactor"],s);const o=f(e,["config"]);return o!=null&&ate(o,n),n}function ute(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>hg(s))),m(e,["generatedImages"],i)}return e}function cte(t){const e={},n=f(t,["uri"]);n!=null&&m(e,["uri"],n);const r=f(t,["encodedVideo"]);r!=null&&m(e,["videoBytes"],la(r));const i=f(t,["encoding"]);return i!=null&&m(e,["mimeType"],i),e}function dte(t){const e={},n=f(t,["gcsUri"]);n!=null&&m(e,["uri"],n);const r=f(t,["bytesBase64Encoded"]);r!=null&&m(e,["videoBytes"],la(r));const i=f(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function fte(t){const e={},n=f(t,["image"]);n!=null&&m(e,["_self"],Hi(n));const r=f(t,["maskMode"]);return r!=null&&m(e,["maskMode"],r),e}function hte(t){const e={},n=f(t,["image"]);n!=null&&m(e,["image"],pg(n));const r=f(t,["referenceType"]);return r!=null&&m(e,["referenceType"],r),e}function pte(t){const e={},n=f(t,["image"]);n!=null&&m(e,["image"],Hi(n));const r=f(t,["referenceType"]);return r!=null&&m(e,["referenceType"],r),e}function lF(t){const e={},n=f(t,["uri"]);n!=null&&m(e,["uri"],n);const r=f(t,["videoBytes"]);r!=null&&m(e,["encodedVideo"],la(r));const i=f(t,["mimeType"]);return i!=null&&m(e,["encoding"],i),e}function uF(t){const e={},n=f(t,["uri"]);n!=null&&m(e,["gcsUri"],n);const r=f(t,["videoBytes"]);r!=null&&m(e,["bytesBase64Encoded"],la(r));const i=f(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mte(t,e){const n={},r=f(t,["displayName"]);return e!==void 0&&r!=null&&m(e,["displayName"],r),n}function gte(t){const e={},n=f(t,["config"]);return n!=null&&mte(n,e),e}function vte(t,e){const n={},r=f(t,["force"]);return e!==void 0&&r!=null&&m(e,["_query","force"],r),n}function _te(t){const e={},n=f(t,["name"]);n!=null&&m(e,["_url","name"],n);const r=f(t,["config"]);return r!=null&&vte(r,e),e}function yte(t){const e={},n=f(t,["name"]);return n!=null&&m(e,["_url","name"],n),e}function xte(t,e){const n={},r=f(t,["customMetadata"]);if(e!==void 0&&r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),m(e,["customMetadata"],s)}const i=f(t,["chunkingConfig"]);return e!==void 0&&i!=null&&m(e,["chunkingConfig"],i),n}function wte(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const r=f(t,["metadata"]);r!=null&&m(e,["metadata"],r);const i=f(t,["done"]);i!=null&&m(e,["done"],i);const s=f(t,["error"]);s!=null&&m(e,["error"],s);const o=f(t,["response"]);return o!=null&&m(e,["response"],Ete(o)),e}function Tte(t){const e={},n=f(t,["fileSearchStoreName"]);n!=null&&m(e,["_url","file_search_store_name"],n);const r=f(t,["fileName"]);r!=null&&m(e,["fileName"],r);const i=f(t,["config"]);return i!=null&&xte(i,e),e}function Ete(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["parent"]);r!=null&&m(e,["parent"],r);const i=f(t,["documentName"]);return i!=null&&m(e,["documentName"],i),e}function Ite(t,e){const n={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=f(t,["pageToken"]);return e!==void 0&&i!=null&&m(e,["_query","pageToken"],i),n}function Ste(t){const e={},n=f(t,["config"]);return n!=null&&Ite(n,e),e}function Ate(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=f(t,["fileSearchStores"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),m(e,["fileSearchStores"],s)}return e}function cF(t,e){const n={},r=f(t,["mimeType"]);e!==void 0&&r!=null&&m(e,["mimeType"],r);const i=f(t,["displayName"]);e!==void 0&&i!=null&&m(e,["displayName"],i);const s=f(t,["customMetadata"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),m(e,["customMetadata"],a)}const o=f(t,["chunkingConfig"]);return e!==void 0&&o!=null&&m(e,["chunkingConfig"],o),n}function Cte(t){const e={},n=f(t,["fileSearchStoreName"]);n!=null&&m(e,["_url","file_search_store_name"],n);const r=f(t,["config"]);return r!=null&&cF(r,e),e}function Rte(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kte="Content-Type",Nte="X-Server-Timeout",Pte="User-Agent",Ry="x-goog-api-client",bte="1.34.0",Dte=`google-genai-sdk/${bte}`,Fte="v1beta1",Mte="v1beta";class Lte{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Fte,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:Mte,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[o,a]of Object.entries(e.queryParams))i.searchParams.append(o,String(a));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,i.toString(),e.abortSignal),this.unaryApiCall(i,s,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,s]of Object.entries(n))typeof s=="object"?r[i]=Object.assign(Object.assign({},r[i]),s):s!==void 0&&(r[i]=s);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,i.toString(),e.abortSignal),this.streamApiCall(i,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,i){if(n&&n.timeout||i){const s=new AbortController,o=s.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>s.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}i&&i.addEventListener("abort",()=>{s.abort()}),e.signal=o}return n&&n.extraBody!==null&&Ote(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await $2(i),new Ey(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await $2(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){return Ui(this,arguments,function*(){var r;const i=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),s=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let o="";const a="data:",l=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:u,value:c}=yield at(i.read());if(u){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=s.decode(c,{stream:!0});try{const _=JSON.parse(d);if("error"in _){const x=JSON.parse(JSON.stringify(_.error)),w=x.status,y=x.code,T=`got status: ${w}. ${JSON.stringify(_)}`;if(y>=400&&y<600)throw new dg({message:T,status:y})}}catch(_){if(_.name==="ApiError")throw _}o+=d;let h=-1,g=0;for(;;){h=-1,g=0;for(const w of l){const y=o.indexOf(w);y!==-1&&(h===-1||y<h)&&(h=y,g=w.length)}if(h===-1)break;const _=o.substring(0,h);o=o.substring(h+g);const x=_.trim();if(x.startsWith(a)){const w=x.substring(a.length).trim();try{const y=new Response(w,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield at(new Ey(y))}catch(y){throw new Error(`exception parsing stream chunk ${w}. ${y}`)}}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=Dte+" "+this.clientOptions.userAgentExtra;return e[Pte]=n,e[Ry]=n,e[kte]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[i,s]of Object.entries(e.headers))r.append(i,s);e.timeout&&e.timeout>0&&r.append(Nte,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const s=this.clientOptions.uploader,o=await s.stat(e);i.sizeBytes=String(o.size);const a=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:o.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=a;const l={file:i},u=this.getFileName(e),c=Oe("upload/v1beta/files",l._url),d=await this.fetchUploadUrl(c,i.sizeBytes,i.mimeType,u,l,n==null?void 0:n.httpOptions);return s.upload(e,d,this)}async uploadFileToFileSearchStore(e,n,r){var i;const s=this.clientOptions.uploader,o=await s.stat(n),a=String(o.size),l=(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:o.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const u=`upload/v1beta/${e}:uploadToFileSearchStore`,c=this.getFileName(n),d={};r!=null&&cF(r,d);const h=await this.fetchUploadUrl(u,a,l,c,d,r==null?void 0:r.httpOptions);return s.uploadToFileSearchStore(n,h,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,i,s,o){var a;let l={};o?l=o:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const u=await this.request({path:e,body:JSON.stringify(s),httpMethod:"POST",httpOptions:l});if(!u||!(u!=null&&u.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const c=(a=u==null?void 0:u.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(c===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return c}}async function $2(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new dg({message:i,status:n}):new Error(i)}}function Ote(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(s,o){const a=Object.assign({},s);for(const l in o)if(Object.prototype.hasOwnProperty.call(o,l)){const u=o[l],c=a[l];u&&typeof u=="object"&&!Array.isArray(u)&&c&&typeof c=="object"&&!Array.isArray(c)?a[l]=r(c,u):(c&&u&&typeof c!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof c}, New type: ${typeof u}. Overwriting.`),a[l]=u)}return a}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Vte="mcp_used/unknown";let Ute=!1;function dF(t){for(const e of t)if(Bte(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Ute}function fF(t){var e;const n=(e=t[Ry])!==null&&e!==void 0?e:"";t[Ry]=(n+` ${Vte}`).trimStart()}function Bte(t){return t!==null&&typeof t=="object"&&t instanceof Lw}function zte(t){return Ui(this,arguments,function*(n,r=100){let i,s=0;for(;s<r;){const o=yield at(n.listTools({cursor:i}));for(const a of o.tools)yield yield at(a),s++;if(!o.nextCursor)break;i=o.nextCursor}})}class Lw{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Lw(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const s={},o=[];for(const c of this.mcpClients)try{for(var a=!0,l=(n=void 0,Bi(zte(c))),u;u=await l.next(),e=u.done,!e;a=!0){i=u.value,a=!1;const d=i;o.push(d);const h=d.name;if(s[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);s[h]=c}}catch(d){n={error:d}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}this.mcpTools=o,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),yX(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const o=await i.callTool({name:r.name,arguments:r.args},void 0,s);n.push({functionResponse:{name:r.name,response:o.isError?{error:o}:o}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Gte(t,e,n){const r=new dX;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),e(r)}class Hte{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),o=qte(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${i}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${a}`;let u=()=>{};const c=new Promise(E=>{u=E}),d=e.callbacks,h=function(){u({})},g=this.apiClient,_={onopen:h,onmessage:E=>{Gte(g,d.onmessage,E)},onerror:(n=d==null?void 0:d.onerror)!==null&&n!==void 0?n:function(E){},onclose:(r=d==null?void 0:d.onclose)!==null&&r!==void 0?r:function(E){}},x=this.webSocketFactory.create(l,Wte(o),_);x.connect(),await c;const T={setup:{model:St(this.apiClient,e.model)}};return x.send(JSON.stringify(T)),new $te(x,this.apiClient)}}class $te{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=gZ(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=mZ(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(su.PLAY)}pause(){this.sendPlaybackControl(su.PAUSE)}stop(){this.sendPlaybackControl(su.STOP)}resetContext(){this.sendPlaybackControl(su.RESET_CONTEXT)}close(){this.conn.close()}}function Wte(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function qte(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jte="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Kte(t,e,n){const r=new cX;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const s=JSON.parse(i);if(t.isVertexAI()){const o=yZ(s);Object.assign(r,o)}else Object.assign(r,s);e(r)}class Jte{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new Hte(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,s,o,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let c;const d=this.apiClient.getHeaders();e.config&&e.config.tools&&dF(e.config.tools)&&fF(d);const h=Zte(d);if(this.apiClient.isVertexAI())c=`${l}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h,c);else{const C=this.apiClient.getApiKey();let k="BidiGenerateContent",P="key";C!=null&&C.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),k="BidiGenerateContentConstrained",P="access_token"),c=`${l}/ws/google.ai.generativelanguage.${u}.GenerativeService.${k}?${P}=${C}`}let g=()=>{};const _=new Promise(C=>{g=C}),x=e.callbacks,w=function(){var C;(C=x==null?void 0:x.onopen)===null||C===void 0||C.call(x),g({})},y=this.apiClient,T={onopen:w,onmessage:C=>{Kte(y,x.onmessage,C)},onerror:(n=x==null?void 0:x.onerror)!==null&&n!==void 0?n:function(C){},onclose:(r=x==null?void 0:x.onclose)!==null&&r!==void 0?r:function(C){}},E=this.webSocketFactory.create(c,Qte(h),T);E.connect(),await _;let N=St(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&N.startsWith("publishers/")){const C=this.apiClient.getProject(),k=this.apiClient.getLocation();N=`projects/${C}/locations/${k}/`+N}let F={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Xp.AUDIO]}:e.config.responseModalities=[Xp.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const O=(a=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[],S=[];for(const C of O)if(this.isCallableTool(C)){const k=C;S.push(await k.tool())}else S.push(C);S.length>0&&(e.config.tools=S);const A={model:N,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?F=pZ(this.apiClient,A):F=hZ(this.apiClient,A),delete F.config,E.send(JSON.stringify(F)),new Xte(E,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Yte={turnComplete:!0};class Xte{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=xi(n.turns),e.isVertexAI()||(r=r.map(i=>fg(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const s of r){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(jte)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},Yte),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:_Z(e)}:n={realtimeInput:vZ(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Qte(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function Zte(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const W2=10;function q2(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const o of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(ku(o)){i=!0;break}if(!i)return!0;const s=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function ku(t){return"callTool"in t&&typeof t.callTool=="function"}function ene(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>ku(i)))!==null&&r!==void 0?r:!1}function j2(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,i)=>{if(ku(r))return;const s=r;s.functionDeclarations&&s.functionDeclarations.length>0&&n.push(i)}),n}function K2(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tne extends to{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,s,o,a;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!ene(n)||q2(n.config))return await this.generateContentInternal(l);const u=j2(n);if(u.length>0){const x=u.map(w=>`tools[${w}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${x}.`)}let c,d;const h=xi(l.contents),g=(s=(i=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:W2;let _=0;for(;_<g&&(c=await this.generateContentInternal(l),!(!c.functionCalls||c.functionCalls.length===0));){const x=c.candidates[0].content,w=[];for(const y of(a=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if(ku(y)){const E=await y.callTool(c.functionCalls);w.push(...E)}_++,d={role:"user",parts:w},l.contents=xi(l.contents),l.contents.push(x),l.contents.push(d),K2(l.config)&&(h.push(x),h.push(d))}return K2(l.config)&&(c.automaticFunctionCallingHistory=h),c},this.generateContentStream=async n=>{var r,i,s,o,a;if(this.maybeMoveToResponseJsonSchem(n),q2(n.config)){const d=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(d)}const l=j2(n);if(l.length>0){const d=l.map(h=>`tools[${h}]`).join(", ");throw new Error(`Incompatible tools found at ${d}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const u=(s=(i=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||s===void 0?void 0:s.streamFunctionCallArguments,c=(a=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(u&&!c)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let s;const o=[];if(r!=null&&r.generatedImages)for(const l of r.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((i=l==null?void 0:l.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?s=l==null?void 0:l.safetyAttributes:o.push(l);let a;return s?a={generatedImages:o,positivePromptSafetyAttributes:s,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:o,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((r=o.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new Tl(Ks.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(o),o)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,s,o,a,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((o=(s=n.source)===null||s===void 0?void 0:s.video)===null||o===void 0)&&o.uri&&(!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const s=(n=e.config)===null||n===void 0?void 0:n.tools;if(!s)return e;const o=await Promise.all(s.map(async l=>ku(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(a.config.tools=o,e.config&&e.config.tools&&dF(e.config.tools)){const l=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let u=Object.assign({},l);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),fF(u),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return a}async initAfcToolsMap(e){var n,r,i;const s=new Map;for(const o of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(ku(o)){const a=o,l=await a.tool();for(const u of(i=l.functionDeclarations)!==null&&i!==void 0?i:[]){if(!u.name)throw new Error("Function declaration name is required.");if(s.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);s.set(u.name,a)}}return s}async processAfcStream(e){var n,r,i;const s=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:W2;let o=!1,a=0;const l=await this.initAfcToolsMap(e);return function(u,c,d){return Ui(this,arguments,function*(){for(var h,g,_,x,w,y;a<s;){o&&(a++,o=!1);const F=yield at(u.processParamsMaybeAddMcpUsage(d)),O=yield at(u.generateContentStreamInternal(F)),S=[],A=[];try{for(var T=!0,E=(g=void 0,Bi(O)),N;N=yield at(E.next()),h=N.done,!h;T=!0){x=N.value,T=!1;const C=x;if(yield yield at(C),C.candidates&&(!((w=C.candidates[0])===null||w===void 0)&&w.content)){A.push(C.candidates[0].content);for(const k of(y=C.candidates[0].content.parts)!==null&&y!==void 0?y:[])if(a<s&&k.functionCall){if(!k.functionCall.name)throw new Error("Function call name was not returned by the model.");if(c.has(k.functionCall.name)){const P=yield at(c.get(k.functionCall.name).callTool([k.functionCall]));S.push(...P)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${c.keys()}, mising tool: ${k.functionCall.name}`)}}}}catch(C){g={error:C}}finally{try{!T&&!h&&(_=E.return)&&(yield at(_.call(E)))}finally{if(g)throw g.error}}if(S.length>0){o=!0;const C=new td;C.candidates=[{content:{role:"user",parts:S}}],yield yield at(C);const k=[];k.push(...A),k.push({role:"user",parts:S});const P=xi(d.contents).concat(k);d.contents=P}else break}})}(this,l,e)}async generateContentInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=z2(this.apiClient,e);return a=Oe("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),o.then(c=>{const d=H2(c),h=new td;return Object.assign(h,d),h})}else{const u=B2(this.apiClient,e);return a=Oe("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),o.then(c=>{const d=G2(c),h=new td;return Object.assign(h,d),h})}}async generateContentStreamInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=z2(this.apiClient,e);return a=Oe("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),o.then(function(d){return Ui(this,arguments,function*(){var h,g,_,x;try{for(var w=!0,y=Bi(d),T;T=yield at(y.next()),h=T.done,!h;w=!0){x=T.value,w=!1;const E=x,N=H2(yield at(E.json()));N.sdkHttpResponse={headers:E.headers};const F=new td;Object.assign(F,N),yield yield at(F)}}catch(E){g={error:E}}finally{try{!w&&!h&&(_=y.return)&&(yield at(_.call(y)))}finally{if(g)throw g.error}}})})}else{const u=B2(this.apiClient,e);return a=Oe("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),o.then(function(d){return Ui(this,arguments,function*(){var h,g,_,x;try{for(var w=!0,y=Bi(d),T;T=yield at(y.next()),h=T.done,!h;w=!0){x=T.value,w=!1;const E=x,N=G2(yield at(E.json()));N.sdkHttpResponse={headers:E.headers};const F=new td;Object.assign(F,N),yield yield at(F)}}catch(E){g={error:E}}finally{try{!w&&!h&&(_=y.return)&&(yield at(_.call(y)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=JZ(this.apiClient,e);return a=Oe("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),o.then(c=>{const d=XZ(c),h=new E2;return Object.assign(h,d),h})}else{const u=KZ(this.apiClient,e);return a=Oe("{model}:batchEmbedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),o.then(c=>{const d=YZ(c),h=new E2;return Object.assign(h,d),h})}}async generateImagesInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=lee(this.apiClient,e);return a=Oe("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),o.then(c=>{const d=cee(c),h=new I2;return Object.assign(h,d),h})}else{const u=aee(this.apiClient,e);return a=Oe("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),o.then(c=>{const d=uee(c),h=new I2;return Object.assign(h,d),h})}}async editImageInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=$Z(this.apiClient,e);return s=Oe("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),i.then(l=>{const u=WZ(l),c=new ZY;return Object.assign(c,u),c})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=lte(this.apiClient,e);return s=Oe("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),i.then(l=>{const u=ute(l),c=new eX;return Object.assign(c,u),c})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=Hee(this.apiClient,e);return s=Oe("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=$ee(l),c=new tX;return Object.assign(c,u),c})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=Yee(this.apiClient,e);return s=Oe("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=Xee(l),c=new nX;return Object.assign(c,u),c})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=Cee(this.apiClient,e);return a=Oe("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>Cy(c))}else{const u=Aee(this.apiClient,e);return a=Oe("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),o.then(c=>Ay(c))}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=Lee(this.apiClient,e);return a=Oe("{models_url}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),o.then(c=>{const d=Vee(c),h=new S2;return Object.assign(h,d),h})}else{const u=Mee(this.apiClient,e);return a=Oe("{models_url}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),o.then(c=>{const d=Oee(c),h=new S2;return Object.assign(h,d),h})}}async update(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=ote(this.apiClient,e);return a=Oe("{model}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>Cy(c))}else{const u=ste(this.apiClient,e);return a=Oe("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),o.then(c=>Ay(c))}}async delete(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=BZ(this.apiClient,e);return a=Oe("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),o.then(c=>{const d=GZ(c),h=new A2;return Object.assign(h,d),h})}else{const u=UZ(this.apiClient,e);return a=Oe("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),o.then(c=>{const d=zZ(c),h=new A2;return Object.assign(h,d),h})}}async countTokens(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=LZ(this.apiClient,e);return a=Oe("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),o.then(c=>{const d=VZ(c),h=new C2;return Object.assign(h,d),h})}else{const u=MZ(this.apiClient,e);return a=Oe("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),o.then(c=>{const d=OZ(c),h=new C2;return Object.assign(h,d),h})}}async computeTokens(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=RZ(this.apiClient,e);return s=Oe("{model}:computeTokens",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),i.then(l=>{const u=kZ(l),c=new rX;return Object.assign(c,u),c})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=gee(this.apiClient,e);return a=Oe("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const d=pee(c),h=new Qp;return Object.assign(h,d),h})}else{const u=mee(this.apiClient,e);return a=Oe("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),o.then(c=>{const d=hee(c),h=new Qp;return Object.assign(h,d),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nne extends to{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=jY(e);return a=Oe("{operationName}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o}else{const u=qY(e);return a=Oe("{operationName}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),o}}async fetchPredictVideosOperationInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=UY(e);return s=Oe("{resourceName}:fetchPredictOperation",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rne(t){const e={},n=f(t,["data"]);if(n!=null&&m(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function ine(t){const e={},n=f(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>hne(s))),m(e,["parts"],i)}const r=f(t,["role"]);return r!=null&&m(e,["role"],r),e}function sne(t,e,n){const r={},i=f(e,["expireTime"]);n!==void 0&&i!=null&&m(n,["expireTime"],i);const s=f(e,["newSessionExpireTime"]);n!==void 0&&s!=null&&m(n,["newSessionExpireTime"],s);const o=f(e,["uses"]);n!==void 0&&o!=null&&m(n,["uses"],o);const a=f(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&m(n,["bidiGenerateContentSetup"],fne(t,a));const l=f(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&m(n,["fieldMask"],l),r}function one(t,e){const n={},r=f(e,["config"]);return r!=null&&m(n,["config"],sne(t,r,n)),n}function ane(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function lne(t){const e={},n=f(t,["id"]);n!=null&&m(e,["id"],n);const r=f(t,["args"]);r!=null&&m(e,["args"],r);const i=f(t,["name"]);if(i!=null&&m(e,["name"],i),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function une(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&m(e,["enableWidget"],n),e}function cne(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],n),e}function dne(t,e){const n={},r=f(t,["generationConfig"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig"],r);const i=f(t,["responseModalities"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig","responseModalities"],i);const s=f(t,["temperature"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","temperature"],s);const o=f(t,["topP"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","topP"],o);const a=f(t,["topK"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","topK"],a);const l=f(t,["maxOutputTokens"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","maxOutputTokens"],l);const u=f(t,["mediaResolution"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","mediaResolution"],u);const c=f(t,["seed"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","seed"],c);const d=f(t,["speechConfig"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","speechConfig"],Mw(d));const h=f(t,["thinkingConfig"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","thinkingConfig"],h);const g=f(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],g);const _=f(t,["systemInstruction"]);e!==void 0&&_!=null&&m(e,["setup","systemInstruction"],ine(dr(_)));const x=f(t,["tools"]);if(e!==void 0&&x!=null){let O=Ac(x);Array.isArray(O)&&(O=O.map(S=>mne(Sc(S)))),m(e,["setup","tools"],O)}const w=f(t,["sessionResumption"]);e!==void 0&&w!=null&&m(e,["setup","sessionResumption"],pne(w));const y=f(t,["inputAudioTranscription"]);e!==void 0&&y!=null&&m(e,["setup","inputAudioTranscription"],y);const T=f(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&m(e,["setup","outputAudioTranscription"],T);const E=f(t,["realtimeInputConfig"]);e!==void 0&&E!=null&&m(e,["setup","realtimeInputConfig"],E);const N=f(t,["contextWindowCompression"]);e!==void 0&&N!=null&&m(e,["setup","contextWindowCompression"],N);const F=f(t,["proactivity"]);if(e!==void 0&&F!=null&&m(e,["setup","proactivity"],F),f(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function fne(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["setup","model"],St(t,r));const i=f(e,["config"]);return i!=null&&m(n,["config"],dne(i,n)),n}function hne(t){const e={},n=f(t,["mediaResolution"]);n!=null&&m(e,["mediaResolution"],n);const r=f(t,["codeExecutionResult"]);r!=null&&m(e,["codeExecutionResult"],r);const i=f(t,["executableCode"]);i!=null&&m(e,["executableCode"],i);const s=f(t,["fileData"]);s!=null&&m(e,["fileData"],ane(s));const o=f(t,["functionCall"]);o!=null&&m(e,["functionCall"],lne(o));const a=f(t,["functionResponse"]);a!=null&&m(e,["functionResponse"],a);const l=f(t,["inlineData"]);l!=null&&m(e,["inlineData"],rne(l));const u=f(t,["text"]);u!=null&&m(e,["text"],u);const c=f(t,["thought"]);c!=null&&m(e,["thought"],c);const d=f(t,["thoughtSignature"]);d!=null&&m(e,["thoughtSignature"],d);const h=f(t,["videoMetadata"]);return h!=null&&m(e,["videoMetadata"],h),e}function pne(t){const e={},n=f(t,["handle"]);if(n!=null&&m(e,["handle"],n),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function mne(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>d)),m(e,["functionDeclarations"],c)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=f(t,["googleSearchRetrieval"]);r!=null&&m(e,["googleSearchRetrieval"],r);const i=f(t,["computerUse"]);i!=null&&m(e,["computerUse"],i);const s=f(t,["fileSearch"]);s!=null&&m(e,["fileSearch"],s);const o=f(t,["codeExecution"]);if(o!=null&&m(e,["codeExecution"],o),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(t,["googleMaps"]);a!=null&&m(e,["googleMaps"],une(a));const l=f(t,["googleSearch"]);l!=null&&m(e,["googleSearch"],cne(l));const u=f(t,["urlContext"]);return u!=null&&m(e,["urlContext"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gne(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(s=>`${n}.${s}`);e.push(...i)}else e.push(n)}return e.join(",")}function vne(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const s=r.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,n=s):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const s=gne(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)s?t.fieldMask=s:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];i.length>0&&(a=i.map(u=>o.includes(u)?`generationConfig.${u}`:u));const l=[];s&&l.push(s),a.length>0&&l.push(...a),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class _ne extends to{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=one(this.apiClient,e);s=Oe("auth_tokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query;const l=vne(a,e.config);return i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yne(t,e){const n={},r=f(t,["force"]);return e!==void 0&&r!=null&&m(e,["_query","force"],r),n}function xne(t){const e={},n=f(t,["name"]);n!=null&&m(e,["_url","name"],n);const r=f(t,["config"]);return r!=null&&yne(r,e),e}function wne(t){const e={},n=f(t,["name"]);return n!=null&&m(e,["_url","name"],n),e}function Tne(t,e){const n={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=f(t,["pageToken"]);return e!==void 0&&i!=null&&m(e,["_query","pageToken"],i),n}function Ene(t){const e={},n=f(t,["parent"]);n!=null&&m(e,["_url","parent"],n);const r=f(t,["config"]);return r!=null&&Tne(r,e),e}function Ine(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=f(t,["documents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),m(e,["documents"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Sne extends to{constructor(e){super(),this.apiClient=e,this.list=async n=>new Tl(Ks.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=wne(e);return s=Oe("{name}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=xne(e);i=Oe("{name}",o._url),s=o._query,delete o._url,delete o._query,await this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Ene(e);return s=Oe("{parent}/documents",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=Ine(l),c=new iX;return Object.assign(c,u),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ane extends to{constructor(e,n=new Sne(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new Tl(Ks.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=gte(e);return s=Oe("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async get(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=yte(e);return s=Oe("{name}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=_te(e);i=Oe("{name}",o._url),s=o._query,delete o._url,delete o._query,await this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Ste(e);return s=Oe("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=Ate(l),c=new sX;return Object.assign(c,u),c})}}async uploadToFileSearchStoreInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Cte(e);return s=Oe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=Rte(l),c=new oX;return Object.assign(c,u),c})}}async importFile(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Tte(e);return s=Oe("{file_search_store_name}:importFile",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=wte(l),c=new Nw;return Object.assign(c,u),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let hF=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return hF=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const Cne=()=>hF();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ky(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Ny=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ii extends Error{}class Dr extends Ii{constructor(e,n,r,i){super(`${Dr.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.error=n}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new mg({message:r,cause:Ny(n)});const s=n;return e===400?new mF(e,s,r,i):e===401?new gF(e,s,r,i):e===403?new vF(e,s,r,i):e===404?new _F(e,s,r,i):e===409?new yF(e,s,r,i):e===422?new xF(e,s,r,i):e===429?new wF(e,s,r,i):e>=500?new TF(e,s,r,i):new Dr(e,s,r,i)}}class Py extends Dr{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class mg extends Dr{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class pF extends mg{constructor({message:e}={}){super({message:e??"Request timed out."})}}class mF extends Dr{}class gF extends Dr{}class vF extends Dr{}class _F extends Dr{}class yF extends Dr{}class xF extends Dr{}class wF extends Dr{}class TF extends Dr{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Rne=/^[a-z][a-z0-9+.-]*:/i,kne=t=>Rne.test(t);let by=t=>(by=Array.isArray,by(t));const Nne=by;let Pne=Nne;const J2=Pne;function bne(t){if(!t)return!0;for(const e in t)return!1;return!0}function Dne(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const Fne=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Ii(`${t} must be an integer`);if(e<0)throw new Ii(`${t} must be a positive integer`);return e},Mne=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Lne=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wl="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function One(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Vne=()=>{var t,e,n,r,i;const s=One();if(s==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Wl,"X-Stainless-OS":X2(Deno.build.os),"X-Stainless-Arch":Y2(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Wl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(s==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Wl,"X-Stainless-OS":X2((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":Y2((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};const o=Une();return o?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Wl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${o.browser}`,"X-Stainless-Runtime-Version":o.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Wl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Une(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,s=r[2]||0,o=r[3]||0;return{browser:e,version:`${i}.${s}.${o}`}}}return null}const Y2=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",X2=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let i0;const Bne=()=>i0??(i0=Vne());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zne(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function EF(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function Gne(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return EF({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function IF(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Hne(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const r=t.getReader(),i=r.cancel();r.releaseLock(),await i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $ne=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const SF=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Dv(t,e,n){return SF(),new File(t,e??"unknown_file",n)}function Wne(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const qne=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AF=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",jne=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&AF(t),Kne=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function Jne(t,e,n){if(SF(),t=await t,jne(t))return t instanceof File?t:Dv([await t.arrayBuffer()],t.name);if(Kne(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Dv(await Dy(i),e,n)}const r=await Dy(t);if(e||(e=Wne(t)),!(n!=null&&n.type)){const i=r.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof i=="string"&&(n=Object.assign(Object.assign({},n),{type:i}))}return Dv(r,e,n)}async function Dy(t){var e,n,r,i,s;let o=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)o.push(t);else if(AF(t))o.push(t instanceof Blob?t:await t.arrayBuffer());else if(qne(t))try{for(var a=!0,l=Bi(t),u;u=await l.next(),e=u.done,!e;a=!0){i=u.value,a=!1;const c=i;o.push(...await Dy(c))}}catch(c){n={error:c}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}else{const c=(s=t==null?void 0:t.constructor)===null||s===void 0?void 0:s.name;throw new Error(`Unexpected data type: ${typeof t}${c?`; constructor: ${c}`:""}${Yne(t)}`)}return o}function Yne(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class CF{constructor(e){this._client=e}}CF._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RF(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Q2=Object.freeze(Object.create(null)),Xne=(t=RF)=>function(n,...r){if(n.length===1)return n[0];let i=!1;const s=[],o=n.reduce((c,d,h)=>{var g,_,x;/[?#]/.test(d)&&(i=!0);const w=r[h];let y=(i?encodeURIComponent:t)(""+w);return h!==r.length&&(w==null||typeof w=="object"&&w.toString===((x=Object.getPrototypeOf((_=Object.getPrototypeOf((g=w.hasOwnProperty)!==null&&g!==void 0?g:Q2))!==null&&_!==void 0?_:Q2))===null||x===void 0?void 0:x.toString))&&(y=w+"",s.push({start:c.length+d.length,length:y.length,error:`Value of type ${Object.prototype.toString.call(w).slice(8,-1)} is not a valid path parameter`})),c+d+(h===r.length?"":y)},""),a=o.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let u;for(;(u=l.exec(a))!==null;)s.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(s.sort((c,d)=>c.start-d.start),s.length>0){let c=0;const d=s.reduce((h,g)=>{const _=" ".repeat(g.start-c),x="^".repeat(g.length);return c=g.start+g.length,h+_+x},"");throw new Ii(`Path parameters result in path with invalid segments:
${s.map(h=>h.error).join(`
`)}
${o}
${d}`)}return o},s0=Xne(RF);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kF extends CF{create(e,n){var r;const{api_version:i=this._client.apiVersion}=e,s=em(e,["api_version"]);if("model"in s&&"agent_config"in s)throw new Ii("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in s&&"generation_config"in s)throw new Ii("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(s0`/${i}/interactions`,Object.assign(Object.assign({body:s},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.delete(s0`/${i}/interactions/${e}`,r)}cancel(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.post(s0`/${i}/interactions/${e}/cancel`,r)}get(e,n={},r){var i;const s=n??{},{api_version:o=this._client.apiVersion}=s,a=em(s,["api_version"]);return this._client.get(s0`/${o}/interactions/${e}`,Object.assign(Object.assign({query:a},r),{stream:(i=n==null?void 0:n.stream)!==null&&i!==void 0?i:!1}))}}kF._key=Object.freeze(["interactions"]);class NF extends kF{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qne(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let o0;function Ow(t){let e;return(o0??(e=new globalThis.TextEncoder,o0=e.encode.bind(e)))(t)}let a0;function Z2(t){let e;return(a0??(e=new globalThis.TextDecoder,a0=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gg{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Ow(e):e;this.buffer=Qne([this.buffer,n]);const r=[];let i;for(;(i=Zne(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){r.push(Z2(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const s=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,o=Z2(this.buffer.subarray(0,s));r.push(o),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}gg.NEWLINE_CHARS=new Set([`
`,"\r"]);gg.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Zne(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function ere(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tm={off:0,error:200,warn:300,info:400,debug:500},eC=(t,e,n)=>{if(t){if(Dne(tm,t))return t;_r(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(tm))}`)}};function gd(){}function l0(t,e,n){return!e||tm[t]>tm[n]?gd:e[t].bind(e)}const tre={error:gd,warn:gd,info:gd,debug:gd};let tC=new WeakMap;function _r(t){var e;const n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return tre;const i=tC.get(n);if(i&&i[0]===r)return i[1];const s={error:l0("error",n,r),warn:l0("warn",n,r),info:l0("info",n,r),debug:l0("debug",n,r)};return tC.set(n,[r,s]),s}const wa=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ou{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let i=!1;const s=r?_r(r):console;function o(){return Ui(this,arguments,function*(){var l,u,c,d;if(i)throw new Ii("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let h=!1;try{try{for(var g=!0,_=Bi(nre(e,n)),x;x=yield at(_.next()),l=x.done,!l;g=!0){d=x.value,g=!1;const w=d;if(!h)if(w.data.startsWith("[DONE]")){h=!0;continue}else try{yield yield at(JSON.parse(w.data))}catch(y){throw s.error("Could not parse message into JSON:",w.data),s.error("From chunk:",w.raw),y}}}catch(w){u={error:w}}finally{try{!g&&!l&&(c=_.return)&&(yield at(c.call(_)))}finally{if(u)throw u.error}}h=!0}catch(w){if(ky(w))return yield at(void 0);throw w}finally{h||n.abort()}})}return new ou(o,n,r)}static fromReadableStream(e,n,r){let i=!1;function s(){return Ui(this,arguments,function*(){var l,u,c,d;const h=new gg,g=IF(e);try{for(var _=!0,x=Bi(g),w;w=yield at(x.next()),l=w.done,!l;_=!0){d=w.value,_=!1;const y=d;for(const T of h.decode(y))yield yield at(T)}}catch(y){u={error:y}}finally{try{!_&&!l&&(c=x.return)&&(yield at(c.call(x)))}finally{if(u)throw u.error}}for(const y of h.flush())yield yield at(y)})}function o(){return Ui(this,arguments,function*(){var l,u,c,d;if(i)throw new Ii("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let h=!1;try{try{for(var g=!0,_=Bi(s()),x;x=yield at(_.next()),l=x.done,!l;g=!0){d=x.value,g=!1;const w=d;h||w&&(yield yield at(JSON.parse(w)))}}catch(w){u={error:w}}finally{try{!g&&!l&&(c=_.return)&&(yield at(c.call(_)))}finally{if(u)throw u.error}}h=!0}catch(w){if(ky(w))return yield at(void 0);throw w}finally{h||n.abort()}})}return new ou(o,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=s=>({next:()=>{if(s.length===0){const o=r.next();e.push(o),n.push(o)}return s.shift()}});return[new ou(()=>i(e),this.controller,this.client),new ou(()=>i(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return EF({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:s}=await n.next();if(s)return r.close();const o=Ow(JSON.stringify(i)+`
`);r.enqueue(o)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function nre(t,e){return Ui(this,arguments,function*(){var r,i,s,o;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Ii("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Ii("Attempted to iterate over a response with no body");const a=new ire,l=new gg,u=IF(t.body);try{for(var c=!0,d=Bi(rre(u)),h;h=yield at(d.next()),r=h.done,!r;c=!0){o=h.value,c=!1;const g=o;for(const _ of l.decode(g)){const x=a.decode(_);x&&(yield yield at(x))}}}catch(g){i={error:g}}finally{try{!c&&!r&&(s=d.return)&&(yield at(s.call(d)))}finally{if(i)throw i.error}}for(const g of l.flush()){const _=a.decode(g);_&&(yield yield at(_))}})}function rre(t){return Ui(this,arguments,function*(){var n,r,i,s;let o=new Uint8Array;try{for(var a=!0,l=Bi(t),u;u=yield at(l.next()),n=u.done,!n;a=!0){s=u.value,a=!1;const c=s;if(c==null)continue;const d=c instanceof ArrayBuffer?new Uint8Array(c):typeof c=="string"?Ow(c):c;let h=new Uint8Array(o.length+d.length);h.set(o),h.set(d,o.length),o=h;let g;for(;(g=ere(o))!==-1;)yield yield at(o.slice(0,g)),o=o.slice(g)}}catch(c){r={error:c}}finally{try{!a&&!n&&(i=l.return)&&(yield at(i.call(l)))}finally{if(r)throw r.error}}o.length>0&&(yield yield at(o))})}class ire{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=sre(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function sre(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function ore(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:s}=e,o=await(async()=>{var a;if(e.options.stream)return _r(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):ou.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const l=n.headers.get("content-type"),u=(a=l==null?void 0:l.split(";")[0])===null||a===void 0?void 0:a.trim();return(u==null?void 0:u.includes("application/json"))||(u==null?void 0:u.endsWith("+json"))?await n.json():await n.text()})();return _r(t).debug(`[${r}] response parsed`,wa({retryOfRequestLogID:i,url:n.url,status:n.status,body:o,durationMs:Date.now()-s})),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vw extends Promise{constructor(e,n,r=ore){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new Vw(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PF=Symbol("brand.privateNullableHeaders");function*are(t){if(!t)return;if(PF in t){const{values:r,nulls:i}=t;yield*r.entries();for(const s of i)yield[s,null];return}let e=!1,n;t instanceof Headers?n=t.entries():J2(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const s=J2(r[1])?r[1]:[r[1]];let o=!1;for(const a of s)a!==void 0&&(e&&!o&&(o=!0,yield[i,null]),yield[i,a])}}const nd=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[s,o]of are(r)){const a=s.toLowerCase();i.has(a)||(e.delete(s),i.add(a)),o===null?(e.delete(s),n.add(a)):(e.append(s,o),n.delete(a))}}return{[PF]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fv=t=>{var e,n,r,i,s,o;if(typeof globalThis.process<"u")return(r=(n=(e=DY)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(o=(s=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||s===void 0?void 0:s.call(i,t))===null||o===void 0?void 0:o.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var bF;class vg{constructor(e){var n,r,i,s,o,a,l,{baseURL:u=Fv("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:c=(n=Fv("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:d="v1beta"}=e,h=em(e,["baseURL","apiKey","apiVersion"]);const g=Object.assign(Object.assign({apiKey:c,apiVersion:d},h),{baseURL:u||"https://generativelanguage.googleapis.com"});this.baseURL=g.baseURL,this.timeout=(r=g.timeout)!==null&&r!==void 0?r:vg.DEFAULT_TIMEOUT,this.logger=(i=g.logger)!==null&&i!==void 0?i:console;const _="warn";this.logLevel=_,this.logLevel=(o=(s=eC(g.logLevel,"ClientOptions.logLevel",this))!==null&&s!==void 0?s:eC(Fv("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&o!==void 0?o:_,this.fetchOptions=g.fetchOptions,this.maxRetries=(a=g.maxRetries)!==null&&a!==void 0?a:2,this.fetch=(l=g.fetch)!==null&&l!==void 0?l:zne(),this.encoder=$ne,this._options=g,this.apiKey=c,this.apiVersion=d,this.clientAdapter=g.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=nd([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return nd([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return nd([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new Ii(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Wl}`}defaultIdempotencyKey(){return`stainless-node-retry-${Cne()}`}makeStatusError(e,n,r,i){return Dr.generate(e,n,r,i)}buildURL(e,n,r){const i=!this.baseURLOverridden()&&r||this.baseURL,s=kne(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return bne(o)||(n=Object.assign(Object.assign({},o),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(s.search=this.stringifyQuery(n)),s.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>Object.assign({method:e,path:n},i)))}request(e,n=null){return new Vw(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var i,s,o;const a=await e,l=(i=a.maxRetries)!==null&&i!==void 0?i:this.maxRetries;n==null&&(n=l),await this.prepareOptions(a);const{req:u,url:c,timeout:d}=await this.buildRequest(a,{retryCount:l-n});await this.prepareRequest(u,{url:c,options:a});const h="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=r===void 0?"":`, retryOf: ${r}`,_=Date.now();if(_r(this).debug(`[${h}] sending request`,wa({retryOfRequestLogID:r,method:a.method,url:c,options:a,headers:u.headers})),!((s=a.signal)===null||s===void 0)&&s.aborted)throw new Py;const x=new AbortController,w=await this.fetchWithTimeout(c,u,d,x).catch(Ny),y=Date.now();if(w instanceof globalThis.Error){const E=`retrying, ${n} attempts remaining`;if(!((o=a.signal)===null||o===void 0)&&o.aborted)throw new Py;const N=ky(w)||/timed? ?out/i.test(String(w)+("cause"in w?String(w.cause):""));if(n)return _r(this).info(`[${h}] connection ${N?"timed out":"failed"} - ${E}`),_r(this).debug(`[${h}] connection ${N?"timed out":"failed"} (${E})`,wa({retryOfRequestLogID:r,url:c,durationMs:y-_,message:w.message})),this.retryRequest(a,n,r??h);throw _r(this).info(`[${h}] connection ${N?"timed out":"failed"} - error; no more retries left`),_r(this).debug(`[${h}] connection ${N?"timed out":"failed"} (error; no more retries left)`,wa({retryOfRequestLogID:r,url:c,durationMs:y-_,message:w.message})),N?new pF:new mg({cause:w})}const T=`[${h}${g}] ${u.method} ${c} ${w.ok?"succeeded":"failed"} with status ${w.status} in ${y-_}ms`;if(!w.ok){const E=await this.shouldRetry(w);if(n&&E){const C=`retrying, ${n} attempts remaining`;return await Hne(w.body),_r(this).info(`${T} - ${C}`),_r(this).debug(`[${h}] response error (${C})`,wa({retryOfRequestLogID:r,url:w.url,status:w.status,headers:w.headers,durationMs:y-_})),this.retryRequest(a,n,r??h,w.headers)}const N=E?"error; no more retries left":"error; not retryable";_r(this).info(`${T} - ${N}`);const F=await w.text().catch(C=>Ny(C).message),O=Mne(F),S=O?void 0:F;throw _r(this).debug(`[${h}] response error (${N})`,wa({retryOfRequestLogID:r,url:w.url,status:w.status,headers:w.headers,message:S,durationMs:Date.now()-_})),this.makeStatusError(w.status,O,S,w.headers)}return _r(this).info(T),_r(this).debug(`[${h}] response start`,wa({retryOfRequestLogID:r,url:w.url,status:w.status,headers:w.headers,durationMs:y-_})),{response:w,options:a,controller:x,requestLogID:h,retryOfRequestLogID:r,startTime:_}}async fetchWithTimeout(e,n,r,i){const s=n||{},{signal:o,method:a}=s,l=em(s,["signal","method"]);o&&o.addEventListener("abort",()=>i.abort());const u=setTimeout(()=>i.abort(),r),c=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,d=Object.assign(Object.assign(Object.assign({signal:i.signal},c?{duplex:"half"}:{}),{method:"GET"}),l);a&&(d.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,d)}finally{clearTimeout(u)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){var s;let o;const a=i==null?void 0:i.get("retry-after-ms");if(a){const u=parseFloat(a);Number.isNaN(u)||(o=u)}const l=i==null?void 0:i.get("retry-after");if(l&&!o){const u=parseFloat(l);Number.isNaN(u)?o=Date.parse(l)-Date.now():o=u*1e3}if(!(o&&0<=o&&o<60*1e3)){const u=(s=e.maxRetries)!==null&&s!==void 0?s:this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(n,u)}return await Lne(o),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const s=n-e,o=Math.min(.5*Math.pow(2,s),8),a=1-Math.random()*.25;return o*a*1e3}async buildRequest(e,{retryCount:n=0}={}){var r,i,s;const o=Object.assign({},e),{method:a,path:l,query:u,defaultBaseURL:c}=o,d=this.buildURL(l,u,c);"timeout"in o&&Fne("timeout",o.timeout),o.timeout=(r=o.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:h,body:g}=this.buildBody({options:o}),_=await this.buildHeaders({options:e,method:a,bodyHeaders:h,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:a,headers:_},o.signal&&{signal:o.signal}),globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"}),g&&{body:g}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(s=o.fetchOptions)!==null&&s!==void 0?s:{}),url:d,timeout:o.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let s={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const o=await this.authHeaders(e);let a=nd([s,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),Bne()),this._options.defaultHeaders,r,e.headers,o]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=nd([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Gne(e)}:this.encoder({body:e,headers:r})}}vg.DEFAULT_TIMEOUT=6e4;class Bn extends vg{constructor(){super(...arguments),this.interactions=new NF(this)}}bF=Bn;Bn.GeminiNextGenAPIClient=bF;Bn.GeminiNextGenAPIClientError=Ii;Bn.APIError=Dr;Bn.APIConnectionError=mg;Bn.APIConnectionTimeoutError=pF;Bn.APIUserAbortError=Py;Bn.NotFoundError=_F;Bn.ConflictError=yF;Bn.RateLimitError=wF;Bn.BadRequestError=mF;Bn.AuthenticationError=gF;Bn.InternalServerError=TF;Bn.PermissionDeniedError=vF;Bn.UnprocessableEntityError=xF;Bn.toFile=Jne;Bn.Interactions=NF;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lre(t,e){const n={},r=f(t,["name"]);return r!=null&&m(n,["_url","name"],r),n}function ure(t,e){const n={},r=f(t,["name"]);return r!=null&&m(n,["_url","name"],r),n}function cre(t,e){const n={},r=f(t,["sdkHttpResponse"]);return r!=null&&m(n,["sdkHttpResponse"],r),n}function dre(t,e){const n={},r=f(t,["sdkHttpResponse"]);return r!=null&&m(n,["sdkHttpResponse"],r),n}function fre(t,e,n){const r={};if(f(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=f(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&m(e,["displayName"],i),f(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=f(t,["epochCount"]);e!==void 0&&s!=null&&m(e,["tuningTask","hyperparameters","epochCount"],s);const o=f(t,["learningRateMultiplier"]);if(o!=null&&m(r,["tuningTask","hyperparameters","learningRateMultiplier"],o),f(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=f(t,["batchSize"]);e!==void 0&&a!=null&&m(e,["tuningTask","hyperparameters","batchSize"],a);const l=f(t,["learningRate"]);if(e!==void 0&&l!=null&&m(e,["tuningTask","hyperparameters","learningRate"],l),f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function hre(t,e,n){const r={};let i=f(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const g=f(t,["validationDataset"]);e!==void 0&&g!=null&&m(e,["supervisedTuningSpec"],nC(g))}else if(i==="PREFERENCE_TUNING"){const g=f(t,["validationDataset"]);e!==void 0&&g!=null&&m(e,["preferenceOptimizationSpec"],nC(g))}const s=f(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&m(e,["tunedModelDisplayName"],s);const o=f(t,["description"]);e!==void 0&&o!=null&&m(e,["description"],o);let a=f(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const g=f(t,["epochCount"]);e!==void 0&&g!=null&&m(e,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(a==="PREFERENCE_TUNING"){const g=f(t,["epochCount"]);e!==void 0&&g!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let l=f(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const g=f(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(l==="PREFERENCE_TUNING"){const g=f(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let u=f(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const g=f(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&m(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(u==="PREFERENCE_TUNING"){const g=f(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&m(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let c=f(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const g=f(t,["adapterSize"]);e!==void 0&&g!=null&&m(e,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(c==="PREFERENCE_TUNING"){const g=f(t,["adapterSize"]);e!==void 0&&g!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(f(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const d=f(t,["labels"]);e!==void 0&&d!=null&&m(e,["labels"],d);const h=f(t,["beta"]);return e!==void 0&&h!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","beta"],h),r}function pre(t,e){const n={},r=f(t,["baseModel"]);r!=null&&m(n,["baseModel"],r);const i=f(t,["preTunedModel"]);i!=null&&m(n,["preTunedModel"],i);const s=f(t,["trainingDataset"]);s!=null&&Sre(s);const o=f(t,["config"]);return o!=null&&fre(o,n),n}function mre(t,e){const n={},r=f(t,["baseModel"]);r!=null&&m(n,["baseModel"],r);const i=f(t,["preTunedModel"]);i!=null&&m(n,["preTunedModel"],i);const s=f(t,["trainingDataset"]);s!=null&&Are(s,n,e);const o=f(t,["config"]);return o!=null&&hre(o,n,e),n}function gre(t,e){const n={},r=f(t,["name"]);return r!=null&&m(n,["_url","name"],r),n}function vre(t,e){const n={},r=f(t,["name"]);return r!=null&&m(n,["_url","name"],r),n}function _re(t,e,n){const r={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const s=f(t,["pageToken"]);e!==void 0&&s!=null&&m(e,["_query","pageToken"],s);const o=f(t,["filter"]);return e!==void 0&&o!=null&&m(e,["_query","filter"],o),r}function yre(t,e,n){const r={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const s=f(t,["pageToken"]);e!==void 0&&s!=null&&m(e,["_query","pageToken"],s);const o=f(t,["filter"]);return e!==void 0&&o!=null&&m(e,["_query","filter"],o),r}function xre(t,e){const n={},r=f(t,["config"]);return r!=null&&_re(r,n),n}function wre(t,e){const n={},r=f(t,["config"]);return r!=null&&yre(r,n),n}function Tre(t,e){const n={},r=f(t,["sdkHttpResponse"]);r!=null&&m(n,["sdkHttpResponse"],r);const i=f(t,["nextPageToken"]);i!=null&&m(n,["nextPageToken"],i);const s=f(t,["tunedModels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>DF(a))),m(n,["tuningJobs"],o)}return n}function Ere(t,e){const n={},r=f(t,["sdkHttpResponse"]);r!=null&&m(n,["sdkHttpResponse"],r);const i=f(t,["nextPageToken"]);i!=null&&m(n,["nextPageToken"],i);const s=f(t,["tuningJobs"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>Fy(a))),m(n,["tuningJobs"],o)}return n}function Ire(t,e){const n={},r=f(t,["name"]);r!=null&&m(n,["model"],r);const i=f(t,["name"]);return i!=null&&m(n,["endpoint"],i),n}function Sre(t,e){const n={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=f(t,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),m(n,["examples","examples"],i)}return n}function Are(t,e,n){const r={};let i=f(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const o=f(t,["gcsUri"]);e!==void 0&&o!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(i==="PREFERENCE_TUNING"){const o=f(t,["gcsUri"]);e!==void 0&&o!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}let s=f(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const o=f(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(s==="PREFERENCE_TUNING"){const o=f(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}if(f(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function DF(t,e){const n={},r=f(t,["sdkHttpResponse"]);r!=null&&m(n,["sdkHttpResponse"],r);const i=f(t,["name"]);i!=null&&m(n,["name"],i);const s=f(t,["state"]);s!=null&&m(n,["state"],J4(s));const o=f(t,["createTime"]);o!=null&&m(n,["createTime"],o);const a=f(t,["tuningTask","startTime"]);a!=null&&m(n,["startTime"],a);const l=f(t,["tuningTask","completeTime"]);l!=null&&m(n,["endTime"],l);const u=f(t,["updateTime"]);u!=null&&m(n,["updateTime"],u);const c=f(t,["description"]);c!=null&&m(n,["description"],c);const d=f(t,["baseModel"]);d!=null&&m(n,["baseModel"],d);const h=f(t,["_self"]);return h!=null&&m(n,["tunedModel"],Ire(h)),n}function Fy(t,e){const n={},r=f(t,["sdkHttpResponse"]);r!=null&&m(n,["sdkHttpResponse"],r);const i=f(t,["name"]);i!=null&&m(n,["name"],i);const s=f(t,["state"]);s!=null&&m(n,["state"],J4(s));const o=f(t,["createTime"]);o!=null&&m(n,["createTime"],o);const a=f(t,["startTime"]);a!=null&&m(n,["startTime"],a);const l=f(t,["endTime"]);l!=null&&m(n,["endTime"],l);const u=f(t,["updateTime"]);u!=null&&m(n,["updateTime"],u);const c=f(t,["error"]);c!=null&&m(n,["error"],c);const d=f(t,["description"]);d!=null&&m(n,["description"],d);const h=f(t,["baseModel"]);h!=null&&m(n,["baseModel"],h);const g=f(t,["tunedModel"]);g!=null&&m(n,["tunedModel"],g);const _=f(t,["preTunedModel"]);_!=null&&m(n,["preTunedModel"],_);const x=f(t,["supervisedTuningSpec"]);x!=null&&m(n,["supervisedTuningSpec"],x);const w=f(t,["preferenceOptimizationSpec"]);w!=null&&m(n,["preferenceOptimizationSpec"],w);const y=f(t,["tuningDataStats"]);y!=null&&m(n,["tuningDataStats"],y);const T=f(t,["encryptionSpec"]);T!=null&&m(n,["encryptionSpec"],T);const E=f(t,["partnerModelTuningSpec"]);E!=null&&m(n,["partnerModelTuningSpec"],E);const N=f(t,["customBaseModel"]);N!=null&&m(n,["customBaseModel"],N);const F=f(t,["experiment"]);F!=null&&m(n,["experiment"],F);const O=f(t,["labels"]);O!=null&&m(n,["labels"],O);const S=f(t,["outputUri"]);S!=null&&m(n,["outputUri"],S);const A=f(t,["pipelineJob"]);A!=null&&m(n,["pipelineJob"],A);const C=f(t,["serviceAccount"]);C!=null&&m(n,["serviceAccount"],C);const k=f(t,["tunedModelDisplayName"]);k!=null&&m(n,["tunedModelDisplayName"],k);const P=f(t,["veoTuningSpec"]);return P!=null&&m(n,["veoTuningSpec"],P),n}function Cre(t,e){const n={},r=f(t,["sdkHttpResponse"]);r!=null&&m(n,["sdkHttpResponse"],r);const i=f(t,["name"]);i!=null&&m(n,["name"],i);const s=f(t,["metadata"]);s!=null&&m(n,["metadata"],s);const o=f(t,["done"]);o!=null&&m(n,["done"],o);const a=f(t,["error"]);return a!=null&&m(n,["error"],a),n}function nC(t,e){const n={},r=f(t,["gcsUri"]);r!=null&&m(n,["validationDatasetUri"],r);const i=f(t,["vertexDatasetResource"]);return i!=null&&m(n,["validationDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rre extends to{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Tl(Ks.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},n),{preTunedModel:i});return s.baseModel=void 0,await this.tuneInternal(s)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),s=await this.tuneMldevInternal(i);let o="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?o=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(o=s.name.split("/operations/")[0]),{name:o,state:Ty.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=vre(e);return a=Oe("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),o.then(c=>Fy(c))}else{const u=gre(e);return a=Oe("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),o.then(c=>DF(c))}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=wre(e);return a=Oe("tuningJobs",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),o.then(c=>{const d=Ere(c),h=new R2;return Object.assign(h,d),h})}else{const u=xre(e);return a=Oe("tunedModels",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),o.then(c=>{const d=Tre(c),h=new R2;return Object.assign(h,d),h})}}async cancel(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=ure(e);return a=Oe("{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),o.then(c=>{const d=dre(c),h=new k2;return Object.assign(h,d),h})}else{const u=lre(e);return a=Oe("{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),o.then(c=>{const d=cre(c),h=new k2;return Object.assign(h,d),h})}}async tuneInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=mre(e,e);return s=Oe("tuningJobs",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),i.then(l=>Fy(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=pre(e);return s=Oe("tunedModels",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),i.then(l=>Cre(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kre{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Nre=1024*1024*8,Pre=3,bre=1e3,Dre=2,nm="x-goog-upload-status";async function Fre(t,e,n){var r;const i=await FF(t,e,n),s=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[nm])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return s.file}async function Mre(t,e,n){var r;const i=await FF(t,e,n),s=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[nm])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const o=H4(s),a=new Pw;return Object.assign(a,o),a}async function FF(t,e,n){var r,i;let s=0,o=0,a=new Ey(new Response),l="upload";for(s=t.size;o<s;){const u=Math.min(Nre,s-o),c=t.slice(o,o+u);o+u>=s&&(l+=", finalize");let d=0,h=bre;for(;d<Pre&&(a=await n.request({path:"",body:c,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(o),"Content-Length":String(u)}}}),!(!((r=a==null?void 0:a.headers)===null||r===void 0)&&r[nm]));)d++,await Ore(h),h=h*Dre;if(o+=u,((i=a==null?void 0:a.headers)===null||i===void 0?void 0:i[nm])!=="active")break;if(s<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function Lre(t){return{size:t.size,type:t.type}}function Ore(t){return new Promise(e=>setTimeout(e,t))}class Vre{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Fre(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Mre(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Lre(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ure{create(e,n,r){return new Bre(e,n,r)}}class Bre{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rC="x-goog-api-key";class zre{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(rC)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(rC,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Gre="gl-node/";class Hre{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Bn({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=OY(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const i=new zre(this.apiKey);this.apiClient=new Lte({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:Gre+"web",uploader:new Vre,downloader:new kre}),this.models=new tne(this.apiClient),this.live=new Jte(this.apiClient,i,new Ure),this.batches=new fQ(this.apiClient),this.chats=new jQ(this.models,this.apiClient),this.caches=new $Q(this.apiClient),this.files=new rZ(this.apiClient),this.operations=new nne(this.apiClient),this.authTokens=new _ne(this.apiClient),this.tunings=new Rre(this.apiClient),this.fileSearchStores=new Ane(this.apiClient)}}const $re=({shifts:t,onApplyChanges:e,onClose:n})=>{const[r,i]=qe.useState(null),[s,o]=qe.useState(!1),[a,l]=qe.useState([]),u=qe.useRef(null),c=_=>{var w;const x=(w=_.target.files)==null?void 0:w[0];if(x){const y=new FileReader;y.onloadend=()=>{i(y.result)},y.readAsDataURL(x)}},d=async()=>{if(r){o(!0);try{const _=r.split(",")[1],w=await new Hre({apiKey:"REDACTED_GEMINI_KEY"}).models.generateContent({model:"gemini-3-flash-preview",contents:{parts:[{inlineData:{mimeType:"image/jpeg",data:_}},{text:`Analyzuj tuto fotku dochzkovho archu. 
              Extrahuj zznamy o dochzce a vra je v JSON formtu. 
              U kadho zznamu uve: "employeeName", "date" (ve formtu RRRR-MM-DD), "checkIn" (HH:MM) a "checkOut" (HH:MM).
              Pokud je daj neiteln, pouij null.`}]},config:{responseMimeType:"application/json",responseSchema:{type:Sr.OBJECT,properties:{records:{type:Sr.ARRAY,items:{type:Sr.OBJECT,properties:{employeeName:{type:Sr.STRING,description:"Jmno zamstnance"},date:{type:Sr.STRING,description:"Datum ve formtu YYYY-MM-DD"},checkIn:{type:Sr.STRING,description:"as pchodu HH:MM"},checkOut:{type:Sr.STRING,description:"as odchodu HH:MM"}},required:["employeeName","date"]}}}}}});if(w.text){const y=JSON.parse(w.text),T=h(y.records);l(T)}}catch(_){console.error("AI Processing failed:",_),alert("Zpracovn selhalo. Zkontrolujte pipojen k internetu a platnost API kle.")}finally{o(!1)}}},h=_=>{const x=[];return _.forEach(w=>{const y=t.find(T=>T.date===w.date);if(y){const T=NI(w.checkIn||"",y.startTime),E=NI(w.checkOut||"",y.endTime);let N="MATCH";T.status==="ANOMALY"||E.status==="ANOMALY"?N="ANOMALY":(T.status==="ROUNDED"||E.status==="ROUNDED")&&(N="ROUNDED"),x.push({shiftId:y.id,employeeName:w.employeeName||"Neznm",date:w.date,planned:{start:y.startTime,end:y.endTime},scanned:{start:w.checkIn||"-",end:w.checkOut||"-"},final:{start:T.finalTime,end:E.finalTime},status:N})}}),x},g=()=>{const _=a.map(x=>({id:x.shiftId,startTime:x.final.start,endTime:x.final.end,note:`Importovno pes AI (${new Date().toLocaleDateString()})`}));e(_),n()};return v.jsx("div",{className:"fixed inset-0 bg-slate-900/80 z-50 flex items-center justify-center p-4 backdrop-blur-md",children:v.jsxs("div",{className:"bg-white rounded-[40px] w-full max-w-4xl max-h-[90vh] flex flex-col shadow-2xl overflow-hidden border border-white/20",children:[v.jsxs("div",{className:"p-6 border-b flex justify-between items-center bg-sky-50/50",children:[v.jsxs("div",{children:[v.jsxs("h2",{className:"text-xl font-black text-slate-900 flex items-center gap-2",children:[v.jsx(Cp,{className:"text-primary"})," Skener dochzky"]}),v.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase tracking-wider",children:"Automatick rozpoznn textu z fotky"})]}),v.jsx("button",{onClick:n,className:"text-slate-400 hover:text-slate-600 p-2",children:v.jsx(fc,{size:24})})]}),v.jsx("div",{className:"flex-1 overflow-auto p-6 bg-slate-50/30",children:r?v.jsxs("div",{className:"space-y-6",children:[!a.length&&!s&&v.jsxs("div",{className:"relative rounded-[40px] overflow-hidden shadow-2xl border-8 border-white",children:[v.jsx("img",{src:r,alt:"Preview",className:"w-full max-h-96 object-cover"}),v.jsx("div",{className:"absolute inset-0 bg-sky-900/20 flex items-center justify-center backdrop-blur-[1px]",children:v.jsx("button",{onClick:d,className:"px-10 py-5 bg-primary text-white font-black rounded-3xl shadow-2xl hover:scale-105 transition-transform flex items-center gap-3 uppercase text-sm tracking-widest border-2 border-sky-400",children:"Zahjit analzu"})})]}),s&&v.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[v.jsxs("div",{className:"relative",children:[v.jsx(KN,{size:80,className:"text-primary mb-6"}),v.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:v.jsx("div",{className:"w-4 h-4 bg-sky-500 rounded-full animate-ping"})})]}),v.jsx("p",{className:"text-2xl font-black text-slate-800",children:"AI analyzuje zznamy..."}),v.jsx("p",{className:"text-sm text-slate-400 font-bold uppercase mt-2 animate-pulse",children:"Trv to obvykle 5-10 sekund"})]}),a.length>0&&v.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[v.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200 pb-4",children:[v.jsxs("h3",{className:"font-black text-slate-800 uppercase text-sm tracking-widest flex items-center gap-2",children:[v.jsx(Ap,{className:"text-primary"})," Nalezen zznamy"]}),v.jsxs("div",{className:"flex gap-4 text-[10px] font-black uppercase",children:[v.jsxs("span",{className:"flex items-center gap-1 text-sky-600",children:[v.jsx("div",{className:"w-2 h-2 rounded-full bg-sky-500"})," Shoda / Zaokrouhleno"]}),v.jsxs("span",{className:"flex items-center gap-1 text-red-600",children:[v.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"})," Anomlie"]})]})]}),v.jsx("div",{className:"grid gap-3",children:a.map((_,x)=>v.jsxs("div",{className:`p-5 rounded-[28px] border-2 flex flex-col md:flex-row items-center justify-between gap-4 transition-all shadow-sm ${_.status==="ANOMALY"?"bg-red-50 border-red-100":"bg-white border-slate-100 hover:border-sky-200"}`,children:[v.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[v.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center font-black text-white shadow-lg text-lg ${_.status==="ANOMALY"?"bg-red-500":"bg-sky-500"}`,children:_.employeeName.charAt(0)}),v.jsxs("div",{children:[v.jsx("div",{className:"font-black text-slate-900 text-lg leading-tight",children:_.employeeName}),v.jsx("div",{className:"text-[10px] text-slate-400 font-black uppercase tracking-wider",children:new Date(_.date).toLocaleDateString("cs-CZ")})]})]}),v.jsxs("div",{className:"flex items-center justify-between w-full md:w-auto gap-4 bg-slate-100/50 p-4 rounded-2xl border border-slate-200",children:[v.jsxs("div",{className:"text-center px-2",children:[v.jsx("div",{className:"text-[8px] uppercase text-slate-400 font-black",children:"Pln"}),v.jsxs("div",{className:"font-mono text-xs font-bold text-slate-500",children:[_.planned.start," - ",_.planned.end]})]}),v.jsx(PI,{size:16,className:"text-slate-300"}),v.jsxs("div",{className:"text-center px-2",children:[v.jsx("div",{className:"text-[8px] uppercase text-slate-400 font-black",children:"Naskenovno"}),v.jsxs("div",{className:"font-mono text-xs font-bold text-slate-800",children:[_.scanned.start," - ",_.scanned.end]})]}),v.jsx(PI,{size:16,className:"text-slate-300"}),v.jsxs("div",{className:"text-center px-2",children:[v.jsx("div",{className:"text-[8px] uppercase text-primary font-black",children:"K zpisu"}),v.jsxs("div",{className:`font-mono font-black text-lg ${_.status==="ANOMALY"?"text-red-600":"text-primary"}`,children:[_.final.start," - ",_.final.end]})]})]})]},x))})]})]}):v.jsxs("div",{onClick:()=>{var _;return(_=u.current)==null?void 0:_.click()},className:"border-4 border-dashed border-sky-100 rounded-[48px] p-12 text-center hover:bg-white hover:border-sky-300 cursor-pointer transition-all group bg-white/50",children:[v.jsx("input",{type:"file",ref:u,className:"hidden",accept:"image/*",onChange:c}),v.jsx("div",{className:"mx-auto w-24 h-24 bg-sky-500/10 text-sky-600 rounded-[32px] flex items-center justify-center mb-6 group-hover:scale-110 transition-transform shadow-inner",children:v.jsx(Cp,{size:48})}),v.jsx("p",{className:"font-black text-slate-700 text-2xl",children:"Vlote fotku dochzky"}),v.jsx("p",{className:"text-sm text-slate-400 font-bold uppercase mt-2",children:"Podporuje obrzky z galerie i pm focen"})]})}),a.length>0&&v.jsxs("div",{className:"p-8 border-t bg-white flex flex-col sm:flex-row justify-end gap-3",children:[v.jsx("button",{onClick:()=>{i(null),l([])},className:"px-8 py-4 text-slate-500 font-black uppercase text-xs tracking-widest hover:text-slate-700 transition-colors",children:"Zkusit znovu"}),v.jsxs("button",{onClick:g,className:"px-10 py-4 bg-primary text-white font-black rounded-2xl shadow-xl shadow-sky-100 hover:bg-primaryHover transition-all flex items-center justify-center gap-2 uppercase text-xs tracking-widest border-b-4 border-sky-700",children:[v.jsx(Ap,{size:20})," Zapsat do dochzky"]})]})]})})};var MF={exports:{}};(function(t,e){(function(n,r){t.exports=r(qe)})(typeof self<"u"?self:nM,function(n){return function(){var r={155:function(T){T.exports=n}},i={};function s(T){var E=i[T];if(E!==void 0)return E.exports;var N=i[T]={exports:{}};return r[T](N,N.exports,s),N.exports}s.d=function(T,E){for(var N in E)s.o(E,N)&&!s.o(T,N)&&Object.defineProperty(T,N,{enumerable:!0,get:E[N]})},s.o=function(T,E){return Object.prototype.hasOwnProperty.call(T,E)},s.r=function(T){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(T,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(T,"__esModule",{value:!0})};var o={};s.r(o),s.d(o,{useReactToPrint:function(){return y}});var a=s(155);const l="printWindow";function u({level:T="error",messages:E,suppressErrors:N=!1}){N||(T==="error"?console.error(E):T==="warning"?console.warn(E):console.debug(E))}function c(T,E){if(E||!T){const N=document.getElementById(l);N&&document.body.removeChild(N)}}function d(T){return T instanceof Error?T:new Error("Unknown Error")}function h(T,E){const{documentTitle:N,onAfterPrint:F,onPrintError:O,preserveAfterPrint:S,print:A,suppressErrors:C}=E;setTimeout(()=>{var k,P;if(T.contentWindow){let D=function(){F==null||F(),c(S)};var V=D;if(T.contentWindow.focus(),A)A(T).then(D).catch(oe=>{O?O("print",d(oe)):u({messages:["An error was thrown by the specified `print` function"],suppressErrors:C})});else{if(T.contentWindow.print){const oe=(P=(k=T.contentDocument)===null||k===void 0?void 0:k.title)!==null&&P!==void 0?P:"",Re=T.ownerDocument.title;N&&(T.ownerDocument.title=N,T.contentDocument&&(T.contentDocument.title=N)),T.contentWindow.print(),N&&(T.ownerDocument.title=Re,T.contentDocument&&(T.contentDocument.title=oe))}else u({messages:["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."],suppressErrors:C});[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(oe=>{var Re,Je;return((Je=(Re=navigator.userAgent)!==null&&Re!==void 0?Re:navigator.vendor)!==null&&Je!==void 0?Je:"opera"in window&&window.opera).match(oe)})?setTimeout(D,500):D()}}else u({messages:["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/MatthewHerbst/react-to-print/issues/"],suppressErrors:C})},500)}function g(T){const E=[],N=document.createTreeWalker(T,NodeFilter.SHOW_ELEMENT,null);let F=N.nextNode();for(;F;)E.push(F),F=N.nextNode();return E}function _(T,E,N){const F=g(T),O=g(E);if(F.length===O.length)for(let S=0;S<F.length;S++){const A=F[S],C=O[S],k=A.shadowRoot;if(k!==null){const P=C.attachShadow({mode:k.mode});P.innerHTML=k.innerHTML,_(k,P,N)}}else u({messages:["When cloning shadow root content, source and target elements have different size. `onBeforePrint` likely resolved too early.",T,E],suppressErrors:N})}const x=`
    @page {
        /* Remove browser default header (title) and footer (url) */
        margin: 0;
    }
    @media print {
        body {
            /* Tell browsers to print background colors */
            color-adjust: exact; /* Firefox. This is an older version of "print-color-adjust" */
            print-color-adjust: exact; /* Firefox/Safari */
            -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
        }
    }
`;function w(T,E,N,F){var O,S,A,C,k;const{contentNode:P,clonedContentNode:V,clonedImgNodes:D,clonedVideoNodes:oe,numResourcesToLoad:Re,originalCanvasNodes:Je}=N,{bodyClass:Le,fonts:ce,ignoreGlobalStyles:ae,pageStyle:we,nonce:$e,suppressErrors:Ae,copyShadowRoots:Ve}=F;T.onload=null;const Te=(O=T.contentDocument)!==null&&O!==void 0?O:(S=T.contentWindow)===null||S===void 0?void 0:S.document;if(Te){const Ne=Te.body.appendChild(V);Ve&&_(P,Ne,!!Ae),ce&&(!((A=T.contentDocument)===null||A===void 0)&&A.fonts&&(!((C=T.contentWindow)===null||C===void 0)&&C.FontFace)?ce.forEach(te=>{const le=new FontFace(te.family,te.source,{weight:te.weight,style:te.style});T.contentDocument.fonts.add(le),le.loaded.then(()=>{E(le)}).catch(pe=>{E(le,["Failed loading the font:",le,"Load error:",d(pe)])})}):(ce.forEach(te=>{E(te)}),u({messages:['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'],suppressErrors:Ae})));const Ge=we??x,We=Te.createElement("style");$e&&(We.setAttribute("nonce",$e),Te.head.setAttribute("nonce",$e)),We.appendChild(Te.createTextNode(Ge)),Te.head.appendChild(We),Le&&Te.body.classList.add(...Le.split(" "));const G=Te.querySelectorAll("canvas");for(let te=0;te<Je.length;++te){const le=Je[te],pe=G[te];if(pe===void 0){u({messages:["A canvas element could not be copied for printing, has it loaded? `onBeforePrint` likely resolved too early.",le],suppressErrors:Ae});continue}const Pe=pe.getContext("2d");Pe&&Pe.drawImage(le,0,0)}for(let te=0;te<D.length;te++){const le=D[te],pe=le.getAttribute("src");if(pe){const Pe=new Image;Pe.onload=()=>{E(le)},Pe.onerror=(me,Ye,He,et,ut)=>{E(le,["Error loading <img>",le,"Error",ut])},Pe.src=pe}else E(le,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it.',le])}for(let te=0;te<oe.length;te++){const le=oe[te];le.preload="auto";const pe=le.getAttribute("poster");if(pe){const Pe=new Image;Pe.onload=()=>{E(le)},Pe.onerror=(me,Ye,He,et,ut)=>{E(le,["Error loading video poster",pe,"for video",le,"Error:",ut])},Pe.src=pe}else le.readyState>=2?E(le):le.src?(le.onloadeddata=()=>{E(le)},le.onerror=(Pe,me,Ye,He,et)=>{E(le,["Error loading video",le,"Error",et])},le.onstalled=()=>{E(le,["Loading video stalled, skipping",le])}):E(le,["Error loading video, `src` is empty",le])}const j="select",q=P.querySelectorAll(j),W=Te.querySelectorAll(j);for(let te=0;te<q.length;te++)W[te].value=q[te].value;if(!ae){const te=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']");for(let le=0,pe=te.length;le<pe;++le){const Pe=te[le];if(Pe.tagName.toLowerCase()==="style"){const me=Te.createElement(Pe.tagName),Ye=Pe.sheet;if(Ye){let He="";try{const et=Ye.cssRules.length;for(let ut=0;ut<et;++ut)typeof Ye.cssRules[ut].cssText=="string"&&(He+=`${Ye.cssRules[ut].cssText}\r
`)}catch(et){u({messages:["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/MatthewHerbst/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",Pe,`Original error: ${d(et).message}`],level:"warning"})}me.setAttribute("id",`react-to-print-${le}`),$e&&me.setAttribute("nonce",$e),me.appendChild(Te.createTextNode(He)),Te.head.appendChild(me)}}else if(Pe.getAttribute("href"))if(Pe.hasAttribute("disabled"))u({messages:["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",Pe],level:"warning"}),E(Pe);else{const me=Te.createElement(Pe.tagName);for(let Ye=0,He=Pe.attributes.length;Ye<He;++Ye){const et=Pe.attributes[Ye];et&&me.setAttribute(et.nodeName,(k=et.nodeValue)!==null&&k!==void 0?k:"")}me.onload=()=>{E(me)},me.onerror=(Ye,He,et,ut,_t)=>{E(me,["Failed to load",me,"Error:",_t])},$e&&me.setAttribute("nonce",$e),Te.head.appendChild(me)}else u({messages:["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",Pe],level:"warning"}),E(Pe)}}}Re===0&&h(T,F)}function y({bodyClass:T,contentRef:E,copyShadowRoots:N,documentTitle:F,fonts:O,ignoreGlobalStyles:S,nonce:A,onAfterPrint:C,onBeforePrint:k,onPrintError:P,pageStyle:V,preserveAfterPrint:D,print:oe,printIframeProps:Re,suppressErrors:Je}){return(0,a.useCallback)(ce=>{function ae(){const we={bodyClass:T,contentRef:E,copyShadowRoots:N,documentTitle:F,fonts:O,ignoreGlobalStyles:S,nonce:A,onAfterPrint:C,onPrintError:P,pageStyle:V,preserveAfterPrint:D,print:oe,suppressErrors:Je},$e=function(Te){const Ne=document.createElement("iframe");return Ne.width=`${document.documentElement.clientWidth}px`,Ne.height=`${document.documentElement.clientHeight}px`,Ne.style.position="absolute",Ne.style.top=`-${document.documentElement.clientHeight+100}px`,Ne.style.left=`-${document.documentElement.clientWidth+100}px`,Ne.id=l,Ne.srcdoc="<!DOCTYPE html>",Te&&(Te.allow&&(Ne.allow=Te.allow),Te.referrerPolicy!==void 0&&(Ne.referrerPolicy=Te.referrerPolicy),Te.sandbox!==void 0&&(Ne.sandbox=Te.sandbox)),Ne}(Re),Ae=function(Te,Ne){const{contentRef:Ge,fonts:We,ignoreGlobalStyles:G,suppressErrors:j}=Ne,q=function({contentRef:me,optionalContent:Ye,suppressErrors:He}){return Ye&&typeof Ye=="function"?(me&&u({level:"warning",messages:['"react-to-print" received a `contentRef` option and an optional-content param passed to its callback. The `contentRef` option will be ignored.']}),Ye()):me?me.current:void u({messages:['"react-to-print" did not receive a `contentRef` option or a optional-content param pass to its callback.'],suppressErrors:He})}({contentRef:Ge,optionalContent:Te,suppressErrors:j});if(!q)return;const W=q.cloneNode(!0),te=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),le=W.querySelectorAll("img"),pe=W.querySelectorAll("video"),Pe=We?We.length:0;return{contentNode:q,clonedContentNode:W,clonedImgNodes:le,clonedVideoNodes:pe,numResourcesToLoad:(G?0:te.length)+le.length+pe.length+Pe,originalCanvasNodes:q.querySelectorAll("canvas")}}(ce,we);if(!Ae)return void u({messages:["There is nothing to print"],suppressErrors:Je});const Ve=function(Te,Ne,Ge){const{suppressErrors:We}=Te,G=[],j=[];return function(q,W){G.includes(q)?u({level:"debug",messages:["Tried to mark a resource that has already been handled",q],suppressErrors:We}):(W?(u({messages:['"react-to-print" was unable to load a resource but will continue attempting to print the page',...W],suppressErrors:We}),j.push(q)):G.push(q),G.length+j.length===Ne&&h(Ge,Te))}}(we,Ae.numResourcesToLoad,$e);(function(Te,Ne,Ge,We){Te.onload=()=>{w(Te,Ne,Ge,We)},document.body.appendChild(Te)})($e,Ve,Ae,we)}c(D,!0),k?k().then(()=>{ae()}).catch(we=>{P==null||P("onBeforePrint",d(we))}):ae()},[T,E,N,F,O,S,A,C,k,P,V,D,oe,Je])}return o}()})})(MF);var Wre=MF.exports;const qre=({isOpen:t,onClose:e})=>{const n=qe.useRef(null),r=Wre.useReactToPrint({contentRef:n,documentTitle:"Dochazka"});if(!t)return null;const i=()=>v.jsxs("div",{className:"flex items-center gap-[2px]",children:[v.jsx("div",{className:"w-7 h-6 border-2 border-gray-800 bg-white"}),v.jsx("div",{className:"w-7 h-6 border-2 border-gray-800 bg-white"}),v.jsx("span",{className:"font-black text-xl px-0.5 pb-1 leading-none text-black",children:":"}),v.jsx("div",{className:"w-7 h-6 border-2 border-gray-800 bg-white"}),v.jsx("div",{className:"w-7 h-6 border-2 border-gray-800 bg-white"})]});return v.jsx("div",{className:"fixed inset-0 bg-slate-900/50 flex items-center justify-center z-50 p-4 backdrop-blur-sm overflow-auto",children:v.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl flex flex-col border border-slate-100 max-h-[95vh]",children:[v.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-slate-100 bg-slate-50 rounded-t-2xl",children:[v.jsx("div",{children:v.jsxs("h2",{className:"text-lg font-bold text-slate-900 flex items-center gap-2",children:[v.jsx(Rp,{className:"text-primary"})," Tisk dochzky"]})}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsxs("button",{onClick:()=>r(),className:"flex items-center gap-2 bg-primary text-white px-4 py-2 rounded-lg hover:bg-primaryHover transition-all shadow font-bold text-sm",children:[v.jsx(Rp,{size:18}),"Vytisknout"]}),v.jsx("button",{onClick:e,className:"text-slate-500 hover:text-slate-800 p-2 rounded-full hover:bg-slate-200 transition-colors",children:v.jsx(fc,{size:24})})]})]}),v.jsx("div",{className:"p-4 bg-gray-500 flex-1 overflow-auto flex justify-center",children:v.jsx("div",{ref:n,className:"bg-white shadow-2xl print:shadow-none text-black font-sans mx-auto relative print:m-0",style:{width:"210mm",height:"296mm",padding:"8mm 10mm",boxSizing:"border-box",overflow:"hidden",pageBreakAfter:"avoid"},children:v.jsxs("div",{className:"flex flex-col h-full w-full",children:[v.jsxs("div",{className:"flex justify-between items-end border-b-4 border-black pb-1 mb-1",children:[v.jsx("h1",{className:"text-3xl font-black uppercase tracking-widest text-black leading-none transform translate-y-1",children:"DOCHZKA"}),v.jsxs("div",{className:"flex gap-4 items-end",children:[v.jsxs("div",{className:"flex flex-col",children:[v.jsx("span",{className:"text-[10px] uppercase font-bold text-gray-600 leading-none mb-0.5",children:"Msc / Rok:"}),v.jsx("div",{className:"border-2 border-gray-600 w-28 h-8 bg-white"})]}),v.jsxs("div",{className:"flex flex-col",children:[v.jsx("span",{className:"text-[10px] uppercase font-bold text-gray-600 leading-none mb-0.5",children:"ID / Jmno:"}),v.jsx("div",{className:"border-2 border-gray-600 w-40 h-8 bg-white"})]})]})]}),v.jsx("div",{className:"flex-1",children:v.jsxs("table",{className:"w-full border-collapse",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"bg-black text-white text-[10px] uppercase tracking-wider",children:[v.jsx("th",{className:"py-0.5 px-1 border border-black w-10 text-center",children:"Datum"}),v.jsx("th",{className:"py-0.5 px-1 border border-black text-center",children:"Pchod"}),v.jsx("th",{className:"py-0.5 px-1 border border-black text-center",children:"Odchod"}),v.jsx("th",{className:"py-0.5 px-1 border border-black w-12 text-center",children:"Pauza"}),v.jsx("th",{className:"py-0.5 px-1 border border-black w-16 text-center",children:"Pejezd"}),v.jsx("th",{className:"py-0.5 px-1 border border-black text-left pl-2",children:"Poznmka"})]})}),v.jsx("tbody",{children:Array.from({length:31}).map((s,o)=>v.jsxs("tr",{className:"border-b border-gray-400 h-[8.2mm]",children:[" ",v.jsxs("td",{className:"text-center font-bold text-black border-r border-gray-400 text-sm bg-gray-100/50 leading-none",children:[o+1,"."]}),v.jsx("td",{className:"text-center px-1 border-r border-gray-400 bg-blue-50/10 w-[65px]",children:v.jsx("div",{className:"flex justify-center items-center h-full pt-[1px]",children:v.jsx(i,{})})}),v.jsx("td",{className:"text-center px-1 border-r border-gray-400 bg-orange-50/10 w-[65px]",children:v.jsx("div",{className:"flex justify-center items-center h-full pt-[1px]",children:v.jsx(i,{})})}),v.jsx("td",{className:"text-center border-r border-gray-400 px-1 align-middle",children:v.jsx("div",{className:"border-b-2 border-gray-300 mx-auto w-8 h-4"})}),v.jsx("td",{className:"text-center border-r border-gray-400 px-1 align-middle",children:v.jsx("div",{className:"border-b-2 border-gray-300 mx-auto w-12 h-4"})}),v.jsx("td",{className:"border-r border-gray-400 bg-gray-50/10"})]},o))})]})}),v.jsx("div",{className:"h-2 w-full"})]})})})]})})},jre=({isOpen:t,onClose:e})=>{if(!t)return null;const n=[{code:"R",desc:"Rann smna",detail:"Zatek obvykle rno (nap. 09:00 - 13:30)."},{code:"C",desc:"Celodenn smna",detail:"Pln pracovn doba (nap. 09:00 - 18:00)."},{code:"O",desc:"Odpoledn smna",detail:"Zatek odpoledne do zavraky (nap. 13:30 - 18:00)."},{code:"S",desc:"Sklad",detail:"Prce ve skladu."},{code:"P",desc:"Prodejna",detail:"Prce na prodejn."},{code:"OFF",desc:"Volno",detail:"Nastav den jako voln (vynuluje asy). Nepot se do fondu."},{code:"DOV",desc:"Dovolen",detail:"Placen dovolen."},{code:"SICK",desc:"Nemocensk",detail:"Zdravotn neschopnost."}];return v.jsx("div",{className:"fixed inset-0 bg-slate-900/50 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:v.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col border border-slate-100 animate-in fade-in zoom-in-95 duration-200",children:[v.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-slate-100 bg-slate-50 rounded-t-2xl",children:[v.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[v.jsx(g7,{className:"text-primary",size:24}),"Npovda"]}),v.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-800 p-1 rounded-full hover:bg-slate-200 transition-colors",children:v.jsx(fc,{size:24})})]}),v.jsxs("div",{className:"overflow-y-auto p-6 space-y-8 flex-1",children:[v.jsxs("section",{children:[v.jsx("h3",{className:"text-sm uppercase tracking-wider font-bold text-slate-500 mb-4 border-b border-slate-100 pb-2",children:"Typy smn a legenda"}),v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:n.map(r=>v.jsxs("div",{className:"flex items-start gap-3 p-2 rounded-lg border border-slate-100 hover:bg-slate-50 transition-colors",children:[v.jsx("div",{className:`w-10 h-10 flex-shrink-0 rounded-lg flex items-center justify-center font-bold text-sm border shadow-sm ${Oa[r.code]||"bg-slate-100 text-slate-600"}`,children:r.code}),v.jsxs("div",{children:[v.jsx("div",{className:"font-bold text-slate-900",children:r.desc}),v.jsx("div",{className:"text-xs text-slate-500 leading-tight mt-0.5",children:r.detail})]})]},r.code))})]}),v.jsxs("section",{children:[v.jsx("h3",{className:"text-sm uppercase tracking-wider font-bold text-slate-500 mb-4 border-b border-slate-100 pb-2",children:"Funkce aplikace"}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"flex gap-3",children:[v.jsx("div",{className:"p-2 bg-white border border-slate-200 rounded-lg text-slate-600 h-fit",children:v.jsx(ud,{size:20})}),v.jsxs("div",{children:[v.jsx("h4",{className:"font-bold text-slate-800 text-sm",children:"Export Excel"}),v.jsx("p",{className:"text-xs text-slate-500",children:"Sthne aktuln msc do souboru .xlsx pro zlohu nebo tisk."})]})]}),v.jsxs("div",{className:"flex gap-3",children:[v.jsx("div",{className:"p-2 bg-white border border-slate-200 rounded-lg text-slate-600 h-fit",children:v.jsx(Xx,{size:20})}),v.jsxs("div",{children:[v.jsx("h4",{className:"font-bold text-slate-800 text-sm",children:"Export Kalend (.ics)"}),v.jsx("p",{className:"text-xs text-slate-500",children:"Umon nahrt smny do vaeho kalende (Google, Apple). Na iPhonu se oteve sdlec dialog."})]})]}),v.jsxs("div",{className:"flex gap-3",children:[v.jsx("div",{className:"p-2 bg-white border border-slate-200 rounded-lg text-slate-600 h-fit",children:v.jsx(Cp,{size:20})}),v.jsxs("div",{children:[v.jsx("h4",{className:"font-bold text-slate-800 text-sm",children:"AI Skener"}),v.jsx("p",{className:"text-xs text-slate-500",children:"Vyfote paprovou dochzku a uml inteligence automaticky rozpozn a vypln asy pchod a odchod."})]})]}),v.jsxs("div",{className:"flex gap-3",children:[v.jsx("div",{className:"p-2 bg-white border border-slate-200 rounded-lg text-slate-600 h-fit",children:v.jsx(Rp,{size:20})}),v.jsxs("div",{children:[v.jsx("h4",{className:"font-bold text-slate-800 text-sm",children:"Tisk"}),v.jsx("p",{className:"text-xs text-slate-500",children:"Vytvo tiskovou sestavu dochzky pro podpis."})]})]})]})]}),v.jsxs("section",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100",children:[v.jsx("h3",{className:"text-sm font-bold text-blue-800 mb-2 flex items-center gap-2",children:" Jak sprvn zapisovat"}),v.jsxs("ul",{className:"list-disc list-inside text-xs text-blue-700 space-y-1 ml-1",children:[v.jsxs("li",{children:["asy zadvejte ve formtu ",v.jsx("strong",{children:"HH:MM"})," (nap. 09:00)."]}),v.jsxs("li",{children:["Pro smazn smny vyberte typ ",v.jsx("strong",{children:"OFF"})," (automaticky vymae asy)."]}),v.jsx("li",{children:"Pauza se zadv v minutch (nap. 30). Zkonn pauza je povinn po 6 hodinch."}),v.jsxs("li",{children:["V mobiln verzi kliknte na tlatko ",v.jsx("strong",{children:'"Upravit"'})," pro detailn editaci."]})]})]})]}),v.jsx("div",{className:"p-4 border-t border-slate-100 flex justify-end bg-slate-50 rounded-b-2xl",children:v.jsx("button",{onClick:e,className:"px-6 py-2 bg-slate-800 text-white font-bold rounded-lg hover:bg-slate-900 transition-colors shadow-sm",children:"Rozumm"})})]})})},iC=({stats:t})=>{const e=t.diff<0;return v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[v.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex items-center space-x-4",children:[v.jsx("div",{className:"p-3 bg-blue-50 rounded-full text-blue-600",children:v.jsx(Xx,{size:24})}),v.jsxs("div",{children:[v.jsx("p",{className:"text-[10px] font-black uppercase text-slate-400 leading-none mb-1",children:"Pracovn dny"}),v.jsx("p",{className:"text-xl font-black text-slate-900",children:t.workDays})]})]}),v.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex items-center space-x-4",children:[v.jsx("div",{className:"p-3 bg-emerald-50 rounded-full text-emerald-600",children:v.jsx(V_,{size:24})}),v.jsxs("div",{children:[v.jsx("p",{className:"text-[10px] font-black uppercase text-slate-400 leading-none mb-1",children:"Fond / Rozdl"}),v.jsxs("div",{className:"flex items-baseline space-x-2",children:[v.jsx("span",{className:"text-lg font-black text-slate-900",children:t.monthlyFund}),v.jsxs("span",{className:`text-sm font-black ${e?"text-danger":"text-success"}`,children:["(",t.diff>0?"+":"",t.diff.toFixed(1),"h)"]})]})]})]}),v.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex items-center space-x-4",children:[v.jsx("div",{className:"p-3 bg-amber-50 rounded-full text-amber-600",children:v.jsx(p7,{size:24})}),v.jsxs("div",{children:[v.jsx("p",{className:"text-[10px] font-black uppercase text-slate-400 leading-none mb-1",children:"Stravenky (6h+)"}),v.jsx("p",{className:"text-xl font-black text-slate-900",children:t.mealVouchers})]})]}),v.jsxs("div",{className:"bg-slate-900 p-4 rounded-xl shadow-lg flex items-center space-x-4 text-white",children:[v.jsx("div",{className:"p-3 bg-white/10 rounded-full",children:v.jsx(Ap,{size:24,className:"text-primary"})}),v.jsxs("div",{children:[v.jsx("p",{className:"text-[10px] font-black uppercase text-slate-400 leading-none mb-1",children:"Celkem pro mzdu"}),v.jsxs("p",{className:"text-xl font-black",children:[t.totalHours.toFixed(1),"h"]})]})]})]}),v.jsxs("div",{className:"bg-slate-50 rounded-2xl p-5 border border-slate-100",children:[v.jsx("h4",{className:"text-[10px] font-black uppercase text-slate-500 mb-4 tracking-widest",children:"Detailn rozpis pro mzdovou etn"}),v.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[v.jsxs("div",{className:"flex flex-col",children:[v.jsx("span",{className:"text-xs font-bold text-slate-600",children:"Reln odpracovno:"}),v.jsxs("span",{className:"text-lg font-black text-slate-900",children:[t.workHours.toFixed(1)," h"]})]}),v.jsxs("div",{className:"flex flex-col border-l-0 sm:border-l border-slate-200 sm:pl-6",children:[v.jsx("span",{className:"text-xs font-bold text-emerald-600",children:"erpan dovolen:"}),v.jsxs("span",{className:"text-lg font-black text-emerald-700",children:[t.vacationHours.toFixed(1)," h"]})]}),v.jsxs("div",{className:"flex flex-col border-l-0 sm:border-l border-slate-200 sm:pl-6",children:[v.jsx("span",{className:"text-xs font-bold text-red-500",children:"Nemocensk volno:"}),v.jsxs("span",{className:"text-lg font-black text-red-600",children:[t.sickHours.toFixed(1)," h"]})]})]})]})]})},Kre=({isOpen:t,onClose:e,employees:n,currentUser:r,onSave:i})=>{const[s,o]=qe.useState(""),[a,l]=qe.useState(""),[u,c]=qe.useState("medium"),[d,h]=qe.useState(null);if(!t)return null;const g=()=>{if(!s)return alert("Zadejte nzev kolu.");const _={id:"",title:s,description:a,status:"todo",priority:u,assigneeId:d,createdBy:(r==null?void 0:r.email)||"system",createdAt:new Date().toISOString()};i(_),e(),o(""),l(""),c("medium"),h(null)};return v.jsx("div",{className:"fixed inset-0 bg-slate-900/60 flex items-center justify-center z-[60] p-4 backdrop-blur-sm",children:v.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg flex flex-col border border-slate-100",children:[v.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[v.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Vytvoit nov kol"}),v.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600",children:v.jsx(fc,{size:24})})]}),v.jsxs("div",{className:"p-6 space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-1",children:"Nzev kolu"}),v.jsx("input",{placeholder:"Co je poteba udlat?",value:s,onChange:_=>o(_.target.value),className:"w-full p-3 border rounded-xl focus:ring-2 focus:ring-primary outline-none transition-all"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-1",children:"Popis / Poznmky"}),v.jsx("textarea",{placeholder:"Bli detaily...",rows:3,value:a,onChange:_=>l(_.target.value),className:"w-full p-3 border rounded-xl focus:ring-2 focus:ring-primary outline-none transition-all"})]}),v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-1",children:"Priorita"}),v.jsxs("select",{value:u,onChange:_=>c(_.target.value),className:"w-full p-3 border rounded-xl outline-none bg-white",children:[v.jsx("option",{value:"low",children:"Nzk"}),v.jsx("option",{value:"medium",children:"Stedn"}),v.jsx("option",{value:"high",children:"Vysok"})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-1",children:"Piazen"}),v.jsxs("select",{value:d||"",onChange:_=>h(_.target.value||null),className:"w-full p-3 border rounded-xl outline-none bg-white",children:[v.jsx("option",{value:"",children:"Veejn kol"}),n.map(_=>v.jsx("option",{value:_.id,children:_.name},_.id))]})]})]})]}),v.jsxs("div",{className:"p-6 border-t bg-slate-50 flex gap-3 rounded-b-2xl",children:[v.jsx("button",{onClick:e,className:"flex-1 py-3 font-bold text-slate-600",children:"Zruit"}),v.jsx("button",{onClick:g,className:"flex-1 py-3 bg-primary text-white font-bold rounded-xl shadow-lg",children:"Vytvoit kol"})]})]})})},Jre=({tasks:t,employees:e,currentUser:n,currentIdentity:r,onTaskChange:i})=>{const[s,o]=qe.useState(!1),a=t.filter(d=>d.status==="todo"),l=t.filter(d=>d.status==="in-progress"),u=t.filter(d=>d.status==="done"),c=({task:d})=>{const h=e.find(_=>_.id===d.assigneeId),g=d.priority==="high"?"bg-red-500":d.priority==="medium"?"bg-orange-400":"bg-blue-400";return v.jsxs("div",{className:"bg-white rounded-xl p-4 border border-slate-200 shadow-sm hover:shadow-md transition-all group relative",children:[v.jsxs("div",{className:"flex justify-between items-start mb-2",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("div",{className:`w-2 h-2 rounded-full ${g}`}),v.jsx("span",{className:"text-[10px] font-bold uppercase text-slate-400 tracking-tight",children:d.discordMessageId?"Z externho zdroje":"Intern zznam"})]}),v.jsx("button",{onClick:()=>i(d,"delete"),className:"opacity-0 group-hover:opacity-100 p-1 text-slate-300 hover:text-red-500 transition-opacity",children:v.jsx(JN,{size:14})})]}),v.jsx("h4",{className:"font-bold text-slate-900 mb-1",children:d.title}),d.description&&v.jsx("p",{className:"text-xs text-slate-500 mb-3 line-clamp-2",children:d.description}),d.discordMessageId&&v.jsxs("div",{className:"mb-3 px-2 py-1.5 bg-slate-50 rounded-lg text-[9px] font-mono text-slate-500 flex justify-between border border-slate-100",children:[v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx(c7,{size:10})," Link ID:"]}),v.jsx("span",{className:"font-bold text-primary",children:d.discordMessageId})]}),v.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-slate-50",children:[v.jsx("div",{className:"flex items-center gap-1.5",children:h?v.jsx("span",{className:"text-[10px] font-bold text-slate-700 bg-slate-100 px-2 py-0.5 rounded-md",children:h.name}):v.jsx("span",{className:"text-[10px] text-slate-400 italic",children:"Nepiazeno"})}),v.jsx("div",{className:"flex gap-2",children:d.status!=="done"?v.jsx("button",{onClick:()=>i({...d,status:d.status==="todo"?"in-progress":"done"},"update"),className:"bg-slate-900 text-white px-3 py-1 rounded-lg text-[10px] font-bold uppercase hover:bg-primary transition-colors shadow-sm",children:d.status==="todo"?"Zahjit":"Dokonit"}):v.jsxs("div",{className:"flex items-center gap-1 text-green-600 font-bold text-[10px] uppercase",children:[v.jsx(Ap,{size:14})," Hotovo"]})})]})]})};return v.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden h-full",children:[v.jsx(Kre,{isOpen:s,onClose:()=>o(!1),employees:e,currentUser:n,onSave:d=>i(d,"create")}),v.jsxs("div",{className:"flex justify-between items-center mb-6 shrink-0 px-2",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Nstnka kol"}),v.jsx("p",{className:"text-xs text-slate-500 font-medium",children:"Pehled a stav probhajcch prac"})]}),v.jsxs("button",{onClick:()=>o(!0),className:"bg-primary text-white px-5 py-2.5 rounded-xl font-bold flex items-center gap-2 hover:bg-primaryHover transition-all shadow-lg shadow-blue-100",children:[v.jsx(Yx,{size:18})," NOV KOL"]})]}),v.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-3 gap-6 overflow-hidden pb-4",children:[v.jsxs("div",{className:"flex flex-col gap-3 min-h-0 bg-slate-50/50 p-2 rounded-2xl border border-slate-100",children:[v.jsx("div",{className:"flex items-center justify-between px-2 py-1",children:v.jsxs("span",{className:"text-xs font-bold uppercase text-slate-400 tracking-wider",children:["K vyzen (",a.length,")"]})}),v.jsxs("div",{className:"flex-1 overflow-y-auto space-y-3 pr-1 no-scrollbar",children:[a.map(d=>v.jsx(c,{task:d},d.id)),a.length===0&&v.jsx("div",{className:"py-10 text-center opacity-30 italic text-xs text-slate-400",children:"dn nov koly"})]})]}),v.jsxs("div",{className:"flex flex-col gap-3 min-h-0 bg-slate-50/50 p-2 rounded-2xl border border-slate-100",children:[v.jsx("div",{className:"flex items-center justify-between px-2 py-1",children:v.jsxs("span",{className:"text-xs font-bold uppercase text-slate-400 tracking-wider",children:["V procesu (",l.length,")"]})}),v.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-1 no-scrollbar",children:l.map(d=>v.jsx(c,{task:d},d.id))})]}),v.jsxs("div",{className:"flex flex-col gap-3 min-h-0 bg-slate-50/50 p-2 rounded-2xl border border-slate-100",children:[v.jsx("div",{className:"flex items-center justify-between px-2 py-1",children:v.jsxs("span",{className:"text-xs font-bold uppercase text-slate-400 tracking-wider",children:["Dokoneno (",u.length,")"]})}),v.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-1 no-scrollbar",children:u.map(d=>v.jsx(c,{task:d},d.id))})]})]})]})},Yre=CI.default||CI,Xre=({index:t,style:e,data:n})=>{const{daysInMonth:r,employees:i,getShiftsForDay:s,gridCols:o}=n,a=r[t],l=a.getDay()===0||a.getDay()===6,u=xu(a);return v.jsxs("div",{style:{...e,display:"grid",gridTemplateColumns:o},className:`border-b border-slate-100 items-center ${u?"bg-amber-50":l?"bg-slate-50":"hover:bg-sky-50/10"}`,children:[v.jsxs("div",{className:"px-4 py-2 border-r h-full flex items-center gap-1 font-black text-sm text-slate-800",children:[a.getDate(),". ",a.getMonth()+1,". ",v.jsx("span",{className:"text-[10px] text-slate-400 font-bold",children:ld(a)})]}),i.map(c=>{const d=s(a,c.id);return v.jsx("div",{className:"px-1 text-center border-r border-slate-100 h-full flex items-center justify-center",children:d.length>0?v.jsxs("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center font-black text-[11px] border ${Oa[d[0].confirmedType]||"bg-slate-100"}`,children:[d[0].confirmedType,d.length>1&&"+"]}):v.jsx("span",{className:"text-slate-200",children:"-"})},c.id)}),v.jsx("div",{className:"px-4 py-1 h-full flex items-center",children:v.jsx(bY,{shifts:i.map(c=>s(a,c.id)[0]),employees:i,date:a})})]})},Qre=({isOpen:t,onClose:e,currentEmployee:n,currentUser:r,employees:i,onUpdateEmployee:s,customShifts:o,onSaveCustomShift:a,onDeleteCustomShift:l,onBulkFillHpp:u,isLocked:c,onToggleLock:d})=>{const[h,g]=qe.useState("me"),[_,x]=qe.useState({code:"",startTime:"09:00",endTime:"18:00",breakDuration:30});if(!t)return null;const w=(r==null?void 0:r.role)==="admin";return v.jsx("div",{className:"fixed inset-0 bg-slate-900/60 flex items-center justify-center z-[100] p-2 sm:p-4 backdrop-blur-md",children:v.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl w-full max-w-4xl flex flex-col border border-slate-100 max-h-[90vh] overflow-hidden animate-in fade-in zoom-in-95 duration-300",children:[v.jsxs("div",{className:"flex justify-between items-center p-4 sm:p-6 border-b bg-slate-50/50",children:[v.jsxs("div",{children:[v.jsxs("h2",{className:"text-xl sm:text-2xl font-black text-slate-900 flex items-center gap-2",children:[v.jsx(jN,{className:"text-primary"})," Nastaven"]}),v.jsxs("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest mt-1 truncate max-w-[200px] sm:max-w-none",children:["Pihlen: ",r==null?void 0:r.email]})]}),v.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 p-2 bg-white rounded-full shadow-sm border",children:v.jsx(fc,{size:24})})]}),v.jsxs("div",{className:"flex border-b bg-white overflow-x-auto no-scrollbar shrink-0",children:[v.jsx("button",{onClick:()=>g("me"),className:`px-4 sm:px-8 py-4 text-[10px] sm:text-xs font-black uppercase tracking-widest transition-all border-b-2 ${h==="me"?"border-primary text-primary bg-sky-50/30":"border-transparent text-slate-400 hover:text-slate-600"}`,children:"Mj vazek"}),w&&v.jsx("button",{onClick:()=>g("team"),className:`px-4 sm:px-8 py-4 text-[10px] sm:text-xs font-black uppercase tracking-widest transition-all border-b-2 ${h==="team"?"border-primary text-primary bg-sky-50/30":"border-transparent text-slate-400 hover:text-slate-600"}`,children:"Sprva tmu"}),v.jsx("button",{onClick:()=>g("definitions"),className:`px-4 sm:px-8 py-4 text-[10px] sm:text-xs font-black uppercase tracking-widest transition-all border-b-2 ${h==="definitions"?"border-primary text-primary bg-sky-50/30":"border-transparent text-slate-400 hover:text-slate-600"}`,children:"Typy smn"})]}),v.jsxs("div",{className:"flex-1 overflow-y-auto p-4 sm:p-8 space-y-8 bg-slate-50/30 no-scrollbar",children:[h==="me"&&v.jsx("div",{className:"max-w-md mx-auto space-y-6",children:v.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-slate-100 shadow-sm space-y-4",children:[v.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[v.jsx("div",{className:"w-10 h-10 rounded-2xl bg-primary/10 text-primary flex items-center justify-center",children:v.jsx(Xx,{size:20})}),v.jsx("h3",{className:"font-black text-slate-800",children:"Mj tdenn fond"})]}),n?v.jsxs("div",{children:[v.jsx("label",{className:"block text-[10px] font-black uppercase text-slate-400 mb-2 tracking-widest",children:"Hodin tdn"}),v.jsxs("div",{className:"flex gap-4 items-center",children:[v.jsx("input",{type:"number",step:"0.5",value:n.weeklyFund,onChange:y=>s(n.id,{weeklyFund:Number(y.target.value)}),className:"flex-1 p-4 border-2 rounded-2xl font-black text-2xl bg-slate-50 outline-none focus:border-primary transition-all"}),v.jsx("div",{className:"text-slate-400 font-bold",children:"h"})]})]}):v.jsxs("div",{className:"p-4 bg-red-50 text-red-600 rounded-2xl text-sm font-bold border border-red-100 text-center",children:[v.jsx(ff,{className:"mx-auto mb-2",size:32}),"et nen sprovn se zamstnancem."]})]})}),h==="team"&&w&&v.jsxs("div",{className:"space-y-6",children:[v.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-3xl border-2 border-slate-200 shadow-sm flex flex-col sm:flex-row items-center justify-between gap-4 text-center sm:text-left",children:[v.jsxs("div",{children:[v.jsx("h3",{className:"font-black text-slate-900",children:"Zmek msce"}),v.jsx("p",{className:"text-[10px] sm:text-xs text-slate-500 font-bold uppercase mt-1",children:"Po uzamen nelze v tomto msci mnit data"})]}),v.jsx("button",{onClick:d,className:`w-full sm:w-auto px-6 py-3 rounded-2xl font-black uppercase text-xs flex items-center justify-center gap-3 transition-all ${c?"bg-red-500 text-white shadow-red-200 shadow-lg":"bg-emerald-500 text-white shadow-emerald-200 shadow-lg"}`,children:c?v.jsxs(v.Fragment,{children:[v.jsx(XN,{size:18})," Uzameno"]}):v.jsxs(v.Fragment,{children:[v.jsx(f7,{size:18})," Odemeno"]})})]}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.sort((y,T)=>y.name.localeCompare(T.name)).map(y=>v.jsxs("div",{className:"bg-white p-5 sm:p-6 rounded-3xl border border-slate-100 shadow-sm hover:border-primary/30 transition-all group",children:[v.jsxs("div",{className:"flex justify-between items-start mb-4",children:[v.jsxs("div",{className:"flex flex-col",children:[v.jsx("span",{className:"font-black text-lg text-slate-900",children:y.name}),v.jsx("span",{className:`w-fit px-2 py-0.5 rounded-lg text-[8px] font-black uppercase ${y.role==="admin"?"bg-amber-100 text-amber-600":"bg-slate-100 text-slate-500"}`,children:y.role==="admin"?"Administrtor":"Zamstnanec"})]}),!c&&v.jsx("button",{onClick:()=>u(y.id),className:"px-3 py-1.5 bg-emerald-50 text-emerald-600 border border-emerald-100 rounded-xl text-[10px] font-black uppercase hover:bg-emerald-500 hover:text-white transition-all shadow-sm active:scale-95",children:"Doplnit HPP"})]}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{children:[v.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-tight",children:"E-mail (Google)"}),v.jsx("input",{value:y.email||"",onChange:T=>s(y.id,{email:T.target.value}),className:"w-full mt-1 p-3 border rounded-xl text-sm font-bold bg-slate-50 outline-none focus:bg-white transition-all",placeholder:"zatm nepiazeno..."})]}),v.jsxs("div",{children:[v.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-tight",children:"Tdenn vazek"}),v.jsx("input",{type:"number",step:"0.5",value:y.weeklyFund,onChange:T=>s(y.id,{weeklyFund:Number(T.target.value)}),className:"w-full mt-1 p-3 border rounded-xl text-sm font-bold bg-slate-50 outline-none focus:bg-white transition-all"})]})]})]},y.id))})]}),h==="definitions"&&v.jsxs("div",{className:"space-y-8",children:[v.jsxs("div",{className:"bg-primary/5 p-5 sm:p-8 rounded-[32px] border border-primary/10",children:[v.jsxs("h3",{className:"font-black text-slate-800 text-lg mb-6 flex items-center gap-2",children:[v.jsx(Yx,{className:"text-primary"})," Vytvoit nov typ smny"]}),v.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 items-end",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-[10px] font-black uppercase text-slate-400 mb-2",children:"Kd smny (nap. S)"}),v.jsx("input",{value:_.code,onChange:y=>x({..._,code:y.target.value.toUpperCase()}),className:"w-full p-4 border-2 rounded-2xl font-black bg-white outline-none focus:border-primary shadow-sm",placeholder:"Kd"})]}),v.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:block",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-[10px] font-black uppercase text-slate-400 mb-2",children:"Zatek"}),v.jsx("input",{type:"time",value:_.startTime,onChange:y=>x({..._,startTime:y.target.value}),className:"w-full p-4 border-2 rounded-2xl font-black bg-white outline-none focus:border-primary shadow-sm"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-[10px] font-black uppercase text-slate-400 mb-2",children:"Konec"}),v.jsx("input",{type:"time",value:_.endTime,onChange:y=>x({..._,endTime:y.target.value}),className:"w-full p-4 border-2 rounded-2xl font-black bg-white outline-none focus:border-primary shadow-sm"})]})]}),v.jsx("button",{onClick:()=>{_.code&&(a(_),x({code:"",startTime:"09:00",endTime:"18:00",breakDuration:30}))},className:"py-4 bg-primary text-white font-black rounded-2xl shadow-lg hover:scale-[1.02] active:scale-95 transition-all",children:"ULOIT TYP SMNY"})]})]}),v.jsxs("div",{className:"space-y-4",children:[v.jsx("h3",{className:"text-sm font-black text-slate-400 uppercase tracking-widest px-2",children:"KNIHOVNA TYP SMN"}),v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:o.length===0?v.jsx("div",{className:"col-span-full py-10 text-center text-slate-300 italic",children:"Zatm nejsou vytvoeny dn vlastn smny."}):o.map(y=>v.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-slate-100 shadow-sm flex items-center justify-between group",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"w-12 h-12 rounded-xl bg-sky-50 text-sky-700 flex items-center justify-center font-black text-sm border border-sky-100",children:y.code}),v.jsxs("div",{children:[v.jsxs("div",{className:"font-bold text-slate-800",children:[y.startTime," - ",y.endTime]}),v.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase",children:"asov rozmez"})]})]}),v.jsx("button",{onClick:()=>l(y.code),className:"p-2 text-slate-300 hover:text-danger transition-colors",children:v.jsx(JN,{size:18})})]},y.code))})]})]})]}),v.jsx("div",{className:"p-4 sm:p-6 border-t bg-slate-50/50 flex justify-end shrink-0",children:v.jsx("button",{onClick:e,className:"w-full sm:w-auto px-10 py-4 bg-slate-800 text-white font-black uppercase tracking-widest text-xs rounded-2xl shadow-xl hover:bg-slate-900 transition-all active:scale-95",children:"Zavt"})})]})})};function Zre(){const[t,e]=qe.useState(null),[n,r]=qe.useState(RI),[i,s]=qe.useState(!0),[o,a]=qe.useState(new Date),[l,u]=qe.useState("all"),[c,d]=qe.useState(!0),[h,g]=qe.useState(!1),[_,x]=qe.useState(!1),[w,y]=qe.useState(!1),[T,E]=qe.useState(!1),[N,F]=qe.useState(!1),[O,S]=qe.useState("shifts"),[A,C]=qe.useState("mesic"),[k,P]=qe.useState(!1),[V,D]=qe.useState(null),[oe,Re]=qe.useState("live"),[Je,Le]=qe.useState([]),[ce,ae]=qe.useState([]),[we,$e]=qe.useState([]),Ae=(t==null?void 0:t.role)==="admin",Ve=async()=>{const se=await EY(),be=RI.map(Ce=>{const tt=se[Ce.id]||{};return{...Ce,...tt,email:tt.email&&tt.email.trim()!==""?tt.email:Ce.email}});r(be)};qe.useEffect(()=>{const se=cg.onAuthStateChanged(tt=>{if(tt&&tt.email){const st=tt.email.toLowerCase().trim(),rt=["weipro4@gmail.com","renabotkovaa@gmail.com","kratochvile.org@gmail.com","filip.vicar01@gmail.com","filip.vicar01@seznam.cz"].includes(st);e({uid:tt.uid,email:tt.email,role:rt?"admin":"employee"})}else e(null);s(!1)});Ve();const be=RY(ae),Ce=IY($e);return()=>{se(),be(),Ce()}},[]),qe.useEffect(()=>{if(!t)return;const se=sr(o).substring(0,7);d(!0);const Ce=CY(se,oe==="audit",st=>{Le(st),d(!1)},()=>d(!1)),tt=pr.collection("locks").doc(se).onSnapshot(st=>{var Ze;P(st.exists&&((Ze=st.data())==null?void 0:Ze.locked)===!0)});return()=>{Ce&&Ce(),tt()}},[o,t,oe]);const Te=qe.useMemo(()=>[...$N,...we],[we]),Ne=qe.useMemo(()=>r7(o.getFullYear(),o.getMonth()),[o]),Ge=n.find(se=>se.id===l),We=qe.useMemo(()=>t!=null&&t.email&&n.find(se=>{var be,Ce;return((be=se.email)==null?void 0:be.toLowerCase().trim())===((Ce=t.email)==null?void 0:Ce.toLowerCase().trim())})||null,[n,t]),G=qe.useMemo(()=>Je.filter(se=>se.isOffered),[Je]),j=async(se,be)=>{await TY(se,be),await Ve()},q=async()=>{if((t==null?void 0:t.role)!=="admin")return;const se=sr(o).substring(0,7);await pr.collection("locks").doc(se).set({locked:!k,updatedAt:new Date().toISOString()})},W=async()=>{if(!Ae)return;const se=sr(o).substring(0,7);if(confirm(`Opravdu chcete vytvoit AUTORITATIVN KOPII msce ${se}? Tm se peklop aktuln ostr data do admin verze pro dal pravy.`)){g(!0);try{const be=await pr.collection("shifts").where("date",">=",se+"-01").where("date","<=",se+"-31").get(),Ce=[];be.forEach(tt=>{const st=tt.data();if(!st.isAudit){const Ze={...st,id:`audit-${st.id}`,isAudit:!0,isOffered:!1,history:[...st.history||[],{timestamp:new Date().toISOString(),userId:(t==null?void 0:t.uid)||"sys",userEmail:(t==null?void 0:t.email)||"sys",action:"Vytvoena auditn kopie z ostrch dat"}]};Ce.push(bv(Ze))}}),await Promise.all(Ce),alert(`Hotovo! Vytvoeno ${Ce.length} zznam v autoritativnm plnu.`),Re("audit")}catch(be){console.error(be),alert("Chyba pi klonovn dat.")}finally{g(!1)}}},te=async se=>{if(k&&oe==="live")return alert("Msc je uzamen.");if(!confirm("Tato akce vypln smny 09:0017:30 (8h) na vechny pracovn dny tohoto msce. Chcete pokraovat?"))return;g(!0);const be=Ne.filter(Ce=>Ce.getDay()!==0&&Ce.getDay()!==6&&!xu(Ce)).map(Ce=>{const tt=sr(Ce);return{id:oe==="audit"?`audit-${se}-${tt}`:`${se}-${tt}`,employeeId:se,date:tt,availability:"",confirmedType:"C",startTime:"09:00",endTime:"17:30",breakDuration:30,note:"Automatick HPP",isWeekend:!1,isOffered:!1,isAudit:oe==="audit",history:[{timestamp:new Date().toISOString(),userId:(t==null?void 0:t.uid)||"sys",userEmail:(t==null?void 0:t.email)||"sys",action:"Hromadn vyplnn HPP"}]}});try{const Ce=be.map(tt=>bv(tt));await Promise.all(Ce),alert(`Hotovo! Vyplnno ${be.length} smn.`)}catch(Ce){console.error(Ce)}finally{g(!1)}},le=async(se,be=!1)=>{if(k&&oe==="live")return alert("Msc je uzamen. Zmny nejsou povoleny.");const Ce=Je.find(rt=>rt.id===se.id);let tt=null;if(Ce){const{history:rt,...wt}=Ce;tt=wt}const st={timestamp:new Date().toISOString(),userId:(t==null?void 0:t.uid)||"unknown",userEmail:(t==null?void 0:t.email)||"unknown",action:be?"Vrcen zmny":`Zmna: ${se.confirmedType} (${se.startTime||"?"}-${se.endTime||"?"})`,prevState:tt||null},Ze={...se,history:[...se.history||[],st],isAudit:oe==="audit"};g(!0);try{if(await bv(Ze),!be&&Ce){V&&clearTimeout(V.timeout);const rt=setTimeout(()=>D(null),6e3);D({shift:Ce,timeout:rt})}}catch(rt){console.error(rt)}finally{g(!1)}},pe=async()=>{V&&(await le(V.shift,!0),D(null))},Pe=async se=>{if(k&&oe==="live")return alert("Msc je uzamen.");if(!We)return alert("Muste mt piazen profil. Kontaktujte administrtora.");const be={...se,employeeId:We.id,id:`${We.id}-${se.date}-${Date.now()}`,isOffered:!1};await le(be),alert(`Smna dne ${se.date} pevzata do vaeho rozpisu.`)},me=async se=>{g(!0);try{await SY(se)}catch(be){console.error(be)}finally{g(!1)}},Ye=async se=>{if(confirm(`Opravdu chcete smazat typ smny ${se}?`)){g(!0);try{await AY(se)}catch(be){console.error(be)}finally{g(!1)}}},He=async(se,be)=>{g(!0);try{be==="delete"?confirm("Opravdu smazat tento kol?")&&await NY(se.id):await kY(se)}catch(Ce){console.error(Ce)}finally{g(!1)}},et=()=>{if(!Ge)return;const se=oe==="audit",be=`Export_${Ge.name}_${sr(o).substring(0,7)}${se?"_AUTORITATIVNI":""}`,Ce=lo.book_new(),tt=[["Datum","Den","Typ Smny","Od","Do","Pauza","Hodin"]];Ne.forEach(st=>{Je.filter(rt=>rt.date===sr(st)&&rt.employeeId===Ge.id).forEach(rt=>{if(rt&&rt.confirmedType&&rt.confirmedType!=="OFF"){const wt=wu(rt,(Ge.weeklyFund||40)/5);tt.push([st.toLocaleDateString("cs-CZ"),ld(st),rt.confirmedType,rt.startTime||"-",rt.endTime||"-",rt.breakDuration||0,T0(wt)])}})}),lo.book_append_sheet(Ce,lo.aoa_to_sheet(tt),"Dochzka"),gI(Ce,`${be}.xlsx`)},ut=()=>{const se=oe==="audit",be=`Export_Vsech_${sr(o).substring(0,7)}${se?"_AUTORITATIVNI":""}`,Ce=lo.book_new(),tt=[["Datum","Den","Zamstnanec","Smna","Od","Do","Pauza","Hodin"]];Ne.forEach(st=>{n.forEach(Ze=>{Je.filter(wt=>wt.date===sr(st)&&wt.employeeId===Ze.id).forEach(wt=>{if(wt&&wt.confirmedType&&wt.confirmedType!=="OFF"){const $i=wu(wt,(Ze.weeklyFund||40)/5);tt.push([st.toLocaleDateString("cs-CZ"),ld(st),Ze.name,wt.confirmedType,wt.startTime||"-",wt.endTime||"-",wt.breakDuration||0,T0($i)])}})})}),lo.book_append_sheet(Ce,lo.aoa_to_sheet(tt),"Msn pehled"),n.forEach(st=>{const Ze=[["Datum","Den","Smna","Od","Do","Pauza","Hodin"]];Ne.forEach(wt=>{Je.filter(Bt=>Bt.date===sr(wt)&&Bt.employeeId===st.id).forEach(Bt=>{if(Bt&&Bt.confirmedType&&Bt.confirmedType!=="OFF"){const Ai=wu(Bt,(st.weeklyFund||40)/5);Ze.push([wt.toLocaleDateString("cs-CZ"),ld(wt),Bt.confirmedType,Bt.startTime||"-",Bt.endTime||"-",Bt.breakDuration||0,T0(Ai)])}})});const rt=st.name.substring(0,31).replace(/[\\/?*[\]]/g,"_");lo.book_append_sheet(Ce,lo.aoa_to_sheet(Ze),rt)}),gI(Ce,`${be}.xlsx`)},_t=qe.useCallback((se,be)=>{const Ce=sr(se);return Je.filter(tt=>tt.date===Ce&&tt.employeeId===be)},[Je]),jt=qe.useMemo(()=>`110px repeat(${n.length}, 80px) 1fr`,[n]),Me=qe.useMemo(()=>{if(l==="all"||l==="market")return null;const se=Je.filter(st=>st.employeeId===l&&st.date.startsWith(sr(o).substring(0,7))),be=Ne.filter(st=>st.getDay()!==0&&st.getDay()!==6&&!xu(st)).length,Ce=((Ge==null?void 0:Ge.weeklyFund)||40)/5*be,tt=i7(se,Ce,(Ge==null?void 0:Ge.weeklyFund)||40);return{stats:tt,progress:Math.min(100,tt.totalHours/(Ce||1)*100)}},[Je,l,o,Ne,Ge]),mt=qe.useMemo(()=>({daysInMonth:Ne,employees:n,getShiftsForDay:_t,gridCols:jt}),[Ne,n,_t,jt]);if(i)return v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-surface",children:v.jsx(KN,{size:48,className:"text-primary"})});if(!t)return v.jsx(PY,{});const Se=A==="dnes"?[Ne.find(se=>sr(se)===sr(new Date))||new Date]:Ne;return v.jsxs("div",{className:`min-h-screen flex flex-col font-sans antialiased overflow-hidden ${oe==="audit"?"bg-sky-50/20":"bg-surface"}`,children:[v.jsx(jre,{isOpen:T,onClose:()=>E(!1)}),v.jsx(Qre,{isOpen:N,onClose:()=>F(!1),currentEmployee:We,currentUser:t,employees:n,onUpdateEmployee:j,customShifts:we,onSaveCustomShift:me,onDeleteCustomShift:Ye,onBulkFillHpp:te,isLocked:k,onToggleLock:q}),_&&v.jsx($re,{shifts:Je,onApplyChanges:()=>{},onClose:()=>x(!1)}),w&&v.jsx(qre,{isOpen:w,onClose:()=>y(!1)}),v.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-30 shadow-sm",children:v.jsxs("div",{className:"max-w-[1920px] mx-auto px-2 sm:px-4 h-16 flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("div",{className:`p-2 rounded-xl text-white shadow-lg shrink-0 ${oe==="audit"?"bg-secondary":"bg-primary"}`,children:v.jsx(qN,{size:20})}),v.jsxs("div",{className:"hidden sm:block",children:[v.jsxs("h1",{className:"text-sm font-bold text-slate-900 truncate leading-tight",children:["Smny Kratochvle ",v.jsx("span",{className:"text-[9px] text-primary/50 ml-1",children:"v1.1"})]}),v.jsxs("div",{className:"flex items-center gap-1.5",children:[v.jsx("div",{className:"text-[9px] text-slate-400 font-black uppercase tracking-widest",children:h?"Ukldm...":"Uloeno"}),v.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full animate-pulse",title:"Data OK"})]})]}),k&&oe==="live"&&v.jsxs("div",{className:"ml-1 sm:ml-2 px-1.5 py-0.5 bg-red-100 text-red-600 rounded-lg flex items-center gap-1 text-[8px] sm:text-[10px] font-black uppercase shrink-0",children:[v.jsx(XN,{size:10})," Uzameno"]}),oe==="audit"&&v.jsx("div",{className:"ml-1 sm:ml-2 px-1.5 py-0.5 bg-amber-100 text-amber-700 rounded-lg flex items-center gap-1 text-[8px] sm:text-[10px] font-black uppercase shrink-0",children:"AUTORITATIVN PLN"})]}),v.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-xl sm:rounded-2xl shadow-inner mx-1 sm:mx-4 shrink-0",children:[v.jsx("button",{onClick:()=>S("shifts"),className:`px-3 sm:px-6 py-1.5 sm:py-2 rounded-lg sm:rounded-xl text-[10px] sm:text-xs font-black uppercase transition-all ${O==="shifts"?"bg-white text-primary shadow-md":"text-slate-500"}`,children:"Rozpis"}),v.jsx("button",{onClick:()=>S("tasks"),className:`px-3 sm:px-6 py-1.5 sm:py-2 rounded-lg sm:rounded-xl text-[10px] sm:text-xs font-black uppercase transition-all ${O==="tasks"?"bg-primary text-white shadow-lg":"text-slate-500"}`,children:"koly"})]}),v.jsxs("div",{className:"flex items-center gap-0.5 sm:gap-1 shrink-0",children:[v.jsx("button",{onClick:()=>y(!0),className:"p-2 text-slate-600 hover:text-primary transition-colors",children:v.jsx(Rp,{size:20})}),v.jsx("button",{onClick:()=>x(!0),className:"p-2 text-slate-600 hover:text-primary transition-colors",children:v.jsx(Cp,{size:20})}),v.jsx("button",{onClick:()=>F(!0),className:"p-2 text-slate-600 hover:text-primary transition-transform active:scale-90",children:v.jsx(jN,{size:22})}),v.jsxs("button",{onClick:wY,className:"p-2 text-danger hover:bg-red-50 rounded-lg transition-colors flex items-center gap-1",title:"Odhlsit",children:[v.jsx("span",{className:"hidden sm:inline text-[10px] font-black uppercase",children:"Odhlsit"}),v.jsx(h7,{size:20})]})]})]})}),v.jsx("main",{className:"flex-1 w-full max-w-[1920px] mx-auto px-2 sm:px-6 lg:px-8 py-4 flex flex-col overflow-hidden",children:O==="tasks"?v.jsx(Jre,{tasks:ce,employees:n,currentUser:t,currentIdentity:We,onTaskChange:He}):v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"mb-6 flex overflow-x-auto pb-2 space-x-2 no-scrollbar items-center shrink-0",children:[Ae&&v.jsxs("div",{className:"flex bg-slate-200/60 p-1 rounded-2xl mr-4 shrink-0 shadow-sm border border-slate-200",children:[v.jsx("button",{onClick:()=>Re("live"),className:`px-4 py-2 rounded-xl text-xs font-black uppercase transition-all ${oe==="live"?"bg-white text-slate-900 shadow-md":"text-slate-500"}`,children:"Ostr provoz"}),v.jsx("button",{onClick:()=>Re("audit"),className:`px-4 py-2 rounded-xl text-xs font-black uppercase transition-all ${oe==="audit"?"bg-secondary text-white shadow-md":"text-slate-500"}`,children:"Autoritativn pln"})]}),v.jsx("button",{onClick:()=>u("all"),className:`px-5 py-2.5 rounded-2xl text-sm font-bold transition-all ${l==="all"?"bg-slate-900 text-white shadow-lg":"bg-white text-slate-700 border border-slate-200 hover:border-primary"}`,children:"Vichni"}),oe==="live"&&v.jsxs("button",{onClick:()=>u("market"),className:`px-5 py-2.5 rounded-2xl text-sm font-black transition-all flex items-center gap-2 border-2 ${l==="market"?"bg-orange-500 text-white border-orange-600 shadow-lg":"bg-orange-50 text-orange-600 border-orange-200"}`,children:[v.jsx(kp,{size:18})," Burza smn ",G.length>0&&v.jsx("span",{className:"bg-danger text-white px-1.5 py-0.5 rounded-full text-[10px]",children:G.length})]}),v.jsx("div",{className:"w-px h-8 bg-slate-200 mx-2 shrink-0"}),n.map(se=>v.jsx("button",{onClick:()=>u(se.id),className:`px-5 py-2.5 rounded-2xl text-sm font-bold transition-all whitespace-nowrap ${l===se.id?"bg-primary text-white shadow-lg":"bg-white text-slate-700 border border-slate-200 hover:border-primary"}`,children:se.name},se.id))]}),v.jsxs("div",{className:"flex items-center space-x-2 bg-slate-100 p-1.5 rounded-2xl shadow-inner w-fit mx-auto mb-6",children:[v.jsx("button",{onClick:()=>a(new Date(o.getFullYear(),o.getMonth()-1,1)),className:"p-2 hover:bg-white rounded-lg text-slate-700",children:v.jsx(l7,{size:20})}),v.jsx("span",{className:"font-bold text-slate-900 w-36 text-center text-sm capitalize",children:o.toLocaleDateString("cs-CZ",{month:"long",year:"numeric"})}),v.jsx("button",{onClick:()=>o&&a(new Date(o.getFullYear(),o.getMonth()+1,1)),className:"p-2 hover:bg-white rounded-lg text-slate-700",children:v.jsx(u7,{size:20})})]}),oe==="audit"&&v.jsx("div",{className:"mb-6 mx-auto",children:v.jsxs("button",{onClick:W,className:"px-6 py-4 bg-white border-2 border-secondary text-secondary rounded-3xl font-black text-xs uppercase flex items-center gap-3 shadow-xl shadow-amber-100 hover:bg-secondary hover:text-white transition-all active:scale-95 group",children:[v.jsx("div",{className:"bg-secondary text-white p-2 rounded-xl group-hover:bg-white group-hover:text-secondary transition-colors",children:v.jsx(bI,{size:20})}),"Vytvoit Autoritativn kopii z aktulnch ostrch dat"]})}),v.jsx("div",{className:"hidden md:flex flex-1 flex-col overflow-hidden min-h-0",children:l==="all"?v.jsxs("div",{className:`rounded-3xl shadow-sm border overflow-hidden flex flex-col flex-1 ${oe==="audit"?"bg-sky-50/20 border-secondary/30":"bg-white border-slate-200"}`,children:[v.jsxs("div",{className:"bg-slate-100/50 border-b border-slate-200 flex justify-between items-center px-6 py-4 shrink-0",children:[v.jsxs("h2",{className:"text-sm font-black text-slate-800 uppercase",children:["Rozpis celho tmu ",oe==="audit"&&"(AUTORITATIVN)"]}),v.jsxs("button",{onClick:ut,className:"text-xs font-bold flex items-center gap-2 bg-white border-2 px-3 py-2 rounded-xl hover:bg-slate-50 transition-all shadow-sm",children:[v.jsx(ud,{size:16})," Exportovat ve (Excel)"]})]}),v.jsxs("div",{className:"bg-slate-50 text-slate-500 font-black border-b border-slate-200 uppercase text-[9px] grid items-center shrink-0",style:{gridTemplateColumns:jt},children:[v.jsx("div",{className:"px-4 py-3",children:"Datum"}),n.map(se=>v.jsx("div",{className:"px-1 py-3 text-center truncate",children:se.name},se.id)),v.jsx("div",{className:"px-4 py-3",children:"Vyten dne"})]}),v.jsx("div",{className:"flex-1",children:v.jsx(Yre,{children:({height:se,width:be})=>v.jsx(Z9,{height:se,itemCount:Ne.length,itemSize:65,width:be,itemData:mt,children:Xre})})})]}):l==="market"?v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 overflow-y-auto p-2",children:G.length===0?v.jsxs("div",{className:"col-span-full py-20 text-center opacity-30",children:[v.jsx(kp,{size:48,className:"mx-auto mb-4"}),v.jsx("p",{className:"font-bold",children:"Burza je momentln przdn."})]}):G.map(se=>{var be;return v.jsxs("div",{className:"bg-white rounded-3xl border-2 border-orange-200 p-6 shadow-sm flex flex-col gap-4",children:[v.jsxs("div",{className:"flex justify-between items-start",children:[v.jsxs("div",{children:[v.jsx("div",{className:"text-lg font-black",children:new Date(se.date).toLocaleDateString("cs-CZ")}),v.jsxs("div",{className:"text-xs text-slate-500 font-bold",children:["Nabz: ",(be=n.find(Ce=>Ce.id===se.employeeId))==null?void 0:be.name]})]}),v.jsx("div",{className:`px-3 py-1 rounded-full font-black text-xs ${Oa[se.confirmedType]||"bg-slate-100"}`,children:se.confirmedType})]}),v.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl flex justify-between font-mono font-bold border border-slate-200",children:[v.jsxs("span",{children:[se.startTime," - ",se.endTime]}),v.jsxs("span",{children:["Pauza: ",se.breakDuration,"m"]})]}),v.jsx("button",{onClick:()=>Pe(se),className:"w-full py-3 bg-orange-500 text-white rounded-xl font-bold hover:bg-orange-600 transition-all shadow-md active:scale-95",children:"PEVZT SMNU"})]},se.id)})}):v.jsxs("div",{className:`rounded-3xl shadow-sm border overflow-hidden flex flex-col flex-1 ${oe==="audit"?"bg-sky-50/20 border-secondary/30":"bg-white border-slate-200"}`,children:[v.jsxs("div",{className:"p-5 border-b flex justify-between items-center bg-slate-50/50",children:[v.jsxs("h2",{className:"font-black text-slate-800 text-xl",children:["Vkaz: ",Ge==null?void 0:Ge.name," ",oe==="audit"&&"(AUTORITATIVN)"]}),v.jsxs("button",{onClick:et,className:"text-xs font-bold flex items-center gap-2 bg-white border-2 px-3 py-2 rounded-xl hover:bg-slate-50 transition-all shadow-sm",children:[v.jsx(ud,{size:16})," Exportovat vkaz (Excel)"]})]}),Me&&v.jsxs("div",{className:"px-8 py-5 bg-white border-b",children:[v.jsxs("div",{className:"flex justify-between items-center mb-3",children:[v.jsx("span",{className:"text-xs font-black uppercase text-slate-400",children:"Msn plnn"}),v.jsxs("span",{className:"text-sm font-black text-primary",children:[Math.round(Me.progress),"%"]})]}),v.jsx("div",{className:"w-full bg-slate-100 h-3 rounded-full overflow-hidden",children:v.jsx("div",{className:`h-full transition-all duration-1000 ${oe==="audit"?"bg-secondary":"bg-primary"}`,style:{width:`${Me.progress}%`}})}),v.jsx("div",{className:"mt-6",children:v.jsx(iC,{stats:Me.stats})})]}),v.jsx("div",{className:"flex-1 overflow-auto",children:v.jsxs("table",{className:"w-full text-left border-collapse",children:[v.jsx("thead",{className:"bg-slate-100 border-b sticky top-0 z-10",children:v.jsxs("tr",{className:"text-slate-500 text-[10px] uppercase font-black tracking-widest",children:[v.jsx("th",{className:"px-6 py-4 w-40",children:"Den"}),v.jsx("th",{className:"px-2 py-4 w-48",children:"Dostupnost"}),v.jsx("th",{className:"px-2 py-4 w-32",children:"Smna"}),v.jsx("th",{className:"px-2 py-4 w-64 text-center",children:"as"}),v.jsx("th",{className:"px-2 py-4 w-24 text-center",children:"Pauza"}),v.jsx("th",{className:"px-4 py-4 text-center w-24",children:"Hodin"}),v.jsx("th",{className:"px-2 py-4",children:"Akce"})]})}),v.jsx("tbody",{className:"divide-y divide-slate-100",children:Ne.map(se=>{const be=new Date(se.getTime()-864e5),Ce=_t(be,l),tt=_t(se,l);return v.jsx(v7,{date:se,employeeId:l,employee:Ge,shift:tt[0],onChange:le,shiftDefinitions:Te,validation:tt[0]?kI(tt[0],be?Ce[0]:void 0):void 0,isLocked:k&&oe==="live"},se.toISOString())})})]})})]})}),v.jsxs("div",{className:"md:hidden flex-1 flex flex-col min-h-0",children:[v.jsxs("div",{className:"flex bg-slate-200/60 p-1 rounded-2xl mb-4 self-center shrink-0 border border-slate-200",children:[v.jsx("button",{onClick:()=>Re("live"),className:`px-4 py-1.5 rounded-lg text-[10px] font-black uppercase transition-all ${oe==="live"?"bg-white text-slate-900 shadow-sm":"text-slate-500"}`,children:"Ostr"}),v.jsx("button",{onClick:()=>Re("audit"),className:`px-4 py-1.5 rounded-lg text-[10px] font-black uppercase transition-all ${oe==="audit"?"bg-secondary text-white shadow-sm":"text-slate-500"}`,children:"Admin"})]}),v.jsxs("div",{className:"flex bg-slate-200 p-1 rounded-xl mb-4 self-center shrink-0",children:[v.jsx("button",{onClick:()=>C("dnes"),className:`px-6 py-1.5 rounded-lg text-xs font-black uppercase transition-all ${A==="dnes"?"bg-white text-slate-900 shadow-sm":"text-slate-500"}`,children:"Dnes"}),v.jsx("button",{onClick:()=>C("mesic"),className:`px-6 py-1.5 rounded-lg text-xs font-black uppercase transition-all ${A==="mesic"?"bg-white text-slate-900 shadow-sm":"text-slate-500"}`,children:"Msc"})]}),l==="all"?v.jsx("div",{className:"flex flex-col flex-1 overflow-hidden",children:v.jsxs("div",{className:"flex-1 overflow-y-auto space-y-6 pb-20 no-scrollbar",children:[A==="mesic"&&v.jsxs("div",{className:"px-2 space-y-3",children:[oe==="audit"&&v.jsxs("button",{onClick:W,className:"w-full py-4 bg-amber-50 border-2 border-secondary rounded-[24px] text-[10px] font-black uppercase text-secondary flex items-center justify-center gap-3 shadow-sm active:bg-amber-100",children:[v.jsx(bI,{size:16})," Koprovat ostr data sem"]}),v.jsxs("button",{onClick:ut,className:"w-full py-4 bg-white border-2 border-slate-100 rounded-[24px] text-[10px] font-black uppercase text-slate-600 flex items-center justify-center gap-3 shadow-sm active:bg-slate-50",children:[v.jsx(ud,{size:18})," Exportovat tm (Excel)"]})]}),Se.map(se=>{const be=n.map(st=>({emp:st,shiftArr:_t(se,st.id)})).filter(st=>st.shiftArr.some(Ze=>Ze.confirmedType&&Ze.confirmedType!=="OFF")),Ce=se.getDay()===0||se.getDay()===6,tt=xu(se);return v.jsxs("div",{className:`rounded-[32px] border shadow-sm overflow-hidden ${tt?"bg-amber-50 border-amber-200":Ce?"bg-slate-50 border-slate-200":"bg-white border-slate-100"}`,children:[v.jsxs("div",{className:"px-6 py-4 border-b border-black/5 flex justify-between items-center",children:[v.jsxs("span",{className:"font-black text-slate-900 text-lg",children:[se.getDate(),". ",se.getMonth()+1,". ",v.jsx("span",{className:"text-xs text-slate-400 uppercase ml-2",children:ld(se)})]}),tt&&v.jsx("span",{className:"text-[10px] font-black text-amber-600 bg-amber-100 px-2 py-1 rounded-lg",children:tt})]}),v.jsx("div",{className:"p-4 space-y-3",children:be.length===0?v.jsx("div",{className:"text-center py-4 text-slate-300 italic text-sm",children:"Voln den"}):be.map(({emp:st,shiftArr:Ze})=>v.jsx("div",{className:"space-y-2",children:Ze.filter(rt=>rt.confirmedType!=="OFF").map((rt,wt)=>v.jsxs("div",{className:`flex items-center justify-between p-4 rounded-2xl border shadow-sm ${Oa[rt.confirmedType]||"bg-slate-100"}`,children:[v.jsxs("span",{className:"font-black text-lg",children:[st.name," ",Ze.length>1&&`(${wt+1})`]}),v.jsxs("div",{className:"text-right font-black",children:[v.jsx("div",{className:"text-[10px] uppercase opacity-60 leading-none mb-1",children:rt.confirmedType}),v.jsxs("div",{className:"text-base",children:[rt.startTime||"Fond","-",rt.endTime||""]})]})]},wt))},st.id))})]},se.toISOString())})]})}):l==="market"?v.jsx("div",{className:"flex-1 overflow-y-auto space-y-4 pb-20 no-scrollbar",children:G.map(se=>{var be;return v.jsxs("div",{className:`bg-white rounded-3xl border-2 border-orange-200 p-6 shadow-sm flex flex-col gap-4 ${oe==="audit"?"opacity-50":""}`,children:[v.jsxs("div",{className:"flex justify-between items-start",children:[v.jsxs("div",{children:[v.jsx("div",{className:"text-xl font-black",children:new Date(se.date).toLocaleDateString("cs-CZ")}),v.jsxs("div",{className:"text-xs text-slate-500 font-bold",children:["Nabz: ",(be=n.find(Ce=>Ce.id===se.employeeId))==null?void 0:be.name]})]}),v.jsx("div",{className:`px-4 py-1.5 rounded-xl font-black text-sm border-2 ${Oa[se.confirmedType]||"bg-slate-100"}`,children:se.confirmedType})]}),v.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl flex justify-between font-mono font-black text-lg border-2 border-dashed border-slate-200",children:[v.jsxs("span",{children:[se.startTime," - ",se.endTime]}),v.jsxs("span",{children:["Pauza: ",se.breakDuration,"m"]})]}),v.jsx("button",{onClick:()=>Pe(se),disabled:oe==="audit",className:"w-full py-4 bg-orange-500 text-white rounded-2xl font-black shadow-lg hover:bg-orange-600 active:scale-95 transition-all disabled:grayscale disabled:opacity-50",children:"PEVZT SMNU"})]},se.id)})}):v.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4 pb-20 no-scrollbar",children:[Me&&A==="mesic"&&v.jsxs("div",{className:`bg-white p-6 rounded-[32px] border border-slate-100 shadow-sm mb-4 ${oe==="audit"?"border-secondary/30 bg-sky-50/10":""}`,children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsxs("span",{className:"text-xs font-black uppercase text-slate-400",children:["Plnn fondu ",oe==="audit"&&"(ADMIN)"]}),v.jsxs("span",{className:"text-base font-black text-primary",children:[Math.round(Me.progress),"%"]})]}),v.jsx("div",{className:"w-full bg-slate-100 h-3 rounded-full overflow-hidden",children:v.jsx("div",{className:`h-full transition-all duration-1000 ${oe==="audit"?"bg-secondary":"bg-primary"}`,style:{width:`${Me.progress}%`}})}),v.jsx("div",{className:"mt-4",children:v.jsx(iC,{stats:Me.stats})}),v.jsxs("button",{onClick:et,className:"w-full mt-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-xs font-black uppercase flex items-center justify-center gap-2 hover:bg-slate-100 transition-colors",children:[v.jsx(ud,{size:16})," Exportovat Excel"]})]}),Se.map(se=>{const be=new Date(se.getTime()-864e5),Ce=_t(be,l),tt=_t(se,l);return v.jsx(_7,{date:se,employeeId:l,shifts:tt,onSave:le,shiftDefinitions:Te,validation:tt[0]?kI(tt[0],be?Ce[0]:void 0):void 0,isLocked:k&&oe==="live"},se.toISOString())})]})]})]})}),V&&v.jsxs("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] flex items-center gap-6 bg-slate-900 text-white px-6 py-4 rounded-[24px] shadow-2xl animate-in slide-in-from-bottom-10",children:[v.jsxs("div",{className:"flex flex-col",children:[v.jsx("span",{className:"text-xs font-black uppercase text-slate-400",children:"Zznam upraven"}),v.jsx("span",{className:"text-sm font-bold",children:"Chcete to vrtit?"})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsxs("button",{onClick:pe,className:"bg-primary hover:bg-primaryHover text-white px-5 py-2 rounded-xl text-xs font-black uppercase transition-all flex items-center gap-2",children:[v.jsx(YN,{size:16})," Vzt zpt"]}),v.jsx("button",{onClick:()=>D(null),className:"p-2 text-slate-500 hover:text-white transition-colors",children:v.jsx(fc,{size:20})})]})]})]})}class eie extends qe.Component{constructor(){super(...arguments);mT(this,"state",{hasError:!1,error:null})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("Uncaught error:",n,r),rc(n,`React ErrorBoundary: ${r.componentStack}`)}render(){var n;return this.state.hasError?v.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-6",children:v.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-2xl border border-red-100 p-8 text-center animate-in fade-in zoom-in-95 duration-300",children:[v.jsx("div",{className:"w-20 h-20 bg-red-50 text-red-500 rounded-3xl flex items-center justify-center mx-auto mb-6",children:v.jsx(ff,{size:40})}),v.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Ups, nco se pokazilo"}),v.jsx("p",{className:"text-slate-500 mb-6",children:"Omlouvme se, aplikace narazila na chybu. Incident byl automaticky nahlen vvoji k oprav."}),v.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 mb-8 text-left border border-slate-200 overflow-hidden",children:[v.jsx("div",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Technick detail:"}),v.jsx("div",{className:"text-xs font-mono text-red-600 truncate",children:(n=this.state.error)==null?void 0:n.message})]}),v.jsxs("div",{className:"flex flex-col gap-3",children:[v.jsxs("button",{onClick:()=>window.location.reload(),className:"w-full py-3 bg-primary text-white font-bold rounded-xl shadow-lg hover:bg-primaryHover active:scale-95 transition-all flex items-center justify-center gap-2",children:[v.jsx(m7,{size:18})," Obnovit aplikaci"]}),v.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null}),className:"text-slate-400 text-sm font-medium hover:text-slate-600 transition-colors",children:"Zkusit pokraovat"})]})]})}):this.props.children}}window.onerror=(t,e,n,r,i)=>{rc(i||new Error(String(t)),`Global window.onerror: ${e}:${n}`)};window.onunhandledrejection=t=>{rc(t.reason,"Unhandled Promise Rejection")};const LF=document.getElementById("root");if(!LF)throw new Error("Failed to find the root element");const tie=_k(LF);tie.render(v.jsx(mC.StrictMode,{children:v.jsx(eie,{children:v.jsx(Zre,{})})}));
